/*! For license information please see main.9ab9c933.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},153:(e,t,n)=>{var r=n(43),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,o={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)s.call(t,r)&&!l.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:c,props:o,_owner:a.current}}t.Fragment=o,t.jsx=u,t.jsxs=u},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var E=b.prototype=new v;E.constructor=b,m(E,y.prototype),E.isPureReactComponent=!0;var w=Array.isArray,S=Object.prototype.hasOwnProperty,_={current:null},T={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,r){var i,o={},s=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)S.call(t,i)&&!T.hasOwnProperty(i)&&(o[i]=t[i]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];o.children=u}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:n,type:e,key:s,ref:a,props:o,_owner:_.current}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var A=/\/+/g;function N(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function x(e,t,i,o,s){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return s=s(l=e),e=""===o?"."+N(l,0):o,w(s)?(i="",null!=e&&(i=e.replace(A,"$&/")+"/"),x(s,t,i,"",(function(e){return e}))):null!=s&&(I(s)&&(s=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,i+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(A,"$&/")+"/")+e)),t.push(s)),1;if(l=0,o=""===o?".":o+":",w(e))for(var u=0;u<e.length;u++){var c=o+N(a=e[u],u);l+=x(a,t,i,c,s)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),u=0;!(a=e.next()).done;)l+=x(a=a.value,t,i,c=o+N(a,u++),s);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function k(e,t,n){if(null==e)return e;var r=[],i=0;return x(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function O(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},D={transition:null},P={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:D,ReactCurrentOwner:_};function M(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:k,forEach:function(e,t,n){k(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return k(e,(function(){t++})),t},toArray:function(e){return k(e,(function(e){return e}))||[]},only:function(e){if(!I(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=s,t.PureComponent=b,t.StrictMode=o,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.act=M,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),o=e.key,s=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,a=_.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)S.call(t,u)&&!T.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:n,type:e.type,key:o,ref:s,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:O}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=M,t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,s=i>>>1;r<s;){var a=2*(r+1)-1,l=e[a],u=a+1,c=e[u];if(0>o(l,n))u<i&&0>o(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[a]=n,r=a);else{if(!(u<i&&0>o(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],c=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function E(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function w(e){if(g=!1,E(e),!m)if(null!==r(u))m=!0,D(S);else{var t=r(c);null!==t&&P(w,t.startTime-e)}}function S(e,n){m=!1,g&&(g=!1,v(I),I=-1),p=!0;var o=f;try{for(E(n),h=r(u);null!==h&&(!(h.expirationTime>n)||e&&!x());){var s=h.callback;if("function"===typeof s){h.callback=null,f=h.priorityLevel;var a=s(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?h.callback=a:h===r(u)&&i(u),E(n)}else i(u);h=r(u)}if(null!==h)var l=!0;else{var d=r(c);null!==d&&P(w,d.startTime-n),l=!1}return l}finally{h=null,f=o,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,T=!1,C=null,I=-1,A=5,N=-1;function x(){return!(t.unstable_now()-N<A)}function k(){if(null!==C){var e=t.unstable_now();N=e;var n=!0;try{n=C(!0,e)}finally{n?_():(T=!1,C=null)}}else T=!1}if("function"===typeof b)_=function(){b(k)};else if("undefined"!==typeof MessageChannel){var O=new MessageChannel,R=O.port2;O.port1.onmessage=k,_=function(){R.postMessage(null)}}else _=function(){y(k,0)};function D(e){C=e,T||(T=!0,_())}function P(e,n){I=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,D(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(e.sortIndex=o,n(c,e),null===r(u)&&e===r(c)&&(g?(v(I),I=-1):g=!0,P(w,o-s))):(e.sortIndex=a,n(u,e),m||p||(m=!0,D(S))),e},t.unstable_shouldYield=x,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},391:(e,t,n)=>{var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},579:(e,t,n)=>{e.exports=n(153)},730:(e,t,n)=>{var r=n(43),i=n(853);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function l(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(a[e]=t,e=0;e<t.length;e++)s.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,o,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var E=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),S=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),A=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var P=Symbol.iterator;function M(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=P&&e[P]||e["@@iterator"])?e:null}var L,U=Object.assign;function F(e){if(void 0===L)try{throw Error()}catch(Hv){var t=Hv.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var j=!1;function V(e,t){if(!e||j)return"";j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(us){var r=us}Reflect.construct(e,[],t)}else{try{t.call()}catch(us){r=us}e.call(t.prototype)}else{try{throw Error()}catch(us){r=us}e()}}catch(us){if(us&&r&&"string"===typeof us.stack){for(var i=us.stack.split("\n"),o=r.stack.split("\n"),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(1!==s||1!==a)do{if(s--,0>--a||i[s]!==o[a]){var l="\n"+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=s&&0<=a);break}}}finally{j=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function q(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case S:return"Portal";case C:return"Profiler";case T:return"StrictMode";case x:return"Suspense";case k:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case A:return(e.displayName||"Context")+".Consumer";case I:return(e._context.displayName||"Context")+".Provider";case N:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case O:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return B(e(t))}catch(Hv){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function G(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function z(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=z(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=z(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function J(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(Tc){return e.body}}function Y(e,t){var n=t.checked;return U({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Q(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=G(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function $(e,t){X(e,t);var n=G(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,G(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&J(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+G(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return U({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:G(n)}}function oe(e,t){var n=G(t.value),r=G(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,ce=function(e){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction((function(){return e(t,n)}))}:e}((function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}));function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var he={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function pe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||he.hasOwnProperty(e)&&he[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=pe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(he).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),he[t]=he[e]}))}));var ge=U({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function ve(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function Ee(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,Se=null,_e=null;function Te(e){if(e=vi(e)){if("function"!==typeof we)throw Error(o(280));var t=e.stateNode;t&&(t=Ei(t),we(e.stateNode,e.type,t))}}function Ce(e){Se?_e?_e.push(e):_e=[e]:Se=e}function Ie(){if(Se){var e=Se,t=_e;if(_e=Se=null,Te(e),t)for(e=0;e<t.length;e++)Te(t[e])}}function Ae(e,t){return e(t)}function Ne(){}var xe=!1;function ke(e,t,n){if(xe)return e(t,n);xe=!0;try{return Ae(e,t,n)}finally{xe=!1,(null!==Se||null!==_e)&&(Ne(),Ie())}}function Oe(e,t){var n=e.stateNode;if(null===n)return null;var r=Ei(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Re=!1;if(c)try{var De={};Object.defineProperty(De,"passive",{get:function(){Re=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(Vv){Re=!1}function Pe(e,t,n,r,i,o,s,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(Wv){this.onError(Wv)}}var Me=!1,Le=null,Ue=!1,Fe=null,je={onError:function(e){Me=!0,Le=e}};function Ve(e,t,n,r,i,o,s,a,l){Me=!1,Le=null,Pe.apply(je,arguments)}function qe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Be(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(qe(e)!==e)throw Error(o(188))}function Ge(e){return e=function(e){var t=e.alternate;if(!t){if(null===(t=qe(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return He(i),e;if(s===r)return He(i),t;s=s.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e),null!==e?ze(e):null}function ze(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=ze(e);if(null!==t)return t;e=e.sibling}return null}var We=i.unstable_scheduleCallback,Ke=i.unstable_cancelCallback,Je=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Qe=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,$e=i.unstable_ImmediatePriority,Ze=i.unstable_UserBlockingPriority,et=i.unstable_NormalPriority,tt=i.unstable_LowPriority,nt=i.unstable_IdlePriority,rt=null,it=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/at|0)|0},st=Math.log,at=Math.LN2;var lt=64,ut=4194304;function ct(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,s=268435455&n;if(0!==s){var a=s&~i;0!==a?r=ct(a):0!==(o&=s)&&(r=ct(o))}else 0!==(s=n&~i)?r=ct(s):0!==o&&(r=ct(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ht(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function pt(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var vt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var Et,wt,St,_t,Tt,Ct=!1,It=[],At=null,Nt=null,xt=null,kt=new Map,Ot=new Map,Rt=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pt(e,t){switch(e){case"focusin":case"focusout":At=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":xt=null;break;case"pointerover":case"pointerout":kt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function Mt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=vi(t))&&wt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Lt(e){var t=yi(e.target);if(null!==t){var n=qe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Be(n)))return e.blockedOn=t,void Tt(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=vi(n))&&wt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ft(e,t,n){Ut(e)&&n.delete(t)}function jt(){Ct=!1,null!==At&&Ut(At)&&(At=null),null!==Nt&&Ut(Nt)&&(Nt=null),null!==xt&&Ut(xt)&&(xt=null),kt.forEach(Ft),Ot.forEach(Ft)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,jt)))}function qt(e){function t(t){return Vt(t,e)}if(0<It.length){Vt(It[0],e);for(var n=1;n<It.length;n++){var r=It[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==At&&Vt(At,e),null!==Nt&&Vt(Nt,e),null!==xt&&Vt(xt,e),kt.forEach(t),Ot.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Lt(n),null===n.blockedOn&&Rt.shift()}var Bt=E.ReactCurrentBatchConfig,Ht=!0;function Gt(e,t,n,r){var i=vt,o=Bt.transition;Bt.transition=null;try{vt=1,Wt(e,t,n,r)}finally{vt=i,Bt.transition=o}}function zt(e,t,n,r){var i=vt,o=Bt.transition;Bt.transition=null;try{vt=4,Wt(e,t,n,r)}finally{vt=i,Bt.transition=o}}function Wt(e,t,n,r){if(Ht){var i=Jt(e,t,n,r);if(null===i)Hr(e,t,r,Kt,n),Pt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return At=Mt(At,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return xt=Mt(xt,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return kt.set(o,Mt(kt.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Ot.set(o,Mt(Ot.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Pt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var o=vi(i);if(null!==o&&Et(o),null===(o=Jt(e,t,n,r))&&Hr(e,t,r,Kt,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Kt=null;function Jt(e,t,n,r){if(Kt=null,null!==(e=yi(e=Ee(r))))if(null===(t=qe(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Be(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case $e:return 1;case Ze:return 4;case et:case tt:return 16;case nt:return 536870912;default:return 16}default:return 16}}var Qt=null,Xt=null,$t=null;function Zt(){if($t)return $t;var e,t,n=Xt,r=n.length,i="value"in Qt?Qt.value:Qt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[o-t];t++);return $t=i.slice(e,1<t?1-t:void 0)}function en(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function tn(){return!0}function nn(){return!1}function rn(e){function t(t,n,r,i,o){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?tn:nn,this.isPropagationStopped=nn,this}return U(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=tn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=tn)},persist:function(){},isPersistent:tn}),t}var on,sn,an,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=rn(ln),cn=U({},ln,{view:0,detail:0}),dn=rn(cn),hn=U({},cn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==an&&(an&&"mousemove"===e.type?(on=e.screenX-an.screenX,sn=e.screenY-an.screenY):sn=on=0,an=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),fn=rn(hn),pn=rn(U({},hn,{dataTransfer:0})),mn=rn(U({},cn,{relatedTarget:0})),gn=rn(U({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=U({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vn=rn(yn),bn=rn(U({},ln,{data:0})),En={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _n(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function Tn(){return _n}var Cn=U({},cn,{key:function(e){if(e.key){var t=En[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=en(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?en(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?en(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),In=rn(Cn),An=rn(U({},hn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=rn(U({},cn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),xn=rn(U({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),kn=U({},hn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),On=rn(kn),Rn=[9,13,27,32],Dn=c&&"CompositionEvent"in window,Pn=null;c&&"documentMode"in document&&(Pn=document.documentMode);var Mn=c&&"TextEvent"in window&&!Pn,Ln=c&&(!Dn||Pn&&8<Pn&&11>=Pn),Un=String.fromCharCode(32),Fn=!1;function jn(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var qn=!1;var Bn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Bn[e.type]:"textarea"===t}function Gn(e,t,n,r){Ce(r),0<(t=zr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var zn=null,Wn=null;function Kn(e){Ur(e,0)}function Jn(e){if(K(bi(e)))return e}function Yn(e,t){if("change"===e)return t}var Qn=!1;if(c){var Xn;if(c){var $n="oninput"in document;if(!$n){var Zn=document.createElement("div");Zn.setAttribute("oninput","return;"),$n="function"===typeof Zn.oninput}Xn=$n}else Xn=!1;Qn=Xn&&(!document.documentMode||9<document.documentMode)}function er(){zn&&(zn.detachEvent("onpropertychange",tr),Wn=zn=null)}function tr(e){if("value"===e.propertyName&&Jn(Wn)){var t=[];Gn(t,Wn,e,Ee(e)),ke(Kn,t)}}function nr(e,t,n){"focusin"===e?(er(),Wn=n,(zn=t).attachEvent("onpropertychange",tr)):"focusout"===e&&er()}function rr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn(Wn)}function ir(e,t){if("click"===e)return Jn(t)}function or(e,t){if("input"===e||"change"===e)return Jn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ar(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function cr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?cr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=J();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=J((e=t.contentWindow).document)}return t}function hr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&cr(n.ownerDocument.documentElement,n)){if(null!==r&&hr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=ur(n,o);var s=ur(n,r);i&&s&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var pr=c&&"documentMode"in document&&11>=document.documentMode,mr=null,gr=null,yr=null,vr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;vr||null==mr||mr!==J(r)||("selectionStart"in(r=mr)&&hr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&ar(yr,r)||(yr=r,0<(r=zr(gr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function Er(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wr={animationend:Er("Animation","AnimationEnd"),animationiteration:Er("Animation","AnimationIteration"),animationstart:Er("Animation","AnimationStart"),transitionend:Er("Transition","TransitionEnd")},Sr={},_r={};function Tr(e){if(Sr[e])return Sr[e];if(!wr[e])return e;var t,n=wr[e];for(t in n)if(n.hasOwnProperty(t)&&t in _r)return Sr[e]=n[t];return e}c&&(_r=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);var Cr=Tr("animationend"),Ir=Tr("animationiteration"),Ar=Tr("animationstart"),Nr=Tr("transitionend"),xr=new Map,kr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(e,t){xr.set(e,t),l(t,[e])}for(var Rr=0;Rr<kr.length;Rr++){var Dr=kr[Rr];Or(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Or(Cr,"onAnimationEnd"),Or(Ir,"onAnimationIteration"),Or(Ar,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Nr,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pr));function Lr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,s,a,l,u){if(Ve.apply(this,arguments),Me){if(!Me)throw Error(o(198));var c=Le;Me=!1,Le=null,Ue||(Ue=!0,Fe=c)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;Lr(i,a,u),o=l}else for(s=0;s<r.length;s++){if(l=(a=r[s]).instance,u=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;Lr(i,a,u),o=l}}}if(Ue)throw e=Fe,Ue=!1,Fe=null,e}function Fr(e,t){var n=t[pi];void 0===n&&(n=t[pi]=new Set);var r=e+"__bubble";n.has(r)||(Br(t,e,2,!1),n.add(r))}function jr(e,t,n){var r=0;t&&(r|=4),Br(n,e,r,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function qr(e){if(!e[Vr]){e[Vr]=!0,s.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||jr(t,!1,e),jr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vr]||(t[Vr]=!0,jr("selectionchange",!1,t))}}function Br(e,t,n,r){switch(Yt(t)){case 1:var i=Gt;break;case 4:i=zt;break;default:i=Wt}n=i.bind(null,t,n,e),i=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===s)for(s=r.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;s=s.return}for(;null!==a;){if(null===(s=yi(a)))return;if(5===(l=s.tag)||6===l){r=o=s;continue e}a=a.parentNode}}r=r.return}ke((function(){var r=o,i=Ee(n),s=[];e:{var a=xr.get(e);if(void 0!==a){var l=un,u=e;switch(e){case"keypress":if(0===en(n))break e;case"keydown":case"keyup":l=In;break;case"focusin":u="focus",l=mn;break;case"focusout":u="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=pn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Nn;break;case Cr:case Ir:case Ar:l=gn;break;case Nr:l=xn;break;case"scroll":l=dn;break;case"wheel":l=On;break;case"copy":case"cut":case"paste":l=vn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=An}var c=0!==(4&t),d=!c&&"scroll"===e,h=c?null!==a?a+"Capture":null:a;c=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=Oe(p,h))&&c.push(Gr(p,m,f)))),d)break;p=p.return}0<c.length&&(a=new l(a,u,null,n,i),s.push({event:a,listeners:c}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===be||!(u=n.relatedTarget||n.fromElement)||!yi(u)&&!u[fi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?yi(u):null)&&(u!==(d=qe(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=fn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=An,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?a:bi(l),f=null==u?a:bi(u),(a=new c(m,p+"leave",l,n,i)).target=d,a.relatedTarget=f,m=null,yi(i)===r&&((c=new c(h,p+"enter",u,n,i)).target=f,c.relatedTarget=d,m=c),d=m,l&&u)e:{for(h=u,p=0,f=c=l;f;f=Wr(f))p++;for(f=0,m=h;m;m=Wr(m))f++;for(;0<p-f;)c=Wr(c),p--;for(;0<f-p;)h=Wr(h),f--;for(;p--;){if(c===h||null!==h&&c===h.alternate)break e;c=Wr(c),h=Wr(h)}c=null}else c=null;null!==l&&Kr(s,a,l,c,!1),null!==u&&null!==d&&Kr(s,d,u,c,!0)}if("select"===(l=(a=r?bi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Yn;else if(Hn(a))if(Qn)g=or;else{g=rr;var y=nr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=ir);switch(g&&(g=g(e,r))?Gn(s,g,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=r?bi(r):window,e){case"focusin":(Hn(y)||"true"===y.contentEditable)&&(mr=y,gr=r,yr=null);break;case"focusout":yr=gr=mr=null;break;case"mousedown":vr=!0;break;case"contextmenu":case"mouseup":case"dragend":vr=!1,br(s,n,i);break;case"selectionchange":if(pr)break;case"keydown":case"keyup":br(s,n,i)}var v;if(Dn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else qn?jn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Ln&&"ko"!==n.locale&&(qn||"onCompositionStart"!==b?"onCompositionEnd"===b&&qn&&(v=Zt()):(Xt="value"in(Qt=i)?Qt.value:Qt.textContent,qn=!0)),0<(y=zr(r,b)).length&&(b=new bn(b,e,null,n,i),s.push({event:b,listeners:y}),v?b.data=v:null!==(v=Vn(n))&&(b.data=v))),(v=Mn?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(Fn=!0,Un);case"textInput":return(e=t.data)===Un&&Fn?null:e;default:return null}}(e,n):function(e,t){if(qn)return"compositionend"===e||!Dn&&jn(e,t)?(e=Zt(),$t=Xt=Qt=null,qn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ln&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=zr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),s.push({event:i,listeners:r}),i.data=v))}Ur(s,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function zr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Oe(e,n))&&r.unshift(Gr(e,o,i)),null!=(o=Oe(e,t))&&r.push(Gr(e,o,i))),e=e.return}return r}function Wr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Kr(e,t,n,r,i){for(var o=t._reactName,s=[];null!==n&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==u&&(a=u,i?null!=(l=Oe(n,o))&&s.unshift(Gr(n,l,a)):i||null!=(l=Oe(n,o))&&s.push(Gr(n,l,a))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var Jr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Qr(e){return("string"===typeof e?e:""+e).replace(Jr,"\n").replace(Yr,"")}function Xr(e,t,n){if(t=Qr(t),Qr(e)!==t&&n)throw Error(o(425))}function $r(){}var Zr=null,ei=null;function ti(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ni="function"===typeof setTimeout?setTimeout:void 0,ri="function"===typeof clearTimeout?clearTimeout:void 0,ii="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ii?function(e){return ii.resolve(null).then(e).catch(si)}:ni;function si(e){setTimeout((function(){throw e}))}function ai(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void qt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);qt(t)}function li(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ci=Math.random().toString(36).slice(2),di="__reactFiber$"+ci,hi="__reactProps$"+ci,fi="__reactContainer$"+ci,pi="__reactEvents$"+ci,mi="__reactListeners$"+ci,gi="__reactHandles$"+ci;function yi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[di])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function vi(e){return!(e=e[di]||e[fi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function Ei(e){return e[hi]||null}var wi=[],Si=-1;function _i(e){return{current:e}}function Ti(e){0>Si||(e.current=wi[Si],wi[Si]=null,Si--)}function Ci(e,t){Si++,wi[Si]=e.current,e.current=t}var Ii={},Ai=_i(Ii),Ni=_i(!1),xi=Ii;function ki(e,t){var n=e.type.contextTypes;if(!n)return Ii;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Oi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ri(){Ti(Ni),Ti(Ai)}function Di(e,t,n){if(Ai.current!==Ii)throw Error(o(168));Ci(Ai,t),Ci(Ni,n)}function Pi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(o(108,H(e)||"Unknown",i));return U({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ii,xi=Ai.current,Ci(Ai,e),Ci(Ni,Ni.current),!0}function Li(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Pi(e,t,xi),r.__reactInternalMemoizedMergedChildContext=e,Ti(Ni),Ti(Ai),Ci(Ai,e)):Ti(Ni),Ci(Ni,n)}var Ui=null,Fi=!1,ji=!1;function Vi(e){null===Ui?Ui=[e]:Ui.push(e)}function qi(){if(!ji&&null!==Ui){ji=!0;var e=0,t=vt;try{var n=Ui;for(vt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,Fi=!1}catch(Mv){throw null!==Ui&&(Ui=Ui.slice(e+1)),We($e,qi),Mv}finally{vt=t,ji=!1}}return null}var Bi=[],Hi=0,Gi=null,zi=0,Wi=[],Ki=0,Ji=null,Yi=1,Qi="";function Xi(e,t){Bi[Hi++]=zi,Bi[Hi++]=Gi,Gi=e,zi=t}function $i(e,t,n){Wi[Ki++]=Yi,Wi[Ki++]=Qi,Wi[Ki++]=Ji,Ji=e;var r=Yi;e=Qi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var o=32-ot(t)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Yi=1<<32-ot(t)+i|n<<i|r,Qi=o+e}else Yi=1<<o|n<<i|r,Qi=e}function Zi(e){null!==e.return&&(Xi(e,1),$i(e,1,0))}function eo(e){for(;e===Gi;)Gi=Bi[--Hi],Bi[Hi]=null,zi=Bi[--Hi],Bi[Hi]=null;for(;e===Ji;)Ji=Wi[--Ki],Wi[Ki]=null,Qi=Wi[--Ki],Wi[Ki]=null,Yi=Wi[--Ki],Wi[Ki]=null}var to=null,no=null,ro=!1,io=null;function oo(e,t){var n=Mu(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function so(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,to=e,no=li(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,to=e,no=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ji?{id:Yi,overflow:Qi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Mu(18,null,null,0)).stateNode=t,n.return=e,e.child=n,to=e,no=null,!0);default:return!1}}function ao(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function lo(e){if(ro){var t=no;if(t){var n=t;if(!so(e,t)){if(ao(e))throw Error(o(418));t=li(n.nextSibling);var r=to;t&&so(e,t)?oo(r,n):(e.flags=-4097&e.flags|2,ro=!1,to=e)}}else{if(ao(e))throw Error(o(418));e.flags=-4097&e.flags|2,ro=!1,to=e}}}function uo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;to=e}function co(e){if(e!==to)return!1;if(!ro)return uo(e),ro=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ti(e.type,e.memoizedProps)),t&&(t=no)){if(ao(e))throw ho(),Error(o(418));for(;t;)oo(e,t),t=li(t.nextSibling)}if(uo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){no=li(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}no=null}}else no=to?li(e.stateNode.nextSibling):null;return!0}function ho(){for(var e=no;e;)e=li(e.nextSibling)}function fo(){no=to=null,ro=!1}function po(e){null===io?io=[e]:io.push(e)}var mo=E.ReactCurrentBatchConfig;function go(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=i.refs;null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function yo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function vo(e){return(0,e._init)(e._payload)}function bo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Uu(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=qu(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){var o=n.type;return o===_?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===R&&vo(o)===t.type)?((r=i(t,n.props)).ref=go(e,t,n),r.return=e,r):((r=Fu(n.type,n.key,n.props,null,e.mode,r)).ref=go(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Bu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,o){return null===t||7!==t.tag?((t=ju(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=qu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Fu(t.type,t.key,t.props,null,e.mode,n)).ref=go(e,null,t),n.return=e,n;case S:return(t=Bu(t,e.mode,n)).return=e,t;case R:return h(e,(0,t._init)(t._payload),n)}if(te(t)||M(t))return(t=ju(t,e.mode,n,null)).return=e,t;yo(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?u(e,t,n,r):null;case S:return n.key===i?c(e,t,n,r):null;case R:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||M(n))return null!==i?null:d(e,t,n,r,null);yo(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case S:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||M(r))return d(t,e=e.get(n)||null,r,i,null);yo(t,r)}return null}function m(i,o,a,l){for(var u=null,c=null,d=o,m=o=0,g=null;null!==d&&m<a.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var y=f(i,d,a[m],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(i,d),o=s(y,o,m),null===c?u=y:c.sibling=y,c=y,d=g}if(m===a.length)return n(i,d),ro&&Xi(i,m),u;if(null===d){for(;m<a.length;m++)null!==(d=h(i,a[m],l))&&(o=s(d,o,m),null===c?u=d:c.sibling=d,c=d);return ro&&Xi(i,m),u}for(d=r(i,d);m<a.length;m++)null!==(g=p(d,i,m,a[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),o=s(g,o,m),null===c?u=g:c.sibling=g,c=g);return e&&d.forEach((function(e){return t(i,e)})),ro&&Xi(i,m),u}function g(i,a,l,u){var c=M(l);if("function"!==typeof c)throw Error(o(150));if(null==(l=c.call(l)))throw Error(o(151));for(var d=c=null,m=a,g=a=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=f(i,m,v.value,u);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(i,m),a=s(b,a,g),null===d?c=b:d.sibling=b,d=b,m=y}if(v.done)return n(i,m),ro&&Xi(i,g),c;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=h(i,v.value,u))&&(a=s(v,a,g),null===d?c=v:d.sibling=v,d=v);return ro&&Xi(i,g),c}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=p(m,i,g,v.value,u))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=s(v,a,g),null===d?c=v:d.sibling=v,d=v);return e&&m.forEach((function(e){return t(i,e)})),ro&&Xi(i,g),c}return function e(r,o,s,l){if("object"===typeof s&&null!==s&&s.type===_&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case w:e:{for(var u=s.key,c=o;null!==c;){if(c.key===u){if((u=s.type)===_){if(7===c.tag){n(r,c.sibling),(o=i(c,s.props.children)).return=r,r=o;break e}}else if(c.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===R&&vo(u)===c.type){n(r,c.sibling),(o=i(c,s.props)).ref=go(r,c,s),o.return=r,r=o;break e}n(r,c);break}t(r,c),c=c.sibling}s.type===_?((o=ju(s.props.children,r.mode,l,s.key)).return=r,r=o):((l=Fu(s.type,s.key,s.props,null,r.mode,l)).ref=go(r,o,s),l.return=r,r=l)}return a(r);case S:e:{for(c=s.key;null!==o;){if(o.key===c){if(4===o.tag&&o.stateNode.containerInfo===s.containerInfo&&o.stateNode.implementation===s.implementation){n(r,o.sibling),(o=i(o,s.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=Bu(s,r.mode,l)).return=r,r=o}return a(r);case R:return e(r,o,(c=s._init)(s._payload),l)}if(te(s))return m(r,o,s,l);if(M(s))return g(r,o,s,l);yo(r,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,s)).return=r,r=o):(n(r,o),(o=qu(s,r.mode,l)).return=r,r=o),a(r)):n(r,o)}}var Eo=bo(!0),wo=bo(!1),So=_i(null),_o=null,To=null,Co=null;function Io(){Co=To=_o=null}function Ao(e){var t=So.current;Ti(So),e._currentValue=t}function No(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function xo(e,t){_o=e,Co=To=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Sa=!0),e.firstContext=null)}function ko(e){var t=e._currentValue;if(Co!==e)if(e={context:e,memoizedValue:t,next:null},null===To){if(null===_o)throw Error(o(308));To=e,_o.dependencies={lanes:0,firstContext:e}}else To=To.next=e;return t}var Oo=null;function Ro(e){null===Oo?Oo=[e]:Oo.push(e)}function Do(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ro(t)):(n.next=i.next,i.next=n),t.interleaved=n,Po(e,r)}function Po(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Mo=!1;function Lo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Uo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function jo(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Rl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Po(e,n)}return null===(i=r.interleaved)?(t.next=t,Ro(r)):(t.next=i.next,i.next=t),r.interleaved=t,Po(e,n)}function Vo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function qo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Bo(e,t,n,r){var i=e.updateQueue;Mo=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,u=l.next;l.next=null,null===s?o=u:s.next=u,s=l;var c=e.alternate;null!==c&&((a=(c=c.updateQueue).lastBaseUpdate)!==s&&(null===a?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(null!==o){var d=i.baseState;for(s=0,c=u=l=null,a=o;;){var h=a.lane,f=a.eventTime;if((r&h)===h){null!==c&&(c=c.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(h=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=m.payload)?p.call(f,d,h):p)||void 0===h)break e;d=U({},d,h);break e;case 2:Mo=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===c?(u=c=f,l=d):c=c.next=f,s|=h;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(h=a).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===c&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{s|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);Vl|=s,e.lanes=s,e.memoizedState=d}}function Ho(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var Go={},zo=_i(Go),Wo=_i(Go),Ko=_i(Go);function Jo(e){if(e===Go)throw Error(o(174));return e}function Yo(e,t){switch(Ci(Ko,t),Ci(Wo,e),Ci(zo,Go),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ti(zo),Ci(zo,t)}function Qo(){Ti(zo),Ti(Wo),Ti(Ko)}function Xo(e){Jo(Ko.current);var t=Jo(zo.current),n=le(t,e.type);t!==n&&(Ci(Wo,e),Ci(zo,n))}function $o(e){Wo.current===e&&(Ti(zo),Ti(Wo))}var Zo=_i(0);function es(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ts=[];function ns(){for(var e=0;e<ts.length;e++)ts[e]._workInProgressVersionPrimary=null;ts.length=0}var rs=E.ReactCurrentDispatcher,is=E.ReactCurrentBatchConfig,ss=0,as=null,ls=null,cs=null,ds=!1,hs=!1,fs=0,ps=0;function ms(){throw Error(o(321))}function gs(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function ys(e,t,n,r,i,s){if(ss=s,as=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,rs.current=null===e||null===e.memoizedState?na:ra,e=n(r,i),hs){s=0;do{if(hs=!1,fs=0,25<=s)throw Error(o(301));s+=1,cs=ls=null,t.updateQueue=null,rs.current=ia,e=n(r,i)}while(hs)}if(rs.current=ta,t=null!==ls&&null!==ls.next,ss=0,cs=ls=as=null,ds=!1,t)throw Error(o(300));return e}function bs(){var e=0!==fs;return fs=0,e}function Es(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===cs?as.memoizedState=cs=e:cs=cs.next=e,cs}function ws(){if(null===ls){var e=as.alternate;e=null!==e?e.memoizedState:null}else e=ls.next;var t=null===cs?as.memoizedState:cs.next;if(null!==t)cs=t,ls=e;else{if(null===e)throw Error(o(310));e={memoizedState:(ls=e).memoizedState,baseState:ls.baseState,baseQueue:ls.baseQueue,queue:ls.queue,next:null},null===cs?as.memoizedState=cs=e:cs=cs.next=e}return cs}function _s(e,t){return"function"===typeof t?t(e):t}function Ts(e){var t=ws(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=ls,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(null!==i){s=i.next,r=r.baseState;var l=a=null,u=null,c=s;do{var d=c.lane;if((ss&d)===d)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=h,a=r):u=u.next=h,as.lanes|=d,Vl|=d}c=c.next}while(null!==c&&c!==s);null===u?a=r:u.next=l,sr(r,t.memoizedState)||(Sa=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=u,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{s=i.lane,as.lanes|=s,Vl|=s,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Cs(e){var t=ws(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=e(s,a.action),a=a.next}while(a!==i);sr(s,t.memoizedState)||(Sa=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Is(){}function As(e,t){var n=as,r=ws(),i=t(),s=!sr(r.memoizedState,i);if(s&&(r.memoizedState=i,Sa=!0),r=r.queue,js(ks.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||null!==cs&&1&cs.memoizedState.tag){if(n.flags|=2048,Ps(9,xs.bind(null,n,r,i,t),void 0,null),null===Dl)throw Error(o(349));0!==(30&ss)||Ns(n,t,i)}return i}function Ns(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=as.updateQueue)?(t={lastEffect:null,stores:null},as.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function xs(e,t,n,r){t.value=n,t.getSnapshot=r,Os(t)&&Rs(e)}function ks(e,t,n){return n((function(){Os(t)&&Rs(e)}))}function Os(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Rs(e){var t=Po(e,1);null!==t&&su(t,e,1,-1)}function Ds(e){var t=Es();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_s,lastRenderedState:e},t.queue=e,e=e.dispatch=Xs.bind(null,as,e),[t.memoizedState,e]}function Ps(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=as.updateQueue)?(t={lastEffect:null,stores:null},as.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ms(){return ws().memoizedState}function Ls(e,t,n,r){var i=Es();as.flags|=e,i.memoizedState=Ps(1|t,n,void 0,void 0===r?null:r)}function Us(e,t,n,r){var i=ws();r=void 0===r?null:r;var o=void 0;if(null!==ls){var s=ls.memoizedState;if(o=s.destroy,null!==r&&gs(r,s.deps))return void(i.memoizedState=Ps(t,n,o,r))}as.flags|=e,i.memoizedState=Ps(1|t,n,o,r)}function Fs(e,t){return Ls(8390656,8,e,t)}function js(e,t){return Us(2048,8,e,t)}function Vs(e,t){return Us(4,2,e,t)}function qs(e,t){return Us(4,4,e,t)}function Bs(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Hs(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Us(4,4,Bs.bind(null,t,e),n)}function Gs(){}function zs(e,t){var n=ws();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&gs(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ws(e,t){var n=ws();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&gs(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ks(e,t,n){return 0===(21&ss)?(e.baseState&&(e.baseState=!1,Sa=!0),e.memoizedState=n):(sr(n,t)||(n=pt(),as.lanes|=n,Vl|=n,e.baseState=!0),t)}function Js(e,t){var n=vt;vt=0!==n&&4>n?n:4,e(!0);var r=is.transition;is.transition={};try{e(!1),t()}finally{vt=n,is.transition=r}}function Ys(){return ws().memoizedState}function Qs(e,t,n){var r=ou(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},$s(e))Zs(t,n);else if(null!==(n=Do(e,t,n,r))){su(n,e,r,iu()),ea(n,t,r)}}function Xs(e,t,n){var r=ou(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if($s(e))Zs(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,sr(a,s)){var l=t.interleaved;return null===l?(i.next=i,Ro(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(us){}null!==(n=Do(e,t,i,r))&&(su(n,e,r,i=iu()),ea(n,t,r))}}function $s(e){var t=e.alternate;return e===as||null!==t&&t===as}function Zs(e,t){hs=ds=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ea(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var ta={readContext:ko,useCallback:ms,useContext:ms,useEffect:ms,useImperativeHandle:ms,useInsertionEffect:ms,useLayoutEffect:ms,useMemo:ms,useReducer:ms,useRef:ms,useState:ms,useDebugValue:ms,useDeferredValue:ms,useTransition:ms,useMutableSource:ms,useSyncExternalStore:ms,useId:ms,unstable_isNewReconciler:!1},na={readContext:ko,useCallback:function(e,t){return Es().memoizedState=[e,void 0===t?null:t],e},useContext:ko,useEffect:Fs,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ls(4194308,4,Bs.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ls(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ls(4,2,e,t)},useMemo:function(e,t){var n=Es();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Es();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Qs.bind(null,as,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Es().memoizedState=e},useState:Ds,useDebugValue:Gs,useDeferredValue:function(e){return Es().memoizedState=e},useTransition:function(){var e=Ds(!1),t=e[0];return e=Js.bind(null,e[1]),Es().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=as,i=Es();if(ro){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Dl)throw Error(o(349));0!==(30&ss)||Ns(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Fs(ks.bind(null,r,s,e),[e]),r.flags|=2048,Ps(9,xs.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Es(),t=Dl.identifierPrefix;if(ro){var n=Qi;t=":"+t+"R"+(n=(Yi&~(1<<32-ot(Yi)-1)).toString(32)+n),0<(n=fs++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ps++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ra={readContext:ko,useCallback:zs,useContext:ko,useEffect:js,useImperativeHandle:Hs,useInsertionEffect:Vs,useLayoutEffect:qs,useMemo:Ws,useReducer:Ts,useRef:Ms,useState:function(){return Ts(_s)},useDebugValue:Gs,useDeferredValue:function(e){return Ks(ws(),ls.memoizedState,e)},useTransition:function(){return[Ts(_s)[0],ws().memoizedState]},useMutableSource:Is,useSyncExternalStore:As,useId:Ys,unstable_isNewReconciler:!1},ia={readContext:ko,useCallback:zs,useContext:ko,useEffect:js,useImperativeHandle:Hs,useInsertionEffect:Vs,useLayoutEffect:qs,useMemo:Ws,useReducer:Cs,useRef:Ms,useState:function(){return Cs(_s)},useDebugValue:Gs,useDeferredValue:function(e){var t=ws();return null===ls?t.memoizedState=e:Ks(t,ls.memoizedState,e)},useTransition:function(){return[Cs(_s)[0],ws().memoizedState]},useMutableSource:Is,useSyncExternalStore:As,useId:Ys,unstable_isNewReconciler:!1};function oa(e,t){if(e&&e.defaultProps){for(var n in t=U({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function sa(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:U({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var aa={isMounted:function(e){return!!(e=e._reactInternals)&&qe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=iu(),i=ou(e),o=Fo(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=jo(e,o,i))&&(su(t,e,i,r),Vo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=iu(),i=ou(e),o=Fo(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=jo(e,o,i))&&(su(t,e,i,r),Vo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=iu(),r=ou(e),i=Fo(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=jo(e,i,r))&&(su(t,e,r,n),Vo(t,e,r))}};function la(e,t,n,r,i,o,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,s):!t.prototype||!t.prototype.isPureReactComponent||(!ar(n,r)||!ar(i,o))}function ua(e,t,n){var r=!1,i=Ii,o=t.contextType;return"object"===typeof o&&null!==o?o=ko(o):(i=Oi(t)?xi:Ai.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?ki(e,i):Ii),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=aa,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function ca(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&aa.enqueueReplaceState(t,t.state,null)}function da(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Lo(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=ko(o):(o=Oi(t)?xi:Ai.current,i.context=ki(e,o)),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(sa(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&aa.enqueueReplaceState(i,i.state,null),Bo(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function ha(e,t){try{var n="",r=t;do{n+=q(r),r=r.return}while(r);var i=n}catch(Gv){i="\nError generating stack: "+Gv.message+"\n"+Gv.stack}return{value:e,source:t,stack:i,digest:null}}function fa(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function pa(e,t){try{console.error(t.value)}catch(Hv){setTimeout((function(){throw Hv}))}}var ma="function"===typeof WeakMap?WeakMap:Map;function ga(e,t,n){(n=Fo(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Jl||(Jl=!0,Yl=r),pa(0,t)},n}function ya(e,t,n){(n=Fo(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){pa(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){pa(0,t),"function"!==typeof r&&(null===Ql?Ql=new Set([this]):Ql.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function va(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ma;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=xu.bind(null,e,t,n),t.then(e,e))}function ba(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function Ea(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fo(-1,1)).tag=2,jo(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var wa=E.ReactCurrentOwner,Sa=!1;function _a(e,t,n,r){t.child=null===e?wo(t,null,n,r):Eo(t,e.child,n,r)}function Ta(e,t,n,r,i){n=n.render;var o=t.ref;return xo(t,i),r=ys(e,t,n,r,o,i),n=bs(),null===e||Sa?(ro&&n&&Zi(t),t.flags|=1,_a(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ja(e,t,i))}function Ca(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||Lu(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Fu(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Ia(e,t,o,r,i))}if(o=e.child,0===(e.lanes&i)){var s=o.memoizedProps;if((n=null!==(n=n.compare)?n:ar)(s,r)&&e.ref===t.ref)return Ja(e,t,i)}return t.flags|=1,(e=Uu(o,r)).ref=t.ref,e.return=t,t.child=e}function Ia(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(ar(o,r)&&e.ref===t.ref){if(Sa=!1,t.pendingProps=r=o,0===(e.lanes&i))return t.lanes=e.lanes,Ja(e,t,i);0!==(131072&e.flags)&&(Sa=!0)}}return xa(e,t,n,r,i)}function Aa(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ci(Ul,Ll),Ll|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ci(Ul,Ll),Ll|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Ci(Ul,Ll),Ll|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ci(Ul,Ll),Ll|=r;return _a(e,t,i,n),t.child}function Na(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function xa(e,t,n,r,i){var o=Oi(n)?xi:Ai.current;return o=ki(t,o),xo(t,i),n=ys(e,t,n,r,o,i),r=bs(),null===e||Sa?(ro&&r&&Zi(t),t.flags|=1,_a(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ja(e,t,i))}function ka(e,t,n,r,i){if(Oi(n)){var o=!0;Mi(t)}else o=!1;if(xo(t,i),null===t.stateNode)Ka(e,t),ua(t,n,r),da(t,n,r,i),r=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,u=n.contextType;"object"===typeof u&&null!==u?u=ko(u):u=ki(t,u=Oi(n)?xi:Ai.current);var c=n.getDerivedStateFromProps,d="function"===typeof c||"function"===typeof s.getSnapshotBeforeUpdate;d||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==r||l!==u)&&ca(t,s,r,u),Mo=!1;var h=t.memoizedState;s.state=h,Bo(t,r,s,i),l=t.memoizedState,a!==r||h!==l||Ni.current||Mo?("function"===typeof c&&(sa(t,n,c,r),l=t.memoizedState),(a=Mo||la(t,n,a,r,h,l,u))?(d||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=u,r=a):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,Uo(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:oa(t.type,a),s.props=u,d=t.pendingProps,h=s.context,"object"===typeof(l=n.contextType)&&null!==l?l=ko(l):l=ki(t,l=Oi(n)?xi:Ai.current);var f=n.getDerivedStateFromProps;(c="function"===typeof f||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==d||h!==l)&&ca(t,s,r,l),Mo=!1,h=t.memoizedState,s.state=h,Bo(t,r,s,i);var p=t.memoizedState;a!==d||h!==p||Ni.current||Mo?("function"===typeof f&&(sa(t,n,f,r),p=t.memoizedState),(u=Mo||la(t,n,u,r,h,p,l)||!1)?(c||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,p,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),s.props=r,s.state=p,s.context=l,r=u):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Oa(e,t,n,r,o,i)}function Oa(e,t,n,r,i,o){Na(e,t);var s=0!==(128&t.flags);if(!r&&!s)return i&&Li(t,n,!1),Ja(e,t,o);r=t.stateNode,wa.current=t;var a=s&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&s?(t.child=Eo(t,e.child,null,o),t.child=Eo(t,null,a,o)):_a(e,t,a,o),t.memoizedState=r.state,i&&Li(t,n,!0),t.child}function Ra(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),Yo(e,t.containerInfo)}function Da(e,t,n,r,i){return fo(),po(i),t.flags|=256,_a(e,t,n,r),t.child}var Pa,Ma,La,Ua,Fa={dehydrated:null,treeContext:null,retryLane:0};function ja(e){return{baseLanes:e,cachePool:null,transitions:null}}function Va(e,t,n){var r,i=t.pendingProps,s=Zo.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&s)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),Ci(Zo,1&s),null===e)return lo(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Vu(l,i,0,null),e=ju(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=ja(n),t.memoizedState=Fa,e):qa(t,l));if(null!==(s=e.memoizedState)&&null!==(r=s.dehydrated))return function(e,t,n,r,i,s,a){if(n)return 256&t.flags?(t.flags&=-257,Ba(e,t,a,r=fa(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=Vu({mode:"visible",children:r.children},i,0,null),(s=ju(s,i,a,null)).flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,0!==(1&t.mode)&&Eo(t,e.child,null,a),t.child.memoizedState=ja(a),t.memoizedState=Fa,s);if(0===(1&t.mode))return Ba(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Ba(e,t,a,r=fa(s=Error(o(419)),r,void 0))}if(l=0!==(a&e.childLanes),Sa||l){if(null!==(r=Dl)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==s.retryLane&&(s.retryLane=i,Po(e,i),su(r,e,i,-1))}return bu(),Ba(e,t,a,r=fa(Error(o(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Ou.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,no=li(i.nextSibling),to=t,ro=!0,io=null,null!==e&&(Wi[Ki++]=Yi,Wi[Ki++]=Qi,Wi[Ki++]=Ji,Yi=e.id,Qi=e.overflow,Ji=t),t=qa(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,s,n);if(a){a=i.fallback,l=t.mode,r=(s=e.child).sibling;var u={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==s?((i=t.child).childLanes=0,i.pendingProps=u,t.deletions=null):(i=Uu(s,u)).subtreeFlags=14680064&s.subtreeFlags,null!==r?a=Uu(r,a):(a=ju(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?ja(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Fa,i}return e=(a=e.child).sibling,i=Uu(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function qa(e,t){return(t=Vu({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ba(e,t,n,r){return null!==r&&po(r),Eo(t,e.child,null,n),(e=qa(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ha(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),No(e.return,t,n)}function Ga(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Wa(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(_a(e,t,r.children,n),0!==(2&(r=Zo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ha(e,n,t);else if(19===e.tag)Ha(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ci(Zo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===es(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ga(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===es(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ga(t,!0,n,null,o);break;case"together":Ga(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ka(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ja(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Vl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Uu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Uu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ya(e,t){if(!ro)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Qa(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Xa(e,t,n){var r=t.pendingProps;switch(eo(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qa(t),null;case 1:case 17:return Oi(t.type)&&Ri(),Qa(t),null;case 3:return r=t.stateNode,Qo(),Ti(Ni),Ti(Ai),ns(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(co(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==io&&(cu(io),io=null))),Ma(e,t),Qa(t),null;case 5:$o(t);var i=Jo(Ko.current);if(n=t.type,null!==e&&null!=t.stateNode)La(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return Qa(t),null}if(e=Jo(zo.current),co(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[di]=t,r[hi]=s,e=0!==(1&t.mode),n){case"dialog":Fr("cancel",r),Fr("close",r);break;case"iframe":case"object":case"embed":Fr("load",r);break;case"video":case"audio":for(i=0;i<Pr.length;i++)Fr(Pr[i],r);break;case"source":Fr("error",r);break;case"img":case"image":case"link":Fr("error",r),Fr("load",r);break;case"details":Fr("toggle",r);break;case"input":Q(r,s),Fr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Fr("invalid",r);break;case"textarea":ie(r,s),Fr("invalid",r)}for(var l in ye(n,s),i=null,s)if(s.hasOwnProperty(l)){var u=s[l];"children"===l?"string"===typeof u?r.textContent!==u&&(!0!==s.suppressHydrationWarning&&Xr(r.textContent,u,e),i=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(!0!==s.suppressHydrationWarning&&Xr(r.textContent,u,e),i=["children",""+u]):a.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&Fr("scroll",r)}switch(n){case"input":W(r),Z(r,s,!0);break;case"textarea":W(r),se(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=$r)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[di]=t,e[hi]=r,Pa(e,t,!1,!1),t.stateNode=e;e:{switch(l=ve(n,r),n){case"dialog":Fr("cancel",e),Fr("close",e),i=r;break;case"iframe":case"object":case"embed":Fr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Pr.length;i++)Fr(Pr[i],e);i=r;break;case"source":Fr("error",e),i=r;break;case"img":case"image":case"link":Fr("error",e),Fr("load",e),i=r;break;case"details":Fr("toggle",e),i=r;break;case"input":Q(e,r),i=Y(e,r),Fr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=U({},r,{value:void 0}),Fr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Fr("invalid",e)}for(s in ye(n,i),u=i)if(u.hasOwnProperty(s)){var c=u[s];"style"===s?me(e,c):"dangerouslySetInnerHTML"===s?null!=(c=c?c.__html:void 0)&&ce(e,c):"children"===s?"string"===typeof c?("textarea"!==n||""!==c)&&de(e,c):"number"===typeof c&&de(e,""+c):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(a.hasOwnProperty(s)?null!=c&&"onScroll"===s&&Fr("scroll",e):null!=c&&b(e,s,c,l))}switch(n){case"input":W(e),Z(e,r,!1);break;case"textarea":W(e),se(e);break;case"option":null!=r.value&&e.setAttribute("value",""+G(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ne(e,!!r.multiple,s,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=$r)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Qa(t),null;case 6:if(e&&null!=t.stateNode)Ua(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(n=Jo(Ko.current),Jo(zo.current),co(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(s=r.nodeValue!==n)&&null!==(e=to))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}s&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Qa(t),null;case 13:if(Ti(Zo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ro&&null!==no&&0!==(1&t.mode)&&0===(128&t.flags))ho(),fo(),t.flags|=98560,s=!1;else if(s=co(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(o(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(o(317));s[di]=t}else fo(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Qa(t),s=!1}else null!==io&&(cu(io),io=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zo.current)?0===Fl&&(Fl=3):bu())),null!==t.updateQueue&&(t.flags|=4),Qa(t),null);case 4:return Qo(),Ma(e,t),null===e&&qr(t.stateNode.containerInfo),Qa(t),null;case 10:return Ao(t.type._context),Qa(t),null;case 19:if(Ti(Zo),null===(s=t.memoizedState))return Qa(t),null;if(r=0!==(128&t.flags),null===(l=s.rendering))if(r)Ya(s,!1);else{if(0!==Fl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=es(e))){for(t.flags|=128,Ya(s,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=14680066,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ci(Zo,1&Zo.current|2),t.child}e=e.sibling}null!==s.tail&&Qe()>Wl&&(t.flags|=128,r=!0,Ya(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=es(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ya(s,!0),null===s.tail&&"hidden"===s.tailMode&&!l.alternate&&!ro)return Qa(t),null}else 2*Qe()-s.renderingStartTime>Wl&&1073741824!==n&&(t.flags|=128,r=!0,Ya(s,!1),t.lanes=4194304);s.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=s.last)?n.sibling=l:t.child=l,s.last=l)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Qe(),t.sibling=null,n=Zo.current,Ci(Zo,r?1&n|2:1&n),t):(Qa(t),null);case 22:case 23:return mu(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ll)&&(Qa(t),6&t.subtreeFlags&&(t.flags|=8192)):Qa(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function $a(e,t){switch(eo(t),t.tag){case 1:return Oi(t.type)&&Ri(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Qo(),Ti(Ni),Ti(Ai),ns(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return $o(t),null;case 13:if(Ti(Zo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));fo()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ti(Zo),null;case 4:return Qo(),null;case 10:return Ao(t.type._context),null;case 22:case 23:return mu(),null;default:return null}}Pa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ma=function(){},La=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Jo(zo.current);var o,s=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),s=[];break;case"select":i=U({},i,{value:void 0}),r=U({},r,{value:void 0}),s=[];break;case"textarea":i=re(e,i),r=re(e,r),s=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=$r)}for(c in ye(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var l=i[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(a.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var u=r[c];if(l=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(s=s||[]).push(c,u)):"children"===c?"string"!==typeof u&&"number"!==typeof u||(s=s||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(a.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&Fr("scroll",e),s||l===u||(s=[])):(s=s||[]).push(c,u))}n&&(s=s||[]).push("style",n);var c=s;(t.updateQueue=c)&&(t.flags|=4)}},Ua=function(e,t,n,r){n!==r&&(t.flags|=4)};var Za=!1,el=!1,tl="function"===typeof WeakSet?WeakSet:Set,nl=null;function rl(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Nu(e,t,r)}else n.current=null}function il(e,t,n){try{n()}catch(r){Nu(e,t,r)}}var ol=!1;function sl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&il(t,n,o)}i=i.next}while(i!==r)}}function al(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ll(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ul(e){var t=e.alternate;null!==t&&(e.alternate=null,ul(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[hi],delete t[pi],delete t[mi],delete t[gi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function cl(e){return 5===e.tag||3===e.tag||4===e.tag}function dl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||cl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function hl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$r));else if(4!==r&&null!==(e=e.child))for(hl(e,t,n),e=e.sibling;null!==e;)hl(e,t,n),e=e.sibling}function fl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(fl(e,t,n),e=e.sibling;null!==e;)fl(e,t,n),e=e.sibling}var pl=null,ml=!1;function gl(e,t,n){for(n=n.child;null!==n;)yl(e,t,n),n=n.sibling}function yl(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(rt,n)}catch(Qv){}switch(n.tag){case 5:el||rl(n,t);case 6:var r=pl,i=ml;pl=null,gl(e,t,n),ml=i,null!==(pl=r)&&(ml?(e=pl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):pl.removeChild(n.stateNode));break;case 18:null!==pl&&(ml?(e=pl,n=n.stateNode,8===e.nodeType?ai(e.parentNode,n):1===e.nodeType&&ai(e,n),qt(e)):ai(pl,n.stateNode));break;case 4:r=pl,i=ml,pl=n.stateNode.containerInfo,ml=!0,gl(e,t,n),pl=r,ml=i;break;case 0:case 11:case 14:case 15:if(!el&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,void 0!==s&&(0!==(2&o)||0!==(4&o))&&il(n,t,s),i=i.next}while(i!==r)}gl(e,t,n);break;case 1:if(!el&&(rl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(Qv){Nu(n,t,Qv)}gl(e,t,n);break;case 21:gl(e,t,n);break;case 22:1&n.mode?(el=(r=el)||null!==n.memoizedState,gl(e,t,n),el=r):gl(e,t,n);break;default:gl(e,t,n)}}function vl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new tl),t.forEach((function(t){var r=Ru.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function bl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:pl=l.stateNode,ml=!1;break e;case 3:case 4:pl=l.stateNode.containerInfo,ml=!0;break e}l=l.return}if(null===pl)throw Error(o(160));yl(s,a,i),pl=null,ml=!1;var u=i.alternate;null!==u&&(u.return=null),i.return=null}catch(us){Nu(i,t,us)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)El(t,e),t=t.sibling}function El(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(bl(t,e),wl(e),4&r){try{sl(3,e,e.return),al(3,e)}catch(Lv){Nu(e,e.return,Lv)}try{sl(5,e,e.return)}catch(Lv){Nu(e,e.return,Lv)}}break;case 1:bl(t,e),wl(e),512&r&&null!==n&&rl(n,n.return);break;case 5:if(bl(t,e),wl(e),512&r&&null!==n&&rl(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(Lv){Nu(e,e.return,Lv)}}if(4&r&&null!=(i=e.stateNode)){var s=e.memoizedProps,a=null!==n?n.memoizedProps:s,l=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===l&&"radio"===s.type&&null!=s.name&&X(i,s),ve(l,a);var c=ve(l,s);for(a=0;a<u.length;a+=2){var d=u[a],h=u[a+1];"style"===d?me(i,h):"dangerouslySetInnerHTML"===d?ce(i,h):"children"===d?de(i,h):b(i,d,h,c)}switch(l){case"input":$(i,s);break;case"textarea":oe(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;null!=p?ne(i,!!s.multiple,p,!1):f!==!!s.multiple&&(null!=s.defaultValue?ne(i,!!s.multiple,s.defaultValue,!0):ne(i,!!s.multiple,s.multiple?[]:"",!1))}i[hi]=s}catch(Lv){Nu(e,e.return,Lv)}}break;case 6:if(bl(t,e),wl(e),4&r){if(null===e.stateNode)throw Error(o(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(Lv){Nu(e,e.return,Lv)}}break;case 3:if(bl(t,e),wl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{qt(t.containerInfo)}catch(Lv){Nu(e,e.return,Lv)}break;case 4:default:bl(t,e),wl(e);break;case 13:bl(t,e),wl(e),8192&(i=e.child).flags&&(s=null!==i.memoizedState,i.stateNode.isHidden=s,!s||null!==i.alternate&&null!==i.alternate.memoizedState||(zl=Qe())),4&r&&vl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(el=(c=el)||d,bl(t,e),el=c):bl(t,e),wl(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!d&&0!==(1&e.mode))for(nl=e,d=e.child;null!==d;){for(h=nl=d;null!==nl;){switch(p=(f=nl).child,f.tag){case 0:case 11:case 14:case 15:sl(4,f,f.return);break;case 1:rl(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(Lv){Nu(r,n,Lv)}}break;case 5:rl(f,f.return);break;case 22:if(null!==f.memoizedState){Cl(h);continue}}null!==p?(p.return=f,nl=p):Cl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,c?"function"===typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none":(l=h.stateNode,a=void 0!==(u=h.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,l.style.display=pe("display",a))}catch(Lv){Nu(e,e.return,Lv)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(Lv){Nu(e,e.return,Lv)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:bl(t,e),wl(e),4&r&&vl(e);case 21:}}function wl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(cl(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),fl(e,dl(e),i);break;case 3:case 4:var s=r.stateNode.containerInfo;hl(e,dl(e),s);break;default:throw Error(o(161))}}catch(os){Nu(e,e.return,os)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Sl(e,t,n){nl=e,_l(e,t,n)}function _l(e,t,n){for(var r=0!==(1&e.mode);null!==nl;){var i=nl,o=i.child;if(22===i.tag&&r){var s=null!==i.memoizedState||Za;if(!s){var a=i.alternate,l=null!==a&&null!==a.memoizedState||el;a=Za;var u=el;if(Za=s,(el=l)&&!u)for(nl=i;null!==nl;)l=(s=nl).child,22===s.tag&&null!==s.memoizedState?Il(i):null!==l?(l.return=s,nl=l):Il(i);for(;null!==o;)nl=o,_l(o,t,n),o=o.sibling;nl=i,Za=a,el=u}Tl(e)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,nl=o):Tl(e)}}function Tl(e){for(;null!==nl;){var t=nl;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:el||al(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!el)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:oa(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&Ho(t,s,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ho(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var d=c.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&qt(h)}}}break;default:throw Error(o(163))}el||512&t.flags&&ll(t)}catch(vs){Nu(t,t.return,vs)}}if(t===e){nl=null;break}if(null!==(n=t.sibling)){n.return=t.return,nl=n;break}nl=t.return}}function Cl(e){for(;null!==nl;){var t=nl;if(t===e){nl=null;break}var n=t.sibling;if(null!==n){n.return=t.return,nl=n;break}nl=t.return}}function Il(e){for(;null!==nl;){var t=nl;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{al(4,t)}catch(os){Nu(t,n,os)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(os){Nu(t,i,os)}}var o=t.return;try{ll(t)}catch(os){Nu(t,o,os)}break;case 5:var s=t.return;try{ll(t)}catch(os){Nu(t,s,os)}}}catch(os){Nu(t,t.return,os)}if(t===e){nl=null;break}var a=t.sibling;if(null!==a){a.return=t.return,nl=a;break}nl=t.return}}var Al,Nl=Math.ceil,xl=E.ReactCurrentDispatcher,kl=E.ReactCurrentOwner,Ol=E.ReactCurrentBatchConfig,Rl=0,Dl=null,Pl=null,Ml=0,Ll=0,Ul=_i(0),Fl=0,jl=null,Vl=0,ql=0,Bl=0,Hl=null,Gl=null,zl=0,Wl=1/0,Kl=null,Jl=!1,Yl=null,Ql=null,Xl=!1,$l=null,Zl=0,eu=0,tu=null,nu=-1,ru=0;function iu(){return 0!==(6&Rl)?Qe():-1!==nu?nu:nu=Qe()}function ou(e){return 0===(1&e.mode)?1:0!==(2&Rl)&&0!==Ml?Ml&-Ml:null!==mo.transition?(0===ru&&(ru=pt()),ru):0!==(e=vt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function su(e,t,n,r){if(50<eu)throw eu=0,tu=null,Error(o(185));gt(e,n,r),0!==(2&Rl)&&e===Dl||(e===Dl&&(0===(2&Rl)&&(ql|=n),4===Fl&&du(e,Ml)),au(e,r),1===n&&0===Rl&&0===(1&t.mode)&&(Wl=Qe()+500,Fi&&qi()))}function au(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-ot(o),a=1<<s,l=i[s];-1===l?0!==(a&n)&&0===(a&r)||(i[s]=ht(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}}(e,t);var r=dt(e,e===Dl?Ml:0);if(0===r)null!==n&&Ke(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ke(n),1===t)0===e.tag?function(e){Fi=!0,Vi(e)}(hu.bind(null,e)):Vi(hu.bind(null,e)),oi((function(){0===(6&Rl)&&qi()})),n=null;else{switch(bt(r)){case 1:n=$e;break;case 4:n=Ze;break;case 16:default:n=et;break;case 536870912:n=nt}n=Du(n,lu.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function lu(e,t){if(nu=-1,ru=0,0!==(6&Rl))throw Error(o(327));var n=e.callbackNode;if(Iu()&&e.callbackNode!==n)return null;var r=dt(e,e===Dl?Ml:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=Eu(e,r);else{t=r;var i=Rl;Rl|=2;var s=vu();for(Dl===e&&Ml===t||(Kl=null,Wl=Qe()+500,gu(e,t));;)try{Su();break}catch(Qv){yu(e,Qv)}Io(),xl.current=s,Rl=i,null!==Pl?t=0:(Dl=null,Ml=0,t=Fl)}if(0!==t){if(2===t&&(0!==(i=ft(e))&&(r=i,t=uu(e,i))),1===t)throw n=jl,gu(e,0),du(e,r),au(e,Qe()),n;if(6===t)du(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!sr(o(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=Eu(e,r))&&(0!==(s=ft(e))&&(r=s,t=uu(e,s))),1===t))throw n=jl,gu(e,0),du(e,r),au(e,Qe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:Cu(e,Gl,Kl);break;case 3:if(du(e,r),(130023424&r)===r&&10<(t=zl+500-Qe())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){iu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ni(Cu.bind(null,e,Gl,Kl),t);break}Cu(e,Gl,Kl);break;case 4:if(du(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);s=1<<a,(a=t[a])>i&&(i=a),r&=~s}if(r=i,10<(r=(120>(r=Qe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Nl(r/1960))-r)){e.timeoutHandle=ni(Cu.bind(null,e,Gl,Kl),r);break}Cu(e,Gl,Kl);break;default:throw Error(o(329))}}}return au(e,Qe()),e.callbackNode===n?lu.bind(null,e):null}function uu(e,t){var n=Hl;return e.current.memoizedState.isDehydrated&&(gu(e,t).flags|=256),2!==(e=Eu(e,t))&&(t=Gl,Gl=n,null!==t&&cu(t)),e}function cu(e){null===Gl?Gl=e:Gl.push.apply(Gl,e)}function du(e,t){for(t&=~Bl,t&=~ql,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function hu(e){if(0!==(6&Rl))throw Error(o(327));Iu();var t=dt(e,0);if(0===(1&t))return au(e,Qe()),null;var n=Eu(e,t);if(0!==e.tag&&2===n){var r=ft(e);0!==r&&(t=r,n=uu(e,r))}if(1===n)throw n=jl,gu(e,0),du(e,t),au(e,Qe()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Cu(e,Gl,Kl),au(e,Qe()),null}function fu(e,t){var n=Rl;Rl|=1;try{return e(t)}finally{0===(Rl=n)&&(Wl=Qe()+500,Fi&&qi())}}function pu(e){null!==$l&&0===$l.tag&&0===(6&Rl)&&Iu();var t=Rl;Rl|=1;var n=Ol.transition,r=vt;try{if(Ol.transition=null,vt=1,e)return e()}finally{vt=r,Ol.transition=n,0===(6&(Rl=t))&&qi()}}function mu(){Ll=Ul.current,Ti(Ul)}function gu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ri(n)),null!==Pl)for(n=Pl.return;null!==n;){var r=n;switch(eo(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ri();break;case 3:Qo(),Ti(Ni),Ti(Ai),ns();break;case 5:$o(r);break;case 4:Qo();break;case 13:case 19:Ti(Zo);break;case 10:Ao(r.type._context);break;case 22:case 23:mu()}n=n.return}if(Dl=e,Pl=e=Uu(e.current,null),Ml=Ll=t,Fl=0,jl=null,Bl=ql=Vl=0,Gl=Hl=null,null!==Oo){for(t=0;t<Oo.length;t++)if(null!==(r=(n=Oo[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var s=o.next;o.next=i,r.next=s}n.pending=r}Oo=null}return e}function yu(e,t){for(;;){var n=Pl;try{if(Io(),rs.current=ta,ds){for(var r=as.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ds=!1}if(ss=0,cs=ls=as=null,hs=!1,fs=0,kl.current=null,null===n||null===n.return){Fl=1,jl=t,Pl=null;break}e:{var s=e,a=n.return,l=n,u=t;if(t=Ml,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=ba(a);if(null!==p){p.flags&=-257,Ea(p,a,l,0,t),1&p.mode&&va(s,c,t),u=c;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(u),t.updateQueue=g}else m.add(u);break e}if(0===(1&t)){va(s,c,t),bu();break e}u=Error(o(426))}else if(ro&&1&l.mode){var y=ba(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),Ea(y,a,l,0,t),po(ha(u,l));break e}}s=u=ha(u,l),4!==Fl&&(Fl=2),null===Hl?Hl=[s]:Hl.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,qo(s,ga(0,u,t));break e;case 1:l=u;var v=s.type,b=s.stateNode;if(0===(128&s.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Ql||!Ql.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t,qo(s,ya(s,l,t));break e}}s=s.return}while(null!==s)}Tu(n)}catch(Ss){t=Ss,Pl===n&&null!==n&&(Pl=n=n.return);continue}break}}function vu(){var e=xl.current;return xl.current=ta,null===e?ta:e}function bu(){0!==Fl&&3!==Fl&&2!==Fl||(Fl=4),null===Dl||0===(268435455&Vl)&&0===(268435455&ql)||du(Dl,Ml)}function Eu(e,t){var n=Rl;Rl|=2;var r=vu();for(Dl===e&&Ml===t||(Kl=null,gu(e,t));;)try{wu();break}catch(Mv){yu(e,Mv)}if(Io(),Rl=n,xl.current=r,null!==Pl)throw Error(o(261));return Dl=null,Ml=0,Fl}function wu(){for(;null!==Pl;)_u(Pl)}function Su(){for(;null!==Pl&&!Je();)_u(Pl)}function _u(e){var t=Al(e.alternate,e,Ll);e.memoizedProps=e.pendingProps,null===t?Tu(e):Pl=t,kl.current=null}function Tu(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Xa(n,t,Ll)))return void(Pl=n)}else{if(null!==(n=$a(n,t)))return n.flags&=32767,void(Pl=n);if(null===e)return Fl=6,void(Pl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pl=t);Pl=t=e}while(null!==t);0===Fl&&(Fl=5)}function Cu(e,t,n){var r=vt,i=Ol.transition;try{Ol.transition=null,vt=1,function(e,t,n,r){do{Iu()}while(null!==$l);if(0!==(6&Rl))throw Error(o(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,s),e===Dl&&(Pl=Dl=null,Ml=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Xl||(Xl=!0,Du(et,(function(){return Iu(),null}))),s=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||s){s=Ol.transition,Ol.transition=null;var a=vt;vt=1;var l=Rl;Rl|=4,kl.current=null,function(e,t){if(Zr=Ht,hr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(za){n=null;break e}var a=0,l=-1,u=-1,c=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(l=a+i),h!==s||0!==r&&3!==h.nodeType||(u=a+r),3===h.nodeType&&(a+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++c===i&&(l=a),f===s&&++d===r&&(u=a),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ei={focusedElem:e,selectionRange:n},Ht=!1,nl=t;null!==nl;)if(e=(t=nl).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,nl=e;else for(;null!==nl;){t=nl;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:oa(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var E=t.stateNode.containerInfo;1===E.nodeType?E.textContent="":9===E.nodeType&&E.documentElement&&E.removeChild(E.documentElement);break;default:throw Error(o(163))}}catch(za){Nu(t,t.return,za)}if(null!==(e=t.sibling)){e.return=t.return,nl=e;break}nl=t.return}m=ol,ol=!1}(e,n),El(n,e),fr(ei),Ht=!!Zr,ei=Zr=null,e.current=n,Sl(n,e,i),Ye(),Rl=l,vt=a,Ol.transition=s}else e.current=n;if(Xl&&(Xl=!1,$l=e,Zl=i),s=e.pendingLanes,0===s&&(Ql=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),au(e,Qe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Jl)throw Jl=!1,e=Yl,Yl=null,e;0!==(1&Zl)&&0!==e.tag&&Iu(),s=e.pendingLanes,0!==(1&s)?e===tu?eu++:(eu=0,tu=e):eu=0,qi()}(e,t,n,r)}finally{Ol.transition=i,vt=r}return null}function Iu(){if(null!==$l){var e=bt(Zl),t=Ol.transition,n=vt;try{if(Ol.transition=null,vt=16>e?16:e,null===$l)var r=!1;else{if(e=$l,$l=null,Zl=0,0!==(6&Rl))throw Error(o(331));var i=Rl;for(Rl|=4,nl=e.current;null!==nl;){var s=nl,a=s.child;if(0!==(16&nl.flags)){var l=s.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(nl=c;null!==nl;){var d=nl;switch(d.tag){case 0:case 11:case 15:sl(8,d,s)}var h=d.child;if(null!==h)h.return=d,nl=h;else for(;null!==nl;){var f=(d=nl).sibling,p=d.return;if(ul(d),d===c){nl=null;break}if(null!==f){f.return=p,nl=f;break}nl=p}}}var m=s.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}nl=s}}if(0!==(2064&s.subtreeFlags)&&null!==a)a.return=s,nl=a;else e:for(;null!==nl;){if(0!==(2048&(s=nl).flags))switch(s.tag){case 0:case 11:case 15:sl(9,s,s.return)}var v=s.sibling;if(null!==v){v.return=s.return,nl=v;break e}nl=s.return}}var b=e.current;for(nl=b;null!==nl;){var E=(a=nl).child;if(0!==(2064&a.subtreeFlags)&&null!==E)E.return=a,nl=E;else e:for(a=b;null!==nl;){if(0!==(2048&(l=nl).flags))try{switch(l.tag){case 0:case 11:case 15:al(9,l)}}catch(Ss){Nu(l,l.return,Ss)}if(l===a){nl=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,nl=w;break e}nl=l.return}}if(Rl=i,qi(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(rt,e)}catch(Ss){}r=!0}return r}finally{vt=n,Ol.transition=t}}return!1}function Au(e,t,n){e=jo(e,t=ga(0,t=ha(n,t),1),1),t=iu(),null!==e&&(gt(e,1,t),au(e,t))}function Nu(e,t,n){if(3===e.tag)Au(e,e,n);else for(;null!==t;){if(3===t.tag){Au(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ql||!Ql.has(r))){t=jo(t,e=ya(t,e=ha(n,e),1),1),e=iu(),null!==t&&(gt(t,1,e),au(t,e));break}}t=t.return}}function xu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=iu(),e.pingedLanes|=e.suspendedLanes&n,Dl===e&&(Ml&n)===n&&(4===Fl||3===Fl&&(130023424&Ml)===Ml&&500>Qe()-zl?gu(e,0):Bl|=n),au(e,t)}function ku(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=iu();null!==(e=Po(e,t))&&(gt(e,t,n),au(e,n))}function Ou(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),ku(e,n)}function Ru(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),ku(e,n)}function Du(e,t){return We(e,t)}function Pu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mu(e,t,n,r){return new Pu(e,t,n,r)}function Lu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Uu(e,t){var n=e.alternate;return null===n?((n=Mu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Fu(e,t,n,r,i,s){var a=2;if(r=e,"function"===typeof e)Lu(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case _:return ju(n.children,i,s,t);case T:a=8,i|=8;break;case C:return(e=Mu(12,n,t,2|i)).elementType=C,e.lanes=s,e;case x:return(e=Mu(13,n,t,i)).elementType=x,e.lanes=s,e;case k:return(e=Mu(19,n,t,i)).elementType=k,e.lanes=s,e;case D:return Vu(n,i,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case I:a=10;break e;case A:a=9;break e;case N:a=11;break e;case O:a=14;break e;case R:a=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Mu(a,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function ju(e,t,n,r){return(e=Mu(7,e,r,t)).lanes=n,e}function Vu(e,t,n,r){return(e=Mu(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function qu(e,t,n){return(e=Mu(6,e,null,t)).lanes=n,e}function Bu(e,t,n){return(t=Mu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Hu(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Gu(e,t,n,r,i,o,s,a,l){return e=new Hu(e,t,n,a,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Mu(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Lo(o),e}function zu(e){if(!e)return Ii;e:{if(qe(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Oi(n))return Pi(e,n,t)}return t}function Wu(e,t,n,r,i,o,s,a,l){return(e=Gu(n,r,!0,e,0,o,0,a,l)).context=zu(null),n=e.current,(o=Fo(r=iu(),i=ou(n))).callback=void 0!==t&&null!==t?t:null,jo(n,o,i),e.current.lanes=i,gt(e,i,r),au(e,r),e}function Ku(e,t,n,r){var i=t.current,o=iu(),s=ou(i);return n=zu(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fo(o,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=jo(i,t,s))&&(su(e,i,s,o),Vo(e,i,s)),s}function Ju(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Yu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Qu(e,t){Yu(e,t),(e=e.alternate)&&Yu(e,t)}Al=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)Sa=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return Sa=!1,function(e,t,n){switch(t.tag){case 3:Ra(t),fo();break;case 5:Xo(t);break;case 1:Oi(t.type)&&Mi(t);break;case 4:Yo(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ci(So,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ci(Zo,1&Zo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Va(e,t,n):(Ci(Zo,1&Zo.current),null!==(e=Ja(e,t,n))?e.sibling:null);Ci(Zo,1&Zo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Wa(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ci(Zo,Zo.current),r)break;return null;case 22:case 23:return t.lanes=0,Aa(e,t,n)}return Ja(e,t,n)}(e,t,n);Sa=0!==(131072&e.flags)}else Sa=!1,ro&&0!==(1048576&t.flags)&&$i(t,zi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ka(e,t),e=t.pendingProps;var i=ki(t,Ai.current);xo(t,n),i=ys(null,t,r,e,i,n);var s=bs();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oi(r)?(s=!0,Mi(t)):s=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Lo(t),i.updater=aa,t.stateNode=i,i._reactInternals=t,da(t,r,e,n),t=Oa(null,t,r,!0,s,n)):(t.tag=0,ro&&s&&Zi(t),_a(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ka(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Lu(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===N)return 11;if(e===O)return 14}return 2}(r),e=oa(r,e),i){case 0:t=xa(null,t,r,e,n);break e;case 1:t=ka(null,t,r,e,n);break e;case 11:t=Ta(null,t,r,e,n);break e;case 14:t=Ca(null,t,r,oa(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,xa(e,t,r,i=t.elementType===r?i:oa(r,i),n);case 1:return r=t.type,i=t.pendingProps,ka(e,t,r,i=t.elementType===r?i:oa(r,i),n);case 3:e:{if(Ra(t),null===e)throw Error(o(387));r=t.pendingProps,i=(s=t.memoizedState).element,Uo(e,t),Bo(t,r,null,n);var a=t.memoizedState;if(r=a.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Da(e,t,r,n,i=ha(Error(o(423)),t));break e}if(r!==i){t=Da(e,t,r,n,i=ha(Error(o(424)),t));break e}for(no=li(t.stateNode.containerInfo.firstChild),to=t,ro=!0,io=null,n=wo(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fo(),r===i){t=Ja(e,t,n);break e}_a(e,t,r,n)}t=t.child}return t;case 5:return Xo(t),null===e&&lo(t),r=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,a=i.children,ti(r,i)?a=null:null!==s&&ti(r,s)&&(t.flags|=32),Na(e,t),_a(e,t,a,n),t.child;case 6:return null===e&&lo(t),null;case 13:return Va(e,t,n);case 4:return Yo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Eo(t,null,r,n):_a(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Ta(e,t,r,i=t.elementType===r?i:oa(r,i),n);case 7:return _a(e,t,t.pendingProps,n),t.child;case 8:case 12:return _a(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,Ci(So,r._currentValue),r._currentValue=a,null!==s)if(sr(s.value,a)){if(s.children===i.children&&!Ni.current){t=Ja(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var l=s.dependencies;if(null!==l){a=s.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===s.tag){(u=Fo(-1,n&-n)).tag=2;var c=s.updateQueue;if(null!==c){var d=(c=c.shared).pending;null===d?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),No(s.return,n,t),l.lanes|=n;break}u=u.next}}else if(10===s.tag)a=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(a=s.return))throw Error(o(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),No(a,n,t),a=s.sibling}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===t){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}_a(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,xo(t,n),r=r(i=ko(i)),t.flags|=1,_a(e,t,r,n),t.child;case 14:return i=oa(r=t.type,t.pendingProps),Ca(e,t,r,i=oa(r.type,i),n);case 15:return Ia(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:oa(r,i),Ka(e,t),t.tag=1,Oi(r)?(e=!0,Mi(t)):e=!1,xo(t,n),ua(t,r,i),da(t,r,i,n),Oa(null,t,r,!0,e,n);case 19:return Wa(e,t,n);case 22:return Aa(e,t,n)}throw Error(o(156,t.tag))};var Xu="function"===typeof reportError?reportError:function(e){console.error(e)};function $u(e){this._internalRoot=e}function Zu(e){this._internalRoot=e}function ec(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function tc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function nc(){}function rc(e,t,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if("function"===typeof i){var a=i;i=function(){var e=Ju(s);a.call(e)}}Ku(t,s,e,i)}else s=function(e,t,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var e=Ju(s);o.call(e)}}var s=Wu(t,r,e,0,null,!1,0,"",nc);return e._reactRootContainer=s,e[fi]=s.current,qr(8===e.nodeType?e.parentNode:e),pu(),s}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Ju(l);a.call(e)}}var l=Gu(e,0,!1,null,0,!1,0,"",nc);return e._reactRootContainer=l,e[fi]=l.current,qr(8===e.nodeType?e.parentNode:e),pu((function(){Ku(t,l,n,r)})),l}(n,t,e,i,r);return Ju(s)}Zu.prototype.render=$u.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Ku(e,t,null,null)},Zu.prototype.unmount=$u.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;pu((function(){Ku(null,e,null,null)})),t[fi]=null}},Zu.prototype.unstable_scheduleHydration=function(e){if(e){var t=_t();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Lt(e)}},Et=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ct(t.pendingLanes);0!==n&&(yt(t,1|n),au(t,Qe()),0===(6&Rl)&&(Wl=Qe()+500,qi()))}break;case 13:pu((function(){var t=Po(e,1);if(null!==t){var n=iu();su(t,e,1,n)}})),Qu(e,1)}},wt=function(e){if(13===e.tag){var t=Po(e,134217728);if(null!==t)su(t,e,134217728,iu());Qu(e,134217728)}},St=function(e){if(13===e.tag){var t=ou(e),n=Po(e,t);if(null!==n)su(n,e,t,iu());Qu(e,t)}},_t=function(){return vt},Tt=function(e,t){var n=vt;try{return vt=e,t()}finally{vt=n}},we=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Ei(r);if(!i)throw Error(o(90));K(r),$(r,i)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ae=fu,Ne=pu;var ic={usingClientEntryPoint:!1,Events:[vi,bi,Ei,Ce,Ie,fu]},oc={findFiberByHostInstance:yi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},sc={bundleType:oc.bundleType,version:oc.version,rendererPackageName:oc.rendererPackageName,rendererConfig:oc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:E.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:oc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ac=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ac.isDisabled&&ac.supportsFiber)try{rt=ac.inject(sc),it=ac}catch(Vv){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ic,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ec(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!ec(e))throw Error(o(299));var n=!1,r="",i=Xu;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Gu(e,1,!1,null,0,n,0,r,i),e[fi]=t.current,qr(8===e.nodeType?e.parentNode:e),new $u(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return pu(e)},t.hydrate=function(e,t,n){if(!tc(t))throw Error(o(200));return rc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!ec(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,s="",a=Xu;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Wu(t,null,e,1,null!=n?n:null,i,0,s,a),e[fi]=t.current,qr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Zu(t)},t.render=function(e,t,n){if(!tc(t))throw Error(o(200));return rc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!tc(e))throw Error(o(40));return!!e._reactRootContainer&&(pu((function(){rc(null,null,e,!1,(function(){e._reactRootContainer=null,e[fi]=null}))})),!0)},t.unstable_batchedUpdates=fu,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!tc(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return rc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(Mv){if("object"===typeof window)return window}}();var r=n(43),i=n(391);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function s(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}function a(e,t,n){return(t=s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let c,d;function h(e,t,n,r){var i,o;if(!(null===e||void 0===e?void 0:e.baseUrl)){const e={geminiUrl:c,vertexUrl:d};return t?null!==(i=e.vertexUrl)&&void 0!==i?i:n:null!==(o=e.geminiUrl)&&void 0!==o?o:r}return e.baseUrl}class f{}function p(e,t){return e.replace(/\{([^}]+)\}/g,((e,n)=>{if(Object.prototype.hasOwnProperty.call(t,n)){const e=t[n];return void 0!==e&&null!==e?String(e):""}throw new Error("Key '".concat(n,"' not found in valueMap."))}))}function m(e,t,n){for(let o=0;o<t.length-1;o++){const r=t[o];if(r.endsWith("[]")){const i=r.slice(0,-2);if(!(i in e)){if(!Array.isArray(n))throw new Error("Value must be a list given an array path ".concat(r));e[i]=Array.from({length:n.length},(()=>({})))}if(Array.isArray(e[i])){const r=e[i];if(Array.isArray(n))for(let e=0;e<r.length;e++){m(r[e],t.slice(o+1),n[e])}else for(const e of r)m(e,t.slice(o+1),n)}return}if(r.endsWith("[0]")){const i=r.slice(0,-3);i in e||(e[i]=[{}]);return void m(e[i][0],t.slice(o+1),n)}e[r]&&"object"===typeof e[r]||(e[r]={}),e=e[r]}const r=t[t.length-1],i=e[r];if(void 0!==i){if(!n||"object"===typeof n&&0===Object.keys(n).length)return;if(n===i)return;if("object"!==typeof i||"object"!==typeof n||null===i||null===n)throw new Error("Cannot set value for an existing key. Key: ".concat(r));Object.assign(i,n)}else if("_self"!==r||"object"!==typeof n||null===n||Array.isArray(n))e[r]=n;else{const t=n;Object.assign(e,t)}}function g(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;try{if(1===t.length&&"_self"===t[0])return e;for(let r=0;r<t.length;r++){if("object"!==typeof e||null===e)return n;const i=t[r];if(i.endsWith("[]")){const o=i.slice(0,-2);if(o in e){const i=e[o];return Array.isArray(i)?i.map((e=>g(e,t.slice(r+1),n))):n}return n}e=e[i]}return e}catch(r){if(r instanceof TypeError)return n;throw r}}function y(e,t,n,r,i){if(r>=t.length)return;if("object"!==typeof e||null===e)return;const o=t[r];if(o.endsWith("[]")){const s=o.slice(0,-2),a=e;if(s in a&&Array.isArray(a[s]))for(const e of a[s])y(e,t,n,r+1,i)}else if("*"===o){if("object"===typeof e&&null!==e&&!Array.isArray(e)){const t=e,o=Object.keys(t).filter((e=>!e.startsWith("_")&&!i.has(e))),s={};for(const e of o)s[e]=t[e];for(const[e,i]of Object.entries(s)){const o=[];for(const t of n.slice(r))"*"===t?o.push(e):o.push(t);m(t,o,i)}for(const e of o)delete t[e]}}else{o in e&&y(e[o],t,n,r+1,i)}}function v(e){if("string"!==typeof e)throw new Error("fromImageBytes must be a string");return e}function b(e){const t={},n=g(e,["name"]);null!=n&&m(t,["name"],n);const r=g(e,["metadata"]);null!=r&&m(t,["metadata"],r);const i=g(e,["done"]);null!=i&&m(t,["done"],i);const o=g(e,["error"]);null!=o&&m(t,["error"],o);const s=g(e,["response","generateVideoResponse"]);return null!=s&&m(t,["response"],function(e){const t={},n=g(e,["generatedSamples"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>function(e){const t={},n=g(e,["video"]);null!=n&&m(t,["video"],function(e){const t={},n=g(e,["uri"]);null!=n&&m(t,["uri"],n);const r=g(e,["encodedVideo"]);null!=r&&m(t,["videoBytes"],v(r));const i=g(e,["encoding"]);null!=i&&m(t,["mimeType"],i);return t}(n));return t}(e)))),m(t,["generatedVideos"],e)}const r=g(e,["raiMediaFilteredCount"]);null!=r&&m(t,["raiMediaFilteredCount"],r);const i=g(e,["raiMediaFilteredReasons"]);null!=i&&m(t,["raiMediaFilteredReasons"],i);return t}(s)),t}function E(e){const t={},n=g(e,["name"]);null!=n&&m(t,["name"],n);const r=g(e,["metadata"]);null!=r&&m(t,["metadata"],r);const i=g(e,["done"]);null!=i&&m(t,["done"],i);const o=g(e,["error"]);null!=o&&m(t,["error"],o);const s=g(e,["response"]);return null!=s&&m(t,["response"],function(e){const t={},n=g(e,["videos"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>function(e){const t={},n=g(e,["_self"]);null!=n&&m(t,["video"],function(e){const t={},n=g(e,["gcsUri"]);null!=n&&m(t,["uri"],n);const r=g(e,["bytesBase64Encoded"]);null!=r&&m(t,["videoBytes"],v(r));const i=g(e,["mimeType"]);null!=i&&m(t,["mimeType"],i);return t}(n));return t}(e)))),m(t,["generatedVideos"],e)}const r=g(e,["raiMediaFilteredCount"]);null!=r&&m(t,["raiMediaFilteredCount"],r);const i=g(e,["raiMediaFilteredReasons"]);null!=i&&m(t,["raiMediaFilteredReasons"],i);return t}(s)),t}function w(e){const t={},n=g(e,["name"]);null!=n&&m(t,["name"],n);const r=g(e,["metadata"]);null!=r&&m(t,["metadata"],r);const i=g(e,["done"]);null!=i&&m(t,["done"],i);const o=g(e,["error"]);null!=o&&m(t,["error"],o);const s=g(e,["response"]);return null!=s&&m(t,["response"],function(e){const t={},n=g(e,["sdkHttpResponse"]);null!=n&&m(t,["sdkHttpResponse"],n);const r=g(e,["parent"]);null!=r&&m(t,["parent"],r);const i=g(e,["documentName"]);null!=i&&m(t,["documentName"],i);return t}(s)),t}function S(e){const t={},n=g(e,["name"]);null!=n&&m(t,["name"],n);const r=g(e,["metadata"]);null!=r&&m(t,["metadata"],r);const i=g(e,["done"]);null!=i&&m(t,["done"],i);const o=g(e,["error"]);null!=o&&m(t,["error"],o);const s=g(e,["response"]);return null!=s&&m(t,["response"],function(e){const t={},n=g(e,["sdkHttpResponse"]);null!=n&&m(t,["sdkHttpResponse"],n);const r=g(e,["parent"]);null!=r&&m(t,["parent"],r);const i=g(e,["documentName"]);null!=i&&m(t,["documentName"],i);return t}(s)),t}var _,T,C,I,A,N,x,k,O,R,D,P,M,L,U,F,j,V,q,B,H,G,z,W,K,J,Y,Q,X,$,Z,ee,te,ne,re,ie,oe,se,ae,le,ue,ce,de,he,fe,pe,me,ge,ye,ve,be,Ee,we,Se,_e,Te;!function(e){e.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",e.OUTCOME_OK="OUTCOME_OK",e.OUTCOME_FAILED="OUTCOME_FAILED",e.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"}(_||(_={})),function(e){e.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",e.PYTHON="PYTHON"}(T||(T={})),function(e){e.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",e.SILENT="SILENT",e.WHEN_IDLE="WHEN_IDLE",e.INTERRUPT="INTERRUPT"}(C||(C={})),function(e){e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.STRING="STRING",e.NUMBER="NUMBER",e.INTEGER="INTEGER",e.BOOLEAN="BOOLEAN",e.ARRAY="ARRAY",e.OBJECT="OBJECT",e.NULL="NULL"}(I||(I={})),function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"}(A||(A={})),function(e){e.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",e.SIMPLE_SEARCH="SIMPLE_SEARCH",e.ELASTIC_SEARCH="ELASTIC_SEARCH"}(N||(N={})),function(e){e.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",e.NO_AUTH="NO_AUTH",e.API_KEY_AUTH="API_KEY_AUTH",e.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",e.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",e.OAUTH="OAUTH",e.OIDC_AUTH="OIDC_AUTH"}(x||(x={})),function(e){e.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",e.HTTP_IN_QUERY="HTTP_IN_QUERY",e.HTTP_IN_HEADER="HTTP_IN_HEADER",e.HTTP_IN_PATH="HTTP_IN_PATH",e.HTTP_IN_BODY="HTTP_IN_BODY",e.HTTP_IN_COOKIE="HTTP_IN_COOKIE"}(k||(k={})),function(e){e.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",e.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",e.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",e.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"}(O||(O={})),function(e){e.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",e.LOW="LOW",e.HIGH="HIGH"}(R||(R={})),function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",e.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",e.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",e.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",e.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"}(D||(D={})),function(e){e.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",e.SEVERITY="SEVERITY",e.PROBABILITY="PROBABILITY"}(P||(P={})),function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE",e.OFF="OFF"}(M||(M={})),function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.IMAGE_SAFETY="IMAGE_SAFETY",e.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",e.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",e.NO_IMAGE="NO_IMAGE"}(L||(L={})),function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"}(U||(U={})),function(e){e.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",e.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",e.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",e.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",e.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"}(F||(F={})),function(e){e.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",e.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",e.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",e.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",e.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"}(j||(j={})),function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.IMAGE_SAFETY="IMAGE_SAFETY",e.MODEL_ARMOR="MODEL_ARMOR",e.JAILBREAK="JAILBREAK"}(V||(V={})),function(e){e.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",e.ON_DEMAND="ON_DEMAND",e.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"}(q||(q={})),function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.AUDIO="AUDIO"}(B||(B={})),function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"}(H||(H={})),function(e){e.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",e.TUNING_MODE_FULL="TUNING_MODE_FULL",e.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"}(G||(G={})),function(e){e.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",e.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",e.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",e.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",e.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",e.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",e.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"}(z||(z={})),function(e){e.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",e.JOB_STATE_QUEUED="JOB_STATE_QUEUED",e.JOB_STATE_PENDING="JOB_STATE_PENDING",e.JOB_STATE_RUNNING="JOB_STATE_RUNNING",e.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",e.JOB_STATE_FAILED="JOB_STATE_FAILED",e.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",e.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",e.JOB_STATE_PAUSED="JOB_STATE_PAUSED",e.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",e.JOB_STATE_UPDATING="JOB_STATE_UPDATING",e.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"}(W||(W={})),function(e){e.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",e.TUNING_TASK_I2V="TUNING_TASK_I2V",e.TUNING_TASK_T2V="TUNING_TASK_T2V",e.TUNING_TASK_R2V="TUNING_TASK_R2V"}(K||(K={})),function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"}(J||(J={})),function(e){e.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",e.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",e.BALANCED="BALANCED",e.PRIORITIZE_COST="PRIORITIZE_COST"}(Y||(Y={})),function(e){e.UNSPECIFIED="UNSPECIFIED",e.BLOCKING="BLOCKING",e.NON_BLOCKING="NON_BLOCKING"}(Q||(Q={})),function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"}(X||(X={})),function(e){e.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",e.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"}($||($={})),function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE",e.VALIDATED="VALIDATED"}(Z||(Z={})),function(e){e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"}(ee||(ee={})),function(e){e.DONT_ALLOW="DONT_ALLOW",e.ALLOW_ADULT="ALLOW_ADULT",e.ALLOW_ALL="ALLOW_ALL"}(te||(te={})),function(e){e.auto="auto",e.en="en",e.ja="ja",e.ko="ko",e.hi="hi",e.zh="zh",e.pt="pt",e.es="es"}(ne||(ne={})),function(e){e.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",e.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",e.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",e.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",e.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"}(re||(re={})),function(e){e.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",e.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",e.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",e.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"}(ie||(ie={})),function(e){e.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",e.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",e.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",e.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"}(oe||(oe={})),function(e){e.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",e.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",e.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",e.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",e.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",e.EDIT_MODE_STYLE="EDIT_MODE_STYLE",e.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",e.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"}(se||(se={})),function(e){e.FOREGROUND="FOREGROUND",e.BACKGROUND="BACKGROUND",e.PROMPT="PROMPT",e.SEMANTIC="SEMANTIC",e.INTERACTIVE="INTERACTIVE"}(ae||(ae={})),function(e){e.ASSET="ASSET",e.STYLE="STYLE"}(le||(le={})),function(e){e.INSERT="INSERT",e.REMOVE="REMOVE",e.REMOVE_STATIC="REMOVE_STATIC",e.OUTPAINT="OUTPAINT"}(ue||(ue={})),function(e){e.OPTIMIZED="OPTIMIZED",e.LOSSLESS="LOSSLESS"}(ce||(ce={})),function(e){e.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",e.PREFERENCE_TUNING="PREFERENCE_TUNING"}(de||(de={})),function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.STATE_PENDING="STATE_PENDING",e.STATE_ACTIVE="STATE_ACTIVE",e.STATE_FAILED="STATE_FAILED"}(he||(he={})),function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.PROCESSING="PROCESSING",e.ACTIVE="ACTIVE",e.FAILED="FAILED"}(fe||(fe={})),function(e){e.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",e.UPLOADED="UPLOADED",e.GENERATED="GENERATED"}(pe||(pe={})),function(e){e.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.RESPONSE_REJECTED="RESPONSE_REJECTED",e.NEED_MORE_INPUT="NEED_MORE_INPUT"}(me||(me={})),function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.VIDEO="VIDEO",e.AUDIO="AUDIO",e.DOCUMENT="DOCUMENT"}(ge||(ge={})),function(e){e.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",e.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",e.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"}(ye||(ye={})),function(e){e.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",e.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",e.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"}(ve||(ve={})),function(e){e.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",e.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",e.NO_INTERRUPTION="NO_INTERRUPTION"}(be||(be={})),function(e){e.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",e.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",e.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"}(Ee||(Ee={})),function(e){e.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",e.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",e.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",e.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",e.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",e.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",e.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",e.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",e.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",e.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",e.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",e.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",e.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"}(we||(we={})),function(e){e.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",e.QUALITY="QUALITY",e.DIVERSITY="DIVERSITY",e.VOCALIZATION="VOCALIZATION"}(Se||(Se={})),function(e){e.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",e.PLAY="PLAY",e.PAUSE="PAUSE",e.STOP="STOP",e.RESET_CONTEXT="RESET_CONTEXT"}(_e||(_e={}));class Ce{constructor(e){const t={};for(const n of e.headers.entries())t[n[0]]=n[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class Ie{get text(){var e,t,n,r,i,o,s,a;if(0===(null===(r=null===(n=null===(t=null===(e=this.candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content)||void 0===n?void 0:n.parts)||void 0===r?void 0:r.length))return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let l="",u=!1;const c=[];for(const d of null!==(a=null===(s=null===(o=null===(i=this.candidates)||void 0===i?void 0:i[0])||void 0===o?void 0:o.content)||void 0===s?void 0:s.parts)&&void 0!==a?a:[]){for(const[e,t]of Object.entries(d))"text"===e||"thought"===e||"thoughtSignature"===e||null===t&&void 0===t||c.push(e);if("string"===typeof d.text){if("boolean"===typeof d.thought&&d.thought)continue;u=!0,l+=d.text}}return c.length>0&&console.warn("there are non-text parts ".concat(c," in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.")),u?l:void 0}get data(){var e,t,n,r,i,o,s,a;if(0===(null===(r=null===(n=null===(t=null===(e=this.candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content)||void 0===n?void 0:n.parts)||void 0===r?void 0:r.length))return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let l="";const u=[];for(const c of null!==(a=null===(s=null===(o=null===(i=this.candidates)||void 0===i?void 0:i[0])||void 0===o?void 0:o.content)||void 0===s?void 0:s.parts)&&void 0!==a?a:[]){for(const[e,t]of Object.entries(c))"inlineData"===e||null===t&&void 0===t||u.push(e);c.inlineData&&"string"===typeof c.inlineData.data&&(l+=atob(c.inlineData.data))}return u.length>0&&console.warn("there are non-data parts ".concat(u," in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.")),l.length>0?btoa(l):void 0}get functionCalls(){var e,t,n,r,i,o,s,a;if(0===(null===(r=null===(n=null===(t=null===(e=this.candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content)||void 0===n?void 0:n.parts)||void 0===r?void 0:r.length))return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const l=null===(a=null===(s=null===(o=null===(i=this.candidates)||void 0===i?void 0:i[0])||void 0===o?void 0:o.content)||void 0===s?void 0:s.parts)||void 0===a?void 0:a.filter((e=>e.functionCall)).map((e=>e.functionCall)).filter((e=>void 0!==e));return 0!==(null===l||void 0===l?void 0:l.length)?l:void 0}get executableCode(){var e,t,n,r,i,o,s,a,l;if(0===(null===(r=null===(n=null===(t=null===(e=this.candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content)||void 0===n?void 0:n.parts)||void 0===r?void 0:r.length))return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const u=null===(a=null===(s=null===(o=null===(i=this.candidates)||void 0===i?void 0:i[0])||void 0===o?void 0:o.content)||void 0===s?void 0:s.parts)||void 0===a?void 0:a.filter((e=>e.executableCode)).map((e=>e.executableCode)).filter((e=>void 0!==e));return 0!==(null===u||void 0===u?void 0:u.length)?null===(l=null===u||void 0===u?void 0:u[0])||void 0===l?void 0:l.code:void 0}get codeExecutionResult(){var e,t,n,r,i,o,s,a,l;if(0===(null===(r=null===(n=null===(t=null===(e=this.candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content)||void 0===n?void 0:n.parts)||void 0===r?void 0:r.length))return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const u=null===(a=null===(s=null===(o=null===(i=this.candidates)||void 0===i?void 0:i[0])||void 0===o?void 0:o.content)||void 0===s?void 0:s.parts)||void 0===a?void 0:a.filter((e=>e.codeExecutionResult)).map((e=>e.codeExecutionResult)).filter((e=>void 0!==e));return 0!==(null===u||void 0===u?void 0:u.length)?null===(l=null===u||void 0===u?void 0:u[0])||void 0===l?void 0:l.output:void 0}}class Ae{}class Ne{}class xe{}class ke{}class Oe{}class Re{}class De{}class Pe{}class Me{}class Le{}class Ue{_fromAPIResponse(e){let{apiResponse:t,_isVertexAI:n}=e;const r=new Ue;let i;const o=t;return i=n?E(o):b(o),Object.assign(r,i),r}}class Fe{}class je{}class Ve{}class qe{}class Be{}class He{}class Ge{_fromAPIResponse(e){let{apiResponse:t,_isVertexAI:n}=e;const r=new Ge,i=w(t);return Object.assign(r,i),r}}class ze{}class We{}class Ke{}class Je{}class Ye{get text(){var e,t,n;let r="",i=!1;const o=[];for(const s of null!==(n=null===(t=null===(e=this.serverContent)||void 0===e?void 0:e.modelTurn)||void 0===t?void 0:t.parts)&&void 0!==n?n:[]){for(const[e,t]of Object.entries(s))"text"!==e&&"thought"!==e&&null!==t&&o.push(e);if("string"===typeof s.text){if("boolean"===typeof s.thought&&s.thought)continue;i=!0,r+=s.text}}return o.length>0&&console.warn("there are non-text parts ".concat(o," in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.")),i?r:void 0}get data(){var e,t,n;let r="";const i=[];for(const o of null!==(n=null===(t=null===(e=this.serverContent)||void 0===e?void 0:e.modelTurn)||void 0===t?void 0:t.parts)&&void 0!==n?n:[]){for(const[e,t]of Object.entries(o))"inlineData"!==e&&null!==t&&i.push(e);o.inlineData&&"string"===typeof o.inlineData.data&&(r+=atob(o.inlineData.data))}return i.length>0&&console.warn("there are non-data parts ".concat(i," in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.")),r.length>0?btoa(r):void 0}}class Qe{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Xe{_fromAPIResponse(e){let{apiResponse:t,_isVertexAI:n}=e;const r=new Xe,i=S(t);return Object.assign(r,i),r}}function $e(e,t){if(!t||"string"!==typeof t)throw new Error("model is required and must be a string");if(t.includes("..")||t.includes("?")||t.includes("&"))throw new Error("invalid model parameter");if(e.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const e=t.split("/",2);return"publishers/".concat(e[0],"/models/").concat(e[1])}return"publishers/google/models/".concat(t)}return t.startsWith("models/")||t.startsWith("tunedModels/")?t:"models/".concat(t)}function Ze(e,t){const n=$e(e,t);return n?n.startsWith("publishers/")&&e.isVertexAI()?"projects/".concat(e.getProject(),"/locations/").concat(e.getLocation(),"/").concat(n):n.startsWith("models/")&&e.isVertexAI()?"projects/".concat(e.getProject(),"/locations/").concat(e.getLocation(),"/publishers/google/").concat(n):n:""}function et(e){return Array.isArray(e)?e.map((e=>tt(e))):[tt(e)]}function tt(e){if("object"===typeof e&&null!==e)return e;throw new Error("Could not parse input as Blob. Unsupported blob type: ".concat(typeof e))}function nt(e){const t=tt(e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error("Unsupported mime type: ".concat(t.mimeType))}function rt(e){const t=tt(e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error("Unsupported mime type: ".concat(t.mimeType))}function it(e){if(null===e||void 0===e)throw new Error("PartUnion is required");if("object"===typeof e)return e;if("string"===typeof e)return{text:e};throw new Error("Unsupported part type: ".concat(typeof e))}function ot(e){if(null===e||void 0===e||Array.isArray(e)&&0===e.length)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map((e=>it(e))):[it(e)]}function st(e){return null!==e&&void 0!==e&&"object"===typeof e&&"parts"in e&&Array.isArray(e.parts)}function at(e){return null!==e&&void 0!==e&&"object"===typeof e&&"functionCall"in e}function lt(e){return null!==e&&void 0!==e&&"object"===typeof e&&"functionResponse"in e}function ut(e){if(null===e||void 0===e)throw new Error("ContentUnion is required");return st(e)?e:{role:"user",parts:ot(e)}}function ct(e,t){if(!t)return[];if(e.isVertexAI()&&Array.isArray(t))return t.flatMap((e=>{const t=ut(e);return t.parts&&t.parts.length>0&&void 0!==t.parts[0].text?[t.parts[0].text]:[]}));if(e.isVertexAI()){const e=ut(t);return e.parts&&e.parts.length>0&&void 0!==e.parts[0].text?[e.parts[0].text]:[]}return Array.isArray(t)?t.map((e=>ut(e))):[ut(t)]}function dt(e){if(null===e||void 0===e||Array.isArray(e)&&0===e.length)throw new Error("contents are required");if(!Array.isArray(e)){if(at(e)||lt(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[ut(e)]}const t=[],n=[],r=st(e[0]);for(const i of e){const e=st(i);if(e!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(e)t.push(i);else{if(at(i)||lt(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return r||t.push({role:"user",parts:ot(n)}),t}function ht(e){const t={},n=["items"],r=["anyOf"],i=["properties"];if(e.type&&e.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=e.anyOf;null!=o&&2==o.length&&("null"===o[0].type?(t.nullable=!0,e=o[1]):"null"===o[1].type&&(t.nullable=!0,e=o[0])),e.type instanceof Array&&function(e,t){e.includes("null")&&(t.nullable=!0);const n=e.filter((e=>"null"!==e));if(1===n.length)t.type=Object.values(I).includes(n[0].toUpperCase())?n[0].toUpperCase():I.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const e of n)t.anyOf.push({type:Object.values(I).includes(e.toUpperCase())?e.toUpperCase():I.TYPE_UNSPECIFIED})}}(e.type,t);for(const[s,a]of Object.entries(e))if(null!=a)if("type"==s){if("null"===a)throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;t.type=Object.values(I).includes(a.toUpperCase())?a.toUpperCase():I.TYPE_UNSPECIFIED}else if(n.includes(s))t[s]=ht(a);else if(r.includes(s)){const e=[];for(const n of a)"null"!=n.type?e.push(ht(n)):t.nullable=!0;t[s]=e}else if(i.includes(s)){const e={};for(const[t,n]of Object.entries(a))e[t]=ht(n);t[s]=e}else{if("additionalProperties"===s)continue;t[s]=a}return t}function ft(e){return ht(e)}function pt(e){if("object"===typeof e)return e;if("string"===typeof e)return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error("Unsupported speechConfig type: ".concat(typeof e))}function mt(e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function gt(e){if(e.functionDeclarations)for(const t of e.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=ht(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=ht(t.response));return e}function yt(e){if(void 0===e||null===e)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");const t=[];for(const n of e)t.push(n);return t}function vt(e,t){if("string"!==typeof t)throw new Error("name must be a string");return function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const i=!t.startsWith("".concat(n,"/"))&&t.split("/").length===r;return e.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?"projects/".concat(e.getProject(),"/").concat(t):t.startsWith("".concat(n,"/"))?"projects/".concat(e.getProject(),"/locations/").concat(e.getLocation(),"/").concat(t):i?"projects/".concat(e.getProject(),"/locations/").concat(e.getLocation(),"/").concat(n,"/").concat(t):t:i?"".concat(n,"/").concat(t):t}(e,t,"cachedContents")}function bt(e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function Et(e){return v(e)}function wt(e){var t;let n;var r;if(null!==(r=e)&&void 0!==r&&"object"===typeof r&&"name"in r&&(n=e.name),(!function(e){return null!==e&&void 0!==e&&"object"===typeof e&&"uri"in e}(e)||(n=e.uri,void 0!==n))&&(!function(e){return null!==e&&void 0!==e&&"object"===typeof e&&"video"in e}(e)||(n=null===(t=e.video)||void 0===t?void 0:t.uri,void 0!==n))){if("string"===typeof e&&(n=e),void 0===n)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const e=n.split("files/")[1].match(/[a-z0-9]+/);if(null===e)throw new Error("Could not extract file name from URI ".concat(n));n=e[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function St(e,t){let n;return n=e.isVertexAI()?t?"publishers/google/models":"models":t?"models":"tunedModels",n}function _t(e){for(const r of["models","tunedModels","publisherModels"])if(n=r,null!==(t=e)&&"object"===typeof t&&n in t)return e[r];var t,n;return[]}function Tt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};n.outputSchema&&(r.responseJsonSchema=n.outputSchema),t.behavior&&(r.behavior=t.behavior);return{functionDeclarations:[r]}}function Ct(e,t){let n;if("string"===typeof t)if(e.isVertexAI())if(t.startsWith("gs://"))n={format:"jsonl",gcsUri:[t]};else{if(!t.startsWith("bq://"))throw new Error("Unsupported string source for Vertex AI: ".concat(t));n={format:"bigquery",bigqueryUri:t}}else{if(!t.startsWith("files/"))throw new Error("Unsupported string source for Gemini API: ".concat(t));n={fileName:t}}else if(Array.isArray(t)){if(e.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:t}}else n=t;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,i=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(e.isVertexAI()){if(i>0||1!==r)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||1!==i)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function It(e){if("object"!==typeof e||null===e)return{};const t=e,n=t.inlinedResponses;if("object"!==typeof n||null===n)return e;const r=n.inlinedResponses;if(!Array.isArray(r)||0===r.length)return e;let i=!1;for(const o of r){if("object"!==typeof o||null===o)continue;const e=o.response;if("object"!==typeof e||null===e)continue;if(void 0!==e.embedding){i=!0;break}}return i&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),e}function At(e,t){const n=t;if(!e.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error("Invalid batch job name: ".concat(n,"."))}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error("Invalid batch job name: ".concat(n,"."))}function Nt(e){return"BATCH_STATE_UNSPECIFIED"===e?"JOB_STATE_UNSPECIFIED":"BATCH_STATE_PENDING"===e?"JOB_STATE_PENDING":"BATCH_STATE_RUNNING"===e?"JOB_STATE_RUNNING":"BATCH_STATE_SUCCEEDED"===e?"JOB_STATE_SUCCEEDED":"BATCH_STATE_FAILED"===e?"JOB_STATE_FAILED":"BATCH_STATE_CANCELLED"===e?"JOB_STATE_CANCELLED":"BATCH_STATE_EXPIRED"===e?"JOB_STATE_EXPIRED":e}function xt(e){const t={},n=g(e,["responsesFile"]);null!=n&&m(t,["fileName"],n);const r=g(e,["inlinedResponses","inlinedResponses"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map((e=>function(e){const t={},n=g(e,["response"]);null!=n&&m(t,["response"],function(e){const t={},n=g(e,["sdkHttpResponse"]);null!=n&&m(t,["sdkHttpResponse"],n);const r=g(e,["candidates"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map((e=>function(e){const t={},n=g(e,["content"]);null!=n&&m(t,["content"],n);const r=g(e,["citationMetadata"]);null!=r&&m(t,["citationMetadata"],function(e){const t={},n=g(e,["citationSources"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>e))),m(t,["citations"],e)}return t}(r));const i=g(e,["tokenCount"]);null!=i&&m(t,["tokenCount"],i);const o=g(e,["finishReason"]);null!=o&&m(t,["finishReason"],o);const s=g(e,["avgLogprobs"]);null!=s&&m(t,["avgLogprobs"],s);const a=g(e,["groundingMetadata"]);null!=a&&m(t,["groundingMetadata"],a);const l=g(e,["index"]);null!=l&&m(t,["index"],l);const u=g(e,["logprobsResult"]);null!=u&&m(t,["logprobsResult"],u);const c=g(e,["safetyRatings"]);if(null!=c){let e=c;Array.isArray(e)&&(e=e.map((e=>e))),m(t,["safetyRatings"],e)}const d=g(e,["urlContextMetadata"]);null!=d&&m(t,["urlContextMetadata"],d);return t}(e)))),m(t,["candidates"],e)}const i=g(e,["modelVersion"]);null!=i&&m(t,["modelVersion"],i);const o=g(e,["promptFeedback"]);null!=o&&m(t,["promptFeedback"],o);const s=g(e,["responseId"]);null!=s&&m(t,["responseId"],s);const a=g(e,["usageMetadata"]);null!=a&&m(t,["usageMetadata"],a);return t}(n));const r=g(e,["error"]);null!=r&&m(t,["error"],r);return t}(e)))),m(t,["inlinedResponses"],e)}const i=g(e,["inlinedEmbedContentResponses","inlinedResponses"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map((e=>e))),m(t,["inlinedEmbedContentResponses"],e)}return t}function kt(e){const t={},n=g(e,["name"]);null!=n&&m(t,["name"],n);const r=g(e,["metadata","displayName"]);null!=r&&m(t,["displayName"],r);const i=g(e,["metadata","state"]);null!=i&&m(t,["state"],Nt(i));const o=g(e,["metadata","createTime"]);null!=o&&m(t,["createTime"],o);const s=g(e,["metadata","endTime"]);null!=s&&m(t,["endTime"],s);const a=g(e,["metadata","updateTime"]);null!=a&&m(t,["updateTime"],a);const l=g(e,["metadata","model"]);null!=l&&m(t,["model"],l);const u=g(e,["metadata","output"]);return null!=u&&m(t,["dest"],xt(It(u))),t}function Ot(e){const t={},n=g(e,["name"]);null!=n&&m(t,["name"],n);const r=g(e,["displayName"]);null!=r&&m(t,["displayName"],r);const i=g(e,["state"]);null!=i&&m(t,["state"],Nt(i));const o=g(e,["error"]);null!=o&&m(t,["error"],o);const s=g(e,["createTime"]);null!=s&&m(t,["createTime"],s);const a=g(e,["startTime"]);null!=a&&m(t,["startTime"],a);const l=g(e,["endTime"]);null!=l&&m(t,["endTime"],l);const u=g(e,["updateTime"]);null!=u&&m(t,["updateTime"],u);const c=g(e,["model"]);null!=c&&m(t,["model"],c);const d=g(e,["inputConfig"]);null!=d&&m(t,["src"],function(e){const t={},n=g(e,["instancesFormat"]);null!=n&&m(t,["format"],n);const r=g(e,["gcsSource","uris"]);null!=r&&m(t,["gcsUri"],r);const i=g(e,["bigquerySource","inputUri"]);null!=i&&m(t,["bigqueryUri"],i);return t}(d));const h=g(e,["outputConfig"]);null!=h&&m(t,["dest"],function(e){const t={},n=g(e,["predictionsFormat"]);null!=n&&m(t,["format"],n);const r=g(e,["gcsDestination","outputUriPrefix"]);null!=r&&m(t,["gcsUri"],r);const i=g(e,["bigqueryDestination","outputUri"]);return null!=i&&m(t,["bigqueryUri"],i),t}(It(h)));const f=g(e,["completionStats"]);return null!=f&&m(t,["completionStats"],f),t}function Rt(e,t){const n={};if(void 0!==g(t,["format"]))throw new Error("format parameter is not supported in Gemini API.");if(void 0!==g(t,["gcsUri"]))throw new Error("gcsUri parameter is not supported in Gemini API.");if(void 0!==g(t,["bigqueryUri"]))throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=g(t,["fileName"]);null!=r&&m(n,["fileName"],r);const i=g(t,["inlinedRequests"]);if(null!=i){let t=i;Array.isArray(t)&&(t=t.map((t=>function(e,t){const n={},r=g(t,["model"]);null!=r&&m(n,["request","model"],$e(e,r));const i=g(t,["contents"]);if(null!=i){let e=dt(i);Array.isArray(e)&&(e=e.map((e=>Dt(e)))),m(n,["request","contents"],e)}const o=g(t,["metadata"]);null!=o&&m(n,["metadata"],o);const s=g(t,["config"]);null!=s&&m(n,["request","generationConfig"],function(e,t,n){const r={},i=g(t,["systemInstruction"]);void 0!==n&&null!=i&&m(n,["systemInstruction"],Dt(ut(i)));const o=g(t,["temperature"]);null!=o&&m(r,["temperature"],o);const s=g(t,["topP"]);null!=s&&m(r,["topP"],s);const a=g(t,["topK"]);null!=a&&m(r,["topK"],a);const l=g(t,["candidateCount"]);null!=l&&m(r,["candidateCount"],l);const u=g(t,["maxOutputTokens"]);null!=u&&m(r,["maxOutputTokens"],u);const c=g(t,["stopSequences"]);null!=c&&m(r,["stopSequences"],c);const d=g(t,["responseLogprobs"]);null!=d&&m(r,["responseLogprobs"],d);const h=g(t,["logprobs"]);null!=h&&m(r,["logprobs"],h);const f=g(t,["presencePenalty"]);null!=f&&m(r,["presencePenalty"],f);const p=g(t,["frequencyPenalty"]);null!=p&&m(r,["frequencyPenalty"],p);const y=g(t,["seed"]);null!=y&&m(r,["seed"],y);const v=g(t,["responseMimeType"]);null!=v&&m(r,["responseMimeType"],v);const b=g(t,["responseSchema"]);null!=b&&m(r,["responseSchema"],ft(b));const E=g(t,["responseJsonSchema"]);null!=E&&m(r,["responseJsonSchema"],E);if(void 0!==g(t,["routingConfig"]))throw new Error("routingConfig parameter is not supported in Gemini API.");if(void 0!==g(t,["modelSelectionConfig"]))throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const w=g(t,["safetySettings"]);if(void 0!==n&&null!=w){let e=w;Array.isArray(e)&&(e=e.map((e=>function(e){const t={},n=g(e,["category"]);null!=n&&m(t,["category"],n);if(void 0!==g(e,["method"]))throw new Error("method parameter is not supported in Gemini API.");const r=g(e,["threshold"]);null!=r&&m(t,["threshold"],r);return t}(e)))),m(n,["safetySettings"],e)}const S=g(t,["tools"]);if(void 0!==n&&null!=S){let e=yt(S);Array.isArray(e)&&(e=e.map((e=>function(e){const t={},n=g(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>e))),m(t,["functionDeclarations"],e)}if(void 0!==g(e,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");const r=g(e,["googleSearchRetrieval"]);null!=r&&m(t,["googleSearchRetrieval"],r);const i=g(e,["computerUse"]);null!=i&&m(t,["computerUse"],i);const o=g(e,["fileSearch"]);null!=o&&m(t,["fileSearch"],o);const s=g(e,["codeExecution"]);null!=s&&m(t,["codeExecution"],s);if(void 0!==g(e,["enterpriseWebSearch"]))throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=g(e,["googleMaps"]);null!=a&&m(t,["googleMaps"],function(e){const t={};if(void 0!==g(e,["authConfig"]))throw new Error("authConfig parameter is not supported in Gemini API.");const n=g(e,["enableWidget"]);null!=n&&m(t,["enableWidget"],n);return t}(a));const l=g(e,["googleSearch"]);null!=l&&m(t,["googleSearch"],function(e){const t={};if(void 0!==g(e,["excludeDomains"]))throw new Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==g(e,["blockingConfidence"]))throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=g(e,["timeRangeFilter"]);null!=n&&m(t,["timeRangeFilter"],n);return t}(l));const u=g(e,["urlContext"]);null!=u&&m(t,["urlContext"],u);return t}(gt(e))))),m(n,["tools"],e)}const _=g(t,["toolConfig"]);void 0!==n&&null!=_&&m(n,["toolConfig"],function(e){const t={},n=g(e,["functionCallingConfig"]);null!=n&&m(t,["functionCallingConfig"],function(e){const t={},n=g(e,["mode"]);null!=n&&m(t,["mode"],n);const r=g(e,["allowedFunctionNames"]);null!=r&&m(t,["allowedFunctionNames"],r);if(void 0!==g(e,["streamFunctionCallArguments"]))throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}(n));const r=g(e,["retrievalConfig"]);null!=r&&m(t,["retrievalConfig"],r);return t}(_));if(void 0!==g(t,["labels"]))throw new Error("labels parameter is not supported in Gemini API.");const T=g(t,["cachedContent"]);void 0!==n&&null!=T&&m(n,["cachedContent"],vt(e,T));const C=g(t,["responseModalities"]);null!=C&&m(r,["responseModalities"],C);const I=g(t,["mediaResolution"]);null!=I&&m(r,["mediaResolution"],I);const A=g(t,["speechConfig"]);null!=A&&m(r,["speechConfig"],pt(A));if(void 0!==g(t,["audioTimestamp"]))throw new Error("audioTimestamp parameter is not supported in Gemini API.");const N=g(t,["thinkingConfig"]);null!=N&&m(r,["thinkingConfig"],N);const x=g(t,["imageConfig"]);null!=x&&m(r,["imageConfig"],function(e){const t={},n=g(e,["aspectRatio"]);null!=n&&m(t,["aspectRatio"],n);const r=g(e,["imageSize"]);null!=r&&m(t,["imageSize"],r);if(void 0!==g(e,["outputMimeType"]))throw new Error("outputMimeType parameter is not supported in Gemini API.");if(void 0!==g(e,["outputCompressionQuality"]))throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}(x));return r}(e,s,g(n,["request"],{})));return n}(e,t)))),m(n,["requests","requests"],t)}return n}function Dt(e){const t={},n=g(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>function(e){const t={},n=g(e,["mediaResolution"]);null!=n&&m(t,["mediaResolution"],n);const r=g(e,["codeExecutionResult"]);null!=r&&m(t,["codeExecutionResult"],r);const i=g(e,["executableCode"]);null!=i&&m(t,["executableCode"],i);const o=g(e,["fileData"]);null!=o&&m(t,["fileData"],function(e){const t={};if(void 0!==g(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const n=g(e,["fileUri"]);null!=n&&m(t,["fileUri"],n);const r=g(e,["mimeType"]);null!=r&&m(t,["mimeType"],r);return t}(o));const s=g(e,["functionCall"]);null!=s&&m(t,["functionCall"],function(e){const t={},n=g(e,["id"]);null!=n&&m(t,["id"],n);const r=g(e,["args"]);null!=r&&m(t,["args"],r);const i=g(e,["name"]);null!=i&&m(t,["name"],i);if(void 0!==g(e,["partialArgs"]))throw new Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==g(e,["willContinue"]))throw new Error("willContinue parameter is not supported in Gemini API.");return t}(s));const a=g(e,["functionResponse"]);null!=a&&m(t,["functionResponse"],a);const l=g(e,["inlineData"]);null!=l&&m(t,["inlineData"],function(e){const t={},n=g(e,["data"]);if(null!=n&&m(t,["data"],n),void 0!==g(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const r=g(e,["mimeType"]);return null!=r&&m(t,["mimeType"],r),t}(l));const u=g(e,["text"]);null!=u&&m(t,["text"],u);const c=g(e,["thought"]);null!=c&&m(t,["thought"],c);const d=g(e,["thoughtSignature"]);null!=d&&m(t,["thoughtSignature"],d);const h=g(e,["videoMetadata"]);null!=h&&m(t,["videoMetadata"],h);return t}(e)))),m(t,["parts"],e)}const r=g(e,["role"]);return null!=r&&m(t,["role"],r),t}function Pt(e,t){const n=g(e,["displayName"]);void 0!==t&&null!=n&&m(t,["displayName"],n);const r=g(e,["dest"]);return void 0!==t&&null!=r&&m(t,["outputConfig"],function(e){const t={},n=g(e,["format"]);null!=n&&m(t,["predictionsFormat"],n);const r=g(e,["gcsUri"]);null!=r&&m(t,["gcsDestination","outputUriPrefix"],r);const i=g(e,["bigqueryUri"]);if(null!=i&&m(t,["bigqueryDestination","outputUri"],i),void 0!==g(e,["fileName"]))throw new Error("fileName parameter is not supported in Vertex AI.");if(void 0!==g(e,["inlinedResponses"]))throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(void 0!==g(e,["inlinedEmbedContentResponses"]))throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}(function(e){if("string"!==typeof e)return e;const t=e;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error("Unsupported destination: ".concat(t))}(r))),{}}function Mt(e,t){const n={},r=g(t,["model"]);null!=r&&m(n,["_url","model"],$e(e,r));const i=g(t,["src"]);null!=i&&m(n,["batch","inputConfig"],Rt(e,Ct(e,i)));const o=g(t,["config"]);return null!=o&&function(e,t){const n=g(e,["displayName"]);if(void 0!==t&&null!=n&&m(t,["batch","displayName"],n),void 0!==g(e,["dest"]))throw new Error("dest parameter is not supported in Gemini API.")}(o,n),n}function Lt(e,t){const n={},r=g(t,["model"]);null!=r&&m(n,["model"],$e(e,r));const i=g(t,["src"]);null!=i&&m(n,["inputConfig"],function(e){const t={},n=g(e,["format"]);null!=n&&m(t,["instancesFormat"],n);const r=g(e,["gcsUri"]);null!=r&&m(t,["gcsSource","uris"],r);const i=g(e,["bigqueryUri"]);if(null!=i&&m(t,["bigquerySource","inputUri"],i),void 0!==g(e,["fileName"]))throw new Error("fileName parameter is not supported in Vertex AI.");if(void 0!==g(e,["inlinedRequests"]))throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}(Ct(e,i)));const o=g(t,["config"]);return null!=o&&Pt(o,n),n}function Ut(e,t){const n={},r=g(t,["model"]);null!=r&&m(n,["_url","model"],$e(e,r));const i=g(t,["src"]);null!=i&&m(n,["batch","inputConfig"],function(e,t){const n={},r=g(t,["fileName"]);null!=r&&m(n,["file_name"],r);const i=g(t,["inlinedRequests"]);null!=i&&m(n,["requests"],function(e,t){const n={},r=g(t,["contents"]);if(null!=r){let t=ct(e,r);Array.isArray(t)&&(t=t.map((e=>e))),m(n,["requests[]","request","content"],t)}const i=g(t,["config"]);null!=i&&(m(n,["_self"],function(e,t){const n={},r=g(e,["taskType"]);void 0!==t&&null!=r&&m(t,["requests[]","taskType"],r);const i=g(e,["title"]);void 0!==t&&null!=i&&m(t,["requests[]","title"],i);const o=g(e,["outputDimensionality"]);void 0!==t&&null!=o&&m(t,["requests[]","outputDimensionality"],o);if(void 0!==g(e,["mimeType"]))throw new Error("mimeType parameter is not supported in Gemini API.");if(void 0!==g(e,["autoTruncate"]))throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}(i,n)),function(e,t){for(const[n,r]of Object.entries(t)){const t=n.split("."),i=r.split("."),o=new Set;let s=-1;for(let e=0;e<t.length;e++)if("*"===t[e]){s=e;break}if(-1!==s&&i.length>s)for(let e=s;e<i.length;e++){const t=i[e];"*"===t||t.endsWith("[]")||t.endsWith("[0]")||o.add(t)}y(e,t,i,0,o)}}(n,{"requests[].*":"requests[].request.*"}));return n}(e,i));return n}(e,i));const o=g(t,["config"]);return null!=o&&function(e,t){const n=g(e,["displayName"]);void 0!==t&&null!=n&&m(t,["batch","displayName"],n)}(o,n),n}function Ft(e){const t={},n=g(e,["config"]);return null!=n&&function(e,t){const n=g(e,["pageSize"]);void 0!==t&&null!=n&&m(t,["_query","pageSize"],n);const r=g(e,["pageToken"]);if(void 0!==t&&null!=r&&m(t,["_query","pageToken"],r),void 0!==g(e,["filter"]))throw new Error("filter parameter is not supported in Gemini API.")}(n,t),t}function jt(e){const t={},n=g(e,["config"]);return null!=n&&function(e,t){const n=g(e,["pageSize"]);void 0!==t&&null!=n&&m(t,["_query","pageSize"],n);const r=g(e,["pageToken"]);void 0!==t&&null!=r&&m(t,["_query","pageToken"],r);const i=g(e,["filter"]);void 0!==t&&null!=i&&m(t,["_query","filter"],i)}(n,t),t}!function(e){e.PAGED_ITEM_BATCH_JOBS="batchJobs",e.PAGED_ITEM_MODELS="models",e.PAGED_ITEM_TUNING_JOBS="tuningJobs",e.PAGED_ITEM_FILES="files",e.PAGED_ITEM_CACHED_CONTENTS="cachedContents",e.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",e.PAGED_ITEM_DOCUMENTS="documents"}(Te||(Te={}));class Vt{constructor(e,t,n,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,n,r)}init(e,t,n){var r,i;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=null===t||void 0===t?void 0:t.sdkHttpResponse,this.idxInternal=0;let o={config:{}};o=n&&0!==Object.keys(n).length?"object"===typeof n?Object.assign({},n):n:{config:{}},o.config&&(o.config.pageToken=t.nextPageToken),this.paramsInternal=o,this.pageInternalSize=null!==(i=null===(r=o.config)||void 0===r?void 0:r.pageSize)&&void 0!==i?i:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength){if(!this.hasNextPage())return{value:void 0,done:!0};await this.nextPage()}const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return void 0!==(null===(e=this.params.config)||void 0===e?void 0:e.pageToken)}}class qt extends f{constructor(e){var t;super(),t=this,this.apiClient=e,this.create=async e=>(this.apiClient.isVertexAI()&&(e.config=this.formatDestination(e.src,e.config)),this.createInternal(e)),this.createEmbeddings=async e=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(e)},this.list=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Vt(Te.PAGED_ITEM_BATCH_JOBS,(e=>t.listInternal(e)),await t.listInternal(e),e)}}createInlinedGenerateContentRequest(e){const t=Mt(this.apiClient,e),n=p("{model}:batchGenerateContent",t._url),r=t.batch.inputConfig.requests,i=r.requests,o=[];for(const s of i){const e=Object.assign({},s);if(e.systemInstruction){const t=e.systemInstruction;delete e.systemInstruction;const n=e.request;n.systemInstruction=t,e.request=n}o.push(e)}return r.requests=o,delete t.config,delete t._url,delete t._query,{path:n,body:t}}getGcsUri(e){return"string"===typeof e?e.startsWith("gs://")?e:void 0:!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0?e.gcsUri[0]:void 0}getBigqueryUri(e){return"string"===typeof e?e.startsWith("bq://")?e:void 0:Array.isArray(e)?void 0:e.bigqueryUri}formatDestination(e,t){const n=t?Object.assign({},t):{},r=Date.now().toString();if(n.displayName||(n.displayName="genaiBatchJob_".concat(r)),void 0===n.dest){const t=this.getGcsUri(e),i=this.getBigqueryUri(e);if(t)t.endsWith(".jsonl")?n.dest="".concat(t.slice(0,-6),"/dest"):n.dest="".concat(t,"_dest_").concat(r);else{if(!i)throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.");n.dest="".concat(i,"_dest_").concat(r)}}return n}async createInternal(e){var t,n,r,i;let o,s="",a={};if(this.apiClient.isVertexAI()){const r=Lt(this.apiClient,e);return s=p("batchPredictionJobs",r._url),a=r._query,delete r._url,delete r._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),o.then((e=>Ot(e)))}{const t=Mt(this.apiClient,e);return s=p("{model}:batchGenerateContent",t._url),a=t._query,delete t._url,delete t._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then((e=>e.json())),o.then((e=>kt(e)))}}async createEmbeddingsInternal(e){var t,n;let r,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=Ut(this.apiClient,e);return i=p("{model}:asyncBatchEmbedContent",s._url),o=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),r.then((e=>kt(e)))}}async get(e){var t,n,r,i;let o,s="",a={};if(this.apiClient.isVertexAI()){const r=function(e,t){const n={},r=g(t,["name"]);return null!=r&&m(n,["_url","name"],At(e,r)),n}(this.apiClient,e);return s=p("batchPredictionJobs/{name}",r._url),a=r._query,delete r._url,delete r._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),o.then((e=>Ot(e)))}{const t=function(e,t){const n={},r=g(t,["name"]);return null!=r&&m(n,["_url","name"],At(e,r)),n}(this.apiClient,e);return s=p("batches/{name}",t._url),a=t._query,delete t._url,delete t._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then((e=>e.json())),o.then((e=>kt(e)))}}async cancel(e){var t,n,r,i;let o="",s={};if(this.apiClient.isVertexAI()){const r=function(e,t){const n={},r=g(t,["name"]);return null!=r&&m(n,["_url","name"],At(e,r)),n}(this.apiClient,e);o=p("batchPredictionJobs/{name}:cancel",r._url),s=r._query,delete r._url,delete r._query,await this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal})}else{const t=function(e,t){const n={},r=g(t,["name"]);return null!=r&&m(n,["_url","name"],At(e,r)),n}(this.apiClient,e);o=p("batches/{name}:cancel",t._url),s=t._query,delete t._url,delete t._query,await this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal})}}async listInternal(e){var t,n,r,i;let o,s="",a={};if(this.apiClient.isVertexAI()){const r=jt(e);return s=p("batchPredictionJobs",r._url),a=r._query,delete r._url,delete r._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),o.then((e=>{const t=function(e){const t={},n=g(e,["sdkHttpResponse"]);null!=n&&m(t,["sdkHttpResponse"],n);const r=g(e,["nextPageToken"]);null!=r&&m(t,["nextPageToken"],r);const i=g(e,["batchPredictionJobs"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map((e=>Ot(e)))),m(t,["batchJobs"],e)}return t}(e),n=new Je;return Object.assign(n,t),n}))}{const t=Ft(e);return s=p("batches",t._url),a=t._query,delete t._url,delete t._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),o.then((e=>{const t=function(e){const t={},n=g(e,["sdkHttpResponse"]);null!=n&&m(t,["sdkHttpResponse"],n);const r=g(e,["nextPageToken"]);null!=r&&m(t,["nextPageToken"],r);const i=g(e,["operations"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map((e=>kt(e)))),m(t,["batchJobs"],e)}return t}(e),n=new Je;return Object.assign(n,t),n}))}}async delete(e){var t,n,r,i;let o,s="",a={};if(this.apiClient.isVertexAI()){const r=function(e,t){const n={},r=g(t,["name"]);return null!=r&&m(n,["_url","name"],At(e,r)),n}(this.apiClient,e);return s=p("batchPredictionJobs/{name}",r._url),a=r._query,delete r._url,delete r._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"DELETE",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),o.then((e=>function(e){const t={},n=g(e,["sdkHttpResponse"]);null!=n&&m(t,["sdkHttpResponse"],n);const r=g(e,["name"]);null!=r&&m(t,["name"],r);const i=g(e,["done"]);null!=i&&m(t,["done"],i);const o=g(e,["error"]);return null!=o&&m(t,["error"],o),t}(e)))}{const t=function(e,t){const n={},r=g(t,["name"]);return null!=r&&m(n,["_url","name"],At(e,r)),n}(this.apiClient,e);return s=p("batches/{name}",t._url),a=t._query,delete t._url,delete t._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"DELETE",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),o.then((e=>function(e){const t={},n=g(e,["sdkHttpResponse"]);null!=n&&m(t,["sdkHttpResponse"],n);const r=g(e,["name"]);null!=r&&m(t,["name"],r);const i=g(e,["done"]);null!=i&&m(t,["done"],i);const o=g(e,["error"]);return null!=o&&m(t,["error"],o),t}(e)))}}}function Bt(e){const t={},n=g(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>function(e){const t={},n=g(e,["mediaResolution"]);null!=n&&m(t,["mediaResolution"],n);const r=g(e,["codeExecutionResult"]);null!=r&&m(t,["codeExecutionResult"],r);const i=g(e,["executableCode"]);null!=i&&m(t,["executableCode"],i);const o=g(e,["fileData"]);null!=o&&m(t,["fileData"],function(e){const t={};if(void 0!==g(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const n=g(e,["fileUri"]);null!=n&&m(t,["fileUri"],n);const r=g(e,["mimeType"]);null!=r&&m(t,["mimeType"],r);return t}(o));const s=g(e,["functionCall"]);null!=s&&m(t,["functionCall"],function(e){const t={},n=g(e,["id"]);null!=n&&m(t,["id"],n);const r=g(e,["args"]);null!=r&&m(t,["args"],r);const i=g(e,["name"]);null!=i&&m(t,["name"],i);if(void 0!==g(e,["partialArgs"]))throw new Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==g(e,["willContinue"]))throw new Error("willContinue parameter is not supported in Gemini API.");return t}(s));const a=g(e,["functionResponse"]);null!=a&&m(t,["functionResponse"],a);const l=g(e,["inlineData"]);null!=l&&m(t,["inlineData"],function(e){const t={},n=g(e,["data"]);if(null!=n&&m(t,["data"],n),void 0!==g(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const r=g(e,["mimeType"]);return null!=r&&m(t,["mimeType"],r),t}(l));const u=g(e,["text"]);null!=u&&m(t,["text"],u);const c=g(e,["thought"]);null!=c&&m(t,["thought"],c);const d=g(e,["thoughtSignature"]);null!=d&&m(t,["thoughtSignature"],d);const h=g(e,["videoMetadata"]);null!=h&&m(t,["videoMetadata"],h);return t}(e)))),m(t,["parts"],e)}const r=g(e,["role"]);return null!=r&&m(t,["role"],r),t}function Ht(e,t){const n=g(e,["ttl"]);void 0!==t&&null!=n&&m(t,["ttl"],n);const r=g(e,["expireTime"]);void 0!==t&&null!=r&&m(t,["expireTime"],r);const i=g(e,["displayName"]);void 0!==t&&null!=i&&m(t,["displayName"],i);const o=g(e,["contents"]);if(void 0!==t&&null!=o){let e=dt(o);Array.isArray(e)&&(e=e.map((e=>Bt(e)))),m(t,["contents"],e)}const s=g(e,["systemInstruction"]);void 0!==t&&null!=s&&m(t,["systemInstruction"],Bt(ut(s)));const a=g(e,["tools"]);if(void 0!==t&&null!=a){let e=a;Array.isArray(e)&&(e=e.map((e=>function(e){const t={},n=g(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>e))),m(t,["functionDeclarations"],e)}if(void 0!==g(e,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");const r=g(e,["googleSearchRetrieval"]);null!=r&&m(t,["googleSearchRetrieval"],r);const i=g(e,["computerUse"]);null!=i&&m(t,["computerUse"],i);const o=g(e,["fileSearch"]);null!=o&&m(t,["fileSearch"],o);const s=g(e,["codeExecution"]);null!=s&&m(t,["codeExecution"],s);if(void 0!==g(e,["enterpriseWebSearch"]))throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=g(e,["googleMaps"]);null!=a&&m(t,["googleMaps"],function(e){const t={};if(void 0!==g(e,["authConfig"]))throw new Error("authConfig parameter is not supported in Gemini API.");const n=g(e,["enableWidget"]);null!=n&&m(t,["enableWidget"],n);return t}(a));const l=g(e,["googleSearch"]);null!=l&&m(t,["googleSearch"],function(e){const t={};if(void 0!==g(e,["excludeDomains"]))throw new Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==g(e,["blockingConfidence"]))throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=g(e,["timeRangeFilter"]);null!=n&&m(t,["timeRangeFilter"],n);return t}(l));const u=g(e,["urlContext"]);null!=u&&m(t,["urlContext"],u);return t}(e)))),m(t,["tools"],e)}const l=g(e,["toolConfig"]);if(void 0!==t&&null!=l&&m(t,["toolConfig"],function(e){const t={},n=g(e,["functionCallingConfig"]);null!=n&&m(t,["functionCallingConfig"],function(e){const t={},n=g(e,["mode"]);null!=n&&m(t,["mode"],n);const r=g(e,["allowedFunctionNames"]);null!=r&&m(t,["allowedFunctionNames"],r);if(void 0!==g(e,["streamFunctionCallArguments"]))throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}(n));const r=g(e,["retrievalConfig"]);null!=r&&m(t,["retrievalConfig"],r);return t}(l)),void 0!==g(e,["kmsKeyName"]))throw new Error("kmsKeyName parameter is not supported in Gemini API.");return{}}function Gt(e,t){const n=g(e,["ttl"]);void 0!==t&&null!=n&&m(t,["ttl"],n);const r=g(e,["expireTime"]);void 0!==t&&null!=r&&m(t,["expireTime"],r);const i=g(e,["displayName"]);void 0!==t&&null!=i&&m(t,["displayName"],i);const o=g(e,["contents"]);if(void 0!==t&&null!=o){let e=dt(o);Array.isArray(e)&&(e=e.map((e=>e))),m(t,["contents"],e)}const s=g(e,["systemInstruction"]);void 0!==t&&null!=s&&m(t,["systemInstruction"],ut(s));const a=g(e,["tools"]);if(void 0!==t&&null!=a){let e=a;Array.isArray(e)&&(e=e.map((e=>function(e){const t={},n=g(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>function(e){const t={};if(void 0!==g(e,["behavior"]))throw new Error("behavior parameter is not supported in Vertex AI.");const n=g(e,["description"]);null!=n&&m(t,["description"],n);const r=g(e,["name"]);null!=r&&m(t,["name"],r);const i=g(e,["parameters"]);null!=i&&m(t,["parameters"],i);const o=g(e,["parametersJsonSchema"]);null!=o&&m(t,["parametersJsonSchema"],o);const s=g(e,["response"]);null!=s&&m(t,["response"],s);const a=g(e,["responseJsonSchema"]);null!=a&&m(t,["responseJsonSchema"],a);return t}(e)))),m(t,["functionDeclarations"],e)}const r=g(e,["retrieval"]);null!=r&&m(t,["retrieval"],r);const i=g(e,["googleSearchRetrieval"]);null!=i&&m(t,["googleSearchRetrieval"],i);const o=g(e,["computerUse"]);null!=o&&m(t,["computerUse"],o);if(void 0!==g(e,["fileSearch"]))throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=g(e,["codeExecution"]);null!=s&&m(t,["codeExecution"],s);const a=g(e,["enterpriseWebSearch"]);null!=a&&m(t,["enterpriseWebSearch"],a);const l=g(e,["googleMaps"]);null!=l&&m(t,["googleMaps"],l);const u=g(e,["googleSearch"]);null!=u&&m(t,["googleSearch"],u);const c=g(e,["urlContext"]);null!=c&&m(t,["urlContext"],c);return t}(e)))),m(t,["tools"],e)}const l=g(e,["toolConfig"]);void 0!==t&&null!=l&&m(t,["toolConfig"],l);const u=g(e,["kmsKeyName"]);return void 0!==t&&null!=u&&m(t,["encryption_spec","kmsKeyName"],u),{}}function zt(e){const t={},n=g(e,["config"]);return null!=n&&function(e,t){const n=g(e,["pageSize"]);void 0!==t&&null!=n&&m(t,["_query","pageSize"],n);const r=g(e,["pageToken"]);void 0!==t&&null!=r&&m(t,["_query","pageToken"],r)}(n,t),t}function Wt(e){const t={},n=g(e,["config"]);return null!=n&&function(e,t){const n=g(e,["pageSize"]);void 0!==t&&null!=n&&m(t,["_query","pageSize"],n);const r=g(e,["pageToken"]);void 0!==t&&null!=r&&m(t,["_query","pageToken"],r)}(n,t),t}function Kt(e,t){const n={},r=g(t,["name"]);null!=r&&m(n,["_url","name"],vt(e,r));const i=g(t,["config"]);return null!=i&&function(e,t){const n=g(e,["ttl"]);void 0!==t&&null!=n&&m(t,["ttl"],n);const r=g(e,["expireTime"]);void 0!==t&&null!=r&&m(t,["expireTime"],r)}(i,n),n}function Jt(e,t){const n={},r=g(t,["name"]);null!=r&&m(n,["_url","name"],vt(e,r));const i=g(t,["config"]);return null!=i&&function(e,t){const n=g(e,["ttl"]);void 0!==t&&null!=n&&m(t,["ttl"],n);const r=g(e,["expireTime"]);void 0!==t&&null!=r&&m(t,["expireTime"],r)}(i,n),n}class Yt extends f{constructor(e){var t;super(),t=this,this.apiClient=e,this.list=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Vt(Te.PAGED_ITEM_CACHED_CONTENTS,(e=>t.listInternal(e)),await t.listInternal(e),e)}}async create(e){var t,n,r,i;let o,s="",a={};if(this.apiClient.isVertexAI()){const r=function(e,t){const n={},r=g(t,["model"]);null!=r&&m(n,["model"],Ze(e,r));const i=g(t,["config"]);return null!=i&&Gt(i,n),n}(this.apiClient,e);return s=p("cachedContents",r._url),a=r._query,delete r._url,delete r._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),o.then((e=>e))}{const t=function(e,t){const n={},r=g(t,["model"]);null!=r&&m(n,["model"],Ze(e,r));const i=g(t,["config"]);return null!=i&&Ht(i,n),n}(this.apiClient,e);return s=p("cachedContents",t._url),a=t._query,delete t._url,delete t._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then((e=>e.json())),o.then((e=>e))}}async get(e){var t,n,r,i;let o,s="",a={};if(this.apiClient.isVertexAI()){const r=function(e,t){const n={},r=g(t,["name"]);return null!=r&&m(n,["_url","name"],vt(e,r)),n}(this.apiClient,e);return s=p("{name}",r._url),a=r._query,delete r._url,delete r._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),o.then((e=>e))}{const t=function(e,t){const n={},r=g(t,["name"]);return null!=r&&m(n,["_url","name"],vt(e,r)),n}(this.apiClient,e);return s=p("{name}",t._url),a=t._query,delete t._url,delete t._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then((e=>e.json())),o.then((e=>e))}}async delete(e){var t,n,r,i;let o,s="",a={};if(this.apiClient.isVertexAI()){const r=function(e,t){const n={},r=g(t,["name"]);return null!=r&&m(n,["_url","name"],vt(e,r)),n}(this.apiClient,e);return s=p("{name}",r._url),a=r._query,delete r._url,delete r._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"DELETE",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),o.then((e=>{const t=function(e){const t={},n=g(e,["sdkHttpResponse"]);return null!=n&&m(t,["sdkHttpResponse"],n),t}(e),n=new je;return Object.assign(n,t),n}))}{const t=function(e,t){const n={},r=g(t,["name"]);return null!=r&&m(n,["_url","name"],vt(e,r)),n}(this.apiClient,e);return s=p("{name}",t._url),a=t._query,delete t._url,delete t._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"DELETE",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),o.then((e=>{const t=function(e){const t={},n=g(e,["sdkHttpResponse"]);return null!=n&&m(t,["sdkHttpResponse"],n),t}(e),n=new je;return Object.assign(n,t),n}))}}async update(e){var t,n,r,i;let o,s="",a={};if(this.apiClient.isVertexAI()){const r=Jt(this.apiClient,e);return s=p("{name}",r._url),a=r._query,delete r._url,delete r._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"PATCH",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),o.then((e=>e))}{const t=Kt(this.apiClient,e);return s=p("{name}",t._url),a=t._query,delete t._url,delete t._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"PATCH",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then((e=>e.json())),o.then((e=>e))}}async listInternal(e){var t,n,r,i;let o,s="",a={};if(this.apiClient.isVertexAI()){const r=Wt(e);return s=p("cachedContents",r._url),a=r._query,delete r._url,delete r._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),o.then((e=>{const t=function(e){const t={},n=g(e,["sdkHttpResponse"]);null!=n&&m(t,["sdkHttpResponse"],n);const r=g(e,["nextPageToken"]);null!=r&&m(t,["nextPageToken"],r);const i=g(e,["cachedContents"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map((e=>e))),m(t,["cachedContents"],e)}return t}(e),n=new Ve;return Object.assign(n,t),n}))}{const t=zt(e);return s=p("cachedContents",t._url),a=t._query,delete t._url,delete t._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),o.then((e=>{const t=function(e){const t={},n=g(e,["sdkHttpResponse"]);null!=n&&m(t,["sdkHttpResponse"],n);const r=g(e,["nextPageToken"]);null!=r&&m(t,["nextPageToken"],r);const i=g(e,["cachedContents"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map((e=>e))),m(t,["cachedContents"],e)}return t}(e),n=new Ve;return Object.assign(n,t),n}))}}}function Qt(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Xt(e){return this instanceof Xt?(this.v=e,this):new Xt(e)}function $t(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r=Object.create(("function"===typeof AsyncIterator?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",(function(e){return function(t){return Promise.resolve(t).then(e,u)}})),r[Symbol.asyncIterator]=function(){return this},r;function s(e,t){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||a(e,t)}))},t&&(r[e]=t(r[e])))}function a(e,t){try{!function(e){e.value instanceof Xt?Promise.resolve(e.value.v).then(l,u):c(o[0][2],e)}(i[e](t))}catch(Mv){c(o[0][3],Mv)}}function l(e){a("next",e)}function u(e){a("throw",e)}function c(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}}function Zt(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=Qt(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,i,(t=e[n](t)).done,t.value)}))}}}function en(e){var t;if(void 0==e.candidates||0===e.candidates.length)return!1;const n=null===(t=e.candidates[0])||void 0===t?void 0:t.content;return void 0!==n&&tn(n)}function tn(e){if(void 0===e.parts||0===e.parts.length)return!1;for(const t of e.parts)if(void 0===t||0===Object.keys(t).length)return!1;return!0}function nn(e){if(void 0===e||0===e.length)return[];const t=[],n=e.length;let r=0;for(;r<n;)if("user"===e[r].role)t.push(e[r]),r++;else{const i=[];let o=!0;for(;r<n&&"model"===e[r].role;)i.push(e[r]),o&&!tn(e[r])&&(o=!1),r++;o?t.push(...i):t.pop()}return t}"function"===typeof SuppressedError&&SuppressedError;class rn{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new on(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class on{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];this.apiClient=e,this.modelsModule=t,this.model=n,this.config=r,this.history=i,this.sendPromise=Promise.resolve(),function(e){if(0!==e.length)for(const t of e)if("user"!==t.role&&"model"!==t.role)throw new Error("Role must be user or model, but got ".concat(t.role,"."))}(i)}async sendMessage(e){var t;await this.sendPromise;const n=ut(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(n),config:null!==(t=e.config)&&void 0!==t?t:this.config});return this.sendPromise=(async()=>{var e,t,i;const o=await r,s=null===(t=null===(e=o.candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content,a=o.automaticFunctionCallingHistory,l=this.getHistory(!0).length;let u=[];null!=a&&(u=null!==(i=a.slice(l))&&void 0!==i?i:[]);const c=s?[s]:[];this.recordHistory(n,c,u)})(),await this.sendPromise.catch((()=>{this.sendPromise=Promise.resolve()})),r}async sendMessageStream(e){var t;await this.sendPromise;const n=ut(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(n),config:null!==(t=e.config)&&void 0!==t?t:this.config});this.sendPromise=r.then((()=>{})).catch((()=>{}));const i=await r;return this.processStreamResponse(i,n)}getHistory(){const e=arguments.length>0&&void 0!==arguments[0]&&arguments[0]?nn(this.history):this.history;return structuredClone(e)}processStreamResponse(e,t){var n,r;return $t(this,arguments,(function*(){var i,o,s,a;const l=[];try{for(var u,c=!0,d=Zt(e);!(i=(u=yield Xt(d.next())).done);c=!0){a=u.value,c=!1;const e=a;if(en(e)){const t=null===(r=null===(n=e.candidates)||void 0===n?void 0:n[0])||void 0===r?void 0:r.content;void 0!==t&&l.push(t)}yield yield Xt(e)}}catch(h){o={error:h}}finally{try{c||i||!(s=d.return)||(yield Xt(s.call(d)))}finally{if(o)throw o.error}}this.recordHistory(t,l)}))}recordHistory(e,t,n){let r=[];t.length>0&&t.every((e=>void 0!==e.role))?r=t:r.push({role:"model",parts:[]}),n&&n.length>0?this.history.push(...nn(n)):this.history.push(e),this.history.push(...r)}}class sn extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,sn.prototype)}}function an(e){const t={},n=g(e,["config"]);return null!=n&&function(e,t){const n=g(e,["pageSize"]);void 0!==t&&null!=n&&m(t,["_query","pageSize"],n);const r=g(e,["pageToken"]);void 0!==t&&null!=r&&m(t,["_query","pageToken"],r)}(n,t),t}class ln extends f{constructor(e){var t;super(),t=this,this.apiClient=e,this.list=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Vt(Te.PAGED_ITEM_FILES,(e=>t.listInternal(e)),await t.listInternal(e),e)}}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then((e=>e))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,n;let r,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=an(e);return i=p("files",s._url),o=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),r.then((e=>{const t=function(e){const t={},n=g(e,["sdkHttpResponse"]);null!=n&&m(t,["sdkHttpResponse"],n);const r=g(e,["nextPageToken"]);null!=r&&m(t,["nextPageToken"],r);const i=g(e,["files"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map((e=>e))),m(t,["files"],e)}return t}(e),n=new ze;return Object.assign(n,t),n}))}}async createInternal(e){var t,n;let r,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=function(e){const t={},n=g(e,["file"]);return null!=n&&m(t,["file"],n),t}(e);return i=p("upload/v1beta/files",s._url),o=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),r.then((e=>{const t=function(e){const t={},n=g(e,["sdkHttpResponse"]);return null!=n&&m(t,["sdkHttpResponse"],n),t}(e),n=new We;return Object.assign(n,t),n}))}}async get(e){var t,n;let r,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=function(e){const t={},n=g(e,["name"]);return null!=n&&m(t,["_url","file"],wt(n)),t}(e);return i=p("files/{file}",s._url),o=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),r.then((e=>e))}}async delete(e){var t,n;let r,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=function(e){const t={},n=g(e,["name"]);return null!=n&&m(t,["_url","file"],wt(n)),t}(e);return i=p("files/{file}",s._url),o=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),r.then((e=>{const t=function(e){const t={},n=g(e,["sdkHttpResponse"]);return null!=n&&m(t,["sdkHttpResponse"],n),t}(e),n=new Ke;return Object.assign(n,t),n}))}}}function un(e){const t={},n=g(e,["data"]);if(null!=n&&m(t,["data"],n),void 0!==g(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const r=g(e,["mimeType"]);return null!=r&&m(t,["mimeType"],r),t}function cn(e){const t={},n=g(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>function(e){const t={},n=g(e,["mediaResolution"]);null!=n&&m(t,["mediaResolution"],n);const r=g(e,["codeExecutionResult"]);null!=r&&m(t,["codeExecutionResult"],r);const i=g(e,["executableCode"]);null!=i&&m(t,["executableCode"],i);const o=g(e,["fileData"]);null!=o&&m(t,["fileData"],function(e){const t={};if(void 0!==g(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const n=g(e,["fileUri"]);null!=n&&m(t,["fileUri"],n);const r=g(e,["mimeType"]);null!=r&&m(t,["mimeType"],r);return t}(o));const s=g(e,["functionCall"]);null!=s&&m(t,["functionCall"],function(e){const t={},n=g(e,["id"]);null!=n&&m(t,["id"],n);const r=g(e,["args"]);null!=r&&m(t,["args"],r);const i=g(e,["name"]);null!=i&&m(t,["name"],i);if(void 0!==g(e,["partialArgs"]))throw new Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==g(e,["willContinue"]))throw new Error("willContinue parameter is not supported in Gemini API.");return t}(s));const a=g(e,["functionResponse"]);null!=a&&m(t,["functionResponse"],a);const l=g(e,["inlineData"]);null!=l&&m(t,["inlineData"],un(l));const u=g(e,["text"]);null!=u&&m(t,["text"],u);const c=g(e,["thought"]);null!=c&&m(t,["thought"],c);const d=g(e,["thoughtSignature"]);null!=d&&m(t,["thoughtSignature"],d);const h=g(e,["videoMetadata"]);null!=h&&m(t,["videoMetadata"],h);return t}(e)))),m(t,["parts"],e)}const r=g(e,["role"]);return null!=r&&m(t,["role"],r),t}function dn(e,t){const n=g(e,["generationConfig"]);void 0!==t&&null!=n&&m(t,["setup","generationConfig"],n);const r=g(e,["responseModalities"]);void 0!==t&&null!=r&&m(t,["setup","generationConfig","responseModalities"],r);const i=g(e,["temperature"]);void 0!==t&&null!=i&&m(t,["setup","generationConfig","temperature"],i);const o=g(e,["topP"]);void 0!==t&&null!=o&&m(t,["setup","generationConfig","topP"],o);const s=g(e,["topK"]);void 0!==t&&null!=s&&m(t,["setup","generationConfig","topK"],s);const a=g(e,["maxOutputTokens"]);void 0!==t&&null!=a&&m(t,["setup","generationConfig","maxOutputTokens"],a);const l=g(e,["mediaResolution"]);void 0!==t&&null!=l&&m(t,["setup","generationConfig","mediaResolution"],l);const u=g(e,["seed"]);void 0!==t&&null!=u&&m(t,["setup","generationConfig","seed"],u);const c=g(e,["speechConfig"]);void 0!==t&&null!=c&&m(t,["setup","generationConfig","speechConfig"],mt(c));const d=g(e,["thinkingConfig"]);void 0!==t&&null!=d&&m(t,["setup","generationConfig","thinkingConfig"],d);const h=g(e,["enableAffectiveDialog"]);void 0!==t&&null!=h&&m(t,["setup","generationConfig","enableAffectiveDialog"],h);const f=g(e,["systemInstruction"]);void 0!==t&&null!=f&&m(t,["setup","systemInstruction"],cn(ut(f)));const p=g(e,["tools"]);if(void 0!==t&&null!=p){let e=yt(p);Array.isArray(e)&&(e=e.map((e=>function(e){const t={},n=g(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>e))),m(t,["functionDeclarations"],e)}if(void 0!==g(e,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");const r=g(e,["googleSearchRetrieval"]);null!=r&&m(t,["googleSearchRetrieval"],r);const i=g(e,["computerUse"]);null!=i&&m(t,["computerUse"],i);const o=g(e,["fileSearch"]);null!=o&&m(t,["fileSearch"],o);const s=g(e,["codeExecution"]);null!=s&&m(t,["codeExecution"],s);if(void 0!==g(e,["enterpriseWebSearch"]))throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=g(e,["googleMaps"]);null!=a&&m(t,["googleMaps"],function(e){const t={};if(void 0!==g(e,["authConfig"]))throw new Error("authConfig parameter is not supported in Gemini API.");const n=g(e,["enableWidget"]);return null!=n&&m(t,["enableWidget"],n),t}(a));const l=g(e,["googleSearch"]);null!=l&&m(t,["googleSearch"],function(e){const t={};if(void 0!==g(e,["excludeDomains"]))throw new Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==g(e,["blockingConfidence"]))throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=g(e,["timeRangeFilter"]);return null!=n&&m(t,["timeRangeFilter"],n),t}(l));const u=g(e,["urlContext"]);null!=u&&m(t,["urlContext"],u);return t}(gt(e))))),m(t,["setup","tools"],e)}const y=g(e,["sessionResumption"]);void 0!==t&&null!=y&&m(t,["setup","sessionResumption"],function(e){const t={},n=g(e,["handle"]);null!=n&&m(t,["handle"],n);if(void 0!==g(e,["transparent"]))throw new Error("transparent parameter is not supported in Gemini API.");return t}(y));const v=g(e,["inputAudioTranscription"]);void 0!==t&&null!=v&&m(t,["setup","inputAudioTranscription"],v);const b=g(e,["outputAudioTranscription"]);void 0!==t&&null!=b&&m(t,["setup","outputAudioTranscription"],b);const E=g(e,["realtimeInputConfig"]);void 0!==t&&null!=E&&m(t,["setup","realtimeInputConfig"],E);const w=g(e,["contextWindowCompression"]);void 0!==t&&null!=w&&m(t,["setup","contextWindowCompression"],w);const S=g(e,["proactivity"]);return void 0!==t&&null!=S&&m(t,["setup","proactivity"],S),{}}function hn(e,t){const n=g(e,["generationConfig"]);void 0!==t&&null!=n&&m(t,["setup","generationConfig"],function(e){const t={},n=g(e,["modelSelectionConfig"]);null!=n&&m(t,["modelConfig"],n);const r=g(e,["responseJsonSchema"]);null!=r&&m(t,["responseJsonSchema"],r);const i=g(e,["audioTimestamp"]);null!=i&&m(t,["audioTimestamp"],i);const o=g(e,["candidateCount"]);null!=o&&m(t,["candidateCount"],o);const s=g(e,["enableAffectiveDialog"]);null!=s&&m(t,["enableAffectiveDialog"],s);const a=g(e,["frequencyPenalty"]);null!=a&&m(t,["frequencyPenalty"],a);const l=g(e,["logprobs"]);null!=l&&m(t,["logprobs"],l);const u=g(e,["maxOutputTokens"]);null!=u&&m(t,["maxOutputTokens"],u);const c=g(e,["mediaResolution"]);null!=c&&m(t,["mediaResolution"],c);const d=g(e,["presencePenalty"]);null!=d&&m(t,["presencePenalty"],d);const h=g(e,["responseLogprobs"]);null!=h&&m(t,["responseLogprobs"],h);const f=g(e,["responseMimeType"]);null!=f&&m(t,["responseMimeType"],f);const p=g(e,["responseModalities"]);null!=p&&m(t,["responseModalities"],p);const y=g(e,["responseSchema"]);null!=y&&m(t,["responseSchema"],y);const v=g(e,["routingConfig"]);null!=v&&m(t,["routingConfig"],v);const b=g(e,["seed"]);null!=b&&m(t,["seed"],b);const E=g(e,["speechConfig"]);null!=E&&m(t,["speechConfig"],gn(E));const w=g(e,["stopSequences"]);null!=w&&m(t,["stopSequences"],w);const S=g(e,["temperature"]);null!=S&&m(t,["temperature"],S);const _=g(e,["thinkingConfig"]);null!=_&&m(t,["thinkingConfig"],_);const T=g(e,["topK"]);null!=T&&m(t,["topK"],T);const C=g(e,["topP"]);if(null!=C&&m(t,["topP"],C),void 0!==g(e,["enableEnhancedCivicAnswers"]))throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}(n));const r=g(e,["responseModalities"]);void 0!==t&&null!=r&&m(t,["setup","generationConfig","responseModalities"],r);const i=g(e,["temperature"]);void 0!==t&&null!=i&&m(t,["setup","generationConfig","temperature"],i);const o=g(e,["topP"]);void 0!==t&&null!=o&&m(t,["setup","generationConfig","topP"],o);const s=g(e,["topK"]);void 0!==t&&null!=s&&m(t,["setup","generationConfig","topK"],s);const a=g(e,["maxOutputTokens"]);void 0!==t&&null!=a&&m(t,["setup","generationConfig","maxOutputTokens"],a);const l=g(e,["mediaResolution"]);void 0!==t&&null!=l&&m(t,["setup","generationConfig","mediaResolution"],l);const u=g(e,["seed"]);void 0!==t&&null!=u&&m(t,["setup","generationConfig","seed"],u);const c=g(e,["speechConfig"]);void 0!==t&&null!=c&&m(t,["setup","generationConfig","speechConfig"],gn(mt(c)));const d=g(e,["thinkingConfig"]);void 0!==t&&null!=d&&m(t,["setup","generationConfig","thinkingConfig"],d);const h=g(e,["enableAffectiveDialog"]);void 0!==t&&null!=h&&m(t,["setup","generationConfig","enableAffectiveDialog"],h);const f=g(e,["systemInstruction"]);void 0!==t&&null!=f&&m(t,["setup","systemInstruction"],ut(f));const p=g(e,["tools"]);if(void 0!==t&&null!=p){let e=yt(p);Array.isArray(e)&&(e=e.map((e=>function(e){const t={},n=g(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>function(e){const t={};if(void 0!==g(e,["behavior"]))throw new Error("behavior parameter is not supported in Vertex AI.");const n=g(e,["description"]);null!=n&&m(t,["description"],n);const r=g(e,["name"]);null!=r&&m(t,["name"],r);const i=g(e,["parameters"]);null!=i&&m(t,["parameters"],i);const o=g(e,["parametersJsonSchema"]);null!=o&&m(t,["parametersJsonSchema"],o);const s=g(e,["response"]);null!=s&&m(t,["response"],s);const a=g(e,["responseJsonSchema"]);return null!=a&&m(t,["responseJsonSchema"],a),t}(e)))),m(t,["functionDeclarations"],e)}const r=g(e,["retrieval"]);null!=r&&m(t,["retrieval"],r);const i=g(e,["googleSearchRetrieval"]);null!=i&&m(t,["googleSearchRetrieval"],i);const o=g(e,["computerUse"]);null!=o&&m(t,["computerUse"],o);if(void 0!==g(e,["fileSearch"]))throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=g(e,["codeExecution"]);null!=s&&m(t,["codeExecution"],s);const a=g(e,["enterpriseWebSearch"]);null!=a&&m(t,["enterpriseWebSearch"],a);const l=g(e,["googleMaps"]);null!=l&&m(t,["googleMaps"],l);const u=g(e,["googleSearch"]);null!=u&&m(t,["googleSearch"],u);const c=g(e,["urlContext"]);null!=c&&m(t,["urlContext"],c);return t}(gt(e))))),m(t,["setup","tools"],e)}const y=g(e,["sessionResumption"]);void 0!==t&&null!=y&&m(t,["setup","sessionResumption"],y);const v=g(e,["inputAudioTranscription"]);void 0!==t&&null!=v&&m(t,["setup","inputAudioTranscription"],v);const b=g(e,["outputAudioTranscription"]);void 0!==t&&null!=b&&m(t,["setup","outputAudioTranscription"],b);const E=g(e,["realtimeInputConfig"]);void 0!==t&&null!=E&&m(t,["setup","realtimeInputConfig"],E);const w=g(e,["contextWindowCompression"]);void 0!==t&&null!=w&&m(t,["setup","contextWindowCompression"],w);const S=g(e,["proactivity"]);return void 0!==t&&null!=S&&m(t,["setup","proactivity"],S),{}}function fn(e){const t={},n=g(e,["media"]);if(null!=n){let e=et(n);Array.isArray(e)&&(e=e.map((e=>un(e)))),m(t,["mediaChunks"],e)}const r=g(e,["audio"]);null!=r&&m(t,["audio"],un(rt(r)));const i=g(e,["audioStreamEnd"]);null!=i&&m(t,["audioStreamEnd"],i);const o=g(e,["video"]);null!=o&&m(t,["video"],un(nt(o)));const s=g(e,["text"]);null!=s&&m(t,["text"],s);const a=g(e,["activityStart"]);null!=a&&m(t,["activityStart"],a);const l=g(e,["activityEnd"]);return null!=l&&m(t,["activityEnd"],l),t}function pn(e){const t={},n=g(e,["media"]);if(null!=n){let e=et(n);Array.isArray(e)&&(e=e.map((e=>e))),m(t,["mediaChunks"],e)}const r=g(e,["audio"]);null!=r&&m(t,["audio"],rt(r));const i=g(e,["audioStreamEnd"]);null!=i&&m(t,["audioStreamEnd"],i);const o=g(e,["video"]);null!=o&&m(t,["video"],nt(o));const s=g(e,["text"]);null!=s&&m(t,["text"],s);const a=g(e,["activityStart"]);null!=a&&m(t,["activityStart"],a);const l=g(e,["activityEnd"]);return null!=l&&m(t,["activityEnd"],l),t}function mn(e){const t={},n=g(e,["setupComplete"]);null!=n&&m(t,["setupComplete"],n);const r=g(e,["serverContent"]);null!=r&&m(t,["serverContent"],r);const i=g(e,["toolCall"]);null!=i&&m(t,["toolCall"],i);const o=g(e,["toolCallCancellation"]);null!=o&&m(t,["toolCallCancellation"],o);const s=g(e,["usageMetadata"]);null!=s&&m(t,["usageMetadata"],function(e){const t={},n=g(e,["promptTokenCount"]);null!=n&&m(t,["promptTokenCount"],n);const r=g(e,["cachedContentTokenCount"]);null!=r&&m(t,["cachedContentTokenCount"],r);const i=g(e,["candidatesTokenCount"]);null!=i&&m(t,["responseTokenCount"],i);const o=g(e,["toolUsePromptTokenCount"]);null!=o&&m(t,["toolUsePromptTokenCount"],o);const s=g(e,["thoughtsTokenCount"]);null!=s&&m(t,["thoughtsTokenCount"],s);const a=g(e,["totalTokenCount"]);null!=a&&m(t,["totalTokenCount"],a);const l=g(e,["promptTokensDetails"]);if(null!=l){let e=l;Array.isArray(e)&&(e=e.map((e=>e))),m(t,["promptTokensDetails"],e)}const u=g(e,["cacheTokensDetails"]);if(null!=u){let e=u;Array.isArray(e)&&(e=e.map((e=>e))),m(t,["cacheTokensDetails"],e)}const c=g(e,["candidatesTokensDetails"]);if(null!=c){let e=c;Array.isArray(e)&&(e=e.map((e=>e))),m(t,["responseTokensDetails"],e)}const d=g(e,["toolUsePromptTokensDetails"]);if(null!=d){let e=d;Array.isArray(e)&&(e=e.map((e=>e))),m(t,["toolUsePromptTokensDetails"],e)}const h=g(e,["trafficType"]);null!=h&&m(t,["trafficType"],h);return t}(s));const a=g(e,["goAway"]);null!=a&&m(t,["goAway"],a);const l=g(e,["sessionResumptionUpdate"]);return null!=l&&m(t,["sessionResumptionUpdate"],l),t}function gn(e){const t={},n=g(e,["languageCode"]);null!=n&&m(t,["languageCode"],n);const r=g(e,["voiceConfig"]);if(null!=r&&m(t,["voiceConfig"],r),void 0!==g(e,["multiSpeakerVoiceConfig"]))throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return t}function yn(e){const t={},n=g(e,["content"]);null!=n&&m(t,["content"],n);const r=g(e,["citationMetadata"]);null!=r&&m(t,["citationMetadata"],function(e){const t={},n=g(e,["citationSources"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>e))),m(t,["citations"],e)}return t}(r));const i=g(e,["tokenCount"]);null!=i&&m(t,["tokenCount"],i);const o=g(e,["finishReason"]);null!=o&&m(t,["finishReason"],o);const s=g(e,["avgLogprobs"]);null!=s&&m(t,["avgLogprobs"],s);const a=g(e,["groundingMetadata"]);null!=a&&m(t,["groundingMetadata"],a);const l=g(e,["index"]);null!=l&&m(t,["index"],l);const u=g(e,["logprobsResult"]);null!=u&&m(t,["logprobsResult"],u);const c=g(e,["safetyRatings"]);if(null!=c){let e=c;Array.isArray(e)&&(e=e.map((e=>e))),m(t,["safetyRatings"],e)}const d=g(e,["urlContextMetadata"]);return null!=d&&m(t,["urlContextMetadata"],d),t}function vn(e){const t={},n=g(e,["values"]);null!=n&&m(t,["values"],n);const r=g(e,["statistics"]);return null!=r&&m(t,["statistics"],function(e){const t={},n=g(e,["truncated"]);null!=n&&m(t,["truncated"],n);const r=g(e,["token_count"]);null!=r&&m(t,["tokenCount"],r);return t}(r)),t}function bn(e){const t={},n=g(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>function(e){const t={},n=g(e,["mediaResolution"]);null!=n&&m(t,["mediaResolution"],n);const r=g(e,["codeExecutionResult"]);null!=r&&m(t,["codeExecutionResult"],r);const i=g(e,["executableCode"]);null!=i&&m(t,["executableCode"],i);const o=g(e,["fileData"]);null!=o&&m(t,["fileData"],function(e){const t={};if(void 0!==g(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const n=g(e,["fileUri"]);null!=n&&m(t,["fileUri"],n);const r=g(e,["mimeType"]);null!=r&&m(t,["mimeType"],r);return t}(o));const s=g(e,["functionCall"]);null!=s&&m(t,["functionCall"],function(e){const t={},n=g(e,["id"]);null!=n&&m(t,["id"],n);const r=g(e,["args"]);null!=r&&m(t,["args"],r);const i=g(e,["name"]);null!=i&&m(t,["name"],i);if(void 0!==g(e,["partialArgs"]))throw new Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==g(e,["willContinue"]))throw new Error("willContinue parameter is not supported in Gemini API.");return t}(s));const a=g(e,["functionResponse"]);null!=a&&m(t,["functionResponse"],a);const l=g(e,["inlineData"]);null!=l&&m(t,["inlineData"],function(e){const t={},n=g(e,["data"]);if(null!=n&&m(t,["data"],n),void 0!==g(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const r=g(e,["mimeType"]);return null!=r&&m(t,["mimeType"],r),t}(l));const u=g(e,["text"]);null!=u&&m(t,["text"],u);const c=g(e,["thought"]);null!=c&&m(t,["thought"],c);const d=g(e,["thoughtSignature"]);null!=d&&m(t,["thoughtSignature"],d);const h=g(e,["videoMetadata"]);null!=h&&m(t,["videoMetadata"],h);return t}(e)))),m(t,["parts"],e)}const r=g(e,["role"]);return null!=r&&m(t,["role"],r),t}function En(e,t){const n=g(e,["systemInstruction"]);void 0!==t&&null!=n&&m(t,["systemInstruction"],ut(n));const r=g(e,["tools"]);if(void 0!==t&&null!=r){let e=r;Array.isArray(e)&&(e=e.map((e=>er(e)))),m(t,["tools"],e)}const i=g(e,["generationConfig"]);return void 0!==t&&null!=i&&m(t,["generationConfig"],function(e){const t={},n=g(e,["modelSelectionConfig"]);null!=n&&m(t,["modelConfig"],n);const r=g(e,["responseJsonSchema"]);null!=r&&m(t,["responseJsonSchema"],r);const i=g(e,["audioTimestamp"]);null!=i&&m(t,["audioTimestamp"],i);const o=g(e,["candidateCount"]);null!=o&&m(t,["candidateCount"],o);const s=g(e,["enableAffectiveDialog"]);null!=s&&m(t,["enableAffectiveDialog"],s);const a=g(e,["frequencyPenalty"]);null!=a&&m(t,["frequencyPenalty"],a);const l=g(e,["logprobs"]);null!=l&&m(t,["logprobs"],l);const u=g(e,["maxOutputTokens"]);null!=u&&m(t,["maxOutputTokens"],u);const c=g(e,["mediaResolution"]);null!=c&&m(t,["mediaResolution"],c);const d=g(e,["presencePenalty"]);null!=d&&m(t,["presencePenalty"],d);const h=g(e,["responseLogprobs"]);null!=h&&m(t,["responseLogprobs"],h);const f=g(e,["responseMimeType"]);null!=f&&m(t,["responseMimeType"],f);const p=g(e,["responseModalities"]);null!=p&&m(t,["responseModalities"],p);const y=g(e,["responseSchema"]);null!=y&&m(t,["responseSchema"],y);const v=g(e,["routingConfig"]);null!=v&&m(t,["routingConfig"],v);const b=g(e,["seed"]);null!=b&&m(t,["seed"],b);const E=g(e,["speechConfig"]);null!=E&&m(t,["speechConfig"],Zn(E));const w=g(e,["stopSequences"]);null!=w&&m(t,["stopSequences"],w);const S=g(e,["temperature"]);null!=S&&m(t,["temperature"],S);const _=g(e,["thinkingConfig"]);null!=_&&m(t,["thinkingConfig"],_);const T=g(e,["topK"]);null!=T&&m(t,["topK"],T);const C=g(e,["topP"]);null!=C&&m(t,["topP"],C);if(void 0!==g(e,["enableEnhancedCivicAnswers"]))throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}(i)),{}}function wn(e,t){const n={},r=g(t,["model"]);null!=r&&m(n,["_url","model"],$e(e,r));const i=g(t,["contents"]);if(null!=i){let e=dt(i);Array.isArray(e)&&(e=e.map((e=>bn(e)))),m(n,["contents"],e)}const o=g(t,["config"]);return null!=o&&function(e){if(void 0!==g(e,["systemInstruction"]))throw new Error("systemInstruction parameter is not supported in Gemini API.");if(void 0!==g(e,["tools"]))throw new Error("tools parameter is not supported in Gemini API.");if(void 0!==g(e,["generationConfig"]))throw new Error("generationConfig parameter is not supported in Gemini API.")}(o),n}function Sn(e,t){const n={},r=g(t,["model"]);null!=r&&m(n,["_url","model"],$e(e,r));const i=g(t,["prompt"]);null!=i&&m(n,["instances[0]","prompt"],i);const o=g(t,["referenceImages"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map((e=>function(e){const t={},n=g(e,["referenceImage"]);null!=n&&m(t,["referenceImage"],Hn(n));const r=g(e,["referenceId"]);null!=r&&m(t,["referenceId"],r);const i=g(e,["referenceType"]);null!=i&&m(t,["referenceType"],i);const o=g(e,["maskImageConfig"]);null!=o&&m(t,["maskImageConfig"],function(e){const t={},n=g(e,["maskMode"]);null!=n&&m(t,["maskMode"],n);const r=g(e,["segmentationClasses"]);null!=r&&m(t,["maskClasses"],r);const i=g(e,["maskDilation"]);null!=i&&m(t,["dilation"],i);return t}(o));const s=g(e,["controlImageConfig"]);null!=s&&m(t,["controlImageConfig"],function(e){const t={},n=g(e,["controlType"]);null!=n&&m(t,["controlType"],n);const r=g(e,["enableControlImageComputation"]);return null!=r&&m(t,["computeControl"],r),t}(s));const a=g(e,["styleImageConfig"]);null!=a&&m(t,["styleImageConfig"],a);const l=g(e,["subjectImageConfig"]);null!=l&&m(t,["subjectImageConfig"],l);return t}(e)))),m(n,["instances[0]","referenceImages"],e)}const s=g(t,["config"]);return null!=s&&function(e,t){const n=g(e,["outputGcsUri"]);void 0!==t&&null!=n&&m(t,["parameters","storageUri"],n);const r=g(e,["negativePrompt"]);void 0!==t&&null!=r&&m(t,["parameters","negativePrompt"],r);const i=g(e,["numberOfImages"]);void 0!==t&&null!=i&&m(t,["parameters","sampleCount"],i);const o=g(e,["aspectRatio"]);void 0!==t&&null!=o&&m(t,["parameters","aspectRatio"],o);const s=g(e,["guidanceScale"]);void 0!==t&&null!=s&&m(t,["parameters","guidanceScale"],s);const a=g(e,["seed"]);void 0!==t&&null!=a&&m(t,["parameters","seed"],a);const l=g(e,["safetyFilterLevel"]);void 0!==t&&null!=l&&m(t,["parameters","safetySetting"],l);const u=g(e,["personGeneration"]);void 0!==t&&null!=u&&m(t,["parameters","personGeneration"],u);const c=g(e,["includeSafetyAttributes"]);void 0!==t&&null!=c&&m(t,["parameters","includeSafetyAttributes"],c);const d=g(e,["includeRaiReason"]);void 0!==t&&null!=d&&m(t,["parameters","includeRaiReason"],d);const h=g(e,["language"]);void 0!==t&&null!=h&&m(t,["parameters","language"],h);const f=g(e,["outputMimeType"]);void 0!==t&&null!=f&&m(t,["parameters","outputOptions","mimeType"],f);const p=g(e,["outputCompressionQuality"]);void 0!==t&&null!=p&&m(t,["parameters","outputOptions","compressionQuality"],p);const y=g(e,["addWatermark"]);void 0!==t&&null!=y&&m(t,["parameters","addWatermark"],y);const v=g(e,["labels"]);void 0!==t&&null!=v&&m(t,["labels"],v);const b=g(e,["editMode"]);void 0!==t&&null!=b&&m(t,["parameters","editMode"],b);const E=g(e,["baseSteps"]);void 0!==t&&null!=E&&m(t,["parameters","editConfig","baseSteps"],E)}(s,n),n}function _n(e,t){const n={},r=g(t,["model"]);null!=r&&m(n,["_url","model"],$e(e,r));const i=g(t,["contents"]);if(null!=i){let t=ct(e,i);Array.isArray(t)&&(t=t.map((e=>e))),m(n,["requests[]","content"],t)}const o=g(t,["config"]);null!=o&&function(e,t){const n=g(e,["taskType"]);void 0!==t&&null!=n&&m(t,["requests[]","taskType"],n);const r=g(e,["title"]);void 0!==t&&null!=r&&m(t,["requests[]","title"],r);const i=g(e,["outputDimensionality"]);if(void 0!==t&&null!=i&&m(t,["requests[]","outputDimensionality"],i),void 0!==g(e,["mimeType"]))throw new Error("mimeType parameter is not supported in Gemini API.");if(void 0!==g(e,["autoTruncate"]))throw new Error("autoTruncate parameter is not supported in Gemini API.")}(o,n);const s=g(t,["model"]);return void 0!==s&&m(n,["requests[]","model"],$e(e,s)),n}function Tn(e,t){const n={},r=g(t,["model"]);null!=r&&m(n,["_url","model"],$e(e,r));const i=g(t,["contents"]);if(null!=i){let t=ct(e,i);Array.isArray(t)&&(t=t.map((e=>e))),m(n,["instances[]","content"],t)}const o=g(t,["config"]);return null!=o&&function(e,t){const n=g(e,["taskType"]);void 0!==t&&null!=n&&m(t,["instances[]","task_type"],n);const r=g(e,["title"]);void 0!==t&&null!=r&&m(t,["instances[]","title"],r);const i=g(e,["outputDimensionality"]);void 0!==t&&null!=i&&m(t,["parameters","outputDimensionality"],i);const o=g(e,["mimeType"]);void 0!==t&&null!=o&&m(t,["instances[]","mimeType"],o);const s=g(e,["autoTruncate"]);void 0!==t&&null!=s&&m(t,["parameters","autoTruncate"],s)}(o,n),n}function Cn(e,t,n){const r={},i=g(t,["systemInstruction"]);void 0!==n&&null!=i&&m(n,["systemInstruction"],bn(ut(i)));const o=g(t,["temperature"]);null!=o&&m(r,["temperature"],o);const s=g(t,["topP"]);null!=s&&m(r,["topP"],s);const a=g(t,["topK"]);null!=a&&m(r,["topK"],a);const l=g(t,["candidateCount"]);null!=l&&m(r,["candidateCount"],l);const u=g(t,["maxOutputTokens"]);null!=u&&m(r,["maxOutputTokens"],u);const c=g(t,["stopSequences"]);null!=c&&m(r,["stopSequences"],c);const d=g(t,["responseLogprobs"]);null!=d&&m(r,["responseLogprobs"],d);const h=g(t,["logprobs"]);null!=h&&m(r,["logprobs"],h);const f=g(t,["presencePenalty"]);null!=f&&m(r,["presencePenalty"],f);const p=g(t,["frequencyPenalty"]);null!=p&&m(r,["frequencyPenalty"],p);const y=g(t,["seed"]);null!=y&&m(r,["seed"],y);const v=g(t,["responseMimeType"]);null!=v&&m(r,["responseMimeType"],v);const b=g(t,["responseSchema"]);null!=b&&m(r,["responseSchema"],ft(b));const E=g(t,["responseJsonSchema"]);if(null!=E&&m(r,["responseJsonSchema"],E),void 0!==g(t,["routingConfig"]))throw new Error("routingConfig parameter is not supported in Gemini API.");if(void 0!==g(t,["modelSelectionConfig"]))throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const w=g(t,["safetySettings"]);if(void 0!==n&&null!=w){let e=w;Array.isArray(e)&&(e=e.map((e=>function(e){const t={},n=g(e,["category"]);null!=n&&m(t,["category"],n);if(void 0!==g(e,["method"]))throw new Error("method parameter is not supported in Gemini API.");const r=g(e,["threshold"]);null!=r&&m(t,["threshold"],r);return t}(e)))),m(n,["safetySettings"],e)}const S=g(t,["tools"]);if(void 0!==n&&null!=S){let e=yt(S);Array.isArray(e)&&(e=e.map((e=>function(e){const t={},n=g(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>e))),m(t,["functionDeclarations"],e)}if(void 0!==g(e,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");const r=g(e,["googleSearchRetrieval"]);null!=r&&m(t,["googleSearchRetrieval"],r);const i=g(e,["computerUse"]);null!=i&&m(t,["computerUse"],i);const o=g(e,["fileSearch"]);null!=o&&m(t,["fileSearch"],o);const s=g(e,["codeExecution"]);null!=s&&m(t,["codeExecution"],s);if(void 0!==g(e,["enterpriseWebSearch"]))throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=g(e,["googleMaps"]);null!=a&&m(t,["googleMaps"],function(e){const t={};if(void 0!==g(e,["authConfig"]))throw new Error("authConfig parameter is not supported in Gemini API.");const n=g(e,["enableWidget"]);null!=n&&m(t,["enableWidget"],n);return t}(a));const l=g(e,["googleSearch"]);null!=l&&m(t,["googleSearch"],function(e){const t={};if(void 0!==g(e,["excludeDomains"]))throw new Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==g(e,["blockingConfidence"]))throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=g(e,["timeRangeFilter"]);null!=n&&m(t,["timeRangeFilter"],n);return t}(l));const u=g(e,["urlContext"]);null!=u&&m(t,["urlContext"],u);return t}(gt(e))))),m(n,["tools"],e)}const _=g(t,["toolConfig"]);if(void 0!==n&&null!=_&&m(n,["toolConfig"],function(e){const t={},n=g(e,["functionCallingConfig"]);null!=n&&m(t,["functionCallingConfig"],function(e){const t={},n=g(e,["mode"]);null!=n&&m(t,["mode"],n);const r=g(e,["allowedFunctionNames"]);if(null!=r&&m(t,["allowedFunctionNames"],r),void 0!==g(e,["streamFunctionCallArguments"]))throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}(n));const r=g(e,["retrievalConfig"]);null!=r&&m(t,["retrievalConfig"],r);return t}(_)),void 0!==g(t,["labels"]))throw new Error("labels parameter is not supported in Gemini API.");const T=g(t,["cachedContent"]);void 0!==n&&null!=T&&m(n,["cachedContent"],vt(e,T));const C=g(t,["responseModalities"]);null!=C&&m(r,["responseModalities"],C);const I=g(t,["mediaResolution"]);null!=I&&m(r,["mediaResolution"],I);const A=g(t,["speechConfig"]);if(null!=A&&m(r,["speechConfig"],pt(A)),void 0!==g(t,["audioTimestamp"]))throw new Error("audioTimestamp parameter is not supported in Gemini API.");const N=g(t,["thinkingConfig"]);null!=N&&m(r,["thinkingConfig"],N);const x=g(t,["imageConfig"]);return null!=x&&m(r,["imageConfig"],function(e){const t={},n=g(e,["aspectRatio"]);null!=n&&m(t,["aspectRatio"],n);const r=g(e,["imageSize"]);null!=r&&m(t,["imageSize"],r);if(void 0!==g(e,["outputMimeType"]))throw new Error("outputMimeType parameter is not supported in Gemini API.");if(void 0!==g(e,["outputCompressionQuality"]))throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}(x)),r}function In(e,t,n){const r={},i=g(t,["systemInstruction"]);void 0!==n&&null!=i&&m(n,["systemInstruction"],ut(i));const o=g(t,["temperature"]);null!=o&&m(r,["temperature"],o);const s=g(t,["topP"]);null!=s&&m(r,["topP"],s);const a=g(t,["topK"]);null!=a&&m(r,["topK"],a);const l=g(t,["candidateCount"]);null!=l&&m(r,["candidateCount"],l);const u=g(t,["maxOutputTokens"]);null!=u&&m(r,["maxOutputTokens"],u);const c=g(t,["stopSequences"]);null!=c&&m(r,["stopSequences"],c);const d=g(t,["responseLogprobs"]);null!=d&&m(r,["responseLogprobs"],d);const h=g(t,["logprobs"]);null!=h&&m(r,["logprobs"],h);const f=g(t,["presencePenalty"]);null!=f&&m(r,["presencePenalty"],f);const p=g(t,["frequencyPenalty"]);null!=p&&m(r,["frequencyPenalty"],p);const y=g(t,["seed"]);null!=y&&m(r,["seed"],y);const v=g(t,["responseMimeType"]);null!=v&&m(r,["responseMimeType"],v);const b=g(t,["responseSchema"]);null!=b&&m(r,["responseSchema"],ft(b));const E=g(t,["responseJsonSchema"]);null!=E&&m(r,["responseJsonSchema"],E);const w=g(t,["routingConfig"]);null!=w&&m(r,["routingConfig"],w);const S=g(t,["modelSelectionConfig"]);null!=S&&m(r,["modelConfig"],S);const _=g(t,["safetySettings"]);if(void 0!==n&&null!=_){let e=_;Array.isArray(e)&&(e=e.map((e=>e))),m(n,["safetySettings"],e)}const T=g(t,["tools"]);if(void 0!==n&&null!=T){let e=yt(T);Array.isArray(e)&&(e=e.map((e=>er(gt(e))))),m(n,["tools"],e)}const C=g(t,["toolConfig"]);void 0!==n&&null!=C&&m(n,["toolConfig"],C);const I=g(t,["labels"]);void 0!==n&&null!=I&&m(n,["labels"],I);const A=g(t,["cachedContent"]);void 0!==n&&null!=A&&m(n,["cachedContent"],vt(e,A));const N=g(t,["responseModalities"]);null!=N&&m(r,["responseModalities"],N);const x=g(t,["mediaResolution"]);null!=x&&m(r,["mediaResolution"],x);const k=g(t,["speechConfig"]);null!=k&&m(r,["speechConfig"],Zn(pt(k)));const O=g(t,["audioTimestamp"]);null!=O&&m(r,["audioTimestamp"],O);const R=g(t,["thinkingConfig"]);null!=R&&m(r,["thinkingConfig"],R);const D=g(t,["imageConfig"]);return null!=D&&m(r,["imageConfig"],function(e){const t={},n=g(e,["aspectRatio"]);null!=n&&m(t,["aspectRatio"],n);const r=g(e,["imageSize"]);null!=r&&m(t,["imageSize"],r);const i=g(e,["outputMimeType"]);null!=i&&m(t,["imageOutputOptions","mimeType"],i);const o=g(e,["outputCompressionQuality"]);null!=o&&m(t,["imageOutputOptions","compressionQuality"],o);return t}(D)),r}function An(e,t){const n={},r=g(t,["model"]);null!=r&&m(n,["_url","model"],$e(e,r));const i=g(t,["contents"]);if(null!=i){let e=dt(i);Array.isArray(e)&&(e=e.map((e=>bn(e)))),m(n,["contents"],e)}const o=g(t,["config"]);return null!=o&&m(n,["generationConfig"],Cn(e,o,n)),n}function Nn(e,t){const n={},r=g(t,["model"]);null!=r&&m(n,["_url","model"],$e(e,r));const i=g(t,["contents"]);if(null!=i){let e=dt(i);Array.isArray(e)&&(e=e.map((e=>e))),m(n,["contents"],e)}const o=g(t,["config"]);return null!=o&&m(n,["generationConfig"],In(e,o,n)),n}function xn(e){const t={},n=g(e,["sdkHttpResponse"]);null!=n&&m(t,["sdkHttpResponse"],n);const r=g(e,["candidates"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map((e=>yn(e)))),m(t,["candidates"],e)}const i=g(e,["modelVersion"]);null!=i&&m(t,["modelVersion"],i);const o=g(e,["promptFeedback"]);null!=o&&m(t,["promptFeedback"],o);const s=g(e,["responseId"]);null!=s&&m(t,["responseId"],s);const a=g(e,["usageMetadata"]);return null!=a&&m(t,["usageMetadata"],a),t}function kn(e){const t={},n=g(e,["sdkHttpResponse"]);null!=n&&m(t,["sdkHttpResponse"],n);const r=g(e,["candidates"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map((e=>e))),m(t,["candidates"],e)}const i=g(e,["createTime"]);null!=i&&m(t,["createTime"],i);const o=g(e,["modelVersion"]);null!=o&&m(t,["modelVersion"],o);const s=g(e,["promptFeedback"]);null!=s&&m(t,["promptFeedback"],s);const a=g(e,["responseId"]);null!=a&&m(t,["responseId"],a);const l=g(e,["usageMetadata"]);return null!=l&&m(t,["usageMetadata"],l),t}function On(e,t){const n={},r=g(t,["model"]);null!=r&&m(n,["_url","model"],$e(e,r));const i=g(t,["prompt"]);null!=i&&m(n,["instances[0]","prompt"],i);const o=g(t,["config"]);return null!=o&&function(e,t){if(void 0!==g(e,["outputGcsUri"]))throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(void 0!==g(e,["negativePrompt"]))throw new Error("negativePrompt parameter is not supported in Gemini API.");const n=g(e,["numberOfImages"]);void 0!==t&&null!=n&&m(t,["parameters","sampleCount"],n);const r=g(e,["aspectRatio"]);void 0!==t&&null!=r&&m(t,["parameters","aspectRatio"],r);const i=g(e,["guidanceScale"]);if(void 0!==t&&null!=i&&m(t,["parameters","guidanceScale"],i),void 0!==g(e,["seed"]))throw new Error("seed parameter is not supported in Gemini API.");const o=g(e,["safetyFilterLevel"]);void 0!==t&&null!=o&&m(t,["parameters","safetySetting"],o);const s=g(e,["personGeneration"]);void 0!==t&&null!=s&&m(t,["parameters","personGeneration"],s);const a=g(e,["includeSafetyAttributes"]);void 0!==t&&null!=a&&m(t,["parameters","includeSafetyAttributes"],a);const l=g(e,["includeRaiReason"]);void 0!==t&&null!=l&&m(t,["parameters","includeRaiReason"],l);const u=g(e,["language"]);void 0!==t&&null!=u&&m(t,["parameters","language"],u);const c=g(e,["outputMimeType"]);void 0!==t&&null!=c&&m(t,["parameters","outputOptions","mimeType"],c);const d=g(e,["outputCompressionQuality"]);if(void 0!==t&&null!=d&&m(t,["parameters","outputOptions","compressionQuality"],d),void 0!==g(e,["addWatermark"]))throw new Error("addWatermark parameter is not supported in Gemini API.");if(void 0!==g(e,["labels"]))throw new Error("labels parameter is not supported in Gemini API.");const h=g(e,["imageSize"]);if(void 0!==t&&null!=h&&m(t,["parameters","sampleImageSize"],h),void 0!==g(e,["enhancePrompt"]))throw new Error("enhancePrompt parameter is not supported in Gemini API.")}(o,n),n}function Rn(e,t){const n={},r=g(t,["model"]);null!=r&&m(n,["_url","model"],$e(e,r));const i=g(t,["prompt"]);null!=i&&m(n,["instances[0]","prompt"],i);const o=g(t,["config"]);return null!=o&&function(e,t){const n=g(e,["outputGcsUri"]);void 0!==t&&null!=n&&m(t,["parameters","storageUri"],n);const r=g(e,["negativePrompt"]);void 0!==t&&null!=r&&m(t,["parameters","negativePrompt"],r);const i=g(e,["numberOfImages"]);void 0!==t&&null!=i&&m(t,["parameters","sampleCount"],i);const o=g(e,["aspectRatio"]);void 0!==t&&null!=o&&m(t,["parameters","aspectRatio"],o);const s=g(e,["guidanceScale"]);void 0!==t&&null!=s&&m(t,["parameters","guidanceScale"],s);const a=g(e,["seed"]);void 0!==t&&null!=a&&m(t,["parameters","seed"],a);const l=g(e,["safetyFilterLevel"]);void 0!==t&&null!=l&&m(t,["parameters","safetySetting"],l);const u=g(e,["personGeneration"]);void 0!==t&&null!=u&&m(t,["parameters","personGeneration"],u);const c=g(e,["includeSafetyAttributes"]);void 0!==t&&null!=c&&m(t,["parameters","includeSafetyAttributes"],c);const d=g(e,["includeRaiReason"]);void 0!==t&&null!=d&&m(t,["parameters","includeRaiReason"],d);const h=g(e,["language"]);void 0!==t&&null!=h&&m(t,["parameters","language"],h);const f=g(e,["outputMimeType"]);void 0!==t&&null!=f&&m(t,["parameters","outputOptions","mimeType"],f);const p=g(e,["outputCompressionQuality"]);void 0!==t&&null!=p&&m(t,["parameters","outputOptions","compressionQuality"],p);const y=g(e,["addWatermark"]);void 0!==t&&null!=y&&m(t,["parameters","addWatermark"],y);const v=g(e,["labels"]);void 0!==t&&null!=v&&m(t,["labels"],v);const b=g(e,["imageSize"]);void 0!==t&&null!=b&&m(t,["parameters","sampleImageSize"],b);const E=g(e,["enhancePrompt"]);void 0!==t&&null!=E&&m(t,["parameters","enhancePrompt"],E)}(o,n),n}function Dn(e){const t={},n=g(e,["sdkHttpResponse"]);null!=n&&m(t,["sdkHttpResponse"],n);const r=g(e,["predictions"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map((e=>function(e){const t={},n=g(e,["_self"]);null!=n&&m(t,["image"],function(e){const t={},n=g(e,["bytesBase64Encoded"]);null!=n&&m(t,["imageBytes"],Et(n));const r=g(e,["mimeType"]);null!=r&&m(t,["mimeType"],r);return t}(n));const r=g(e,["raiFilteredReason"]);null!=r&&m(t,["raiFilteredReason"],r);const i=g(e,["_self"]);null!=i&&m(t,["safetyAttributes"],Yn(i));return t}(e)))),m(t,["generatedImages"],e)}const i=g(e,["positivePromptSafetyAttributes"]);return null!=i&&m(t,["positivePromptSafetyAttributes"],Yn(i)),t}function Pn(e,t){const n=g(e,["numberOfVideos"]);if(void 0!==t&&null!=n&&m(t,["parameters","sampleCount"],n),void 0!==g(e,["outputGcsUri"]))throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(void 0!==g(e,["fps"]))throw new Error("fps parameter is not supported in Gemini API.");const r=g(e,["durationSeconds"]);if(void 0!==t&&null!=r&&m(t,["parameters","durationSeconds"],r),void 0!==g(e,["seed"]))throw new Error("seed parameter is not supported in Gemini API.");const i=g(e,["aspectRatio"]);void 0!==t&&null!=i&&m(t,["parameters","aspectRatio"],i);const o=g(e,["resolution"]);void 0!==t&&null!=o&&m(t,["parameters","resolution"],o);const s=g(e,["personGeneration"]);if(void 0!==t&&null!=s&&m(t,["parameters","personGeneration"],s),void 0!==g(e,["pubsubTopic"]))throw new Error("pubsubTopic parameter is not supported in Gemini API.");const a=g(e,["negativePrompt"]);void 0!==t&&null!=a&&m(t,["parameters","negativePrompt"],a);const l=g(e,["enhancePrompt"]);if(void 0!==t&&null!=l&&m(t,["parameters","enhancePrompt"],l),void 0!==g(e,["generateAudio"]))throw new Error("generateAudio parameter is not supported in Gemini API.");const u=g(e,["lastFrame"]);void 0!==t&&null!=u&&m(t,["instances[0]","lastFrame"],Bn(u));const c=g(e,["referenceImages"]);if(void 0!==t&&null!=c){let e=c;Array.isArray(e)&&(e=e.map((e=>function(e){const t={},n=g(e,["image"]);null!=n&&m(t,["image"],Bn(n));const r=g(e,["referenceType"]);null!=r&&m(t,["referenceType"],r);return t}(e)))),m(t,["instances[0]","referenceImages"],e)}if(void 0!==g(e,["mask"]))throw new Error("mask parameter is not supported in Gemini API.");if(void 0!==g(e,["compressionQuality"]))throw new Error("compressionQuality parameter is not supported in Gemini API.");return{}}function Mn(e,t){const n=g(e,["numberOfVideos"]);void 0!==t&&null!=n&&m(t,["parameters","sampleCount"],n);const r=g(e,["outputGcsUri"]);void 0!==t&&null!=r&&m(t,["parameters","storageUri"],r);const i=g(e,["fps"]);void 0!==t&&null!=i&&m(t,["parameters","fps"],i);const o=g(e,["durationSeconds"]);void 0!==t&&null!=o&&m(t,["parameters","durationSeconds"],o);const s=g(e,["seed"]);void 0!==t&&null!=s&&m(t,["parameters","seed"],s);const a=g(e,["aspectRatio"]);void 0!==t&&null!=a&&m(t,["parameters","aspectRatio"],a);const l=g(e,["resolution"]);void 0!==t&&null!=l&&m(t,["parameters","resolution"],l);const u=g(e,["personGeneration"]);void 0!==t&&null!=u&&m(t,["parameters","personGeneration"],u);const c=g(e,["pubsubTopic"]);void 0!==t&&null!=c&&m(t,["parameters","pubsubTopic"],c);const d=g(e,["negativePrompt"]);void 0!==t&&null!=d&&m(t,["parameters","negativePrompt"],d);const h=g(e,["enhancePrompt"]);void 0!==t&&null!=h&&m(t,["parameters","enhancePrompt"],h);const f=g(e,["generateAudio"]);void 0!==t&&null!=f&&m(t,["parameters","generateAudio"],f);const p=g(e,["lastFrame"]);void 0!==t&&null!=p&&m(t,["instances[0]","lastFrame"],Hn(p));const y=g(e,["referenceImages"]);if(void 0!==t&&null!=y){let e=y;Array.isArray(e)&&(e=e.map((e=>function(e){const t={},n=g(e,["image"]);null!=n&&m(t,["image"],Hn(n));const r=g(e,["referenceType"]);null!=r&&m(t,["referenceType"],r);return t}(e)))),m(t,["instances[0]","referenceImages"],e)}const v=g(e,["mask"]);void 0!==t&&null!=v&&m(t,["instances[0]","mask"],function(e){const t={},n=g(e,["image"]);null!=n&&m(t,["_self"],Hn(n));const r=g(e,["maskMode"]);null!=r&&m(t,["maskMode"],r);return t}(v));const b=g(e,["compressionQuality"]);return void 0!==t&&null!=b&&m(t,["parameters","compressionQuality"],b),{}}function Ln(e){const t={},n=g(e,["name"]);null!=n&&m(t,["name"],n);const r=g(e,["metadata"]);null!=r&&m(t,["metadata"],r);const i=g(e,["done"]);null!=i&&m(t,["done"],i);const o=g(e,["error"]);null!=o&&m(t,["error"],o);const s=g(e,["response","generateVideoResponse"]);return null!=s&&m(t,["response"],function(e){const t={},n=g(e,["generatedSamples"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>function(e){const t={},n=g(e,["video"]);null!=n&&m(t,["video"],function(e){const t={},n=g(e,["uri"]);null!=n&&m(t,["uri"],n);const r=g(e,["encodedVideo"]);null!=r&&m(t,["videoBytes"],Et(r));const i=g(e,["encoding"]);null!=i&&m(t,["mimeType"],i);return t}(n));return t}(e)))),m(t,["generatedVideos"],e)}const r=g(e,["raiMediaFilteredCount"]);null!=r&&m(t,["raiMediaFilteredCount"],r);const i=g(e,["raiMediaFilteredReasons"]);null!=i&&m(t,["raiMediaFilteredReasons"],i);return t}(s)),t}function Un(e){const t={},n=g(e,["name"]);null!=n&&m(t,["name"],n);const r=g(e,["metadata"]);null!=r&&m(t,["metadata"],r);const i=g(e,["done"]);null!=i&&m(t,["done"],i);const o=g(e,["error"]);null!=o&&m(t,["error"],o);const s=g(e,["response"]);return null!=s&&m(t,["response"],function(e){const t={},n=g(e,["videos"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>function(e){const t={},n=g(e,["_self"]);null!=n&&m(t,["video"],function(e){const t={},n=g(e,["gcsUri"]);null!=n&&m(t,["uri"],n);const r=g(e,["bytesBase64Encoded"]);null!=r&&m(t,["videoBytes"],Et(r));const i=g(e,["mimeType"]);null!=i&&m(t,["mimeType"],i);return t}(n));return t}(e)))),m(t,["generatedVideos"],e)}const r=g(e,["raiMediaFilteredCount"]);null!=r&&m(t,["raiMediaFilteredCount"],r);const i=g(e,["raiMediaFilteredReasons"]);null!=i&&m(t,["raiMediaFilteredReasons"],i);return t}(s)),t}function Fn(e,t){const n={},r=g(t,["model"]);null!=r&&m(n,["_url","model"],$e(e,r));const i=g(t,["prompt"]);null!=i&&m(n,["instances[0]","prompt"],i);const o=g(t,["image"]);null!=o&&m(n,["instances[0]","image"],Bn(o));const s=g(t,["video"]);null!=s&&m(n,["instances[0]","video"],ir(s));const a=g(t,["source"]);null!=a&&function(e,t){const n={},r=g(e,["prompt"]);void 0!==t&&null!=r&&m(t,["instances[0]","prompt"],r);const i=g(e,["image"]);void 0!==t&&null!=i&&m(t,["instances[0]","image"],Bn(i));const o=g(e,["video"]);void 0!==t&&null!=o&&m(t,["instances[0]","video"],ir(o))}(a,n);const l=g(t,["config"]);return null!=l&&Pn(l,n),n}function jn(e,t){const n={},r=g(t,["model"]);null!=r&&m(n,["_url","model"],$e(e,r));const i=g(t,["prompt"]);null!=i&&m(n,["instances[0]","prompt"],i);const o=g(t,["image"]);null!=o&&m(n,["instances[0]","image"],Hn(o));const s=g(t,["video"]);null!=s&&m(n,["instances[0]","video"],or(s));const a=g(t,["source"]);null!=a&&function(e,t){const n={},r=g(e,["prompt"]);void 0!==t&&null!=r&&m(t,["instances[0]","prompt"],r);const i=g(e,["image"]);void 0!==t&&null!=i&&m(t,["instances[0]","image"],Hn(i));const o=g(e,["video"]);void 0!==t&&null!=o&&m(t,["instances[0]","video"],or(o))}(a,n);const l=g(t,["config"]);return null!=l&&Mn(l,n),n}function Vn(e){const t={},n=g(e,["_self"]);null!=n&&m(t,["image"],qn(n));const r=g(e,["raiFilteredReason"]);null!=r&&m(t,["raiFilteredReason"],r);const i=g(e,["_self"]);null!=i&&m(t,["safetyAttributes"],Qn(i));const o=g(e,["prompt"]);return null!=o&&m(t,["enhancedPrompt"],o),t}function qn(e){const t={},n=g(e,["gcsUri"]);null!=n&&m(t,["gcsUri"],n);const r=g(e,["bytesBase64Encoded"]);null!=r&&m(t,["imageBytes"],Et(r));const i=g(e,["mimeType"]);return null!=i&&m(t,["mimeType"],i),t}function Bn(e){const t={};if(void 0!==g(e,["gcsUri"]))throw new Error("gcsUri parameter is not supported in Gemini API.");const n=g(e,["imageBytes"]);null!=n&&m(t,["bytesBase64Encoded"],Et(n));const r=g(e,["mimeType"]);return null!=r&&m(t,["mimeType"],r),t}function Hn(e){const t={},n=g(e,["gcsUri"]);null!=n&&m(t,["gcsUri"],n);const r=g(e,["imageBytes"]);null!=r&&m(t,["bytesBase64Encoded"],Et(r));const i=g(e,["mimeType"]);return null!=i&&m(t,["mimeType"],i),t}function Gn(e,t){const n={},r=g(t,["config"]);return null!=r&&function(e,t,n){const r=g(t,["pageSize"]);void 0!==n&&null!=r&&m(n,["_query","pageSize"],r);const i=g(t,["pageToken"]);void 0!==n&&null!=i&&m(n,["_query","pageToken"],i);const o=g(t,["filter"]);void 0!==n&&null!=o&&m(n,["_query","filter"],o);const s=g(t,["queryBase"]);void 0!==n&&null!=s&&m(n,["_url","models_url"],St(e,s))}(e,r,n),n}function zn(e,t){const n={},r=g(t,["config"]);return null!=r&&function(e,t,n){const r=g(t,["pageSize"]);void 0!==n&&null!=r&&m(n,["_query","pageSize"],r);const i=g(t,["pageToken"]);void 0!==n&&null!=i&&m(n,["_query","pageToken"],i);const o=g(t,["filter"]);void 0!==n&&null!=o&&m(n,["_query","filter"],o);const s=g(t,["queryBase"]);void 0!==n&&null!=s&&m(n,["_url","models_url"],St(e,s))}(e,r,n),n}function Wn(e){const t={},n=g(e,["name"]);null!=n&&m(t,["name"],n);const r=g(e,["displayName"]);null!=r&&m(t,["displayName"],r);const i=g(e,["description"]);null!=i&&m(t,["description"],i);const o=g(e,["version"]);null!=o&&m(t,["version"],o);const s=g(e,["_self"]);null!=s&&m(t,["tunedModelInfo"],function(e){const t={},n=g(e,["baseModel"]);null!=n&&m(t,["baseModel"],n);const r=g(e,["createTime"]);null!=r&&m(t,["createTime"],r);const i=g(e,["updateTime"]);null!=i&&m(t,["updateTime"],i);return t}(s));const a=g(e,["inputTokenLimit"]);null!=a&&m(t,["inputTokenLimit"],a);const l=g(e,["outputTokenLimit"]);null!=l&&m(t,["outputTokenLimit"],l);const u=g(e,["supportedGenerationMethods"]);null!=u&&m(t,["supportedActions"],u);const c=g(e,["temperature"]);null!=c&&m(t,["temperature"],c);const d=g(e,["maxTemperature"]);null!=d&&m(t,["maxTemperature"],d);const h=g(e,["topP"]);null!=h&&m(t,["topP"],h);const f=g(e,["topK"]);null!=f&&m(t,["topK"],f);const p=g(e,["thinking"]);return null!=p&&m(t,["thinking"],p),t}function Kn(e){const t={},n=g(e,["name"]);null!=n&&m(t,["name"],n);const r=g(e,["displayName"]);null!=r&&m(t,["displayName"],r);const i=g(e,["description"]);null!=i&&m(t,["description"],i);const o=g(e,["versionId"]);null!=o&&m(t,["version"],o);const s=g(e,["deployedModels"]);if(null!=s){let e=s;Array.isArray(e)&&(e=e.map((e=>function(e){const t={},n=g(e,["endpoint"]);null!=n&&m(t,["name"],n);const r=g(e,["deployedModelId"]);return null!=r&&m(t,["deployedModelId"],r),t}(e)))),m(t,["endpoints"],e)}const a=g(e,["labels"]);null!=a&&m(t,["labels"],a);const l=g(e,["_self"]);null!=l&&m(t,["tunedModelInfo"],function(e){const t={},n=g(e,["labels","google-vertex-llm-tuning-base-model-id"]);null!=n&&m(t,["baseModel"],n);const r=g(e,["createTime"]);null!=r&&m(t,["createTime"],r);const i=g(e,["updateTime"]);null!=i&&m(t,["updateTime"],i);return t}(l));const u=g(e,["defaultCheckpointId"]);null!=u&&m(t,["defaultCheckpointId"],u);const c=g(e,["checkpoints"]);if(null!=c){let e=c;Array.isArray(e)&&(e=e.map((e=>e))),m(t,["checkpoints"],e)}return t}function Jn(e,t){const n={},r=g(t,["model"]);null!=r&&m(n,["_url","model"],$e(e,r));const i=g(t,["source"]);null!=i&&function(e,t){const n={},r=g(e,["prompt"]);void 0!==t&&null!=r&&m(t,["instances[0]","prompt"],r);const i=g(e,["personImage"]);void 0!==t&&null!=i&&m(t,["instances[0]","personImage","image"],Hn(i));const o=g(e,["productImages"]);if(void 0!==t&&null!=o){let e=o;Array.isArray(e)&&(e=e.map((e=>function(e){const t={},n=g(e,["productImage"]);return null!=n&&m(t,["image"],Hn(n)),t}(e)))),m(t,["instances[0]","productImages"],e)}}(i,n);const o=g(t,["config"]);return null!=o&&function(e,t){const n=g(e,["numberOfImages"]);void 0!==t&&null!=n&&m(t,["parameters","sampleCount"],n);const r=g(e,["baseSteps"]);void 0!==t&&null!=r&&m(t,["parameters","baseSteps"],r);const i=g(e,["outputGcsUri"]);void 0!==t&&null!=i&&m(t,["parameters","storageUri"],i);const o=g(e,["seed"]);void 0!==t&&null!=o&&m(t,["parameters","seed"],o);const s=g(e,["safetyFilterLevel"]);void 0!==t&&null!=s&&m(t,["parameters","safetySetting"],s);const a=g(e,["personGeneration"]);void 0!==t&&null!=a&&m(t,["parameters","personGeneration"],a);const l=g(e,["addWatermark"]);void 0!==t&&null!=l&&m(t,["parameters","addWatermark"],l);const u=g(e,["outputMimeType"]);void 0!==t&&null!=u&&m(t,["parameters","outputOptions","mimeType"],u);const c=g(e,["outputCompressionQuality"]);void 0!==t&&null!=c&&m(t,["parameters","outputOptions","compressionQuality"],c);const d=g(e,["enhancePrompt"]);void 0!==t&&null!=d&&m(t,["parameters","enhancePrompt"],d);const h=g(e,["labels"]);void 0!==t&&null!=h&&m(t,["labels"],h)}(o,n),n}function Yn(e){const t={},n=g(e,["safetyAttributes","categories"]);null!=n&&m(t,["categories"],n);const r=g(e,["safetyAttributes","scores"]);null!=r&&m(t,["scores"],r);const i=g(e,["contentType"]);return null!=i&&m(t,["contentType"],i),t}function Qn(e){const t={},n=g(e,["safetyAttributes","categories"]);null!=n&&m(t,["categories"],n);const r=g(e,["safetyAttributes","scores"]);null!=r&&m(t,["scores"],r);const i=g(e,["contentType"]);return null!=i&&m(t,["contentType"],i),t}function Xn(e,t){const n={},r=g(t,["model"]);null!=r&&m(n,["_url","model"],$e(e,r));const i=g(t,["source"]);null!=i&&function(e,t){const n={},r=g(e,["prompt"]);void 0!==t&&null!=r&&m(t,["instances[0]","prompt"],r);const i=g(e,["image"]);void 0!==t&&null!=i&&m(t,["instances[0]","image"],Hn(i));const o=g(e,["scribbleImage"]);void 0!==t&&null!=o&&m(t,["instances[0]","scribble"],function(e){const t={},n=g(e,["image"]);return null!=n&&m(t,["image"],Hn(n)),t}(o))}(i,n);const o=g(t,["config"]);return null!=o&&function(e,t){const n=g(e,["mode"]);void 0!==t&&null!=n&&m(t,["parameters","mode"],n);const r=g(e,["maxPredictions"]);void 0!==t&&null!=r&&m(t,["parameters","maxPredictions"],r);const i=g(e,["confidenceThreshold"]);void 0!==t&&null!=i&&m(t,["parameters","confidenceThreshold"],i);const o=g(e,["maskDilation"]);void 0!==t&&null!=o&&m(t,["parameters","maskDilation"],o);const s=g(e,["binaryColorThreshold"]);void 0!==t&&null!=s&&m(t,["parameters","binaryColorThreshold"],s);const a=g(e,["labels"]);void 0!==t&&null!=a&&m(t,["labels"],a)}(o,n),n}function $n(e){const t={},n=g(e,["predictions"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>function(e){const t={},n=g(e,["_self"]);null!=n&&m(t,["mask"],qn(n));const r=g(e,["labels"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map((e=>e))),m(t,["labels"],e)}return t}(e)))),m(t,["generatedMasks"],e)}return t}function Zn(e){const t={},n=g(e,["languageCode"]);null!=n&&m(t,["languageCode"],n);const r=g(e,["voiceConfig"]);if(null!=r&&m(t,["voiceConfig"],r),void 0!==g(e,["multiSpeakerVoiceConfig"]))throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return t}function er(e){const t={},n=g(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>function(e){const t={};if(void 0!==g(e,["behavior"]))throw new Error("behavior parameter is not supported in Vertex AI.");const n=g(e,["description"]);null!=n&&m(t,["description"],n);const r=g(e,["name"]);null!=r&&m(t,["name"],r);const i=g(e,["parameters"]);null!=i&&m(t,["parameters"],i);const o=g(e,["parametersJsonSchema"]);null!=o&&m(t,["parametersJsonSchema"],o);const s=g(e,["response"]);null!=s&&m(t,["response"],s);const a=g(e,["responseJsonSchema"]);return null!=a&&m(t,["responseJsonSchema"],a),t}(e)))),m(t,["functionDeclarations"],e)}const r=g(e,["retrieval"]);null!=r&&m(t,["retrieval"],r);const i=g(e,["googleSearchRetrieval"]);null!=i&&m(t,["googleSearchRetrieval"],i);const o=g(e,["computerUse"]);if(null!=o&&m(t,["computerUse"],o),void 0!==g(e,["fileSearch"]))throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=g(e,["codeExecution"]);null!=s&&m(t,["codeExecution"],s);const a=g(e,["enterpriseWebSearch"]);null!=a&&m(t,["enterpriseWebSearch"],a);const l=g(e,["googleMaps"]);null!=l&&m(t,["googleMaps"],l);const u=g(e,["googleSearch"]);null!=u&&m(t,["googleSearch"],u);const c=g(e,["urlContext"]);return null!=c&&m(t,["urlContext"],c),t}function tr(e,t){const n={},r=g(t,["model"]);null!=r&&m(n,["_url","name"],$e(e,r));const i=g(t,["config"]);return null!=i&&function(e,t){const n=g(e,["displayName"]);void 0!==t&&null!=n&&m(t,["displayName"],n);const r=g(e,["description"]);void 0!==t&&null!=r&&m(t,["description"],r);const i=g(e,["defaultCheckpointId"]);void 0!==t&&null!=i&&m(t,["defaultCheckpointId"],i)}(i,n),n}function nr(e,t){const n={},r=g(t,["model"]);null!=r&&m(n,["_url","model"],$e(e,r));const i=g(t,["config"]);return null!=i&&function(e,t){const n=g(e,["displayName"]);void 0!==t&&null!=n&&m(t,["displayName"],n);const r=g(e,["description"]);void 0!==t&&null!=r&&m(t,["description"],r);const i=g(e,["defaultCheckpointId"]);void 0!==t&&null!=i&&m(t,["defaultCheckpointId"],i)}(i,n),n}function rr(e,t){const n={},r=g(t,["model"]);null!=r&&m(n,["_url","model"],$e(e,r));const i=g(t,["image"]);null!=i&&m(n,["instances[0]","image"],Hn(i));const o=g(t,["upscaleFactor"]);null!=o&&m(n,["parameters","upscaleConfig","upscaleFactor"],o);const s=g(t,["config"]);return null!=s&&function(e,t){const n=g(e,["outputGcsUri"]);void 0!==t&&null!=n&&m(t,["parameters","storageUri"],n);const r=g(e,["safetyFilterLevel"]);void 0!==t&&null!=r&&m(t,["parameters","safetySetting"],r);const i=g(e,["personGeneration"]);void 0!==t&&null!=i&&m(t,["parameters","personGeneration"],i);const o=g(e,["includeRaiReason"]);void 0!==t&&null!=o&&m(t,["parameters","includeRaiReason"],o);const s=g(e,["outputMimeType"]);void 0!==t&&null!=s&&m(t,["parameters","outputOptions","mimeType"],s);const a=g(e,["outputCompressionQuality"]);void 0!==t&&null!=a&&m(t,["parameters","outputOptions","compressionQuality"],a);const l=g(e,["enhanceInputImage"]);void 0!==t&&null!=l&&m(t,["parameters","upscaleConfig","enhanceInputImage"],l);const u=g(e,["imagePreservationFactor"]);void 0!==t&&null!=u&&m(t,["parameters","upscaleConfig","imagePreservationFactor"],u);const c=g(e,["labels"]);void 0!==t&&null!=c&&m(t,["labels"],c);const d=g(e,["numberOfImages"]);void 0!==t&&null!=d&&m(t,["parameters","sampleCount"],d);const h=g(e,["mode"]);void 0!==t&&null!=h&&m(t,["parameters","mode"],h)}(s,n),n}function ir(e){const t={},n=g(e,["uri"]);null!=n&&m(t,["uri"],n);const r=g(e,["videoBytes"]);null!=r&&m(t,["encodedVideo"],Et(r));const i=g(e,["mimeType"]);return null!=i&&m(t,["encoding"],i),t}function or(e){const t={},n=g(e,["uri"]);null!=n&&m(t,["gcsUri"],n);const r=g(e,["videoBytes"]);null!=r&&m(t,["bytesBase64Encoded"],Et(r));const i=g(e,["mimeType"]);return null!=i&&m(t,["mimeType"],i),t}const sr="x-goog-api-client",ar="google-genai-sdk/".concat("1.30.0"),lr=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class ur{constructor(e){var t,n;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=null!==(t=this.clientOptions.apiVersion)&&void 0!==t?t:"v1beta1",r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=null!==(n=this.clientOptions.apiVersion)&&void 0!==n?n:"v1beta",r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&"global"!==this.clientOptions.location?"https://".concat(this.clientOptions.location,"-aiplatform.googleapis.com/"):"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:(this.clientOptions.project=void 0,this.clientOptions.location=void 0)}isVertexAI(){var e;return null!==(e=this.clientOptions.vertexai)&&void 0!==e&&e}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.apiVersion)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.baseUrl)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.headers)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||void 0===e.baseUrl||void 0===e.apiVersion)throw new Error("HTTP options are not correctly set.");const t=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&""!==e.apiVersion&&t.push(e.apiVersion),t.join("/")}getBaseResourcePath(){return"projects/".concat(this.clientOptions.project,"/locations/").concat(this.clientOptions.location)}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol="http:"==t.protocol?"ws":"wss",t.toString()}setBaseUrl(e){if(!this.clientOptions.httpOptions)throw new Error("HTTP options are not correctly set.");this.clientOptions.httpOptions.baseUrl=e}constructUrl(e,t,n){const r=[this.getRequestUrlInternal(t)];n&&r.push(this.getBaseResourcePath()),""!==e&&r.push(e);return new URL("".concat(r.join("/")))}shouldPrependVertexProjectPath(e){return!this.clientOptions.apiKey&&(!!this.clientOptions.vertexai&&(!e.path.startsWith("projects/")&&("GET"!==e.httpMethod||!e.path.startsWith("publishers/google/models"))))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const n=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,n);if(e.queryParams)for(const[o,s]of Object.entries(e.queryParams))r.searchParams.append(o,String(s));let i={};if("GET"===e.httpMethod){if(e.body&&"{}"!==e.body)throw new Error("Request body should be empty for GET request, but got non empty request body")}else i.body=e.body;return i=await this.includeExtraHttpOptionsToRequestInit(i,t,r.toString(),e.abortSignal),this.unaryApiCall(r,i,e.httpMethod)}patchHttpOptions(e,t){const n=JSON.parse(JSON.stringify(e));for(const[r,i]of Object.entries(t))"object"===typeof i?n[r]=Object.assign(Object.assign({},n[r]),i):void 0!==i&&(n[r]=i);return n}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const n=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,n);r.searchParams.has("alt")&&"sse"===r.searchParams.get("alt")||r.searchParams.set("alt","sse");let i={};return i.body=e.body,i=await this.includeExtraHttpOptionsToRequestInit(i,t,r.toString(),e.abortSignal),this.streamApiCall(r,i,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,n,r){if(t&&t.timeout||r){const n=new AbortController,i=n.signal;if(t.timeout&&(null===t||void 0===t?void 0:t.timeout)>0){const e=setTimeout((()=>n.abort()),t.timeout);e&&"function"===typeof e.unref&&e.unref()}r&&r.addEventListener("abort",(()=>{n.abort()})),e.signal=i}return t&&null!==t.extraBody&&function(e,t){if(!t||0===Object.keys(t).length)return;if(e.body instanceof Blob)return void console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");let n={};if("string"===typeof e.body&&e.body.length>0)try{const t=JSON.parse(e.body);if("object"!==typeof t||null===t||Array.isArray(t))return void console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");n=t}catch(Mv){return void console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.")}function r(e,t){const n=Object.assign({},e);for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)){const e=t[i],o=n[i];e&&"object"===typeof e&&!Array.isArray(e)&&o&&"object"===typeof o&&!Array.isArray(o)?n[i]=r(o,e):(o&&e&&typeof o!==typeof e&&console.warn('includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "'.concat(i,'". Original type: ').concat(typeof o,", New type: ").concat(typeof e,". Overwriting.")),n[i]=e)}return n}const i=r(n,t);e.body=JSON.stringify(i)}(e,t.extraBody),e.headers=await this.getHeadersInternal(t,n),e}async unaryApiCall(e,t,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:n})).then((async e=>(await cr(e),new Ce(e)))).catch((e=>{throw e instanceof Error?e:new Error(JSON.stringify(e))}))}async streamApiCall(e,t,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:n})).then((async e=>(await cr(e),this.processStreamResponse(e)))).catch((e=>{throw e instanceof Error?e:new Error(JSON.stringify(e))}))}processStreamResponse(e){var t;return $t(this,arguments,(function*(){const n=null===(t=null===e||void 0===e?void 0:e.body)||void 0===t?void 0:t.getReader(),r=new TextDecoder("utf-8");if(!n)throw new Error("Response body is empty");try{let t="";for(;;){const{done:i,value:o}=yield Xt(n.read());if(i){if(t.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const s=r.decode(o,{stream:!0});try{const e=JSON.parse(s);if("error"in e){const t=JSON.parse(JSON.stringify(e.error)),n=t.status,r=t.code,i="got status: ".concat(n,". ").concat(JSON.stringify(e));if(r>=400&&r<600){throw new sn({message:i,status:r})}}}catch(Mv){if("ApiError"===Mv.name)throw Mv}t+=s;let a=t.match(lr);for(;a;){const n=a[1];try{const r=new Response(n,{headers:null===e||void 0===e?void 0:e.headers,status:null===e||void 0===e?void 0:e.status,statusText:null===e||void 0===e?void 0:e.statusText});yield yield Xt(new Ce(r)),t=t.slice(a[0].length),a=t.match(lr)}catch(Mv){throw new Error("exception parsing stream chunk ".concat(n,". ").concat(Mv))}}}}finally{n.releaseLock()}}))}async apiCall(e,t){return fetch(e,t).catch((e=>{throw new Error("exception ".concat(e," sending request"))}))}getDefaultHeaders(){const e={},t=ar+" "+this.clientOptions.userAgentExtra;return e["User-Agent"]=t,e[sr]=t,e["Content-Type"]="application/json",e}async getHeadersInternal(e,t){const n=new Headers;if(e&&e.headers){for(const[t,r]of Object.entries(e.headers))n.append(t,r);e.timeout&&e.timeout>0&&n.append("X-Server-Timeout",String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n,t),n}getFileName(e){var t;let n="";return"string"===typeof e&&(n=e.replace(/[/\\]+$/,""),n=null!==(t=n.split(/[/\\]/).pop())&&void 0!==t?t:""),n}async uploadFile(e,t){var n;const r={};null!=t&&(r.mimeType=t.mimeType,r.name=t.name,r.displayName=t.displayName),r.name&&!r.name.startsWith("files/")&&(r.name="files/".concat(r.name));const i=this.clientOptions.uploader,o=await i.stat(e);r.sizeBytes=String(o.size);const s=null!==(n=null===t||void 0===t?void 0:t.mimeType)&&void 0!==n?n:o.type;if(void 0===s||""===s)throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=s;const a={file:r},l=this.getFileName(e),u=p("upload/v1beta/files",a._url),c=await this.fetchUploadUrl(u,r.sizeBytes,r.mimeType,l,a,null===t||void 0===t?void 0:t.httpOptions);return i.upload(e,c,this)}async uploadFileToFileSearchStore(e,t,n){var r;const i=this.clientOptions.uploader,o=await i.stat(t),s=String(o.size),a=null!==(r=null===n||void 0===n?void 0:n.mimeType)&&void 0!==r?r:o.type;if(void 0===a||""===a)throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const l="upload/v1beta/".concat(e,":uploadToFileSearchStore"),u=this.getFileName(t),c={};(null===n||void 0===n?void 0:n.customMetadata)&&(c.customMetadata=n.customMetadata),(null===n||void 0===n?void 0:n.chunkingConfig)&&(c.chunkingConfig=n.chunkingConfig);const d=await this.fetchUploadUrl(l,s,a,u,c,null===n||void 0===n?void 0:n.httpOptions);return i.uploadToFileSearchStore(t,d,this)}async downloadFile(e){const t=this.clientOptions.downloader;await t.download(e,this)}async fetchUploadUrl(e,t,n,r,i,o){var s;let a={};a=o||{apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(t),"X-Goog-Upload-Header-Content-Type":"".concat(n)},r?{"X-Goog-Upload-File-Name":r}:{})};const l=await this.request({path:e,body:JSON.stringify(i),httpMethod:"POST",httpOptions:a});if(!l||!(null===l||void 0===l?void 0:l.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const u=null===(s=null===l||void 0===l?void 0:l.headers)||void 0===s?void 0:s["x-goog-upload-url"];if(void 0===u)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return u}}async function cr(e){var t;if(void 0===e)throw new Error("response is undefined");if(!e.ok){const n=e.status;let r;r=(null===(t=e.headers.get("content-type"))||void 0===t?void 0:t.includes("application/json"))?await e.json():{error:{message:await e.text(),code:e.status,status:e.statusText}};const i=JSON.stringify(r);if(n>=400&&n<600){throw new sn({message:i,status:n})}throw new Error(i)}}let dr=!1;function hr(e){for(const n of e){if(null!==(t=n)&&"object"===typeof t&&t instanceof mr)return!0;if("object"===typeof n&&"inputSchema"in n)return!0}var t;return dr}function fr(e){var t;const n=null!==(t=e[sr])&&void 0!==t?t:"";e[sr]=(n+" ".concat("mcp_used/unknown")).trimStart()}function pr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return $t(this,arguments,(function*(){let n,r=0;for(;r<t;){const t=yield Xt(e.listTools({cursor:n}));for(const e of t.tools)yield yield Xt(e),r++;if(!t.nextCursor)break;n=t.nextCursor}}))}class mr{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new mr(e,t)}async initialize(){var e,t,n,r;if(this.mcpTools.length>0)return;const i={},o=[];for(const c of this.mcpClients)try{for(var s,a=!0,l=(t=void 0,Zt(pr(c)));!(e=(s=await l.next()).done);a=!0){r=s.value,a=!1;const e=r;o.push(e);const t=e.name;if(i[t])throw new Error("Duplicate function name ".concat(t," found in MCP tools. Please ensure function names are unique."));i[t]=c}}catch(u){t={error:u}}finally{try{a||e||!(n=l.return)||await n.call(l)}finally{if(t)throw t.error}}this.mcpTools=o,this.functionNameToMcpClient=i}async tool(){return await this.initialize(),function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=[],r=new Set;for(const i of e){const e=i.name;if(r.has(e))throw new Error("Duplicate function name ".concat(e," found in MCP tools. Please ensure function names are unique."));r.add(e);const o=Tt(i,t);o.functionDeclarations&&n.push(...o.functionDeclarations)}return{functionDeclarations:n}}(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const n of e)if(n.name in this.functionNameToMcpClient){const e=this.functionNameToMcpClient[n.name];let r;this.config.timeout&&(r={timeout:this.config.timeout});const i=await e.callTool({name:n.name,arguments:n.args},void 0,r);t.push({functionResponse:{name:n.name,response:i.isError?{error:i}:i}})}return t}}class gr{constructor(e,t,n){this.apiClient=e,this.auth=t,this.webSocketFactory=n}async connect(e){var t,n;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),i=this.apiClient.getApiVersion(),o=function(e){const t=new Headers;for(const[n,r]of Object.entries(e))t.append(n,r);return t}(this.apiClient.getDefaultHeaders()),s=this.apiClient.getApiKey(),a="".concat(r,"/ws/google.ai.generativelanguage.").concat(i,".GenerativeService.BidiGenerateMusic?key=").concat(s);let l=()=>{};const u=new Promise((e=>{l=e})),c=e.callbacks,d=(this.apiClient,{onopen:function(){l({})},onmessage:e=>{!async function(e,t,n){const r=new Qe;let i;i=n.data instanceof Blob?JSON.parse(await n.data.text()):JSON.parse(n.data),Object.assign(r,i),t(r)}(0,c.onmessage,e)},onerror:null!==(t=null===c||void 0===c?void 0:c.onerror)&&void 0!==t?t:function(e){},onclose:null!==(n=null===c||void 0===c?void 0:c.onclose)&&void 0!==n?n:function(e){}}),h=this.webSocketFactory.create(a,function(e){const t={};return e.forEach(((e,n)=>{t[n]=e})),t}(o),d);h.connect(),await u;const f={setup:{model:$e(this.apiClient,e.model)}};return h.send(JSON.stringify(f)),new yr(h,this.apiClient)}}class yr{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||0===Object.keys(e.weightedPrompts).length)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=function(e){const t={},n=g(e,["weightedPrompts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>e))),m(t,["weightedPrompts"],e)}return t}(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=function(e){const t={},n=g(e,["musicGenerationConfig"]);return null!=n&&m(t,["musicGenerationConfig"],n),t}(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(_e.PLAY)}pause(){this.sendPlaybackControl(_e.PAUSE)}stop(){this.sendPlaybackControl(_e.STOP)}resetContext(){this.sendPlaybackControl(_e.RESET_CONTEXT)}close(){this.conn.close()}}class vr{constructor(e,t,n){this.apiClient=e,this.auth=t,this.webSocketFactory=n,this.music=new gr(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,n,r,i,o,s;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const a=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion();let u;const c=this.apiClient.getHeaders();e.config&&e.config.tools&&hr(e.config.tools)&&fr(c);const d=function(e){const t=new Headers;for(const[n,r]of Object.entries(e))t.append(n,r);return t}(c);if(this.apiClient.isVertexAI())u="".concat(a,"/ws/google.cloud.aiplatform.").concat(l,".LlmBidiService/BidiGenerateContent"),await this.auth.addAuthHeaders(d,u);else{const e=this.apiClient.getApiKey();let t="BidiGenerateContent",n="key";(null===e||void 0===e?void 0:e.startsWith("auth_tokens/"))&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),"v1alpha"!==l&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),t="BidiGenerateContentConstrained",n="access_token"),u="".concat(a,"/ws/google.ai.generativelanguage.").concat(l,".GenerativeService.").concat(t,"?").concat(n,"=").concat(e)}let h=()=>{};const f=new Promise((e=>{h=e})),p=e.callbacks,y=this.apiClient,v={onopen:function(){var e;null===(e=null===p||void 0===p?void 0:p.onopen)||void 0===e||e.call(p),h({})},onmessage:e=>{!async function(e,t,n){const r=new Ye;let i;i=n.data instanceof Blob?await n.data.text():n.data instanceof ArrayBuffer?(new TextDecoder).decode(n.data):n.data;const o=JSON.parse(i);if(e.isVertexAI()){const e=mn(o);Object.assign(r,e)}else{const e=o;Object.assign(r,e)}t(r)}(y,p.onmessage,e)},onerror:null!==(t=null===p||void 0===p?void 0:p.onerror)&&void 0!==t?t:function(e){},onclose:null!==(n=null===p||void 0===p?void 0:p.onclose)&&void 0!==n?n:function(e){}},b=this.webSocketFactory.create(u,function(e){const t={};return e.forEach(((e,n)=>{t[n]=e})),t}(d),v);b.connect(),await f;let E=$e(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&E.startsWith("publishers/")){const e=this.apiClient.getProject(),t=this.apiClient.getLocation();E="projects/".concat(e,"/locations/").concat(t,"/")+E}let w={};this.apiClient.isVertexAI()&&void 0===(null===(r=e.config)||void 0===r?void 0:r.responseModalities)&&(void 0===e.config?e.config={responseModalities:[B.AUDIO]}:e.config.responseModalities=[B.AUDIO]),(null===(i=e.config)||void 0===i?void 0:i.generationConfig)&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const S=null!==(s=null===(o=e.config)||void 0===o?void 0:o.tools)&&void 0!==s?s:[],_=[];for(const m of S)if(this.isCallableTool(m)){const e=m;_.push(await e.tool())}else _.push(m);_.length>0&&(e.config.tools=_);const T={model:E,config:e.config,callbacks:e.callbacks};return w=this.apiClient.isVertexAI()?function(e,t){const n={},r=g(t,["model"]);null!=r&&m(n,["setup","model"],$e(e,r));const i=g(t,["config"]);return null!=i&&m(n,["config"],hn(i,n)),n}(this.apiClient,T):function(e,t){const n={},r=g(t,["model"]);null!=r&&m(n,["setup","model"],$e(e,r));const i=g(t,["config"]);return null!=i&&m(n,["config"],dn(i,n)),n}(this.apiClient,T),delete w.config,b.send(JSON.stringify(w)),new Er(b,this.apiClient)}isCallableTool(e){return"callTool"in e&&"function"===typeof e.callTool}}const br={turnComplete:!0};class Er{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(null!==t.turns&&void 0!==t.turns){let r=[];try{r=dt(t.turns),e.isVertexAI()||(r=r.map((e=>bn(e))))}catch(n){throw new Error('Failed to parse client content "turns", type: \''.concat(typeof t.turns,"'"))}return{clientContent:{turns:r,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let n=[];if(null==t.functionResponses)throw new Error("functionResponses is required.");if(n=Array.isArray(t.functionResponses)?t.functionResponses:[t.functionResponses],0===n.length)throw new Error("functionResponses is required.");for(const r of n){if("object"!==typeof r||null===r||!("name"in r)||!("response"in r))throw new Error("Could not parse function response, type '".concat(typeof r,"'."));if(!e.isVertexAI()&&!("id"in r))throw new Error("FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.")}return{toolResponse:{functionResponses:n}}}sendClientContent(e){e=Object.assign(Object.assign({},br),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};t=this.apiClient.isVertexAI()?{realtimeInput:pn(e)}:{realtimeInput:fn(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(null==e.functionResponses)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function wr(e){var t,n,r;if(null===(t=null===e||void 0===e?void 0:e.automaticFunctionCalling)||void 0===t?void 0:t.disable)return!0;let i=!1;for(const s of null!==(n=null===e||void 0===e?void 0:e.tools)&&void 0!==n?n:[])if(Sr(s)){i=!0;break}if(!i)return!0;const o=null===(r=null===e||void 0===e?void 0:e.automaticFunctionCalling)||void 0===r?void 0:r.maximumRemoteCalls;return!!(o&&(o<0||!Number.isInteger(o))||0==o)&&(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0)}function Sr(e){return"callTool"in e&&"function"===typeof e.callTool}function _r(e){var t;const n=[];return(null===(t=null===e||void 0===e?void 0:e.config)||void 0===t?void 0:t.tools)?(e.config.tools.forEach(((e,t)=>{if(Sr(e))return;const r=e;r.functionDeclarations&&r.functionDeclarations.length>0&&n.push(t)})),n):n}function Tr(e){var t;return!(null===(t=null===e||void 0===e?void 0:e.automaticFunctionCalling)||void 0===t?void 0:t.ignoreCallHistory)}class Cr extends f{constructor(e){super(),this.apiClient=e,this.generateContent=async e=>{var t,n,r,i,o;const s=await this.processParamsMaybeAddMcpUsage(e);if(this.maybeMoveToResponseJsonSchem(e),!function(e){var t,n,r;return null!==(r=null===(n=null===(t=e.config)||void 0===t?void 0:t.tools)||void 0===n?void 0:n.some((e=>Sr(e))))&&void 0!==r&&r}(e)||wr(e.config))return await this.generateContentInternal(s);const a=_r(e);if(a.length>0){const e=a.map((e=>"tools[".concat(e,"]"))).join(", ");throw new Error("Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ".concat(e,"."))}let l,u;const c=dt(s.contents),d=null!==(r=null===(n=null===(t=s.config)||void 0===t?void 0:t.automaticFunctionCalling)||void 0===n?void 0:n.maximumRemoteCalls)&&void 0!==r?r:10;let h=0;for(;h<d&&(l=await this.generateContentInternal(s),l.functionCalls&&0!==l.functionCalls.length);){const t=l.candidates[0].content,n=[];for(const r of null!==(o=null===(i=e.config)||void 0===i?void 0:i.tools)&&void 0!==o?o:[])if(Sr(r)){const e=r,t=await e.callTool(l.functionCalls);n.push(...t)}h++,u={role:"user",parts:n},s.contents=dt(s.contents),s.contents.push(t),s.contents.push(u),Tr(s.config)&&(c.push(t),c.push(u))}return Tr(s.config)&&(l.automaticFunctionCallingHistory=c),l},this.generateContentStream=async e=>{var t,n,r,i,o;if(this.maybeMoveToResponseJsonSchem(e),wr(e.config)){const t=await this.processParamsMaybeAddMcpUsage(e);return await this.generateContentStreamInternal(t)}const s=_r(e);if(s.length>0){const e=s.map((e=>"tools[".concat(e,"]"))).join(", ");throw new Error("Incompatible tools found at ".concat(e,'. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.'))}const a=null===(r=null===(n=null===(t=null===e||void 0===e?void 0:e.config)||void 0===t?void 0:t.toolConfig)||void 0===n?void 0:n.functionCallingConfig)||void 0===r?void 0:r.streamFunctionCallArguments,l=null===(o=null===(i=null===e||void 0===e?void 0:e.config)||void 0===i?void 0:i.automaticFunctionCalling)||void 0===o?void 0:o.disable;if(a&&!l)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(e)},this.generateImages=async e=>await this.generateImagesInternal(e).then((e=>{var t;let n;const r=[];if(null===e||void 0===e?void 0:e.generatedImages)for(const o of e.generatedImages)o&&(null===o||void 0===o?void 0:o.safetyAttributes)&&"Positive Prompt"===(null===(t=null===o||void 0===o?void 0:o.safetyAttributes)||void 0===t?void 0:t.contentType)?n=null===o||void 0===o?void 0:o.safetyAttributes:r.push(o);let i;return i=n?{generatedImages:r,positivePromptSafetyAttributes:n,sdkHttpResponse:e.sdkHttpResponse}:{generatedImages:r,sdkHttpResponse:e.sdkHttpResponse},i})),this.list=async e=>{var t;const n={config:Object.assign(Object.assign({},{queryBase:!0}),null===e||void 0===e?void 0:e.config)};if(this.apiClient.isVertexAI()&&!n.config.queryBase){if(null===(t=n.config)||void 0===t?void 0:t.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");n.config.filter="labels.tune-type:*"}return new Vt(Te.PAGED_ITEM_MODELS,(e=>this.listInternal(e)),await this.listInternal(n),n)},this.editImage=async e=>{const t={model:e.model,prompt:e.prompt,referenceImages:[],config:e.config};return e.referenceImages&&e.referenceImages&&(t.referenceImages=e.referenceImages.map((e=>e.toReferenceImageAPI()))),await this.editImageInternal(t)},this.upscaleImage=async e=>{let t={numberOfImages:1,mode:"upscale"};e.config&&(t=Object.assign(Object.assign({},t),e.config));const n={model:e.model,image:e.image,upscaleFactor:e.upscaleFactor,config:t};return await this.upscaleImageInternal(n)},this.generateVideos=async e=>{var t,n,r,i,o,s;if((e.prompt||e.image||e.video)&&e.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||((null===(t=e.video)||void 0===t?void 0:t.uri)&&(null===(n=e.video)||void 0===n?void 0:n.videoBytes)?e.video={uri:e.video.uri,mimeType:e.video.mimeType}:(null===(i=null===(r=e.source)||void 0===r?void 0:r.video)||void 0===i?void 0:i.uri)&&(null===(s=null===(o=e.source)||void 0===o?void 0:o.video)||void 0===s?void 0:s.videoBytes)&&(e.source.video={uri:e.source.video.uri,mimeType:e.source.video.mimeType})),await this.generateVideosInternal(e)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,n,r;const i=null===(t=e.config)||void 0===t?void 0:t.tools;if(!i)return e;const o=await Promise.all(i.map((async e=>{if(Sr(e)){const t=e;return await t.tool()}return e}))),s={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:o})};if(s.config.tools=o,e.config&&e.config.tools&&hr(e.config.tools)){const t=null!==(r=null===(n=e.config.httpOptions)||void 0===n?void 0:n.headers)&&void 0!==r?r:{};let i=Object.assign({},t);0===Object.keys(i).length&&(i=this.apiClient.getDefaultHeaders()),fr(i),s.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:i})}return s}async initAfcToolsMap(e){var t,n,r;const i=new Map;for(const o of null!==(n=null===(t=e.config)||void 0===t?void 0:t.tools)&&void 0!==n?n:[])if(Sr(o)){const e=o,t=await e.tool();for(const n of null!==(r=t.functionDeclarations)&&void 0!==r?r:[]){if(!n.name)throw new Error("Function declaration name is required.");if(i.has(n.name))throw new Error("Duplicate tool declaration name: ".concat(n.name));i.set(n.name,e)}}return i}async processAfcStream(e){var t,n,r;const i=null!==(r=null===(n=null===(t=e.config)||void 0===t?void 0:t.automaticFunctionCalling)||void 0===n?void 0:n.maximumRemoteCalls)&&void 0!==r?r:10;let o=!1,s=0;return function(e,t,n){var r,a;return $t(this,arguments,(function*(){for(var l,u,c,d;s<i;){o&&(s++,o=!1);const g=yield Xt(e.processParamsMaybeAddMcpUsage(n)),y=yield Xt(e.generateContentStreamInternal(g)),v=[],b=[];try{for(var h,f=!0,p=(u=void 0,Zt(y));!(l=(h=yield Xt(p.next())).done);f=!0){d=h.value,f=!1;const e=d;if(yield yield Xt(e),e.candidates&&(null===(r=e.candidates[0])||void 0===r?void 0:r.content)){b.push(e.candidates[0].content);for(const n of null!==(a=e.candidates[0].content.parts)&&void 0!==a?a:[])if(s<i&&n.functionCall){if(!n.functionCall.name)throw new Error("Function call name was not returned by the model.");if(!t.has(n.functionCall.name))throw new Error("Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ".concat(t.keys(),", mising tool: ").concat(n.functionCall.name));{const e=yield Xt(t.get(n.functionCall.name).callTool([n.functionCall]));v.push(...e)}}}}}catch(m){u={error:m}}finally{try{f||l||!(c=p.return)||(yield Xt(c.call(p)))}finally{if(u)throw u.error}}if(!(v.length>0))break;{o=!0;const e=new Ie;e.candidates=[{content:{role:"user",parts:v}}],yield yield Xt(e);const t=[];t.push(...b),t.push({role:"user",parts:v});const r=dt(n.contents).concat(t);n.contents=r}}}))}(this,await this.initAfcToolsMap(e),e)}async generateContentInternal(e){var t,n,r,i;let o,s="",a={};if(this.apiClient.isVertexAI()){const r=Nn(this.apiClient,e);return s=p("{model}:generateContent",r._url),a=r._query,delete r._url,delete r._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),o.then((e=>{const t=kn(e),n=new Ie;return Object.assign(n,t),n}))}{const t=An(this.apiClient,e);return s=p("{model}:generateContent",t._url),a=t._query,delete t._url,delete t._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),o.then((e=>{const t=xn(e),n=new Ie;return Object.assign(n,t),n}))}}async generateContentStreamInternal(e){var t,n,r,i;let o,s="",a={};if(this.apiClient.isVertexAI()){const r=Nn(this.apiClient,e);s=p("{model}:streamGenerateContent?alt=sse",r._url),a=r._query,delete r._url,delete r._query;return o=this.apiClient.requestStream({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}),o.then((function(e){return $t(this,arguments,(function*(){var t,n,r,i;try{for(var o,s=!0,a=Zt(e);!(t=(o=yield Xt(a.next())).done);s=!0){i=o.value,s=!1;const e=i,t=kn(yield Xt(e.json()));t.sdkHttpResponse={headers:e.headers};const n=new Ie;Object.assign(n,t),yield yield Xt(n)}}catch(l){n={error:l}}finally{try{s||t||!(r=a.return)||(yield Xt(r.call(a)))}finally{if(n)throw n.error}}}))}))}{const t=An(this.apiClient,e);s=p("{model}:streamGenerateContent?alt=sse",t._url),a=t._query,delete t._url,delete t._query;return o=this.apiClient.requestStream({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}),o.then((function(e){return $t(this,arguments,(function*(){var t,n,r,i;try{for(var o,s=!0,a=Zt(e);!(t=(o=yield Xt(a.next())).done);s=!0){i=o.value,s=!1;const e=i,t=xn(yield Xt(e.json()));t.sdkHttpResponse={headers:e.headers};const n=new Ie;Object.assign(n,t),yield yield Xt(n)}}catch(l){n={error:l}}finally{try{s||t||!(r=a.return)||(yield Xt(r.call(a)))}finally{if(n)throw n.error}}}))}))}}async embedContent(e){var t,n,r,i;let o,s="",a={};if(this.apiClient.isVertexAI()){const r=Tn(this.apiClient,e);return s=p("{model}:predict",r._url),a=r._query,delete r._url,delete r._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),o.then((e=>{const t=function(e){const t={},n=g(e,["sdkHttpResponse"]);null!=n&&m(t,["sdkHttpResponse"],n);const r=g(e,["predictions[]","embeddings"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map((e=>vn(e)))),m(t,["embeddings"],e)}const i=g(e,["metadata"]);return null!=i&&m(t,["metadata"],i),t}(e),n=new Ae;return Object.assign(n,t),n}))}{const t=_n(this.apiClient,e);return s=p("{model}:batchEmbedContents",t._url),a=t._query,delete t._url,delete t._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),o.then((e=>{const t=function(e){const t={},n=g(e,["sdkHttpResponse"]);null!=n&&m(t,["sdkHttpResponse"],n);const r=g(e,["embeddings"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map((e=>e))),m(t,["embeddings"],e)}const i=g(e,["metadata"]);return null!=i&&m(t,["metadata"],i),t}(e),n=new Ae;return Object.assign(n,t),n}))}}async generateImagesInternal(e){var t,n,r,i;let o,s="",a={};if(this.apiClient.isVertexAI()){const r=Rn(this.apiClient,e);return s=p("{model}:predict",r._url),a=r._query,delete r._url,delete r._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),o.then((e=>{const t=function(e){const t={},n=g(e,["sdkHttpResponse"]);null!=n&&m(t,["sdkHttpResponse"],n);const r=g(e,["predictions"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map((e=>Vn(e)))),m(t,["generatedImages"],e)}const i=g(e,["positivePromptSafetyAttributes"]);return null!=i&&m(t,["positivePromptSafetyAttributes"],Qn(i)),t}(e),n=new Ne;return Object.assign(n,t),n}))}{const t=On(this.apiClient,e);return s=p("{model}:predict",t._url),a=t._query,delete t._url,delete t._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),o.then((e=>{const t=Dn(e),n=new Ne;return Object.assign(n,t),n}))}}async editImageInternal(e){var t,n;let r,i="",o={};if(this.apiClient.isVertexAI()){const s=Sn(this.apiClient,e);return i=p("{model}:predict",s._url),o=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),r.then((e=>{const t=function(e){const t={},n=g(e,["sdkHttpResponse"]);null!=n&&m(t,["sdkHttpResponse"],n);const r=g(e,["predictions"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map((e=>Vn(e)))),m(t,["generatedImages"],e)}return t}(e),n=new xe;return Object.assign(n,t),n}))}throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,n;let r,i="",o={};if(this.apiClient.isVertexAI()){const s=rr(this.apiClient,e);return i=p("{model}:predict",s._url),o=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),r.then((e=>{const t=function(e){const t={},n=g(e,["sdkHttpResponse"]);null!=n&&m(t,["sdkHttpResponse"],n);const r=g(e,["predictions"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map((e=>Vn(e)))),m(t,["generatedImages"],e)}return t}(e),n=new ke;return Object.assign(n,t),n}))}throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,n;let r,i="",o={};if(this.apiClient.isVertexAI()){const s=Jn(this.apiClient,e);return i=p("{model}:predict",s._url),o=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),r.then((e=>{const t=function(e){const t={},n=g(e,["predictions"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>Vn(e)))),m(t,["generatedImages"],e)}return t}(e),n=new Oe;return Object.assign(n,t),n}))}throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,n;let r,i="",o={};if(this.apiClient.isVertexAI()){const s=Xn(this.apiClient,e);return i=p("{model}:predict",s._url),o=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),r.then((e=>{const t=$n(e),n=new Re;return Object.assign(n,t),n}))}throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,n,r,i;let o,s="",a={};if(this.apiClient.isVertexAI()){const r=function(e,t){const n={},r=g(t,["model"]);return null!=r&&m(n,["_url","name"],$e(e,r)),n}(this.apiClient,e);return s=p("{name}",r._url),a=r._query,delete r._url,delete r._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),o.then((e=>Kn(e)))}{const t=function(e,t){const n={},r=g(t,["model"]);return null!=r&&m(n,["_url","name"],$e(e,r)),n}(this.apiClient,e);return s=p("{name}",t._url),a=t._query,delete t._url,delete t._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then((e=>e.json())),o.then((e=>Wn(e)))}}async listInternal(e){var t,n,r,i;let o,s="",a={};if(this.apiClient.isVertexAI()){const r=zn(this.apiClient,e);return s=p("{models_url}",r._url),a=r._query,delete r._url,delete r._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),o.then((e=>{const t=function(e){const t={},n=g(e,["sdkHttpResponse"]);null!=n&&m(t,["sdkHttpResponse"],n);const r=g(e,["nextPageToken"]);null!=r&&m(t,["nextPageToken"],r);const i=g(e,["_self"]);if(null!=i){let e=_t(i);Array.isArray(e)&&(e=e.map((e=>Kn(e)))),m(t,["models"],e)}return t}(e),n=new De;return Object.assign(n,t),n}))}{const t=Gn(this.apiClient,e);return s=p("{models_url}",t._url),a=t._query,delete t._url,delete t._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),o.then((e=>{const t=function(e){const t={},n=g(e,["sdkHttpResponse"]);null!=n&&m(t,["sdkHttpResponse"],n);const r=g(e,["nextPageToken"]);null!=r&&m(t,["nextPageToken"],r);const i=g(e,["_self"]);if(null!=i){let e=_t(i);Array.isArray(e)&&(e=e.map((e=>Wn(e)))),m(t,["models"],e)}return t}(e),n=new De;return Object.assign(n,t),n}))}}async update(e){var t,n,r,i;let o,s="",a={};if(this.apiClient.isVertexAI()){const r=nr(this.apiClient,e);return s=p("{model}",r._url),a=r._query,delete r._url,delete r._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"PATCH",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),o.then((e=>Kn(e)))}{const t=tr(this.apiClient,e);return s=p("{name}",t._url),a=t._query,delete t._url,delete t._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"PATCH",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then((e=>e.json())),o.then((e=>Wn(e)))}}async delete(e){var t,n,r,i;let o,s="",a={};if(this.apiClient.isVertexAI()){const r=function(e,t){const n={},r=g(t,["model"]);return null!=r&&m(n,["_url","name"],$e(e,r)),n}(this.apiClient,e);return s=p("{name}",r._url),a=r._query,delete r._url,delete r._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"DELETE",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),o.then((e=>{const t=function(e){const t={},n=g(e,["sdkHttpResponse"]);return null!=n&&m(t,["sdkHttpResponse"],n),t}(e),n=new Pe;return Object.assign(n,t),n}))}{const t=function(e,t){const n={},r=g(t,["model"]);return null!=r&&m(n,["_url","name"],$e(e,r)),n}(this.apiClient,e);return s=p("{name}",t._url),a=t._query,delete t._url,delete t._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"DELETE",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),o.then((e=>{const t=function(e){const t={},n=g(e,["sdkHttpResponse"]);return null!=n&&m(t,["sdkHttpResponse"],n),t}(e),n=new Pe;return Object.assign(n,t),n}))}}async countTokens(e){var t,n,r,i;let o,s="",a={};if(this.apiClient.isVertexAI()){const r=function(e,t){const n={},r=g(t,["model"]);null!=r&&m(n,["_url","model"],$e(e,r));const i=g(t,["contents"]);if(null!=i){let e=dt(i);Array.isArray(e)&&(e=e.map((e=>e))),m(n,["contents"],e)}const o=g(t,["config"]);return null!=o&&En(o,n),n}(this.apiClient,e);return s=p("{model}:countTokens",r._url),a=r._query,delete r._url,delete r._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),o.then((e=>{const t=function(e){const t={},n=g(e,["sdkHttpResponse"]);null!=n&&m(t,["sdkHttpResponse"],n);const r=g(e,["totalTokens"]);return null!=r&&m(t,["totalTokens"],r),t}(e),n=new Me;return Object.assign(n,t),n}))}{const t=wn(this.apiClient,e);return s=p("{model}:countTokens",t._url),a=t._query,delete t._url,delete t._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),o.then((e=>{const t=function(e){const t={},n=g(e,["sdkHttpResponse"]);null!=n&&m(t,["sdkHttpResponse"],n);const r=g(e,["totalTokens"]);null!=r&&m(t,["totalTokens"],r);const i=g(e,["cachedContentTokenCount"]);return null!=i&&m(t,["cachedContentTokenCount"],i),t}(e),n=new Me;return Object.assign(n,t),n}))}}async computeTokens(e){var t,n;let r,i="",o={};if(this.apiClient.isVertexAI()){const s=function(e,t){const n={},r=g(t,["model"]);null!=r&&m(n,["_url","model"],$e(e,r));const i=g(t,["contents"]);if(null!=i){let e=dt(i);Array.isArray(e)&&(e=e.map((e=>e))),m(n,["contents"],e)}return n}(this.apiClient,e);return i=p("{model}:computeTokens",s._url),o=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),r.then((e=>{const t=function(e){const t={},n=g(e,["sdkHttpResponse"]);null!=n&&m(t,["sdkHttpResponse"],n);const r=g(e,["tokensInfo"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map((e=>e))),m(t,["tokensInfo"],e)}return t}(e),n=new Le;return Object.assign(n,t),n}))}throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,n,r,i;let o,s="",a={};if(this.apiClient.isVertexAI()){const r=jn(this.apiClient,e);return s=p("{model}:predictLongRunning",r._url),a=r._query,delete r._url,delete r._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),o.then((e=>{const t=Un(e),n=new Ue;return Object.assign(n,t),n}))}{const t=Fn(this.apiClient,e);return s=p("{model}:predictLongRunning",t._url),a=t._query,delete t._url,delete t._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then((e=>e.json())),o.then((e=>{const t=Ln(e),n=new Ue;return Object.assign(n,t),n}))}}}class Ir extends f{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,n=e.config;if(void 0===t.name||""===t.name)throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const e=t.name.split("/operations/")[0];let r;n&&"httpOptions"in n&&(r=n.httpOptions);const i=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:e,config:{httpOptions:r}});return t._fromAPIResponse({apiResponse:i,_isVertexAI:!0})}{const e=await this.getVideosOperationInternal({operationName:t.name,config:n});return t._fromAPIResponse({apiResponse:e,_isVertexAI:!1})}}async get(e){const t=e.operation,n=e.config;if(void 0===t.name||""===t.name)throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const e=t.name.split("/operations/")[0];let r;n&&"httpOptions"in n&&(r=n.httpOptions);const i=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:e,config:{httpOptions:r}});return t._fromAPIResponse({apiResponse:i,_isVertexAI:!0})}{const e=await this.getVideosOperationInternal({operationName:t.name,config:n});return t._fromAPIResponse({apiResponse:e,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,n,r,i;let o,s="",a={};if(this.apiClient.isVertexAI()){const r=function(e){const t={},n=g(e,["operationName"]);return null!=n&&m(t,["_url","operationName"],n),t}(e);return s=p("{operationName}",r._url),a=r._query,delete r._url,delete r._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),o}{const t=function(e){const t={},n=g(e,["operationName"]);return null!=n&&m(t,["_url","operationName"],n),t}(e);return s=p("{operationName}",t._url),a=t._query,delete t._url,delete t._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then((e=>e.json())),o}}async fetchPredictVideosOperationInternal(e){var t,n;let r,i="",o={};if(this.apiClient.isVertexAI()){const s=function(e){const t={},n=g(e,["operationName"]);null!=n&&m(t,["operationName"],n);const r=g(e,["resourceName"]);return null!=r&&m(t,["_url","resourceName"],r),t}(e);return i=p("{resourceName}:fetchPredictOperation",s._url),o=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),r}throw new Error("This method is only supported by the Vertex AI.")}}function Ar(e){const t={},n=g(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>function(e){const t={},n=g(e,["mediaResolution"]);null!=n&&m(t,["mediaResolution"],n);const r=g(e,["codeExecutionResult"]);null!=r&&m(t,["codeExecutionResult"],r);const i=g(e,["executableCode"]);null!=i&&m(t,["executableCode"],i);const o=g(e,["fileData"]);null!=o&&m(t,["fileData"],function(e){const t={};if(void 0!==g(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const n=g(e,["fileUri"]);null!=n&&m(t,["fileUri"],n);const r=g(e,["mimeType"]);null!=r&&m(t,["mimeType"],r);return t}(o));const s=g(e,["functionCall"]);null!=s&&m(t,["functionCall"],function(e){const t={},n=g(e,["id"]);null!=n&&m(t,["id"],n);const r=g(e,["args"]);null!=r&&m(t,["args"],r);const i=g(e,["name"]);null!=i&&m(t,["name"],i);if(void 0!==g(e,["partialArgs"]))throw new Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==g(e,["willContinue"]))throw new Error("willContinue parameter is not supported in Gemini API.");return t}(s));const a=g(e,["functionResponse"]);null!=a&&m(t,["functionResponse"],a);const l=g(e,["inlineData"]);null!=l&&m(t,["inlineData"],function(e){const t={},n=g(e,["data"]);if(null!=n&&m(t,["data"],n),void 0!==g(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const r=g(e,["mimeType"]);return null!=r&&m(t,["mimeType"],r),t}(l));const u=g(e,["text"]);null!=u&&m(t,["text"],u);const c=g(e,["thought"]);null!=c&&m(t,["thought"],c);const d=g(e,["thoughtSignature"]);null!=d&&m(t,["thoughtSignature"],d);const h=g(e,["videoMetadata"]);null!=h&&m(t,["videoMetadata"],h);return t}(e)))),m(t,["parts"],e)}const r=g(e,["role"]);return null!=r&&m(t,["role"],r),t}function Nr(e,t,n){const r=g(t,["expireTime"]);void 0!==n&&null!=r&&m(n,["expireTime"],r);const i=g(t,["newSessionExpireTime"]);void 0!==n&&null!=i&&m(n,["newSessionExpireTime"],i);const o=g(t,["uses"]);void 0!==n&&null!=o&&m(n,["uses"],o);const s=g(t,["liveConnectConstraints"]);void 0!==n&&null!=s&&m(n,["bidiGenerateContentSetup"],function(e,t){const n={},r=g(t,["model"]);null!=r&&m(n,["setup","model"],$e(e,r));const i=g(t,["config"]);null!=i&&m(n,["config"],function(e,t){const n={},r=g(e,["generationConfig"]);void 0!==t&&null!=r&&m(t,["setup","generationConfig"],r);const i=g(e,["responseModalities"]);void 0!==t&&null!=i&&m(t,["setup","generationConfig","responseModalities"],i);const o=g(e,["temperature"]);void 0!==t&&null!=o&&m(t,["setup","generationConfig","temperature"],o);const s=g(e,["topP"]);void 0!==t&&null!=s&&m(t,["setup","generationConfig","topP"],s);const a=g(e,["topK"]);void 0!==t&&null!=a&&m(t,["setup","generationConfig","topK"],a);const l=g(e,["maxOutputTokens"]);void 0!==t&&null!=l&&m(t,["setup","generationConfig","maxOutputTokens"],l);const u=g(e,["mediaResolution"]);void 0!==t&&null!=u&&m(t,["setup","generationConfig","mediaResolution"],u);const c=g(e,["seed"]);void 0!==t&&null!=c&&m(t,["setup","generationConfig","seed"],c);const d=g(e,["speechConfig"]);void 0!==t&&null!=d&&m(t,["setup","generationConfig","speechConfig"],mt(d));const h=g(e,["thinkingConfig"]);void 0!==t&&null!=h&&m(t,["setup","generationConfig","thinkingConfig"],h);const f=g(e,["enableAffectiveDialog"]);void 0!==t&&null!=f&&m(t,["setup","generationConfig","enableAffectiveDialog"],f);const p=g(e,["systemInstruction"]);void 0!==t&&null!=p&&m(t,["setup","systemInstruction"],Ar(ut(p)));const y=g(e,["tools"]);if(void 0!==t&&null!=y){let e=yt(y);Array.isArray(e)&&(e=e.map((e=>function(e){const t={},n=g(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>e))),m(t,["functionDeclarations"],e)}if(void 0!==g(e,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");const r=g(e,["googleSearchRetrieval"]);null!=r&&m(t,["googleSearchRetrieval"],r);const i=g(e,["computerUse"]);null!=i&&m(t,["computerUse"],i);const o=g(e,["fileSearch"]);null!=o&&m(t,["fileSearch"],o);const s=g(e,["codeExecution"]);null!=s&&m(t,["codeExecution"],s);if(void 0!==g(e,["enterpriseWebSearch"]))throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=g(e,["googleMaps"]);null!=a&&m(t,["googleMaps"],function(e){const t={};if(void 0!==g(e,["authConfig"]))throw new Error("authConfig parameter is not supported in Gemini API.");const n=g(e,["enableWidget"]);null!=n&&m(t,["enableWidget"],n);return t}(a));const l=g(e,["googleSearch"]);null!=l&&m(t,["googleSearch"],function(e){const t={};if(void 0!==g(e,["excludeDomains"]))throw new Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==g(e,["blockingConfidence"]))throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=g(e,["timeRangeFilter"]);null!=n&&m(t,["timeRangeFilter"],n);return t}(l));const u=g(e,["urlContext"]);null!=u&&m(t,["urlContext"],u);return t}(gt(e))))),m(t,["setup","tools"],e)}const v=g(e,["sessionResumption"]);void 0!==t&&null!=v&&m(t,["setup","sessionResumption"],function(e){const t={},n=g(e,["handle"]);null!=n&&m(t,["handle"],n);if(void 0!==g(e,["transparent"]))throw new Error("transparent parameter is not supported in Gemini API.");return t}(v));const b=g(e,["inputAudioTranscription"]);void 0!==t&&null!=b&&m(t,["setup","inputAudioTranscription"],b);const E=g(e,["outputAudioTranscription"]);void 0!==t&&null!=E&&m(t,["setup","outputAudioTranscription"],E);const w=g(e,["realtimeInputConfig"]);void 0!==t&&null!=w&&m(t,["setup","realtimeInputConfig"],w);const S=g(e,["contextWindowCompression"]);void 0!==t&&null!=S&&m(t,["setup","contextWindowCompression"],S);const _=g(e,["proactivity"]);void 0!==t&&null!=_&&m(t,["setup","proactivity"],_);return n}(i,n));return n}(e,s));const a=g(t,["lockAdditionalFields"]);return void 0!==n&&null!=a&&m(n,["fieldMask"],a),{}}function xr(e,t){let n=null;const r=e.bidiGenerateContentSetup;if("object"===typeof r&&null!==r&&"setup"in r){const t=r.setup;"object"===typeof t&&null!==t?(e.bidiGenerateContentSetup=t,n=t):delete e.bidiGenerateContentSetup}else void 0!==r&&delete e.bidiGenerateContentSetup;const i=e.fieldMask;if(n){const r=function(e){const t=[];for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const r=e[n];if("object"===typeof r&&null!=r&&Object.keys(r).length>0){const e=Object.keys(r).map((e=>"".concat(n,".").concat(e)));t.push(...e)}else t.push(n)}return t.join(",")}(n);if(Array.isArray(null===t||void 0===t?void 0:t.lockAdditionalFields)&&0===(null===t||void 0===t?void 0:t.lockAdditionalFields.length))r?e.fieldMask=r:delete e.fieldMask;else if((null===t||void 0===t?void 0:t.lockAdditionalFields)&&t.lockAdditionalFields.length>0&&null!==i&&Array.isArray(i)&&i.length>0){const t=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let n=[];i.length>0&&(n=i.map((e=>t.includes(e)?"generationConfig.".concat(e):e)));const o=[];r&&o.push(r),n.length>0&&o.push(...n),o.length>0?e.fieldMask=o.join(","):delete e.fieldMask}else delete e.fieldMask}else null!==i&&Array.isArray(i)&&i.length>0?e.fieldMask=i.join(","):delete e.fieldMask;return e}class kr extends f{constructor(e){super(),this.apiClient=e}async create(e){var t,n;let r,i="",o={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const s=function(e,t){const n={},r=g(t,["config"]);return null!=r&&m(n,["config"],Nr(e,r,n)),n}(this.apiClient,e);i=p("auth_tokens",s._url),o=s._query,delete s.config,delete s._url,delete s._query;const a=xr(s,e.config);return r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),r.then((e=>e))}}}function Or(e){const t={},n=g(e,["config"]);return null!=n&&function(e,t){const n=g(e,["displayName"]);void 0!==t&&null!=n&&m(t,["displayName"],n)}(n,t),t}function Rr(e){const t={},n=g(e,["name"]);null!=n&&m(t,["_url","name"],n);const r=g(e,["config"]);return null!=r&&function(e,t){const n=g(e,["force"]);void 0!==t&&null!=n&&m(t,["_query","force"],n)}(r,t),t}function Dr(e){const t={},n=g(e,["name"]);null!=n&&m(t,["name"],n);const r=g(e,["metadata"]);null!=r&&m(t,["metadata"],r);const i=g(e,["done"]);null!=i&&m(t,["done"],i);const o=g(e,["error"]);null!=o&&m(t,["error"],o);const s=g(e,["response"]);return null!=s&&m(t,["response"],function(e){const t={},n=g(e,["sdkHttpResponse"]);null!=n&&m(t,["sdkHttpResponse"],n);const r=g(e,["parent"]);null!=r&&m(t,["parent"],r);const i=g(e,["documentName"]);null!=i&&m(t,["documentName"],i);return t}(s)),t}function Pr(e){const t={},n=g(e,["fileSearchStoreName"]);null!=n&&m(t,["_url","file_search_store_name"],n);const r=g(e,["fileName"]);null!=r&&m(t,["fileName"],r);const i=g(e,["config"]);return null!=i&&function(e,t){const n=g(e,["customMetadata"]);if(void 0!==t&&null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>e))),m(t,["customMetadata"],e)}const r=g(e,["chunkingConfig"]);void 0!==t&&null!=r&&m(t,["chunkingConfig"],r)}(i,t),t}function Mr(e){const t={},n=g(e,["config"]);return null!=n&&function(e,t){const n=g(e,["pageSize"]);void 0!==t&&null!=n&&m(t,["_query","pageSize"],n);const r=g(e,["pageToken"]);void 0!==t&&null!=r&&m(t,["_query","pageToken"],r)}(n,t),t}function Lr(e){const t={},n=g(e,["fileSearchStoreName"]);null!=n&&m(t,["_url","file_search_store_name"],n);const r=g(e,["config"]);return null!=r&&function(e,t){const n=g(e,["mimeType"]);void 0!==t&&null!=n&&m(t,["mimeType"],n);const r=g(e,["displayName"]);void 0!==t&&null!=r&&m(t,["displayName"],r);const i=g(e,["customMetadata"]);if(void 0!==t&&null!=i){let e=i;Array.isArray(e)&&(e=e.map((e=>e))),m(t,["customMetadata"],e)}const o=g(e,["chunkingConfig"]);void 0!==t&&null!=o&&m(t,["chunkingConfig"],o)}(r,t),t}function Ur(e){const t={},n=g(e,["name"]);null!=n&&m(t,["_url","name"],n);const r=g(e,["config"]);return null!=r&&function(e,t){const n=g(e,["force"]);void 0!==t&&null!=n&&m(t,["_query","force"],n)}(r,t),t}function Fr(e){const t={},n=g(e,["parent"]);null!=n&&m(t,["_url","parent"],n);const r=g(e,["config"]);return null!=r&&function(e,t){const n=g(e,["pageSize"]);void 0!==t&&null!=n&&m(t,["_query","pageSize"],n);const r=g(e,["pageToken"]);void 0!==t&&null!=r&&m(t,["_query","pageToken"],r)}(r,t),t}class jr extends f{constructor(e){super(),this.apiClient=e,this.list=async e=>new Vt(Te.PAGED_ITEM_DOCUMENTS,(t=>this.listInternal({parent:e.parent,config:t.config})),await this.listInternal(e),e)}async get(e){var t,n;let r,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=function(e){const t={},n=g(e,["name"]);return null!=n&&m(t,["_url","name"],n),t}(e);return i=p("{name}",s._url),o=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),r.then((e=>e))}}async delete(e){var t,n;let r="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=Ur(e);r=p("{name}",o._url),i=o._query,delete o._url,delete o._query,await this.apiClient.request({path:r,queryParams:i,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal})}}async listInternal(e){var t,n;let r,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=Fr(e);return i=p("{parent}/documents",s._url),o=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),r.then((e=>{const t=function(e){const t={},n=g(e,["sdkHttpResponse"]);null!=n&&m(t,["sdkHttpResponse"],n);const r=g(e,["nextPageToken"]);null!=r&&m(t,["nextPageToken"],r);const i=g(e,["documents"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map((e=>e))),m(t,["documents"],e)}return t}(e),n=new qe;return Object.assign(n,t),n}))}}}class Vr extends f{constructor(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new jr(e);super(),t=this,this.apiClient=e,this.documents=n,this.list=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Vt(Te.PAGED_ITEM_FILE_SEARCH_STORES,(e=>t.listInternal(e)),await t.listInternal(e),e)}}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,n;let r,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=Or(e);return i=p("fileSearchStores",s._url),o=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),r.then((e=>e))}}async get(e){var t,n;let r,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=function(e){const t={},n=g(e,["name"]);return null!=n&&m(t,["_url","name"],n),t}(e);return i=p("{name}",s._url),o=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),r.then((e=>e))}}async delete(e){var t,n;let r="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=Rr(e);r=p("{name}",o._url),i=o._query,delete o._url,delete o._query,await this.apiClient.request({path:r,queryParams:i,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal})}}async listInternal(e){var t,n;let r,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=Mr(e);return i=p("fileSearchStores",s._url),o=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),r.then((e=>{const t=function(e){const t={},n=g(e,["sdkHttpResponse"]);null!=n&&m(t,["sdkHttpResponse"],n);const r=g(e,["nextPageToken"]);null!=r&&m(t,["nextPageToken"],r);const i=g(e,["fileSearchStores"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map((e=>e))),m(t,["fileSearchStores"],e)}return t}(e),n=new Be;return Object.assign(n,t),n}))}}async uploadToFileSearchStoreInternal(e){var t,n;let r,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=Lr(e);return i=p("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",s._url),o=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),r.then((e=>{const t=function(e){const t={},n=g(e,["sdkHttpResponse"]);return null!=n&&m(t,["sdkHttpResponse"],n),t}(e),n=new He;return Object.assign(n,t),n}))}}async importFile(e){var t,n;let r,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=Pr(e);return i=p("{file_search_store_name}:importFile",s._url),o=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),r.then((e=>{const t=Dr(e),n=new Ge;return Object.assign(n,t),n}))}}}function qr(e,t){const n={},r=g(e,["baseModel"]);null!=r&&m(n,["baseModel"],r);const i=g(e,["preTunedModel"]);null!=i&&m(n,["preTunedModel"],i);const o=g(e,["trainingDataset"]);null!=o&&function(e){const t={};if(void 0!==g(e,["gcsUri"]))throw new Error("gcsUri parameter is not supported in Gemini API.");if(void 0!==g(e,["vertexDatasetResource"]))throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=g(e,["examples"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>e))),m(t,["examples","examples"],e)}}(o);const s=g(e,["config"]);return null!=s&&function(e,t){const n={};if(void 0!==g(e,["validationDataset"]))throw new Error("validationDataset parameter is not supported in Gemini API.");const r=g(e,["tunedModelDisplayName"]);if(void 0!==t&&null!=r&&m(t,["displayName"],r),void 0!==g(e,["description"]))throw new Error("description parameter is not supported in Gemini API.");const i=g(e,["epochCount"]);void 0!==t&&null!=i&&m(t,["tuningTask","hyperparameters","epochCount"],i);const o=g(e,["learningRateMultiplier"]);if(null!=o&&m(n,["tuningTask","hyperparameters","learningRateMultiplier"],o),void 0!==g(e,["exportLastCheckpointOnly"]))throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(void 0!==g(e,["preTunedModelCheckpointId"]))throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(void 0!==g(e,["adapterSize"]))throw new Error("adapterSize parameter is not supported in Gemini API.");const s=g(e,["batchSize"]);void 0!==t&&null!=s&&m(t,["tuningTask","hyperparameters","batchSize"],s);const a=g(e,["learningRate"]);if(void 0!==t&&null!=a&&m(t,["tuningTask","hyperparameters","learningRate"],a),void 0!==g(e,["labels"]))throw new Error("labels parameter is not supported in Gemini API.");if(void 0!==g(e,["beta"]))throw new Error("beta parameter is not supported in Gemini API.")}(s,n),n}function Br(e,t){const n={},r=g(e,["baseModel"]);null!=r&&m(n,["baseModel"],r);const i=g(e,["preTunedModel"]);null!=i&&m(n,["preTunedModel"],i);const o=g(e,["trainingDataset"]);null!=o&&function(e,t,n){const r={};let i=g(n,["config","method"]);void 0===i&&(i="SUPERVISED_FINE_TUNING");if("SUPERVISED_FINE_TUNING"===i){const n=g(e,["gcsUri"]);void 0!==t&&null!=n&&m(t,["supervisedTuningSpec","trainingDatasetUri"],n)}else if("PREFERENCE_TUNING"===i){const n=g(e,["gcsUri"]);void 0!==t&&null!=n&&m(t,["preferenceOptimizationSpec","trainingDatasetUri"],n)}let o=g(n,["config","method"]);void 0===o&&(o="SUPERVISED_FINE_TUNING");if("SUPERVISED_FINE_TUNING"===o){const n=g(e,["vertexDatasetResource"]);void 0!==t&&null!=n&&m(t,["supervisedTuningSpec","trainingDatasetUri"],n)}else if("PREFERENCE_TUNING"===o){const n=g(e,["vertexDatasetResource"]);void 0!==t&&null!=n&&m(t,["preferenceOptimizationSpec","trainingDatasetUri"],n)}if(void 0!==g(e,["examples"]))throw new Error("examples parameter is not supported in Vertex AI.")}(o,n,t);const s=g(e,["config"]);return null!=s&&function(e,t,n){let r=g(n,["config","method"]);if(void 0===r&&(r="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===r){const n=g(e,["validationDataset"]);void 0!==t&&null!=n&&m(t,["supervisedTuningSpec"],Kr(n))}else if("PREFERENCE_TUNING"===r){const n=g(e,["validationDataset"]);void 0!==t&&null!=n&&m(t,["preferenceOptimizationSpec"],Kr(n))}const i=g(e,["tunedModelDisplayName"]);void 0!==t&&null!=i&&m(t,["tunedModelDisplayName"],i);const o=g(e,["description"]);void 0!==t&&null!=o&&m(t,["description"],o);let s=g(n,["config","method"]);if(void 0===s&&(s="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===s){const n=g(e,["epochCount"]);void 0!==t&&null!=n&&m(t,["supervisedTuningSpec","hyperParameters","epochCount"],n)}else if("PREFERENCE_TUNING"===s){const n=g(e,["epochCount"]);void 0!==t&&null!=n&&m(t,["preferenceOptimizationSpec","hyperParameters","epochCount"],n)}let a=g(n,["config","method"]);if(void 0===a&&(a="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===a){const n=g(e,["learningRateMultiplier"]);void 0!==t&&null!=n&&m(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],n)}else if("PREFERENCE_TUNING"===a){const n=g(e,["learningRateMultiplier"]);void 0!==t&&null!=n&&m(t,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],n)}let l=g(n,["config","method"]);if(void 0===l&&(l="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===l){const n=g(e,["exportLastCheckpointOnly"]);void 0!==t&&null!=n&&m(t,["supervisedTuningSpec","exportLastCheckpointOnly"],n)}else if("PREFERENCE_TUNING"===l){const n=g(e,["exportLastCheckpointOnly"]);void 0!==t&&null!=n&&m(t,["preferenceOptimizationSpec","exportLastCheckpointOnly"],n)}let u=g(n,["config","method"]);if(void 0===u&&(u="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===u){const n=g(e,["adapterSize"]);void 0!==t&&null!=n&&m(t,["supervisedTuningSpec","hyperParameters","adapterSize"],n)}else if("PREFERENCE_TUNING"===u){const n=g(e,["adapterSize"]);void 0!==t&&null!=n&&m(t,["preferenceOptimizationSpec","hyperParameters","adapterSize"],n)}if(void 0!==g(e,["batchSize"]))throw new Error("batchSize parameter is not supported in Vertex AI.");if(void 0!==g(e,["learningRate"]))throw new Error("learningRate parameter is not supported in Vertex AI.");const c=g(e,["labels"]);void 0!==t&&null!=c&&m(t,["labels"],c);const d=g(e,["beta"]);void 0!==t&&null!=d&&m(t,["preferenceOptimizationSpec","hyperParameters","beta"],d)}(s,n,t),n}function Hr(e,t){const n={},r=g(e,["config"]);return null!=r&&function(e,t){const n=g(e,["pageSize"]);void 0!==t&&null!=n&&m(t,["_query","pageSize"],n);const r=g(e,["pageToken"]);void 0!==t&&null!=r&&m(t,["_query","pageToken"],r);const i=g(e,["filter"]);void 0!==t&&null!=i&&m(t,["_query","filter"],i)}(r,n),n}function Gr(e,t){const n={},r=g(e,["config"]);return null!=r&&function(e,t){const n=g(e,["pageSize"]);void 0!==t&&null!=n&&m(t,["_query","pageSize"],n);const r=g(e,["pageToken"]);void 0!==t&&null!=r&&m(t,["_query","pageToken"],r);const i=g(e,["filter"]);void 0!==t&&null!=i&&m(t,["_query","filter"],i)}(r,n),n}function zr(e,t){const n={},r=g(e,["sdkHttpResponse"]);null!=r&&m(n,["sdkHttpResponse"],r);const i=g(e,["name"]);null!=i&&m(n,["name"],i);const o=g(e,["state"]);null!=o&&m(n,["state"],bt(o));const s=g(e,["createTime"]);null!=s&&m(n,["createTime"],s);const a=g(e,["tuningTask","startTime"]);null!=a&&m(n,["startTime"],a);const l=g(e,["tuningTask","completeTime"]);null!=l&&m(n,["endTime"],l);const u=g(e,["updateTime"]);null!=u&&m(n,["updateTime"],u);const c=g(e,["description"]);null!=c&&m(n,["description"],c);const d=g(e,["baseModel"]);null!=d&&m(n,["baseModel"],d);const h=g(e,["_self"]);return null!=h&&m(n,["tunedModel"],function(e){const t={},n=g(e,["name"]);null!=n&&m(t,["model"],n);const r=g(e,["name"]);return null!=r&&m(t,["endpoint"],r),t}(h)),n}function Wr(e,t){const n={},r=g(e,["sdkHttpResponse"]);null!=r&&m(n,["sdkHttpResponse"],r);const i=g(e,["name"]);null!=i&&m(n,["name"],i);const o=g(e,["state"]);null!=o&&m(n,["state"],bt(o));const s=g(e,["createTime"]);null!=s&&m(n,["createTime"],s);const a=g(e,["startTime"]);null!=a&&m(n,["startTime"],a);const l=g(e,["endTime"]);null!=l&&m(n,["endTime"],l);const u=g(e,["updateTime"]);null!=u&&m(n,["updateTime"],u);const c=g(e,["error"]);null!=c&&m(n,["error"],c);const d=g(e,["description"]);null!=d&&m(n,["description"],d);const h=g(e,["baseModel"]);null!=h&&m(n,["baseModel"],h);const f=g(e,["tunedModel"]);null!=f&&m(n,["tunedModel"],f);const p=g(e,["preTunedModel"]);null!=p&&m(n,["preTunedModel"],p);const y=g(e,["supervisedTuningSpec"]);null!=y&&m(n,["supervisedTuningSpec"],y);const v=g(e,["preferenceOptimizationSpec"]);null!=v&&m(n,["preferenceOptimizationSpec"],v);const b=g(e,["tuningDataStats"]);null!=b&&m(n,["tuningDataStats"],b);const E=g(e,["encryptionSpec"]);null!=E&&m(n,["encryptionSpec"],E);const w=g(e,["partnerModelTuningSpec"]);null!=w&&m(n,["partnerModelTuningSpec"],w);const S=g(e,["customBaseModel"]);null!=S&&m(n,["customBaseModel"],S);const _=g(e,["experiment"]);null!=_&&m(n,["experiment"],_);const T=g(e,["labels"]);null!=T&&m(n,["labels"],T);const C=g(e,["outputUri"]);null!=C&&m(n,["outputUri"],C);const I=g(e,["pipelineJob"]);null!=I&&m(n,["pipelineJob"],I);const A=g(e,["serviceAccount"]);null!=A&&m(n,["serviceAccount"],A);const N=g(e,["tunedModelDisplayName"]);null!=N&&m(n,["tunedModelDisplayName"],N);const x=g(e,["veoTuningSpec"]);return null!=x&&m(n,["veoTuningSpec"],x),n}function Kr(e,t){const n={},r=g(e,["gcsUri"]);null!=r&&m(n,["validationDatasetUri"],r);const i=g(e,["vertexDatasetResource"]);return null!=i&&m(n,["validationDatasetUri"],i),n}class Jr extends f{constructor(e){var t;super(),t=this,this.apiClient=e,this.get=async e=>await this.getInternal(e),this.list=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Vt(Te.PAGED_ITEM_TUNING_JOBS,(e=>t.listInternal(e)),await t.listInternal(e),e)},this.tune=async e=>{var t;if(this.apiClient.isVertexAI()){if(e.baseModel.startsWith("projects/")){const n={tunedModelName:e.baseModel};(null===(t=e.config)||void 0===t?void 0:t.preTunedModelCheckpointId)&&(n.checkpointId=e.config.preTunedModelCheckpointId);const r=Object.assign(Object.assign({},e),{preTunedModel:n});return r.baseModel=void 0,await this.tuneInternal(r)}{const t=Object.assign({},e);return await this.tuneInternal(t)}}{const t=Object.assign({},e),n=await this.tuneMldevInternal(t);let r="";void 0!==n.metadata&&void 0!==n.metadata.tunedModel?r=n.metadata.tunedModel:void 0!==n.name&&n.name.includes("/operations/")&&(r=n.name.split("/operations/")[0]);return{name:r,state:W.JOB_STATE_QUEUED}}}}async getInternal(e){var t,n,r,i;let o,s="",a={};if(this.apiClient.isVertexAI()){const r=function(e){const t={},n=g(e,["name"]);return null!=n&&m(t,["_url","name"],n),t}(e);return s=p("{name}",r._url),a=r._query,delete r._url,delete r._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),o.then((e=>Wr(e)))}{const t=function(e){const t={},n=g(e,["name"]);return null!=n&&m(t,["_url","name"],n),t}(e);return s=p("{name}",t._url),a=t._query,delete t._url,delete t._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),o.then((e=>zr(e)))}}async listInternal(e){var t,n,r,i;let o,s="",a={};if(this.apiClient.isVertexAI()){const r=Gr(e);return s=p("tuningJobs",r._url),a=r._query,delete r._url,delete r._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),o.then((e=>{const t=function(e){const t={},n=g(e,["sdkHttpResponse"]);null!=n&&m(t,["sdkHttpResponse"],n);const r=g(e,["nextPageToken"]);null!=r&&m(t,["nextPageToken"],r);const i=g(e,["tuningJobs"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map((e=>Wr(e)))),m(t,["tuningJobs"],e)}return t}(e),n=new Fe;return Object.assign(n,t),n}))}{const t=Hr(e);return s=p("tunedModels",t._url),a=t._query,delete t._url,delete t._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),o.then((e=>{const t=function(e){const t={},n=g(e,["sdkHttpResponse"]);null!=n&&m(t,["sdkHttpResponse"],n);const r=g(e,["nextPageToken"]);null!=r&&m(t,["nextPageToken"],r);const i=g(e,["tunedModels"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map((e=>zr(e)))),m(t,["tuningJobs"],e)}return t}(e),n=new Fe;return Object.assign(n,t),n}))}}async cancel(e){var t,n,r,i;let o="",s={};if(this.apiClient.isVertexAI()){const r=function(e){const t={},n=g(e,["name"]);return null!=n&&m(t,["_url","name"],n),t}(e);o=p("{name}:cancel",r._url),s=r._query,delete r._url,delete r._query,await this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal})}else{const t=function(e){const t={},n=g(e,["name"]);return null!=n&&m(t,["_url","name"],n),t}(e);o=p("{name}:cancel",t._url),s=t._query,delete t._url,delete t._query,await this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal})}}async tuneInternal(e){var t,n;let r,i="",o={};if(this.apiClient.isVertexAI()){const s=Br(e,e);return i=p("tuningJobs",s._url),o=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),r.then((e=>Wr(e)))}throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,n;let r,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=qr(e);return i=p("tunedModels",s._url),o=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),r.then((e=>function(e){const t={},n=g(e,["sdkHttpResponse"]);null!=n&&m(t,["sdkHttpResponse"],n);const r=g(e,["name"]);null!=r&&m(t,["name"],r);const i=g(e,["metadata"]);null!=i&&m(t,["metadata"],i);const o=g(e,["done"]);null!=o&&m(t,["done"],o);const s=g(e,["error"]);return null!=s&&m(t,["error"],s),t}(e)))}}}class Yr{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Qr="x-goog-upload-status";async function Xr(e,t,n){var r,i;let o=0,s=0,a=new Ce(new Response),l="upload";for(o=e.size;s<o;){const u=Math.min(8388608,o-s),c=e.slice(s,s+u);s+u>=o&&(l+=", finalize");let d=0,h=1e3;for(;d<3&&(a=await n.request({path:"",body:c,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":l,"X-Goog-Upload-Offset":String(s),"Content-Length":String(u)}}}),!(null===(r=null===a||void 0===a?void 0:a.headers)||void 0===r?void 0:r[Qr]));)d++,await $r(h),h*=2;if(s+=u,"active"!==(null===(i=null===a||void 0===a?void 0:a.headers)||void 0===i?void 0:i[Qr]))break;if(o<=s)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return a}function $r(e){return new Promise((t=>setTimeout(t,e)))}class Zr{async upload(e,t,n){if("string"===typeof e)throw new Error("File path is not supported in browser uploader.");return await async function(e,t,n){var r;const i=await Xr(e,t,n),o=await(null===i||void 0===i?void 0:i.json());if("final"!==(null===(r=null===i||void 0===i?void 0:i.headers)||void 0===r?void 0:r[Qr]))throw new Error("Failed to upload file: Upload status is not finalized.");return o.file}(e,t,n)}async uploadToFileSearchStore(e,t,n){if("string"===typeof e)throw new Error("File path is not supported in browser uploader.");return await async function(e,t,n){var r;const i=await Xr(e,t,n),o=await(null===i||void 0===i?void 0:i.json());if("final"!==(null===(r=null===i||void 0===i?void 0:i.headers)||void 0===r?void 0:r[Qr]))throw new Error("Failed to upload file: Upload status is not finalized.");const s=S(o),a=new Xe;return Object.assign(a,s),a}(e,t,n)}async stat(e){if("string"===typeof e)throw new Error("File path is not supported in browser uploader.");return await async function(e){return{size:e.size,type:e.type}}(e)}}class ei{create(e,t,n){return new ti(e,t,n)}}class ti{constructor(e,t,n){this.url=e,this.headers=t,this.callbacks=n}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(void 0===this.ws)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(void 0===this.ws)throw new Error("WebSocket is not connected");this.ws.close()}}const ni="x-goog-api-key";class ri{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(null===e.get(ni)){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(ni,this.apiKey)}}}const ii=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},oi={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],o=i+1<e.length,s=o?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,u=t>>2,c=(3&t)<<4|s>>4;let d=(15&s)<<2|l>>6,h=63&l;a||(h=64,o||(d=64)),r.push(n[u],n[c],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(ii(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{const o=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0;++i;const s=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==o||null==s||null==a)throw new si;const l=t<<2|o>>4;if(r.push(l),64!==s){const e=o<<4&240|s>>2;if(r.push(e),64!==a){const e=s<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class si extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ai=function(e){return function(e){const t=ii(e);return oi.encodeByteArray(t,!0)}(e).replace(/\./g,"")},li=function(e){try{return oi.decodeString(e,!0)}catch(Mv){console.error("base64Decode failed: ",Mv)}return null};const ui=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,ci=()=>{try{return ui()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/Ekstraksi-Voucher",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(Mv){return}const t=e&&li(e[1]);return t&&JSON.parse(t)})()}catch(Mv){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(Mv))}},di=()=>{var e;return null===(e=ci())||void 0===e?void 0:e.config};class hi{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}class fi extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,fi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,pi.prototype.create)}}class pi{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(mi,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",o="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new fi(n,o,t)}}const mi=/\{\$([^}]+)}/g;function gi(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],o=t[i];if(yi(n)&&yi(o)){if(!gi(n,o))return!1}else if(n!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function yi(e){return null!==e&&"object"===typeof e}class vi{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const bi="[DEFAULT]";class Ei{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new hi;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(Mv){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(Mv){if(r)return null;throw Mv}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:bi})}catch(Mv){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(Mv){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bi;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bi;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bi;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,o]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&o.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===bi?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(o){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bi;return this.component?this.component.multipleInstances?e:bi:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class wi{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Ei(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Si=[];var _i;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(_i||(_i={}));const Ti={debug:_i.DEBUG,verbose:_i.VERBOSE,info:_i.INFO,warn:_i.WARN,error:_i.ERROR,silent:_i.SILENT},Ci=_i.INFO,Ii={[_i.DEBUG]:"log",[_i.VERBOSE]:"log",[_i.INFO]:"info",[_i.WARN]:"warn",[_i.ERROR]:"error"},Ai=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=Ii[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,o=new Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];console[r]("[".concat(n,"]  ").concat(e.name,":"),...o)};let Ni,xi;const ki=new WeakMap,Oi=new WeakMap,Ri=new WeakMap,Di=new WeakMap,Pi=new WeakMap;let Mi={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Oi.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Ri.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Fi(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Li(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(xi||(xi=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(ji(this),n),Fi(ki.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Fi(e.apply(ji(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const o=e.call(ji(this),t,...r);return Ri.set(o,t.sort?t.sort():[t]),Fi(o)}}function Ui(e){return"function"===typeof e?Li(e):(e instanceof IDBTransaction&&function(e){if(Oi.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)}));Oi.set(e,t)}(e),t=e,(Ni||(Ni=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,Mi):e);var t}function Fi(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{t(Fi(e.result)),r()},o=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)}));return t.then((t=>{t instanceof IDBCursor&&ki.set(t,e)})).catch((()=>{})),Pi.set(t,e),t}(e);if(Di.has(e))return Di.get(e);const t=Ui(e);return t!==e&&(Di.set(e,t),Pi.set(t,e)),t}const ji=e=>Pi.get(e);const Vi=["get","getKey","getAll","getAllKeys","count"],qi=["put","add","delete","clear"],Bi=new Map;function Hi(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Bi.get(t))return Bi.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=qi.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Vi.includes(n))return;const o=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let o=t.store;for(var s=arguments.length,a=new Array(s>1?s-1:0),l=1;l<s;l++)a[l-1]=arguments[l];return r&&(o=o.index(a.shift())),(await Promise.all([o[n](...a),i&&t.done]))[0]};return Bi.set(t,o),o}Mi=(e=>u(u({},e),{},{get:(t,n,r)=>Hi(t,n)||e.get(t,n,r),has:(t,n)=>!!Hi(t,n)||e.has(t,n)}))(Mi);class Gi{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const zi="@firebase/app",Wi="0.9.13",Ki=new class{constructor(e){this.name=e,this._logLevel=Ci,this._logHandler=Ai,this._userLogHandler=null,Si.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _i))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Ti[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,_i.DEBUG,...t),this._logHandler(this,_i.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,_i.VERBOSE,...t),this._logHandler(this,_i.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,_i.INFO,...t),this._logHandler(this,_i.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,_i.WARN,...t),this._logHandler(this,_i.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,_i.ERROR,...t),this._logHandler(this,_i.ERROR,...t)}}("@firebase/app"),Ji="@firebase/app-compat",Yi="@firebase/analytics-compat",Qi="@firebase/analytics",Xi="@firebase/app-check-compat",$i="@firebase/app-check",Zi="@firebase/auth",eo="@firebase/auth-compat",to="@firebase/database",no="@firebase/database-compat",ro="@firebase/functions",io="@firebase/functions-compat",oo="@firebase/installations",so="@firebase/installations-compat",ao="@firebase/messaging",lo="@firebase/messaging-compat",uo="@firebase/performance",co="@firebase/performance-compat",ho="@firebase/remote-config",fo="@firebase/remote-config-compat",po="@firebase/storage",mo="@firebase/storage-compat",go="@firebase/firestore",yo="@firebase/firestore-compat",vo="firebase",bo="[DEFAULT]",Eo={[zi]:"fire-core",[Ji]:"fire-core-compat",[Qi]:"fire-analytics",[Yi]:"fire-analytics-compat",[$i]:"fire-app-check",[Xi]:"fire-app-check-compat",[Zi]:"fire-auth",[eo]:"fire-auth-compat",[to]:"fire-rtdb",[no]:"fire-rtdb-compat",[ro]:"fire-fn",[io]:"fire-fn-compat",[oo]:"fire-iid",[so]:"fire-iid-compat",[ao]:"fire-fcm",[lo]:"fire-fcm-compat",[uo]:"fire-perf",[co]:"fire-perf-compat",[ho]:"fire-rc",[fo]:"fire-rc-compat",[po]:"fire-gcs",[mo]:"fire-gcs-compat",[go]:"fire-fst",[yo]:"fire-fst-compat","fire-js":"fire-js",[vo]:"fire-js-all"},wo=new Map,So=new Map;function _o(e,t){try{e.container.addComponent(t)}catch(Mv){Ki.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),Mv)}}function To(e){const t=e.name;if(So.has(t))return Ki.debug("There were multiple attempts to register component ".concat(t,".")),!1;So.set(t,e);for(const n of wo.values())_o(n,e);return!0}function Co(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const Io=new pi("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Ao{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new vi("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Io.create("app-deleted",{appName:this._name})}}function No(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:bo,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Io.create("bad-app-name",{appName:String(i)});if(n||(n=di()),!n)throw Io.create("no-options");const o=wo.get(i);if(o){if(gi(n,o.options)&&gi(r,o.config))return o;throw Io.create("duplicate-app",{appName:i})}const s=new wi(i);for(const l of So.values())s.addComponent(l);const a=new Ao(n,r,s);return wo.set(i,a),a}function xo(e,t,n){var r;let i=null!==(r=Eo[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const o=i.match(/\s|\//),s=t.match(/\s|\//);if(o||s){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return o&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),o&&s&&e.push("and"),s&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Ki.warn(e.join(" "))}To(new vi("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}const ko="firebase-heartbeat-store";let Oo=null;function Ro(){return Oo||(Oo=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=indexedDB.open(e,t),a=Fi(s);return r&&s.addEventListener("upgradeneeded",(e=>{r(Fi(s.result),e.oldVersion,e.newVersion,Fi(s.transaction),e)})),n&&s.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{o&&e.addEventListener("close",(()=>o())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(ko)}}).catch((e=>{throw Io.create("idb-open",{originalErrorMessage:e.message})}))),Oo}async function Do(e,t){try{const n=(await Ro()).transaction(ko,"readwrite"),r=n.objectStore(ko);await r.put(t,Po(e)),await n.done}catch(Mv){if(Mv instanceof fi)Ki.warn(Mv.message);else{const t=Io.create("idb-set",{originalErrorMessage:null===Mv||void 0===Mv?void 0:Mv.message});Ki.warn(t.message)}}}function Po(e){return"".concat(e.name,"!").concat(e.options.appId)}class Mo{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Uo(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=Lo();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some((e=>e.date===t)))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=Lo(),{heartbeatsToSend:t,unsentEntries:n}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),Fo(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Fo(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=ai(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function Lo(){return(new Date).toISOString().substring(0,10)}class Uo{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"===typeof indexedDB}catch(Mv){return!1}}()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=await Ro();return await t.transaction(ko).objectStore(ko).get(Po(e))}catch(Mv){if(Mv instanceof fi)Ki.warn(Mv.message);else{const t=Io.create("idb-get",{originalErrorMessage:null===Mv||void 0===Mv?void 0:Mv.message});Ki.warn(t.message)}}}(this.app);return e||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Do(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Do(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Fo(e){return ai(JSON.stringify({version:2,heartbeats:e})).length}var jo;jo="",To(new vi("platform-logger",(e=>new Gi(e)),"PRIVATE")),To(new vi("heartbeat",(e=>new Mo(e)),"PRIVATE")),xo(zi,Wi,jo),xo(zi,Wi,"esm2017"),xo("fire-js","");xo("firebase","9.23.0","app");const Vo=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},qo={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],o=i+1<e.length,s=o?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,u=t>>2,c=(3&t)<<4|s>>4;let d=(15&s)<<2|l>>6,h=63&l;a||(h=64,o||(d=64)),r.push(n[u],n[c],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Vo(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{const o=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0;++i;const s=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==o||null==s||null==a)throw new Bo;const l=t<<2|o>>4;if(r.push(l),64!==s){const e=o<<4&240|s>>2;if(r.push(e),64!==a){const e=s<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Bo extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ho=function(e){return function(e){const t=Vo(e);return qo.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Go=function(e){try{return qo.decodeString(e,!0)}catch(Mv){console.error("base64Decode failed: ",Mv)}return null};const zo=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Wo=()=>{try{return zo()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/Ekstraksi-Voucher",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(Mv){return}const t=e&&Go(e[1]);return t&&JSON.parse(t)})()}catch(Mv){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(Mv))}},Ko=e=>{const t=(e=>{var t,n;return null===(n=null===(t=Wo())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]})(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]};class Jo extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Jo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yo.prototype.create)}}class Yo{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(Qo,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",o="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Jo(n,o,t)}}const Qo=/\{\$([^}]+)}/g;function Xo(e){return e&&e._delegate?e._delegate:e}class $o{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Zo=[];var es;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(es||(es={}));const ts={debug:es.DEBUG,verbose:es.VERBOSE,info:es.INFO,warn:es.WARN,error:es.ERROR,silent:es.SILENT},ns=es.INFO,rs={[es.DEBUG]:"log",[es.VERBOSE]:"log",[es.INFO]:"info",[es.WARN]:"warn",[es.ERROR]:"error"},is=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=rs[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,o=new Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];console[r]("[".concat(n,"]  ").concat(e.name,":"),...o)};var os,ss="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},as={},ls=ls||{},us=ss||self;function cs(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function ds(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var hs="closure_uid_"+(1e9*Math.random()>>>0),fs=0;function ps(e,t,n){return e.call.apply(e.bind,arguments)}function ms(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function gs(e,t,n){return(gs=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ps:ms).apply(null,arguments)}function ys(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function vs(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function bs(){this.s=this.s,this.o=this.o}bs.prototype.s=!1,bs.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function(e){Object.prototype.hasOwnProperty.call(e,hs)&&e[hs]||(e[hs]=++fs)}(this)},bs.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Es=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function ws(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function Ss(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(cs(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function _s(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}_s.prototype.h=function(){this.defaultPrevented=!0};var Ts=function(){if(!us.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{us.addEventListener("test",(()=>{}),t),us.removeEventListener("test",(()=>{}),t)}catch(Hv){}return e}();function Cs(e){return/^[\s\xa0]*$/.test(e)}function Is(){var e=us.navigator;return e&&(e=e.userAgent)?e:""}function As(e){return-1!=Is().indexOf(e)}function Ns(e){return Ns[" "](e),e}Ns[" "]=function(){};var xs,ks,Os=As("Opera"),Rs=As("Trident")||As("MSIE"),Ds=As("Edge"),Ps=Ds||Rs,Ms=As("Gecko")&&!(-1!=Is().toLowerCase().indexOf("webkit")&&!As("Edge"))&&!(As("Trident")||As("MSIE"))&&!As("Edge"),Ls=-1!=Is().toLowerCase().indexOf("webkit")&&!As("Edge");function Us(){var e=us.document;return e?e.documentMode:void 0}e:{var Fs="",js=function(){var e=Is();return Ms?/rv:([^\);]+)(\)|;)/.exec(e):Ds?/Edge\/([\d\.]+)/.exec(e):Rs?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Ls?/WebKit\/(\S+)/.exec(e):Os?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(js&&(Fs=js?js[1]:""),Rs){var Vs=Us();if(null!=Vs&&Vs>parseFloat(Fs)){xs=String(Vs);break e}}xs=Fs}if(us.document&&Rs){var qs=Us();ks=qs||(parseInt(xs,10)||void 0)}else ks=void 0;var Bs=ks;function Hs(e,t){if(_s.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Ms){e:{try{Ns(t.nodeName);var i=!0;break e}catch(Gv){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Gs[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Hs.$.h.call(this)}}vs(Hs,_s);var Gs={2:"touch",3:"pen",4:"mouse"};Hs.prototype.h=function(){Hs.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var zs="closure_listenable_"+(1e6*Math.random()|0),Ws=0;function Ks(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++Ws,this.fa=this.ia=!1}function Js(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Ys(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function Qs(e){const t={};for(const n in e)t[n]=e[n];return t}const Xs="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function $s(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<Xs.length;t++)n=Xs[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Zs(e){this.src=e,this.g={},this.h=0}function ea(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],o=Es(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Js(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function ta(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.fa&&o.listener==t&&o.capture==!!n&&o.la==r)return i}return-1}Zs.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);var s=ta(e,t,r,i);return-1<s?(t=e[s],n||(t.ia=!1)):((t=new Ks(t,this.src,o,!!r,i)).ia=n,e.push(t)),t};var na="closure_lm_"+(1e6*Math.random()|0),ra={};function ia(e,t,n,r,i){if(r&&r.once)return sa(e,t,n,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)ia(e,t[o],n,r,i);return null}return n=fa(n),e&&e[zs]?e.O(t,n,ds(r)?!!r.capture:!!r,i):oa(e,t,n,!1,r,i)}function oa(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var s=ds(i)?!!i.capture:!!i,a=da(e);if(a||(e[na]=a=new Zs(e)),(n=a.add(t,n,r,s,o)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=ca;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Ts||(i=s),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(ua(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function sa(e,t,n,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)sa(e,t[o],n,r,i);return null}return n=fa(n),e&&e[zs]?e.P(t,n,ds(r)?!!r.capture:!!r,i):oa(e,t,n,!0,r,i)}function aa(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)aa(e,t[o],n,r,i);else r=ds(r)?!!r.capture:!!r,n=fa(n),e&&e[zs]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=ta(o=e.g[t],n,r,i))&&(Js(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.g[t],e.h--)))):e&&(e=da(e))&&(t=e.g[t.toString()],e=-1,t&&(e=ta(t,n,r,i)),(n=-1<e?t[e]:null)&&la(n))}function la(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[zs])ea(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(ua(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=da(t))?(ea(n,e),0==n.h&&(n.src=null,t[na]=null)):Js(e)}}}function ua(e){return e in ra?ra[e]:ra[e]="on"+e}function ca(e,t){if(e.fa)e=!0;else{t=new Hs(t,this);var n=e.listener,r=e.la||e.src;e.ia&&la(e),e=n.call(r,t)}return e}function da(e){return(e=e[na])instanceof Zs?e:null}var ha="__closure_events_fn_"+(1e9*Math.random()>>>0);function fa(e){return"function"===typeof e?e:(e[ha]||(e[ha]=function(t){return e.handleEvent(t)}),e[ha])}function pa(){bs.call(this),this.i=new Zs(this),this.S=this,this.J=null}function ma(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new _s(t,e);else if(t instanceof _s)t.target=t.target||e;else{var i=t;$s(t=new _s(r,e),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=t.g=n[o];i=ga(s,r,!0,t)&&i}if(i=ga(s=t.g=e,r,!0,t)&&i,i=ga(s,r,!1,t)&&i,n)for(o=0;o<n.length;o++)i=ga(s=t.g=n[o],r,!1,t)&&i}function ga(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var s=t[o];if(s&&!s.fa&&s.capture==n){var a=s.listener,l=s.la||s.src;s.ia&&ea(e.i,s),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}vs(pa,bs),pa.prototype[zs]=!0,pa.prototype.removeEventListener=function(e,t,n,r){aa(this,e,t,n,r)},pa.prototype.N=function(){if(pa.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Js(n[r]);delete t.g[e],t.h--}}this.J=null},pa.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},pa.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var ya=us.JSON.stringify;function va(){var e=Ca;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var ba=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new Ea),(e=>e.reset()));class Ea{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function wa(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Sa(e){us.setTimeout((()=>{throw e}),0)}let _a,Ta=!1,Ca=new class{constructor(){this.h=this.g=null}add(e,t){const n=ba.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},Ia=()=>{const e=us.Promise.resolve(void 0);_a=()=>{e.then(Aa)}};var Aa=()=>{for(var e;e=va();){try{e.h.call(e.g)}catch(Hv){Sa(Hv)}var t=ba;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Ta=!1};function Na(e,t){pa.call(this),this.h=e||1,this.g=t||us,this.j=gs(this.qb,this),this.l=Date.now()}function xa(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function ka(e,t,n){if("function"===typeof e)n&&(e=gs(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=gs(e.handleEvent,e)}return 2147483647<Number(t)?-1:us.setTimeout(e,t||0)}function Oa(e){e.g=ka((()=>{e.g=null,e.i&&(e.i=!1,Oa(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}vs(Na,pa),(os=Na.prototype).ga=!1,os.T=null,os.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),ma(this,"tick"),this.ga&&(xa(this),this.start()))}},os.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},os.N=function(){Na.$.N.call(this),xa(this),delete this.g};class Ra extends bs{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Oa(this)}N(){super.N(),this.g&&(us.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Da(e){bs.call(this),this.h=e,this.g={}}vs(Da,bs);var Pa=[];function Ma(e,t,n,r){Array.isArray(n)||(n&&(Pa[0]=n.toString()),n=Pa);for(var i=0;i<n.length;i++){var o=ia(t,n[i],r||e.handleEvent,!1,e.h||e);if(!o)break;e.g[o.key]=o}}function La(e){Ys(e.g,(function(e,t){this.g.hasOwnProperty(t)&&la(e)}),e),e.g={}}function Ua(){this.g=!0}function Fa(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return ya(n)}catch(Uv){return t}}(e,n)+(r?" "+r:"")}))}Da.prototype.N=function(){Da.$.N.call(this),La(this)},Da.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ua.prototype.Ea=function(){this.g=!1},Ua.prototype.info=function(){};var ja={},Va=null;function qa(){return Va=Va||new pa}function Ba(e){_s.call(this,ja.Ta,e)}function Ha(e){const t=qa();ma(t,new Ba(t))}function Ga(e,t){_s.call(this,ja.STAT_EVENT,e),this.stat=t}function za(e){const t=qa();ma(t,new Ga(t,e))}function Wa(e,t){_s.call(this,ja.Ua,e),this.size=t}function Ka(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return us.setTimeout((function(){e()}),t)}ja.Ta="serverreachability",vs(Ba,_s),ja.STAT_EVENT="statevent",vs(Ga,_s),ja.Ua="timingevent",vs(Wa,_s);var Ja={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Ya={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Qa(){}function Xa(e){return e.h||(e.h=e.i())}function $a(){}Qa.prototype.h=null;var Za,el={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function tl(){_s.call(this,"d")}function nl(){_s.call(this,"c")}function rl(){}function il(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Da(this),this.P=sl,e=Ps?125:void 0,this.V=new Na(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new ol}function ol(){this.i=null,this.g="",this.h=!1}vs(tl,_s),vs(nl,_s),vs(rl,Qa),rl.prototype.g=function(){return new XMLHttpRequest},rl.prototype.i=function(){return{}},Za=new rl;var sl=45e3,al={},ll={};function ul(e,t,n){e.L=1,e.v=Nl(_l(t)),e.s=n,e.S=!0,cl(e,null)}function cl(e,t){e.G=Date.now(),pl(e),e.A=_l(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),ql(n.i,"t",r),e.C=0,n=e.l.J,e.h=new ol,e.g=qu(e.l,n?t:null,!e.s),0<e.O&&(e.M=new Ra(gs(e.Pa,e,e.g),e.O)),Ma(e.U,e.g,"readystatechange",e.nb),t=e.I?Qs(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),Ha(),function(e,t,n,r,i,o){e.info((function(){if(e.g)if(o)for(var s="",a=o.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var c=u[0];u=u[1];var d=c.split("_");s=2<=d.length&&"type"==d[1]?s+(c+"=")+u+"&":s+(c+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+s}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function dl(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function hl(e,t,n){let r,i=!0;for(;!e.J&&e.C<n.length;){if(r=fl(e,n),r==ll){4==t&&(e.o=4,za(14),i=!1),Fa(e.j,e.m,null,"[Incomplete Response]");break}if(r==al){e.o=4,za(15),Fa(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Fa(e.j,e.m,r,null),bl(e,r)}dl(e)&&r!=ll&&r!=al&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,za(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Du(t),t.M=!0,za(11))):(Fa(e.j,e.m,n,"[Invalid Chunked Response]"),vl(e),yl(e))}function fl(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?ll:(n=Number(t.substring(n,r)),isNaN(n)?al:(r+=1)+n>t.length?ll:(t=t.slice(r,r+n),e.C=r+n,t))}function pl(e){e.Y=Date.now()+e.P,ml(e,e.P)}function ml(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ka(gs(e.lb,e),t)}function gl(e){e.B&&(us.clearTimeout(e.B),e.B=null)}function yl(e){0==e.l.H||e.J||Lu(e.l,e)}function vl(e){gl(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,xa(e.V),La(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function bl(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||Jl(n.i,e)))if(!e.K&&Jl(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(Wv){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Mu(n),Cu(n)}Ru(n),za(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Ka(gs(n.ib,n),6e3));if(1>=Kl(n.i)&&n.oa){try{n.oa()}catch(Wv){}n.oa=void 0}}else Fu(n,11)}else if((e.K||n.g==e)&&Mu(n),!Cs(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let u=i[t];if(n.V=u[0],u=u[1],2==n.H)if("c"==u[0]){n.K=u[1],n.pa=u[2];const t=u[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=u[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const c=u[5];null!=c&&"number"===typeof c&&0<c&&(r=1.5*c,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var o=r.i;o.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(Yl(o,o.h),o.h=null))}if(r.F){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,Al(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var s=e;if((r=n).wa=Vu(r,r.J?r.pa:null,r.Y),s.K){Ql(r.i,s);var a=s,l=r.L;l&&a.setTimeout(l),a.B&&(gl(a),pl(a)),r.g=s}else Ou(r);0<n.j.length&&Au(n)}else"stop"!=u[0]&&"close"!=u[0]||Fu(n,7);else 3==n.H&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?Fu(n,7):Tu(n):"noop"!=u[0]&&n.h&&n.h.Aa(u),n.A=0)}Ha()}catch(Wv){}}function El(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(cs(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(cs(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(cs(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}(os=il.prototype).setTimeout=function(e){this.P=e},os.nb=function(e){e=e.target;const t=this.M;t&&3==vu(e)?t.l():this.Pa(e)},os.Pa=function(e){try{if(e==this.g)e:{const c=vu(this.g);var t=this.g.Ia();this.g.da();if(!(3>c)&&(3!=c||Ps||this.g&&(this.h.h||this.g.ja()||bu(this.g)))){this.J||4!=c||7==t||Ha(),gl(this);var n=this.g.da();this.ca=n;t:if(dl(this)){var r=bu(this.g);e="";var i=r.length,o=4==vu(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){vl(this),yl(this);var s="";break t}this.h.i=new us.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:o&&t==i-1});r.splice(0,i),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,o,s){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+s}))}(this.j,this.u,this.A,this.m,this.W,c,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Cs(a)){var u=a;break t}}u=null}if(!(n=u)){this.i=!1,this.o=3,za(12),vl(this),yl(this);break e}Fa(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,bl(this,n)}this.S?(hl(this,c,s),Ps&&this.i&&3==c&&(Ma(this.U,this.V,"tick",this.mb),this.V.start())):(Fa(this.j,this.m,s,null),bl(this,s)),4==c&&vl(this),this.i&&!this.J&&(4==c?Lu(this.l,this):(this.i=!1,pl(this)))}else(function(e){const t={};e=(e.g&&2<=vu(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(Cs(e[r]))continue;var n=wa(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const o=t[i]||[];t[i]=o,o.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<s.indexOf("Unknown SID")?(this.o=3,za(12)):(this.o=0,za(13)),vl(this),yl(this)}}}catch(Bv){}},os.mb=function(){if(this.g){var e=vu(this.g),t=this.g.ja();this.C<t.length&&(gl(this),hl(this,e,t),this.i&&4!=e&&pl(this))}},os.cancel=function(){this.J=!0,vl(this)},os.lb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(Ha(),za(17)),vl(this),this.o=2,yl(this)):ml(this,this.Y-e)};var wl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Sl(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Sl){this.h=e.h,Tl(this,e.j),this.s=e.s,this.g=e.g,Cl(this,e.m),this.l=e.l;var t=e.i,n=new Ul;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Il(this,n),this.o=e.o}else e&&(t=String(e).match(wl))?(this.h=!1,Tl(this,t[1]||"",!0),this.s=xl(t[2]||""),this.g=xl(t[3]||"",!0),Cl(this,t[4]),this.l=xl(t[5]||"",!0),Il(this,t[6]||"",!0),this.o=xl(t[7]||"")):(this.h=!1,this.i=new Ul(null,this.h))}function _l(e){return new Sl(e)}function Tl(e,t,n){e.j=n?xl(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Cl(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Il(e,t,n){t instanceof Ul?(e.i=t,function(e,t){t&&!e.j&&(Fl(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(jl(this,t),ql(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=kl(t,Ml)),e.i=new Ul(t,e.h))}function Al(e,t,n){e.i.set(t,n)}function Nl(e){return Al(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function xl(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function kl(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Ol),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Ol(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Sl.prototype.toString=function(){var e=[],t=this.j;t&&e.push(kl(t,Rl,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(kl(t,Rl,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(kl(n,"/"==n.charAt(0)?Pl:Dl,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",kl(n,Ll)),e.join("")};var Rl=/[#\/\?@]/g,Dl=/[#\?:]/g,Pl=/[#\?]/g,Ml=/[#\?@]/g,Ll=/#/g;function Ul(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Fl(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function jl(e,t){Fl(e),t=Bl(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Vl(e,t){return Fl(e),t=Bl(e,t),e.g.has(t)}function ql(e,t,n){jl(e,t),0<n.length&&(e.i=null,e.g.set(Bl(e,t),ws(n)),e.h+=n.length)}function Bl(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(os=Ul.prototype).add=function(e,t){Fl(this),this.i=null,e=Bl(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},os.forEach=function(e,t){Fl(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},os.ta=function(){Fl(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},os.Z=function(e){Fl(this);let t=[];if("string"===typeof e)Vl(this,e)&&(t=t.concat(this.g.get(Bl(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},os.set=function(e,t){return Fl(this),this.i=null,Vl(this,e=Bl(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},os.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},os.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const o=encodeURIComponent(String(r)),s=this.Z(r);for(r=0;r<s.length;r++){var i=o;""!==s[r]&&(i+="="+encodeURIComponent(String(s[r]))),e.push(i)}}return this.i=e.join("&")};var Hl=class{constructor(e,t){this.g=e,this.map=t}};function Gl(e){this.l=e||zl,us.PerformanceNavigationTiming?e=0<(e=us.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(us.g&&us.g.Ka&&us.g.Ka()&&us.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var zl=10;function Wl(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Kl(e){return e.h?1:e.g?e.g.size:0}function Jl(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Yl(e,t){e.g?e.g.add(t):e.h=t}function Ql(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Xl(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return ws(e.i)}Gl.prototype.cancel=function(){if(this.i=Xl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var $l=class{stringify(e){return us.JSON.stringify(e,void 0)}parse(e){return us.JSON.parse(e,void 0)}};function Zl(){this.g=new $l}function eu(e,t,n){const r=n||"";try{El(e,(function(e,n){let i=e;ds(e)&&(i=ya(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(Mv){throw t.push(r+"type="+encodeURIComponent("_badmap")),Mv}}function tu(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(Gv){}}function nu(e){this.l=e.fc||null,this.j=e.ob||!1}function ru(e,t){pa.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=iu,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}vs(nu,Qa),nu.prototype.g=function(){return new ru(this.l,this.j)},nu.prototype.i=function(e){return function(){return e}}({}),vs(ru,pa);var iu=0;function ou(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function su(e){e.readyState=4,e.l=null,e.j=null,e.A=null,au(e)}function au(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(os=ru.prototype).open=function(e,t){if(this.readyState!=iu)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,au(this)},os.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||us).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},os.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,su(this)),this.readyState=iu},os.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,au(this)),this.g&&(this.readyState=3,au(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof us.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ou(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},os.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?su(this):au(this),3==this.readyState&&ou(this)}},os.Za=function(e){this.g&&(this.response=this.responseText=e,su(this))},os.Ya=function(e){this.g&&(this.response=e,su(this))},os.ka=function(){this.g&&su(this)},os.setRequestHeader=function(e,t){this.v.append(e,t)},os.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},os.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(ru.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var lu=us.JSON.parse;function uu(e){pa.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=cu,this.L=this.M=!1}vs(uu,pa);var cu="",du=/^https?$/i,hu=["POST","PUT"];function fu(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,pu(e),gu(e)}function pu(e){e.F||(e.F=!0,ma(e,"complete"),ma(e,"error"))}function mu(e){if(e.h&&"undefined"!=typeof ls&&(!e.C[1]||4!=vu(e)||2!=e.da()))if(e.v&&4==vu(e))ka(e.La,0,e);else if(ma(e,"readystatechange"),4==vu(e)){e.h=!1;try{const s=e.da();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===s){var i=String(e.I).match(wl)[1]||null;!i&&us.self&&us.self.location&&(i=us.self.location.protocol.slice(0,-1)),r=!du.test(i?i.toLowerCase():"")}n=r}if(n)ma(e,"complete"),ma(e,"success");else{e.m=6;try{var o=2<vu(e)?e.g.statusText:""}catch(Uv){o=""}e.j=o+" ["+e.da()+"]",pu(e)}}finally{gu(e)}}}function gu(e,t){if(e.g){yu(e);const n=e.g,r=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||ma(e,"ready");try{n.onreadystatechange=r}catch(Mv){}}}function yu(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(us.clearTimeout(e.A),e.A=null)}function vu(e){return e.g?e.g.readyState:0}function bu(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case cu:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Tc){return null}}function Eu(e){let t="";return Ys(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function wu(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Eu(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Al(e,t,n))}function Su(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function _u(e){this.Ga=0,this.j=[],this.l=new Ua,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Su("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Su("baseRetryDelayMs",5e3,e),this.hb=Su("retryDelaySeedMs",1e4,e),this.eb=Su("forwardChannelMaxRetries",2,e),this.xa=Su("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Gl(e&&e.concurrentRequestLimit),this.Ja=new Zl,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Tu(e){if(Iu(e),3==e.H){var t=e.W++,n=_l(e.I);if(Al(n,"SID",e.K),Al(n,"RID",t),Al(n,"TYPE","terminate"),xu(e,n),(t=new il(e,e.l,t)).L=2,t.v=Nl(_l(n)),n=!1,us.navigator&&us.navigator.sendBeacon)try{n=us.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&us.Image&&((new Image).src=t.v,n=!0),n||(t.g=qu(t.l,null),t.g.ha(t.v)),t.G=Date.now(),pl(t)}ju(e)}function Cu(e){e.g&&(Du(e),e.g.cancel(),e.g=null)}function Iu(e){Cu(e),e.u&&(us.clearTimeout(e.u),e.u=null),Mu(e),e.i.cancel(),e.m&&("number"===typeof e.m&&us.clearTimeout(e.m),e.m=null)}function Au(e){if(!Wl(e.i)&&!e.m){e.m=!0;var t=e.Na;_a||Ia(),Ta||(_a(),Ta=!0),Ca.add(t,e),e.C=0}}function Nu(e,t){var n;n=t?t.m:e.W++;const r=_l(e.I);Al(r,"SID",e.K),Al(r,"RID",n),Al(r,"AID",e.V),xu(e,r),e.o&&e.s&&wu(r,e.o,e.s),n=new il(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=ku(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Yl(e.i,n),ul(n,r,t)}function xu(e,t){e.na&&Ys(e.na,(function(e,n){Al(t,n,e)})),e.h&&El({},(function(e,n){Al(t,n,e)}))}function ku(e,t,n){n=Math.min(e.j.length,n);var r=e.h?gs(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let s=0;s<n;s++){let n=i[s].g;const a=i[s].map;if(n-=t,0>n)t=Math.max(0,i[s].g-100),o=!1;else try{eu(a,e,"req"+n+"_")}catch(Mc){r&&r(a)}}if(o){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function Ou(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;_a||Ia(),Ta||(_a(),Ta=!0),Ca.add(t,e),e.A=0}}function Ru(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Ka(gs(e.Ma,e),Uu(e,e.A)),e.A++,!0)}function Du(e){null!=e.B&&(us.clearTimeout(e.B),e.B=null)}function Pu(e){e.g=new il(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=_l(e.wa);Al(t,"RID","rpc"),Al(t,"SID",e.K),Al(t,"AID",e.V),Al(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Al(t,"TO",e.qa),Al(t,"TYPE","xmlhttp"),xu(e,t),e.o&&e.s&&wu(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=Nl(_l(t)),n.s=null,n.S=!0,cl(n,e)}function Mu(e){null!=e.v&&(us.clearTimeout(e.v),e.v=null)}function Lu(e,t){var n=null;if(e.g==t){Mu(e),Du(e),e.g=null;var r=2}else{if(!Jl(e.i,t))return;n=t.F,Ql(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;ma(r=qa(),new Wa(r,n)),Au(e)}else Ou(e);else if(3==(i=t.o)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(Kl(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=Ka(gs(e.Na,e,t),Uu(e,e.C)),e.C++,!0))}(e,t)||2==r&&Ru(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Fu(e,5);break;case 4:Fu(e,10);break;case 3:Fu(e,6);break;default:Fu(e,2)}}function Uu(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Fu(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=gs(e.pb,e);n||(n=new Sl("//www.google.com/images/cleardot.gif"),us.location&&"http"==us.location.protocol||Tl(n,"https"),Nl(n)),function(e,t){const n=new Ua;if(us.Image){const r=new Image;r.onload=ys(tu,n,r,"TestLoadImage: loaded",!0,t),r.onerror=ys(tu,n,r,"TestLoadImage: error",!1,t),r.onabort=ys(tu,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=ys(tu,n,r,"TestLoadImage: timeout",!1,t),us.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else za(2);e.H=0,e.h&&e.h.za(t),ju(e),Iu(e)}function ju(e){if(e.H=0,e.ma=[],e.h){const t=Xl(e.i);0==t.length&&0==e.j.length||(Ss(e.ma,t),Ss(e.ma,e.j),e.i.i.length=0,ws(e.j),e.j.length=0),e.h.ya()}}function Vu(e,t,n){var r=n instanceof Sl?_l(n):new Sl(n);if(""!=r.g)t&&(r.g=t+"."+r.g),Cl(r,r.m);else{var i=us.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var o=new Sl(null);r&&Tl(o,r),t&&(o.g=t),i&&Cl(o,i),n&&(o.l=n),r=o}return n=e.F,t=e.Da,n&&t&&Al(r,n,t),Al(r,"VER",e.ra),xu(e,r),r}function qu(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new uu(new nu({ob:!0})):new uu(e.va)).Oa(e.J),t}function Bu(){}function Hu(){if(Rs&&!(10<=Number(Bs)))throw Error("Environmental error: no available transport.")}function Gu(e,t){pa.call(this),this.g=new _u(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Cs(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Cs(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Ku(this)}function zu(e){tl.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Wu(){nl.call(this),this.status=1}function Ku(e){this.g=e}function Ju(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Yu(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var o=e.g[3],s=t+(o^n&(i^o))+r[0]+3614090360&4294967295;s=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=n+(s<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[3]+3250441966&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[4]+4118548399&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[7]+4249261313&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[8]+1770035416&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[11]+2304563134&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[12]+1804603682&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[15]+1236535329&4294967295)<<22&4294967295|s>>>10))+((s=t+(i^o&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[11]+643717713&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[0]+3921069994&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[15]+3634488961&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[4]+3889429448&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[3]+4107603335&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[8]+1163531501&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[7]+1735328473&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[12]+2368359562&4294967295)<<20&4294967295|s>>>12))+((s=t+(n^i^o)+r[5]+4294588738&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[14]+4259657740&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[1]+2763975236&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[10]+3200236656&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[13]+681279174&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[6]+76029189&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[9]+3654602809&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[15]+530742520&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[2]+3299628645&4294967295)<<23&4294967295|s>>>9))+((s=t+(i^(n|~o))+r[0]+4096336452&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[14]+2878612391&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|s>>>11))+((s=t+(i^(n|~o))+r[12]+1700485571&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[10]+4293915773&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|s>>>11))+((s=t+(i^(n|~o))+r[8]+1873313359&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[6]+2734768916&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|s>>>11))+((o=(t=n+((s=t+(i^(n|~o))+r[4]+4149444226&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|s>>>22))^((i=o+((s=i+(t^(o|~n))+r[2]+718787259&4294967295)<<15&4294967295|s>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+o&4294967295}function Qu(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var o=0|e[i];r&&o==t||(n[i]=o,r=!1)}this.g=n}(os=uu.prototype).Oa=function(e){this.M=e},os.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Za.g(),this.C=this.u?Xa(this.u):Xa(Za),this.g.onreadystatechange=gs(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(Gv){return void fu(this,Gv)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=us.FormData&&e instanceof us.FormData,!(0<=Es(hu,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,s]of n)this.g.setRequestHeader(o,s);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{yu(this),0<this.B&&((this.L=function(e){return Rs&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=gs(this.ua,this)):this.A=ka(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(Gv){fu(this,Gv)}},os.ua=function(){"undefined"!=typeof ls&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ma(this,"timeout"),this.abort(8))},os.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,ma(this,"complete"),ma(this,"abort"),gu(this))},os.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),gu(this,!0)),uu.$.N.call(this)},os.La=function(){this.s||(this.G||this.v||this.l?mu(this):this.kb())},os.kb=function(){mu(this)},os.isActive=function(){return!!this.g},os.da=function(){try{return 2<vu(this)?this.g.status:-1}catch(Vv){return-1}},os.ja=function(){try{return this.g?this.g.responseText:""}catch(Vv){return""}},os.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),lu(t)}},os.Ia=function(){return this.m},os.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(os=_u.prototype).ra=8,os.H=1,os.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new il(this,this.l,e);let o=this.s;if(this.U&&(o?(o=Qs(o),$s(o,this.U)):o=this.U),null!==this.o||this.O||(i.I=o,o=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=ku(this,i,t),Al(n=_l(this.I),"RID",e),Al(n,"CVER",22),this.F&&Al(n,"X-HTTP-Session-Id",this.F),xu(this,n),o&&(this.O?t="headers="+encodeURIComponent(String(Eu(o)))+"&"+t:this.o&&wu(n,this.o,o)),Yl(this.i,i),this.bb&&Al(n,"TYPE","init"),this.P?(Al(n,"$req",t),Al(n,"SID","null"),i.aa=!0,ul(i,n,null)):ul(i,n,t),this.H=2}}else 3==this.H&&(e?Nu(this,e):0==this.j.length||Wl(this.i)||Nu(this))},os.Ma=function(){if(this.u=null,Pu(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Ka(gs(this.jb,this),e)}},os.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,za(10),Cu(this),Pu(this))},os.ib=function(){null!=this.v&&(this.v=null,Cu(this),Ru(this),za(19))},os.pb=function(e){e?(this.l.info("Successfully pinged google.com"),za(2)):(this.l.info("Failed to ping google.com"),za(1))},os.isActive=function(){return!!this.h&&this.h.isActive(this)},(os=Bu.prototype).Ba=function(){},os.Aa=function(){},os.za=function(){},os.ya=function(){},os.isActive=function(){return!0},os.Va=function(){},Hu.prototype.g=function(e,t){return new Gu(e,t)},vs(Gu,pa),Gu.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;za(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Vu(e,null,e.Y),Au(e)},Gu.prototype.close=function(){Tu(this.g)},Gu.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=ya(e),e=n);t.j.push(new Hl(t.fb++,e)),3==t.H&&Au(t)},Gu.prototype.N=function(){this.g.h=null,delete this.j,Tu(this.g),delete this.g,Gu.$.N.call(this)},vs(zu,tl),vs(Wu,nl),vs(Ku,Bu),Ku.prototype.Ba=function(){ma(this.g,"a")},Ku.prototype.Aa=function(e){ma(this.g,new zu(e))},Ku.prototype.za=function(e){ma(this.g,new Wu)},Ku.prototype.ya=function(){ma(this.g,"b")},vs(Ju,(function(){this.blockSize=-1})),Ju.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Ju.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,o=0;o<t;){if(0==i)for(;o<=n;)Yu(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(r[i++]=e.charCodeAt(o++),i==this.blockSize){Yu(this,r),i=0;break}}else for(;o<t;)if(r[i++]=e[o++],i==this.blockSize){Yu(this,r),i=0;break}}this.h=i,this.i+=t},Ju.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var Xu={};function $u(e){return-128<=e&&128>e?function(e,t){var n=Xu;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new Qu([0|e],0>e?-1:0)})):new Qu([0|e],0>e?-1:0)}function Zu(e){if(isNaN(e)||!isFinite(e))return tc;if(0>e)return sc(Zu(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=ec;return new Qu(t,0)}var ec=4294967296,tc=$u(0),nc=$u(1),rc=$u(16777216);function ic(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function oc(e){return-1==e.h}function sc(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Qu(n,~e.h).add(nc)}function ac(e,t){return e.add(sc(t))}function lc(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function uc(e,t){this.g=e,this.h=t}function cc(e,t){if(ic(t))throw Error("division by zero");if(ic(e))return new uc(tc,tc);if(oc(e))return t=cc(sc(e),t),new uc(sc(t.g),sc(t.h));if(oc(t))return t=cc(e,sc(t)),new uc(sc(t.g),t.h);if(30<e.g.length){if(oc(e)||oc(t))throw Error("slowDivide_ only works with positive integers.");for(var n=nc,r=t;0>=r.X(e);)n=dc(n),r=dc(r);var i=hc(n,1),o=hc(r,1);for(r=hc(r,2),n=hc(n,2);!ic(r);){var s=o.add(r);0>=s.X(e)&&(i=i.add(n),o=s),r=hc(r,1),n=hc(n,1)}return t=ac(e,i.R(t)),new uc(i,t)}for(i=tc;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),s=(o=Zu(n)).R(t);oc(s)||0<s.X(e);)s=(o=Zu(n-=r)).R(t);ic(o)&&(o=nc),i=i.add(o),e=ac(e,s)}return new uc(i,e)}function dc(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Qu(n,e.h)}function hc(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],o=0;o<r;o++)i[o]=0<t?e.D(o+n)>>>t|e.D(o+n+1)<<32-t:e.D(o+n);return new Qu(i,e.h)}(os=Qu.prototype).ea=function(){if(oc(this))return-sc(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:ec+r)*t,t*=ec}return e},os.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(ic(this))return"0";if(oc(this))return"-"+sc(this).toString(e);for(var t=Zu(Math.pow(e,6)),n=this,r="";;){var i=cc(n,t).g,o=((0<(n=ac(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(ic(n=i))return o+r;for(;6>o.length;)o="0"+o;r=o+r}},os.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},os.X=function(e){return oc(e=ac(this,e))?-1:ic(e)?0:1},os.abs=function(){return oc(this)?sc(this):this},os.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var o=r+(65535&this.D(i))+(65535&e.D(i)),s=(o>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=s>>>16,o&=65535,s&=65535,n[i]=s<<16|o}return new Qu(n,-2147483648&n[n.length-1]?-1:0)},os.R=function(e){if(ic(this)||ic(e))return tc;if(oc(this))return oc(e)?sc(this).R(sc(e)):sc(sc(this).R(e));if(oc(e))return sc(this.R(sc(e)));if(0>this.X(rc)&&0>e.X(rc))return Zu(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var o=this.D(r)>>>16,s=65535&this.D(r),a=e.D(i)>>>16,l=65535&e.D(i);n[2*r+2*i]+=s*l,lc(n,2*r+2*i),n[2*r+2*i+1]+=o*l,lc(n,2*r+2*i+1),n[2*r+2*i+1]+=s*a,lc(n,2*r+2*i+1),n[2*r+2*i+2]+=o*a,lc(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Qu(n,0)},os.gb=function(e){return cc(this,e).h},os.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Qu(n,this.h&e.h)},os.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Qu(n,this.h|e.h)},os.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Qu(n,this.h^e.h)},Hu.prototype.createWebChannel=Hu.prototype.g,Gu.prototype.send=Gu.prototype.u,Gu.prototype.open=Gu.prototype.m,Gu.prototype.close=Gu.prototype.close,Ja.NO_ERROR=0,Ja.TIMEOUT=8,Ja.HTTP_ERROR=6,Ya.COMPLETE="complete",$a.EventType=el,el.OPEN="a",el.CLOSE="b",el.ERROR="c",el.MESSAGE="d",pa.prototype.listen=pa.prototype.O,uu.prototype.listenOnce=uu.prototype.P,uu.prototype.getLastError=uu.prototype.Sa,uu.prototype.getLastErrorCode=uu.prototype.Ia,uu.prototype.getStatus=uu.prototype.da,uu.prototype.getResponseJson=uu.prototype.Wa,uu.prototype.getResponseText=uu.prototype.ja,uu.prototype.send=uu.prototype.ha,uu.prototype.setWithCredentials=uu.prototype.Oa,Ju.prototype.digest=Ju.prototype.l,Ju.prototype.reset=Ju.prototype.reset,Ju.prototype.update=Ju.prototype.j,Qu.prototype.add=Qu.prototype.add,Qu.prototype.multiply=Qu.prototype.R,Qu.prototype.modulo=Qu.prototype.gb,Qu.prototype.compare=Qu.prototype.X,Qu.prototype.toNumber=Qu.prototype.ea,Qu.prototype.toString=Qu.prototype.toString,Qu.prototype.getBits=Qu.prototype.D,Qu.fromNumber=Zu,Qu.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return sc(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Zu(Math.pow(n,8)),i=tc,o=0;o<t.length;o+=8){var s=Math.min(8,t.length-o),a=parseInt(t.substring(o,o+s),n);8>s?(s=Zu(Math.pow(n,s)),i=i.R(s).add(Zu(a))):i=(i=i.R(r)).add(Zu(a))}return i};var fc=as.createWebChannelTransport=function(){return new Hu},pc=as.getStatEventTarget=function(){return qa()},mc=as.ErrorCode=Ja,gc=as.EventType=Ya,yc=as.Event=ja,vc=as.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},bc=as.FetchXmlHttpFactory=nu,Ec=as.WebChannel=$a,wc=as.XhrIo=uu,Sc=as.Md5=Ju,_c=as.Integer=Qu;const Tc="@firebase/firestore";class Cc{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Cc.UNAUTHENTICATED=new Cc(null),Cc.GOOGLE_CREDENTIALS=new Cc("google-credentials-uid"),Cc.FIRST_PARTY=new Cc("first-party-uid"),Cc.MOCK_USER=new Cc("mock-user");let Ic="9.23.0";const Ac=new class{constructor(e){this.name=e,this._logLevel=ns,this._logHandler=is,this._userLogHandler=null,Zo.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in es))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?ts[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,es.DEBUG,...t),this._logHandler(this,es.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,es.VERBOSE,...t),this._logHandler(this,es.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,es.INFO,...t),this._logHandler(this,es.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,es.WARN,...t),this._logHandler(this,es.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,es.ERROR,...t),this._logHandler(this,es.ERROR,...t)}}("@firebase/firestore");function Nc(){return Ac.logLevel}function xc(e){if(Ac.logLevel<=es.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Rc);Ac.debug("Firestore (".concat(Ic,"): ").concat(e),...i)}}function kc(e){if(Ac.logLevel<=es.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Rc);Ac.error("Firestore (".concat(Ic,"): ").concat(e),...i)}}function Oc(e){if(Ac.logLevel<=es.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Rc);Ac.warn("Firestore (".concat(Ic,"): ").concat(e),...i)}}function Rc(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Dc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(Ic,") INTERNAL ASSERTION FAILED: ")+e;throw kc(t),new Error(t)}function Pc(e,t){e||Dc()}function Mc(e,t){return e}const Lc={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Uc extends Jo{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Fc{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class jc{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Vc{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Cc.UNAUTHENTICATED)))}shutdown(){}}class qc{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Bc{constructor(e){this.t=e,this.currentUser=Cc.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Fc;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Fc,e.enqueueRetryable((()=>r(this.currentUser)))};const o=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},s=e=>{xc("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit((e=>s(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?s(e):(xc("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Fc)}}),0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(xc("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Pc("string"==typeof t.accessToken),new jc(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Pc(null===e||"string"==typeof e),new Cc(e)}}class Hc{constructor(e,t,n){this.h=e,this.l=t,this.m=n,this.type="FirstParty",this.user=Cc.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class Gc{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new Hc(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable((()=>t(Cc.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class zc{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Wc{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const n=e=>{null!=e.error&&xc("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.T;return this.T=e.token,xc("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{xc("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.I.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.I.getImmediate({optional:!0});e?r(e):xc("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Pc("string"==typeof e.token),this.T=e.token,new zc(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Kc(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Jc{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=Kc(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function Yc(e,t){return e<t?-1:e>t?1:0}function Qc(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}class Xc{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Uc(Lc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Uc(Lc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Uc(Lc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Uc(Lc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Xc.fromMillis(Date.now())}static fromDate(e){return Xc.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Xc(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Yc(this.nanoseconds,e.nanoseconds):Yc(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class $c{constructor(e){this.timestamp=e}static fromTimestamp(e){return new $c(e)}static min(){return new $c(new Xc(0,0))}static max(){return new $c(new Xc(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Zc{constructor(e,t,n){void 0===t?t=0:t>e.length&&Dc(),void 0===n?n=e.length-t:n>e.length-t&&Dc(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Zc.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Zc?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ed extends Zc{construct(e,t,n){return new ed(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Uc(Lc.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new ed(e)}static emptyPath(){return new ed([])}}const td=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nd extends Zc{construct(e,t,n){return new nd(e,t,n)}static isValidIdentifier(e){return td.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nd.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new nd(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Uc(Lc.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let o=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Uc(Lc.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Uc(Lc.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(o=!o,r++):"."!==t||o?(n+=t,r++):(i(),r++)}if(i(),o)throw new Uc(Lc.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new nd(t)}static emptyPath(){return new nd([])}}class rd{constructor(e){this.path=e}static fromPath(e){return new rd(ed.fromString(e))}static fromName(e){return new rd(ed.fromString(e).popFirst(5))}static empty(){return new rd(ed.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ed.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ed.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new rd(new ed(e.slice()))}}class id{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}id.UNKNOWN_ID=-1;function od(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=$c.fromTimestamp(1e9===r?new Xc(n+1,0):new Xc(n,r));return new ad(i,rd.empty(),t)}function sd(e){return new ad(e.readTime,e.key,-1)}class ad{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new ad($c.min(),rd.empty(),-1)}static max(){return new ad($c.max(),rd.empty(),-1)}}function ld(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=rd.comparator(e.documentKey,t.documentKey),0!==n?n:Yc(e.largestBatchId,t.largestBatchId))}const ud="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class cd{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function dd(e){if(e.code!==Lc.FAILED_PRECONDITION||e.message!==ud)throw e;xc("LocalStore","Unexpectedly lost primary lease")}class hd{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Dc(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new hd(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof hd?t:hd.resolve(t)}catch(e){return hd.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):hd.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):hd.reject(t)}static resolve(e){return new hd(((t,n)=>{t(e)}))}static reject(e){return new hd(((t,n)=>{n(e)}))}static waitFor(e){return new hd(((t,n)=>{let r=0,i=0,o=!1;e.forEach((e=>{++r,e.next((()=>{++i,o&&i===r&&t()}),(e=>n(e)))})),o=!0,i===r&&t()}))}static or(e){let t=hd.resolve(!1);for(const n of e)t=t.next((e=>e?hd.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new hd(((n,r)=>{const i=e.length,o=new Array(i);let s=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next((e=>{o[l]=e,++s,s===i&&n(o)}),(e=>r(e)))}}))}static doWhile(e,t){return new hd(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}function fd(e){return"IndexedDbTransactionError"===e.name}class pd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ot(e),this.ut=e=>t.writeSequenceNumber(e))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}function md(e){return null==e}function gd(e){return 0===e&&1/e==-1/0}function yd(e){return"number"==typeof e&&Number.isInteger(e)&&!gd(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}pd.ct=-1;const vd=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],bd=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ed=bd;function wd(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Sd(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function _d(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Td{constructor(e,t){this.comparator=e,this.root=t||Id.EMPTY}insert(e,t){return new Td(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Id.BLACK,null,null))}remove(e){return new Td(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Id.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Cd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Cd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Cd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Cd(this.root,e,this.comparator,!0)}}class Cd{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Id{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Id.RED,this.left=null!=r?r:Id.EMPTY,this.right=null!=i?i:Id.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Id(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Id.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Id.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Id.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Id.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Dc();if(this.right.isRed())throw Dc();const e=this.left.check();if(e!==this.right.check())throw Dc();return e+(this.isRed()?0:1)}}Id.EMPTY=null,Id.RED=!0,Id.BLACK=!1,Id.EMPTY=new class{constructor(){this.size=0}get key(){throw Dc()}get value(){throw Dc()}get color(){throw Dc()}get left(){throw Dc()}get right(){throw Dc()}copy(e,t,n,r,i){return this}insert(e,t,n){return new Id(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ad{constructor(e){this.comparator=e,this.data=new Td(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Nd(this.data.getIterator())}getIteratorFrom(e){return new Nd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof Ad))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ad(this.comparator);return t.data=e,t}}class Nd{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class xd{constructor(e){this.fields=e,e.sort(nd.comparator)}static empty(){return new xd([])}unionWith(e){let t=new Ad(nd.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new xd(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Qc(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class kd extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Od{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new kd("Invalid base64 string: "+e):e}}(e);return new Od(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Od(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Yc(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Od.EMPTY_BYTE_STRING=new Od("");const Rd=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Dd(e){if(Pc(!!e),"string"==typeof e){let t=0;const n=Rd.exec(e);if(Pc(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Pd(e.seconds),nanos:Pd(e.nanos)}}function Pd(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Md(e){return"string"==typeof e?Od.fromBase64String(e):Od.fromUint8Array(e)}function Ld(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Ud(e){const t=e.mapValue.fields.__previous_value__;return Ld(t)?Ud(t):t}function Fd(e){const t=Dd(e.mapValue.fields.__local_write_time__.timestampValue);return new Xc(t.seconds,t.nanos)}class jd{constructor(e,t,n,r,i,o,s,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.longPollingOptions=a,this.useFetchStreams=l}}class Vd{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Vd("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Vd&&e.projectId===this.projectId&&e.database===this.database}}const qd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Bd(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Ld(e)?4:nh(e)?9007199254740991:10:Dc()}function Hd(e,t){if(e===t)return!0;const n=Bd(e);if(n!==Bd(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Fd(e).isEqual(Fd(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Dd(e.timestampValue),r=Dd(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Md(e.bytesValue).isEqual(Md(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Pd(e.geoPointValue.latitude)===Pd(t.geoPointValue.latitude)&&Pd(e.geoPointValue.longitude)===Pd(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Pd(e.integerValue)===Pd(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Pd(e.doubleValue),r=Pd(t.doubleValue);return n===r?gd(n)===gd(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Qc(e.arrayValue.values||[],t.arrayValue.values||[],Hd);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(wd(n)!==wd(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Hd(n[i],r[i])))return!1;return!0}(e,t);default:return Dc()}}function Gd(e,t){return void 0!==(e.values||[]).find((e=>Hd(e,t)))}function zd(e,t){if(e===t)return 0;const n=Bd(e),r=Bd(t);if(n!==r)return Yc(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Yc(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Pd(e.integerValue||e.doubleValue),r=Pd(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Wd(e.timestampValue,t.timestampValue);case 4:return Wd(Fd(e),Fd(t));case 5:return Yc(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Md(e),r=Md(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Yc(n[i],r[i]);if(0!==e)return e}return Yc(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Yc(Pd(e.latitude),Pd(t.latitude));return 0!==n?n:Yc(Pd(e.longitude),Pd(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=zd(n[i],r[i]);if(e)return e}return Yc(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===qd.mapValue&&t===qd.mapValue)return 0;if(e===qd.mapValue)return 1;if(t===qd.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(let s=0;s<r.length&&s<o.length;++s){const e=Yc(r[s],o[s]);if(0!==e)return e;const t=zd(n[r[s]],i[o[s]]);if(0!==t)return t}return Yc(r.length,o.length)}(e.mapValue,t.mapValue);default:throw Dc()}}function Wd(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Yc(e,t);const n=Dd(e),r=Dd(t),i=Yc(n.seconds,r.seconds);return 0!==i?i:Yc(n.nanos,r.nanos)}function Kd(e){return Jd(e)}function Jd(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Dd(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Md(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,rd.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Jd(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(Jd(e.fields[i]));return n+"}"}(e.mapValue):Dc();var t,n}function Yd(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Qd(e){return!!e&&"integerValue"in e}function Xd(e){return!!e&&"arrayValue"in e}function $d(e){return!!e&&"nullValue"in e}function Zd(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function eh(e){return!!e&&"mapValue"in e}function th(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Sd(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=th(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=th(e.arrayValue.values[n]);return t}return Object.assign({},e)}function nh(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class rh{constructor(e){this.value=e}static empty(){return new rh({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!eh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=th(t)}setAll(e){let t=nd.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=th(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());eh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Hd(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];eh(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Sd(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new rh(th(this.value))}}function ih(e){const t=[];return Sd(e.fields,((e,n)=>{const r=new nd([e]);if(eh(n)){const e=ih(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new xd(t)}class oh{constructor(e,t,n,r,i,o,s){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=o,this.documentState=s}static newInvalidDocument(e){return new oh(e,0,$c.min(),$c.min(),$c.min(),rh.empty(),0)}static newFoundDocument(e,t,n,r){return new oh(e,1,t,$c.min(),n,r,0)}static newNoDocument(e,t){return new oh(e,2,t,$c.min(),$c.min(),rh.empty(),0)}static newUnknownDocument(e,t){return new oh(e,3,t,$c.min(),$c.min(),rh.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual($c.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=rh.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=rh.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=$c.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof oh&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new oh(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class sh{constructor(e,t){this.position=e,this.inclusive=t}}function ah(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const o=t[i],s=e.position[i];if(r=o.field.isKeyField()?rd.comparator(rd.fromName(s.referenceValue),n.key):zd(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function lh(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Hd(e.position[n],t.position[n]))return!1;return!0}class uh{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function ch(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class dh{}class hh extends dh{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Eh(e,t,n):"array-contains"===t?new Th(e,n):"in"===t?new Ch(e,n):"not-in"===t?new Ih(e,n):"array-contains-any"===t?new Ah(e,n):new hh(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new wh(e,n):new Sh(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(zd(t,this.value)):null!==t&&Bd(this.value)===Bd(t)&&this.matchesComparison(zd(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Dc()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class fh extends dh{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new fh(e,t)}matches(e){return ph(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft((e=>e.isInequality()));return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function ph(e){return"and"===e.op}function mh(e){return gh(e)&&ph(e)}function gh(e){for(const t of e.filters)if(t instanceof fh)return!1;return!0}function yh(e){if(e instanceof hh)return e.field.canonicalString()+e.op.toString()+Kd(e.value);if(mh(e))return e.filters.map((e=>yh(e))).join(",");{const t=e.filters.map((e=>yh(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function vh(e,t){return e instanceof hh?function(e,t){return t instanceof hh&&e.op===t.op&&e.field.isEqual(t.field)&&Hd(e.value,t.value)}(e,t):e instanceof fh?function(e,t){return t instanceof fh&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&vh(n,t.filters[r])),!0)}(e,t):void Dc()}function bh(e){return e instanceof hh?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Kd(e.value))}(e):e instanceof fh?function(e){return e.op.toString()+" {"+e.getFilters().map(bh).join(" ,")+"}"}(e):"Filter"}class Eh extends hh{constructor(e,t,n){super(e,t,n),this.key=rd.fromName(n.referenceValue)}matches(e){const t=rd.comparator(e.key,this.key);return this.matchesComparison(t)}}class wh extends hh{constructor(e,t){super(e,"in",t),this.keys=_h("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Sh extends hh{constructor(e,t){super(e,"not-in",t),this.keys=_h("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function _h(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>rd.fromName(e.referenceValue)))}class Th extends hh{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Xd(t)&&Gd(t.arrayValue,this.value)}}class Ch extends hh{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Gd(this.value.arrayValue,t)}}class Ih extends hh{constructor(e,t){super(e,"not-in",t)}matches(e){if(Gd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Gd(this.value.arrayValue,t)}}class Ah extends hh{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Xd(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Gd(this.value.arrayValue,e)))}}class Nh{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.dt=null}}function xh(e){return new Nh(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function kh(e){const t=Mc(e);if(null===t.dt){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>yh(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),md(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Kd(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Kd(e))).join(",")),t.dt=e}return t.dt}function Oh(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!ch(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!vh(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!lh(e.startAt,t.startAt)&&lh(e.endAt,t.endAt)}function Rh(e){return rd.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Dh{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.wt=null,this._t=null,this.startAt,this.endAt}}function Ph(e,t,n,r,i,o,s,a){return new Dh(e,t,n,r,i,o,s,a)}function Mh(e){return new Dh(e)}function Lh(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Uh(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Fh(e){for(const t of e.filters){const e=t.getFirstInequalityField();if(null!==e)return e}return null}function jh(e){return null!==e.collectionGroup}function Vh(e){const t=Mc(e);if(null===t.wt){t.wt=[];const e=Fh(t),n=Uh(t);if(null!==e&&null===n)e.isKeyField()||t.wt.push(new uh(e)),t.wt.push(new uh(nd.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.wt.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new uh(nd.keyField(),e))}}}return t.wt}function qh(e){const t=Mc(e);if(!t._t)if("F"===t.limitType)t._t=xh(t.path,t.collectionGroup,Vh(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const i of Vh(t)){const t="desc"===i.dir?"asc":"desc";e.push(new uh(i.field,t))}const n=t.endAt?new sh(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new sh(t.startAt.position,t.startAt.inclusive):null;t._t=xh(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}return t._t}function Bh(e,t){t.getFirstInequalityField(),Fh(e);const n=e.filters.concat([t]);return new Dh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Hh(e,t,n){return new Dh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Gh(e,t){return Oh(qh(e),qh(t))&&e.limitType===t.limitType}function zh(e){return"".concat(kh(qh(e)),"|lt:").concat(e.limitType)}function Wh(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>bh(e))).join(", "),"]")),md(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Kd(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Kd(e))).join(",")),"Target(".concat(t,")")}(qh(e)),"; limitType=").concat(e.limitType,")")}function Kh(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):rd.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Vh(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=ah(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Vh(e),t))&&!(e.endAt&&!function(e,t,n){const r=ah(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Vh(e),t))}(e,t)}function Jh(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Yh(e){return(t,n)=>{let r=!1;for(const i of Vh(e)){const e=Qh(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Qh(e,t,n){const r=e.field.isKeyField()?rd.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?zd(r,i):Dc()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Dc()}}class Xh{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Sd(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return _d(this.inner)}size(){return this.innerSize}}const $h=new Td(rd.comparator);function Zh(){return $h}const ef=new Td(rd.comparator);function tf(){let e=ef;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function nf(e){let t=ef;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function rf(){return sf()}function of(){return sf()}function sf(){return new Xh((e=>e.toString()),((e,t)=>e.isEqual(t)))}const af=new Td(rd.comparator),lf=new Ad(rd.comparator);function uf(){let e=lf;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const cf=new Ad(Yc);function df(){return cf}function hf(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:gd(t)?"-0":t}}function ff(e){return{integerValue:""+e}}function pf(e,t){return yd(t)?ff(t):hf(e,t)}class mf{constructor(){this._=void 0}}function gf(e,t,n){return e instanceof bf?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Ld(t)&&(t=Ud(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Ef?wf(e,t):e instanceof Sf?_f(e,t):function(e,t){const n=vf(e,t),r=Cf(n)+Cf(e.gt);return Qd(n)&&Qd(e.gt)?ff(r):hf(e.serializer,r)}(e,t)}function yf(e,t,n){return e instanceof Ef?wf(e,t):e instanceof Sf?_f(e,t):n}function vf(e,t){return e instanceof Tf?Qd(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}class bf extends mf{}class Ef extends mf{constructor(e){super(),this.elements=e}}function wf(e,t){const n=If(t);for(const r of e.elements)n.some((e=>Hd(e,r)))||n.push(r);return{arrayValue:{values:n}}}class Sf extends mf{constructor(e){super(),this.elements=e}}function _f(e,t){let n=If(t);for(const r of e.elements)n=n.filter((e=>!Hd(e,r)));return{arrayValue:{values:n}}}class Tf extends mf{constructor(e,t){super(),this.serializer=e,this.gt=t}}function Cf(e){return Pd(e.integerValue||e.doubleValue)}function If(e){return Xd(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Af{constructor(e,t){this.field=e,this.transform=t}}class Nf{constructor(e,t){this.version=e,this.transformResults=t}}class xf{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new xf}static exists(e){return new xf(void 0,e)}static updateTime(e){return new xf(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function kf(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Of{}function Rf(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Bf(e.key,xf.none()):new Uf(e.key,e.data,xf.none());{const n=e.data,r=rh.empty();let i=new Ad(nd.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Ff(e.key,r,new xd(i.toArray()),xf.none())}}function Df(e,t,n){e instanceof Uf?function(e,t,n){const r=e.value.clone(),i=Vf(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Ff?function(e,t,n){if(!kf(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Vf(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(jf(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Pf(e,t,n,r){return e instanceof Uf?function(e,t,n,r){if(!kf(e.precondition,t))return n;const i=e.value.clone(),o=qf(e.fieldTransforms,r,t);return i.setAll(o),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Ff?function(e,t,n,r){if(!kf(e.precondition,t))return n;const i=qf(e.fieldTransforms,r,t),o=t.data;return o.setAll(jf(e)),o.setAll(i),t.convertToFoundDocument(t.version,o).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return kf(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Mf(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=vf(r.transform,e||null);null!=i&&(null===n&&(n=rh.empty()),n.set(r.field,i))}return n||null}function Lf(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Qc(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Ef&&t instanceof Ef||e instanceof Sf&&t instanceof Sf?Qc(e.elements,t.elements,Hd):e instanceof Tf&&t instanceof Tf?Hd(e.gt,t.gt):e instanceof bf&&t instanceof bf}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Uf extends Of{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Ff extends Of{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function jf(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Vf(e,t,n){const r=new Map;Pc(e.length===n.length);for(let i=0;i<n.length;i++){const o=e[i],s=o.transform,a=t.data.field(o.field);r.set(o.field,yf(s,a,n[i]))}return r}function qf(e,t,n){const r=new Map;for(const i of e){const e=i.transform,o=n.data.field(i.field);r.set(i.field,gf(e,o,t))}return r}class Bf extends Of{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Hf extends Of{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Gf{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Df(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Pf(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Pf(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=of();return this.mutations.forEach((r=>{const i=e.get(r.key),o=i.overlayedDocument;let s=this.applyToLocalView(o,i.mutatedFields);s=t.has(r.key)?null:s;const a=Rf(o,s);null!==a&&n.set(r.key,a),o.isValidDocument()||o.convertToNoDocument($c.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),uf())}isEqual(e){return this.batchId===e.batchId&&Qc(this.mutations,e.mutations,((e,t)=>Lf(e,t)))&&Qc(this.baseMutations,e.baseMutations,((e,t)=>Lf(e,t)))}}class zf{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Pc(e.mutations.length===n.length);let r=af;const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,n[o].version);return new zf(e,t,n,r)}}class Wf{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Kf{constructor(e,t){this.count=e,this.unchangedNames=t}}var Jf,Yf;function Qf(e){switch(e){default:return Dc();case Lc.CANCELLED:case Lc.UNKNOWN:case Lc.DEADLINE_EXCEEDED:case Lc.RESOURCE_EXHAUSTED:case Lc.INTERNAL:case Lc.UNAVAILABLE:case Lc.UNAUTHENTICATED:return!1;case Lc.INVALID_ARGUMENT:case Lc.NOT_FOUND:case Lc.ALREADY_EXISTS:case Lc.PERMISSION_DENIED:case Lc.FAILED_PRECONDITION:case Lc.ABORTED:case Lc.OUT_OF_RANGE:case Lc.UNIMPLEMENTED:case Lc.DATA_LOSS:return!0}}function Xf(e){if(void 0===e)return kc("GRPC error has no .code"),Lc.UNKNOWN;switch(e){case Jf.OK:return Lc.OK;case Jf.CANCELLED:return Lc.CANCELLED;case Jf.UNKNOWN:return Lc.UNKNOWN;case Jf.DEADLINE_EXCEEDED:return Lc.DEADLINE_EXCEEDED;case Jf.RESOURCE_EXHAUSTED:return Lc.RESOURCE_EXHAUSTED;case Jf.INTERNAL:return Lc.INTERNAL;case Jf.UNAVAILABLE:return Lc.UNAVAILABLE;case Jf.UNAUTHENTICATED:return Lc.UNAUTHENTICATED;case Jf.INVALID_ARGUMENT:return Lc.INVALID_ARGUMENT;case Jf.NOT_FOUND:return Lc.NOT_FOUND;case Jf.ALREADY_EXISTS:return Lc.ALREADY_EXISTS;case Jf.PERMISSION_DENIED:return Lc.PERMISSION_DENIED;case Jf.FAILED_PRECONDITION:return Lc.FAILED_PRECONDITION;case Jf.ABORTED:return Lc.ABORTED;case Jf.OUT_OF_RANGE:return Lc.OUT_OF_RANGE;case Jf.UNIMPLEMENTED:return Lc.UNIMPLEMENTED;case Jf.DATA_LOSS:return Lc.DATA_LOSS;default:return Dc()}}(Yf=Jf||(Jf={}))[Yf.OK=0]="OK",Yf[Yf.CANCELLED=1]="CANCELLED",Yf[Yf.UNKNOWN=2]="UNKNOWN",Yf[Yf.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Yf[Yf.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Yf[Yf.NOT_FOUND=5]="NOT_FOUND",Yf[Yf.ALREADY_EXISTS=6]="ALREADY_EXISTS",Yf[Yf.PERMISSION_DENIED=7]="PERMISSION_DENIED",Yf[Yf.UNAUTHENTICATED=16]="UNAUTHENTICATED",Yf[Yf.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Yf[Yf.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Yf[Yf.ABORTED=10]="ABORTED",Yf[Yf.OUT_OF_RANGE=11]="OUT_OF_RANGE",Yf[Yf.UNIMPLEMENTED=12]="UNIMPLEMENTED",Yf[Yf.INTERNAL=13]="INTERNAL",Yf[Yf.UNAVAILABLE=14]="UNAVAILABLE",Yf[Yf.DATA_LOSS=15]="DATA_LOSS";class $f{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Zf}static getOrCreateInstance(){return null===Zf&&(Zf=new $f),Zf}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach((t=>t(e)))}}let Zf=null;function ep(){return new TextEncoder}const tp=new _c([4294967295,4294967295],0);function np(e){const t=ep().encode(e),n=new Sc;return n.update(t),new Uint8Array(n.digest())}function rp(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new _c([n,r],0),new _c([i,o],0)]}class ip{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new op("Invalid padding: ".concat(t));if(n<0)throw new op("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new op("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new op("Invalid padding when bitmap length is 0: ".concat(t));this.It=8*e.length-t,this.Tt=_c.fromNumber(this.It)}Et(e,t,n){let r=e.add(t.multiply(_c.fromNumber(n)));return 1===r.compare(tp)&&(r=new _c([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=np(e),[n,r]=rp(t);for(let i=0;i<this.hashCount;i++){const e=this.Et(n,r,i);if(!this.At(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new ip(i,r,t);return n.forEach((e=>o.insert(e))),o}insert(e){if(0===this.It)return;const t=np(e),[n,r]=rp(t);for(let i=0;i<this.hashCount;i++){const e=this.Et(n,r,i);this.Rt(e)}}Rt(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class op extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class sp{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,ap.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new sp($c.min(),r,new Td(Yc),Zh(),uf())}}class ap{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new ap(n,t,uf(),uf(),uf())}}class lp{constructor(e,t,n,r){this.Pt=e,this.removedTargetIds=t,this.key=n,this.bt=r}}class up{constructor(e,t){this.targetId=e,this.Vt=t}}class cp{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Od.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class dp{constructor(){this.St=0,this.Dt=pp(),this.Ct=Od.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=uf(),t=uf(),n=uf();return this.Dt.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Dc()}})),new ap(this.Ct,this.xt,e,t,n)}Ft(){this.Nt=!1,this.Dt=pp()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class hp{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Zh(),this.zt=fp(),this.Wt=new Td(Yc)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,(t=>{const n=this.Zt(t);switch(e.state){case 0:this.te(t)&&n.$t(e.resumeToken);break;case 1:n.Ut(),n.kt||n.Ft(),n.$t(e.resumeToken);break;case 2:n.Ut(),n.kt||this.removeTarget(t);break;case 3:this.te(t)&&(n.Kt(),n.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),n.$t(e.resumeToken));break;default:Dc()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach(((e,n)=>{this.te(n)&&t(n)}))}ne(e){var t;const n=e.targetId,r=e.Vt.count,i=this.se(n);if(i){const o=i.target;if(Rh(o))if(0===r){const e=new rd(o.path);this.Yt(n,e,oh.newNoDocument(e,$c.min()))}else Pc(1===r);else{const i=this.ie(n);if(i!==r){const r=this.re(e,i);if(0!==r){this.ee(n);const e=2===r?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(n,e)}null===(t=$f.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n){var r,i,o,s,a,l;const u={localCacheCount:t,existenceFilterCount:n.count},c=n.unchangedNames;return c&&(u.bloomFilter={applied:0===e,hashCount:null!==(r=null==c?void 0:c.hashCount)&&void 0!==r?r:0,bitmapLength:null!==(s=null===(o=null===(i=null==c?void 0:c.bits)||void 0===i?void 0:i.bitmap)||void 0===o?void 0:o.length)&&void 0!==s?s:0,padding:null!==(l=null===(a=null==c?void 0:c.bits)||void 0===a?void 0:a.padding)&&void 0!==l?l:0}),u}(r,i,e.Vt))}}}}re(e,t){const{unchangedNames:n,count:r}=e.Vt;if(!n||!n.bits)return 1;const{bits:{bitmap:i="",padding:o=0},hashCount:s=0}=n;let a,l;try{a=Md(i).toUint8Array()}catch(e){if(e instanceof kd)return Oc("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw e}try{l=new ip(a,o,s)}catch(e){return Oc(e instanceof op?"BloomFilter error: ":"Applying bloom filter failed: ",e),1}return 0===l.It?1:r!==t-this.oe(e.targetId,l)?2:0}oe(e,t){const n=this.Gt.getRemoteKeysForTarget(e);let r=0;return n.forEach((n=>{const i=this.Gt.ue(),o="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());t.vt(o)||(this.Yt(e,n,null),r++)})),r}ce(e){const t=new Map;this.Qt.forEach(((n,r)=>{const i=this.se(r);if(i){if(n.current&&Rh(i.target)){const t=new rd(i.target.path);null!==this.jt.get(t)||this.ae(r,t)||this.Yt(r,t,oh.newNoDocument(t,e))}n.Mt&&(t.set(r,n.Ot()),n.Ft())}}));let n=uf();this.zt.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.se(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.jt.forEach(((t,n)=>n.setReadTime(e)));const r=new sp(e,t,this.Wt,this.jt,n);return this.jt=Zh(),this.zt=fp(),this.Wt=new Td(Yc),r}Jt(e,t){if(!this.te(e))return;const n=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,n),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,n){if(!this.te(e))return;const r=this.Zt(e);this.ae(e,t)?r.Bt(t,1):r.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),n&&(this.jt=this.jt.insert(t,n))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new dp,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new Ad(Yc),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||xc("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new dp),this.Gt.getRemoteKeysForTarget(e).forEach((t=>{this.Yt(e,t,null)}))}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function fp(){return new Td(rd.comparator)}function pp(){return new Td(rd.comparator)}const mp={asc:"ASCENDING",desc:"DESCENDING"},gp={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},yp={and:"AND",or:"OR"};class vp{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function bp(e,t){return e.useProto3Json||md(t)?t:{value:t}}function Ep(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function wp(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Sp(e,t){return Ep(e,t.toTimestamp())}function _p(e){return Pc(!!e),$c.fromTimestamp(function(e){const t=Dd(e);return new Xc(t.seconds,t.nanos)}(e))}function Tp(e,t){return function(e){return new ed(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Cp(e){const t=ed.fromString(e);return Pc(zp(t)),t}function Ip(e,t){return Tp(e.databaseId,t.path)}function Ap(e,t){const n=Cp(t);if(n.get(1)!==e.databaseId.projectId)throw new Uc(Lc.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Uc(Lc.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new rd(Op(n))}function Np(e,t){return Tp(e.databaseId,t)}function xp(e){const t=Cp(e);return 4===t.length?ed.emptyPath():Op(t)}function kp(e){return new ed(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Op(e){return Pc(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Rp(e,t,n){return{name:Ip(e,t),fields:n.value.mapValue.fields}}function Dp(e,t){let n;if(t instanceof Uf)n={update:Rp(e,t.key,t.value)};else if(t instanceof Bf)n={delete:Ip(e,t.key)};else if(t instanceof Ff)n={update:Rp(e,t.key,t.data),updateMask:Gp(t.fieldMask)};else{if(!(t instanceof Hf))return Dc();n={verify:Ip(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof bf)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ef)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Sf)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Tf)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw Dc()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Sp(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Dc()}(e,t.precondition)),n}function Pp(e,t){return{documents:[Np(e,t.path)]}}function Mp(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Np(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Np(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(e){if(0!==e.length)return Hp(fh.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:qp(e.field),direction:Fp(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const s=bp(e,t.limit);var a;return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt={before:(a=t.startAt).inclusive,values:a.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Lp(e){let t=xp(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Pc(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let o=[];n.where&&(o=function(e){const t=Up(e);return t instanceof fh&&mh(t)?t.getFilters():[t]}(n.where));let s=[];n.orderBy&&(s=n.orderBy.map((e=>function(e){return new uh(Bp(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,md(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new sh(n,t)}(n.startAt));let u=null;return n.endAt&&(u=function(e){const t=!e.before,n=e.values||[];return new sh(n,t)}(n.endAt)),Ph(t,i,s,o,a,"F",l,u)}function Up(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Bp(e.unaryFilter.field);return hh.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Bp(e.unaryFilter.field);return hh.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Bp(e.unaryFilter.field);return hh.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Bp(e.unaryFilter.field);return hh.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Dc()}}(e):void 0!==e.fieldFilter?function(e){return hh.create(Bp(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Dc()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return fh.create(e.compositeFilter.filters.map((e=>Up(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Dc()}}(e.compositeFilter.op))}(e):Dc()}function Fp(e){return mp[e]}function jp(e){return gp[e]}function Vp(e){return yp[e]}function qp(e){return{fieldPath:e.canonicalString()}}function Bp(e){return nd.fromServerFormat(e.fieldPath)}function Hp(e){return e instanceof hh?function(e){if("=="===e.op){if(Zd(e.value))return{unaryFilter:{field:qp(e.field),op:"IS_NAN"}};if($d(e.value))return{unaryFilter:{field:qp(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Zd(e.value))return{unaryFilter:{field:qp(e.field),op:"IS_NOT_NAN"}};if($d(e.value))return{unaryFilter:{field:qp(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qp(e.field),op:jp(e.op),value:e.value}}}(e):e instanceof fh?function(e){const t=e.getFilters().map((e=>Hp(e)));return 1===t.length?t[0]:{compositeFilter:{op:Vp(e.op),filters:t}}}(e):Dc()}function Gp(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function zp(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Wp{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:$c.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:$c.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Od.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s,this.expectedCount=a}withSequenceNumber(e){return new Wp(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Wp(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Wp(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Wp(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Kp{constructor(e){this.fe=e}}function Jp(e){const t=Lp({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Hh(t,t.limit,"L"):t}class Yp{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Pd(e.integerValue));else if("doubleValue"in e){const n=Pd(e.doubleValue);isNaN(n)?this.ye(t,13):(this.ye(t,15),gd(n)?t.pe(0):t.pe(n))}else if("timestampValue"in e){const n=e.timestampValue;this.ye(t,20),"string"==typeof n?t.Ie(n):(t.Ie("".concat(n.seconds||"")),t.pe(n.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Md(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.ye(t,45),t.pe(n.latitude||0),t.pe(n.longitude||0)}else"mapValue"in e?nh(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):Dc()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const n=e.fields||{};this.ye(t,55);for(const r of Object.keys(n))this.Te(r,t),this.me(n[r],t)}Pe(e,t){const n=e.values||[];this.ye(t,50);for(const r of n)this.me(r,t)}ve(e,t){this.ye(t,37),rd.fromName(e).path.forEach((e=>{this.ye(t,60),this.be(e,t)}))}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}Yp.Ve=new Yp;class Qp{constructor(){this.rn=new Xp}addToCollectionParentIndex(e,t){return this.rn.add(t),hd.resolve()}getCollectionParents(e,t){return hd.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return hd.resolve()}deleteFieldIndex(e,t){return hd.resolve()}getDocumentsMatchingTarget(e,t){return hd.resolve(null)}getIndexType(e,t){return hd.resolve(0)}getFieldIndexes(e,t){return hd.resolve([])}getNextCollectionGroupToUpdate(e){return hd.resolve(null)}getMinOffset(e,t){return hd.resolve(ad.min())}getMinOffsetFromCollectionGroup(e,t){return hd.resolve(ad.min())}updateCollectionGroup(e,t,n){return hd.resolve()}updateIndexEntries(e,t){return hd.resolve()}}class Xp{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Ad(ed.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Ad(ed.comparator)).toArray()}}new Uint8Array(0);class $p{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new $p(e,$p.DEFAULT_COLLECTION_PERCENTILE,$p.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}$p.DEFAULT_COLLECTION_PERCENTILE=10,$p.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$p.DEFAULT=new $p(41943040,$p.DEFAULT_COLLECTION_PERCENTILE,$p.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$p.DISABLED=new $p(-1,0,0);class Zp{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Zp(0)}static Mn(){return new Zp(-1)}}class em{constructor(){this.changes=new Xh((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,oh.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?hd.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class tm{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class nm{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Pf(n.mutation,e,xd.empty(),Xc.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,uf()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:uf();const r=rf();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=tf();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=rf();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,uf())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=Zh();const o=sf(),s=sf();return t.forEach(((e,t)=>{const s=n.get(t.key);r.has(t.key)&&(void 0===s||s.mutation instanceof Ff)?i=i.insert(t.key,t):void 0!==s?(o.set(t.key,s.mutation.getFieldMask()),Pf(s.mutation,t,s.mutation.getFieldMask(),Xc.now())):o.set(t.key,xd.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>o.set(e,t))),t.forEach(((e,t)=>{var n;return s.set(e,new tm(t,null!==(n=o.get(e))&&void 0!==n?n:null))})),s)))}recalculateAndSaveOverlays(e,t){const n=sf();let r=new Td(((e,t)=>e-t)),i=uf();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const o=t.get(e);if(null===o)return;let s=n.get(e)||xd.empty();s=i.applyToLocalView(o,s),n.set(e,s);const a=(r.get(i.batchId)||uf()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const o=[],s=r.getReverseIterator();for(;s.hasNext();){const r=s.getNext(),a=r.key,l=r.value,u=of();l.forEach((e=>{if(!i.has(e)){const r=Rf(t.get(e),n.get(e));null!==r&&u.set(e,r),i=i.add(e)}})),o.push(this.documentOverlayCache.saveOverlays(e,a,u))}return hd.waitFor(o)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n){return function(e){return rd.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):jh(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):hd.resolve(rf());let s=-1,a=i;return o.next((t=>hd.forEach(t,((t,n)=>(s<n.largestBatchId&&(s=n.largestBatchId),i.get(t)?hd.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,uf()))).next((e=>({batchId:s,changes:nf(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new rd(t)).next((e=>{let t=tf();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n){const r=t.collectionGroup;let i=tf();return this.indexManager.getCollectionParents(e,r).next((o=>hd.forEach(o,(o=>{const s=function(e,t){return new Dh(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(r));return this.getDocumentsMatchingCollectionQuery(e,s,n).next((e=>{e.forEach(((e,t)=>{i=i.insert(e,t)}))}))})).next((()=>i))))}getDocumentsMatchingCollectionQuery(e,t,n){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((i=>(r=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)))).next((e=>{r.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,oh.newInvalidDocument(r)))}));let n=tf();return e.forEach(((e,i)=>{const o=r.get(e);void 0!==o&&Pf(o.mutation,i,xd.empty(),Xc.now()),Kh(t,i)&&(n=n.insert(e,i))})),n}))}}class rm{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return hd.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var n;return this.cs.set(t.id,{id:(n=t).id,version:n.version,createTime:_p(n.createTime)}),hd.resolve()}getNamedQuery(e,t){return hd.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,function(e){return{name:e.name,query:Jp(e.bundledQuery),readTime:_p(e.readTime)}}(t)),hd.resolve()}}class im{constructor(){this.overlays=new Td(rd.comparator),this.ls=new Map}getOverlay(e,t){return hd.resolve(this.overlays.get(t))}getOverlays(e,t){const n=rf();return hd.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.we(e,t,r)})),hd.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.ls.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.ls.delete(n)),hd.resolve()}getOverlaysForCollection(e,t,n){const r=rf(),i=t.length+1,o=new rd(t.child("")),s=this.overlays.getIteratorFrom(o);for(;s.hasNext();){const e=s.getNext().value,o=e.getKey();if(!t.isPrefixOf(o.path))break;o.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return hd.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Td(((e,t)=>e-t));const o=this.overlays.getIterator();for(;o.hasNext();){const e=o.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=rf(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const s=rf(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>s.set(e,t))),!(s.size()>=r)););return hd.resolve(s)}we(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.ls.get(r.largestBatchId).delete(n.key);this.ls.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Wf(t,n));let i=this.ls.get(t);void 0===i&&(i=uf(),this.ls.set(t,i)),this.ls.set(t,i.add(n.key))}}class om{constructor(){this.fs=new Ad(sm.ds),this.ws=new Ad(sm._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const n=new sm(e,t);this.fs=this.fs.add(n),this.ws=this.ws.add(n)}gs(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.ys(new sm(e,t))}ps(e,t){e.forEach((e=>this.removeReference(e,t)))}Is(e){const t=new rd(new ed([])),n=new sm(t,e),r=new sm(t,e+1),i=[];return this.ws.forEachInRange([n,r],(e=>{this.ys(e),i.push(e.key)})),i}Ts(){this.fs.forEach((e=>this.ys(e)))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new rd(new ed([])),n=new sm(t,e),r=new sm(t,e+1);let i=uf();return this.ws.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new sm(e,0),n=this.fs.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class sm{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return rd.comparator(e.key,t.key)||Yc(e.As,t.As)}static _s(e,t){return Yc(e.As,t.As)||rd.comparator(e.key,t.key)}}class am{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new Ad(sm.ds)}checkEmpty(e){return hd.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Gf(i,t,n,r);this.mutationQueue.push(o);for(const s of r)this.Rs=this.Rs.add(new sm(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast());return hd.resolve(o)}lookupMutationBatch(e,t){return hd.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.bs(n),i=r<0?0:r;return hd.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return hd.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return hd.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new sm(t,0),r=new sm(t,Number.POSITIVE_INFINITY),i=[];return this.Rs.forEachInRange([n,r],(e=>{const t=this.Ps(e.As);i.push(t)})),hd.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Ad(Yc);return t.forEach((e=>{const t=new sm(e,0),r=new sm(e,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([t,r],(e=>{n=n.add(e.As)}))})),hd.resolve(this.Vs(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;rd.isDocumentKey(i)||(i=i.child(""));const o=new sm(new rd(i),0);let s=new Ad(Yc);return this.Rs.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(s=s.add(e.As)),!0)}),o),hd.resolve(this.Vs(s))}Vs(e){const t=[];return e.forEach((e=>{const n=this.Ps(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Pc(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let n=this.Rs;return hd.forEach(t.mutations,(r=>{const i=new sm(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Rs=n}))}Cn(e){}containsKey(e,t){const n=new sm(t,0),r=this.Rs.firstAfterOrEqual(n);return hd.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,hd.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class lm{constructor(e){this.Ds=e,this.docs=new Td(rd.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,o=this.Ds(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return hd.resolve(n?n.document.mutableCopy():oh.newInvalidDocument(t))}getEntries(e,t){let n=Zh();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():oh.newInvalidDocument(e))})),hd.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Zh();const o=t.path,s=new rd(o.child("")),a=this.docs.getIteratorFrom(s);for(;a.hasNext();){const{key:e,value:{document:s}}=a.getNext();if(!o.isPrefixOf(e.path))break;e.path.length>o.length+1||ld(sd(s),n)<=0||(r.has(s.key)||Kh(t,s))&&(i=i.insert(s.key,s.mutableCopy()))}return hd.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Dc()}Cs(e,t){return hd.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new um(this)}getSize(e){return hd.resolve(this.size)}}class um extends em{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.os.addEntry(e,r)):this.os.removeEntry(n)})),hd.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class cm{constructor(e){this.persistence=e,this.xs=new Xh((e=>kh(e)),Oh),this.lastRemoteSnapshotVersion=$c.min(),this.highestTargetId=0,this.Ns=0,this.ks=new om,this.targetCount=0,this.Ms=Zp.kn()}forEachTarget(e,t){return this.xs.forEach(((e,n)=>t(n))),hd.resolve()}getLastRemoteSnapshotVersion(e){return hd.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return hd.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),hd.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ns&&(this.Ns=t),hd.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new Zp(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,hd.resolve()}updateTargetData(e,t){return this.Fn(t),hd.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,hd.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.xs.forEach(((o,s)=>{s.sequenceNumber<=t&&null===n.get(s.targetId)&&(this.xs.delete(o),i.push(this.removeMatchingKeysForTargetId(e,s.targetId)),r++)})),hd.waitFor(i).next((()=>r))}getTargetCount(e){return hd.resolve(this.targetCount)}getTargetData(e,t){const n=this.xs.get(t)||null;return hd.resolve(n)}addMatchingKeys(e,t,n){return this.ks.gs(t,n),hd.resolve()}removeMatchingKeys(e,t,n){this.ks.ps(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),hd.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),hd.resolve()}getMatchingKeysForTargetId(e,t){const n=this.ks.Es(t);return hd.resolve(n)}containsKey(e,t){return hd.resolve(this.ks.containsKey(t))}}class dm{constructor(e,t){this.$s={},this.overlays={},this.Os=new pd(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new cm(this),this.indexManager=new Qp,this.remoteDocumentCache=function(e){return new lm(e)}((e=>this.referenceDelegate.Ls(e))),this.serializer=new Kp(t),this.qs=new rm(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new im,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.$s[e.toKey()];return n||(n=new am(t,this.referenceDelegate),this.$s[e.toKey()]=n),n}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,n){xc("MemoryPersistence","Starting transaction:",e);const r=new hm(this.Os.next());return this.referenceDelegate.Us(),n(r).next((e=>this.referenceDelegate.Ks(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Gs(e,t){return hd.or(Object.values(this.$s).map((n=>()=>n.containsKey(e,t))))}}class hm extends cd{constructor(e){super(),this.currentSequenceNumber=e}}class fm{constructor(e){this.persistence=e,this.Qs=new om,this.js=null}static zs(e){return new fm(e)}get Ws(){if(this.js)return this.js;throw Dc()}addReference(e,t,n){return this.Qs.addReference(n,t),this.Ws.delete(n.toString()),hd.resolve()}removeReference(e,t,n){return this.Qs.removeReference(n,t),this.Ws.add(n.toString()),hd.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),hd.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach((e=>this.Ws.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Ws.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return hd.forEach(this.Ws,(n=>{const r=rd.fromPath(n);return this.Hs(e,r).next((e=>{e||t.removeEntry(r,$c.min())}))})).next((()=>(this.js=null,t.apply(e))))}updateLimboDocument(e,t){return this.Hs(e,t).next((e=>{e?this.Ws.delete(t.toString()):this.Ws.add(t.toString())}))}Ls(e){return 0}Hs(e,t){return hd.or([()=>hd.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class pm{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Fi=n,this.Bi=r}static Li(e,t){let n=uf(),r=uf();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new pm(e,t.fromCache,n,r)}}class mm{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,n,r){return this.Ki(e,t).next((i=>i||this.Gi(e,t,r,n))).next((n=>n||this.Qi(e,t)))}Ki(e,t){if(Lh(t))return hd.resolve(null);let n=qh(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=Hh(t,null,"F"),n=qh(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=uf(...r);return this.Ui.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const o=this.ji(t,r);return this.zi(t,o,i,n.readTime)?this.Ki(e,Hh(t,null,"F")):this.Wi(e,o,t,n)}))))})))))}Gi(e,t,n,r){return Lh(t)||r.isEqual($c.min())?this.Qi(e,t):this.Ui.getDocuments(e,n).next((i=>{const o=this.ji(t,i);return this.zi(t,o,n,r)?this.Qi(e,t):(Nc()<=es.DEBUG&&xc("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Wh(t)),this.Wi(e,o,t,od(r,-1)))}))}ji(e,t){let n=new Ad(Yh(e));return t.forEach(((t,r)=>{Kh(e,r)&&(n=n.add(r))})),n}zi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Qi(e,t){return Nc()<=es.DEBUG&&xc("QueryEngine","Using full collection scan to execute query:",Wh(t)),this.Ui.getDocumentsMatchingQuery(e,t,ad.min())}Wi(e,t,n,r){return this.Ui.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class gm{constructor(e,t,n,r){this.persistence=e,this.Hi=t,this.serializer=r,this.Ji=new Td(Yc),this.Yi=new Xh((e=>kh(e)),Oh),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(n)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new nm(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ji)))}}function ym(e,t,n,r){return new gm(e,t,n,r)}async function vm(e,t){const n=Mc(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.tr(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],o=[];let s=uf();for(const e of r){i.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}for(const e of t){o.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}return n.localDocuments.getDocuments(e,s).next((e=>({er:e,removedBatchIds:i,addedBatchIds:o})))}))}))}function bm(e){const t=Mc(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Bs.getLastRemoteSnapshotVersion(e)))}function Em(e,t,n){let r=uf(),i=uf();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=Zh();return n.forEach(((n,o)=>{const s=e.get(n);o.isFoundDocument()!==s.isFoundDocument()&&(i=i.add(n)),o.isNoDocument()&&o.version.isEqual($c.min())?(t.removeEntry(n,o.readTime),r=r.insert(n,o)):!s.isValidDocument()||o.version.compareTo(s.version)>0||0===o.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(o),r=r.insert(n,o)):xc("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",o.version)})),{nr:r,sr:i}}))}function wm(e,t){const n=Mc(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Sm(e,t){const n=Mc(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Bs.getTargetData(e,t).next((i=>i?(r=i,hd.resolve(r)):n.Bs.allocateTargetId(e).next((i=>(r=new Wp(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Bs.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.Ji.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e}))}async function _m(e,t,n){const r=Mc(e),i=r.Ji.get(t),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!fd(e))throw e;xc("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.Ji=r.Ji.remove(t),r.Yi.delete(i.target)}function Tm(e,t,n){const r=Mc(e);let i=$c.min(),o=uf();return r.persistence.runTransaction("Execute query","readonly",(e=>function(e,t,n){const r=Mc(e),i=r.Yi.get(n);return void 0!==i?hd.resolve(r.Ji.get(i)):r.Bs.getTargetData(t,n)}(r,e,qh(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(e,t.targetId).next((e=>{o=e}))})).next((()=>r.Hi.getDocumentsMatchingQuery(e,t,n?i:$c.min(),n?o:uf()))).next((e=>(Cm(r,Jh(t),e),{documents:e,ir:o})))))}function Cm(e,t,n){let r=e.Xi.get(t)||$c.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Xi.set(t,r)}class Im{constructor(){this.activeTargetIds=df()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Am{constructor(){this.Hr=new Im,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,n){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new Im,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Nm{Yr(e){}shutdown(){}}class xm{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){xc("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){xc("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let km=null;function Om(){return null===km?km=268435456+Math.round(2147483648*Math.random()):km++,"0x"+km.toString(16)}const Rm={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Dm{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Pm="WebChannelConnection";class Mm extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.mo=t+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,n,r,i){const o=Om(),s=this.To(e,t);xc("RestConnection","Sending RPC '".concat(e,"' ").concat(o,":"),s,n);const a={};return this.Eo(a,r,i),this.Ao(e,s,a,n).then((t=>(xc("RestConnection","Received RPC '".concat(e,"' ").concat(o,": "),t),t)),(t=>{throw Oc("RestConnection","RPC '".concat(e,"' ").concat(o," failed with error: "),t,"url: ",s,"request:",n),t}))}vo(e,t,n,r,i,o){return this.Io(e,t,n,r,i)}Eo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ic,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}To(e,t){const n=Rm[e];return"".concat(this.mo,"/v1/").concat(t,":").concat(n)}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,n,r){const i=Om();return new Promise(((o,s)=>{const a=new wc;a.setWithCredentials(!0),a.listenOnce(gc.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case mc.NO_ERROR:const t=a.getResponseJson();xc(Pm,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),o(t);break;case mc.TIMEOUT:xc(Pm,"RPC '".concat(e,"' ").concat(i," timed out")),s(new Uc(Lc.DEADLINE_EXCEEDED,"Request time out"));break;case mc.HTTP_ERROR:const n=a.getStatus();if(xc(Pm,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Lc).indexOf(t)>=0?t:Lc.UNKNOWN}(t.status);s(new Uc(e,t.message))}else s(new Uc(Lc.UNKNOWN,"Server responded with status "+a.getStatus()))}else s(new Uc(Lc.UNAVAILABLE,"Connection failed."));break;default:Dc()}}finally{xc(Pm,"RPC '".concat(e,"' ").concat(i," completed."))}}));const l=JSON.stringify(r);xc(Pm,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",l,n,15)}))}Ro(e,t,n){const r=Om(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=fc(),s=pc(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.xmlHttpFactory=new bc({})),this.Eo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const u=i.join("");xc(Pm,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(u),a);const c=o.createWebChannel(u,a);let d=!1,h=!1;const f=new Dm({ro:t=>{h?xc(Pm,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(xc(Pm,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),c.open(),d=!0),xc(Pm,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),c.send(t))},oo:()=>c.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(c,Ec.EventType.OPEN,(()=>{h||xc(Pm,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(c,Ec.EventType.CLOSE,(()=>{h||(h=!0,xc(Pm,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.wo())})),p(c,Ec.EventType.ERROR,(t=>{h||(h=!0,Oc(Pm,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.wo(new Uc(Lc.UNAVAILABLE,"The operation could not be completed")))})),p(c,Ec.EventType.MESSAGE,(t=>{var n;if(!h){const i=t.data[0];Pc(!!i);const o=i,s=o.error||(null===(n=o[0])||void 0===n?void 0:n.error);if(s){xc(Pm,"RPC '".concat(e,"' stream ").concat(r," received error:"),s);const t=s.status;let n=function(e){const t=Jf[e];if(void 0!==t)return Xf(t)}(t),i=s.message;void 0===n&&(n=Lc.INTERNAL,i="Unknown error status: "+t+" with message "+s.message),h=!0,f.wo(new Uc(n,i)),c.close()}else xc(Pm,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f._o(i)}})),p(s,yc.STAT_EVENT,(t=>{t.stat===vc.PROXY?xc(Pm,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===vc.NOPROXY&&xc(Pm,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.fo()}),0),f}}function Lm(){return"undefined"!=typeof document?document:null}function Um(e){return new vp(e,!0)}class Fm{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ii=e,this.timerId=t,this.Po=n,this.bo=r,this.Vo=i,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),n=Math.max(0,Date.now()-this.Co),r=Math.max(0,t-n);r>0&&xc("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.So," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.Do=this.ii.enqueueAfterDelay(this.timerId,r,(()=>(this.Co=Date.now(),e()))),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class jm{constructor(e,t,n,r,i,o,s,a){this.ii=e,this.$o=n,this.Oo=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=a,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new Fm(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,(()=>this.zo())))}Wo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(e,t){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,4!==e?this.qo.reset():t&&t.code===Lc.RESOURCE_EXHAUSTED?(kc(t.toString()),kc("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):t&&t.code===Lc.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.ao(t)}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Fo===t&&this.Zo(n,r)}),(t=>{e((()=>{const e=new Uc(Lc.UNKNOWN,"Fetching auth token failed: "+t.message);return this.tu(e)}))}))}Zo(e,t){const n=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo((()=>{n((()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,(()=>(this.Ko()&&(this.state=3),Promise.resolve()))),this.listener.uo())))})),this.stream.ao((e=>{n((()=>this.tu(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Go(){this.state=5,this.qo.No((async()=>{this.state=0,this.start()}))}tu(e){return xc("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget((()=>this.Fo===e?t():(xc("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Vm extends jm{constructor(e,t,n,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Dc()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(e,t){return e.useProto3Json?(Pc(void 0===t||"string"==typeof t),Od.fromBase64String(t||"")):(Pc(void 0===t||t instanceof Uint8Array),Od.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),s=t.targetChange.cause,a=s&&function(e){const t=void 0===e.code?Lc.UNKNOWN:Xf(e.code);return new Uc(t,e.message||"")}(s);n=new cp(r,i,o,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Ap(e,r.document.name),o=_p(r.document.updateTime),s=r.document.createTime?_p(r.document.createTime):$c.min(),a=new rh({mapValue:{fields:r.document.fields}}),l=oh.newFoundDocument(i,o,s,a),u=r.targetIds||[],c=r.removedTargetIds||[];n=new lp(u,c,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Ap(e,r.document),o=r.readTime?_p(r.readTime):$c.min(),s=oh.newNoDocument(i,o),a=r.removedTargetIds||[];n=new lp([],a,s.key,s)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Ap(e,r.document),o=r.removedTargetIds||[];n=new lp([],o,i,null)}else{if(!("filter"in t))return Dc();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,o=new Kf(r,i),s=e.targetId;n=new up(s,o)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return $c.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?$c.min():t.readTime?_p(t.readTime):$c.min()}(e);return this.listener.nu(t,n)}su(e){const t={};t.database=kp(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Rh(r)?{documents:Pp(e,r)}:{query:Mp(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=wp(e,t.resumeToken);const r=bp(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo($c.min())>0){n.readTime=Ep(e,t.snapshotVersion.toTimestamp());const r=bp(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Dc()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Wo(t)}iu(e){const t={};t.database=kp(this.serializer),t.removeTarget=e,this.Wo(t)}}class qm extends jm{constructor(e,t,n,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(Pc(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function(e,t){return e&&e.length>0?(Pc(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?_p(e.updateTime):_p(t);return n.isEqual($c.min())&&(n=_p(t)),new Nf(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=_p(e.commitTime);return this.listener.cu(n,t)}return Pc(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=kp(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Dp(this.serializer,e)))};this.Wo(t)}}class Bm extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.lu=!1}fu(){if(this.lu)throw new Uc(Lc.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,n){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((r=>{let[i,o]=r;return this.connection.Io(e,t,n,i,o)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Lc.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Uc(Lc.UNKNOWN,e.toString())}))}vo(e,t,n,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[o,s]=i;return this.connection.vo(e,t,n,o,s,r)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Lc.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Uc(Lc.UNKNOWN,e.toString())}))}terminate(){this.lu=!0}}class Hm{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve()))))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.mu?(kc(t),this.mu=!1):xc("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class Gm{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=i,this.Pu.Yr((e=>{n.enqueueAndForget((async()=>{Zm(this)&&(xc("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Mc(e);t.vu.add(4),await Wm(t),t.bu.set("Unknown"),t.vu.delete(4),await zm(t)}(this))}))})),this.bu=new Hm(n,r)}}async function zm(e){if(Zm(e))for(const t of e.Ru)await t(!0)}async function Wm(e){for(const t of e.Ru)await t(!1)}function Km(e,t){const n=Mc(e);n.Au.has(t.targetId)||(n.Au.set(t.targetId,t),$m(n)?Xm(n):yg(n).Ko()&&Ym(n,t))}function Jm(e,t){const n=Mc(e),r=yg(n);n.Au.delete(t),r.Ko()&&Qm(n,t),0===n.Au.size&&(r.Ko()?r.jo():Zm(n)&&n.bu.set("Unknown"))}function Ym(e,t){if(e.Vu.qt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo($c.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}yg(e).su(t)}function Qm(e,t){e.Vu.qt(t),yg(e).iu(t)}function Xm(e){e.Vu=new hp({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),le:t=>e.Au.get(t)||null,ue:()=>e.datastore.serializer.databaseId}),yg(e).start(),e.bu.gu()}function $m(e){return Zm(e)&&!yg(e).Uo()&&e.Au.size>0}function Zm(e){return 0===Mc(e).vu.size}function eg(e){e.Vu=void 0}async function tg(e){e.Au.forEach(((t,n)=>{Ym(e,t)}))}async function ng(e,t){eg(e),$m(e)?(e.bu.Iu(t),Xm(e)):e.bu.set("Unknown")}async function rg(e,t,n){if(e.bu.set("Online"),t instanceof cp&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Au.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Au.delete(r),e.Vu.removeTarget(r))}(e,t)}catch(n){xc("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await ig(e,n)}else if(t instanceof lp?e.Vu.Ht(t):t instanceof up?e.Vu.ne(t):e.Vu.Xt(t),!n.isEqual($c.min()))try{const t=await bm(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Vu.ce(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Au.get(r);i&&e.Au.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.Au.get(t);if(!r)return;e.Au.set(t,r.withResumeToken(Od.EMPTY_BYTE_STRING,r.snapshotVersion)),Qm(e,t);const i=new Wp(r.target,t,n,r.sequenceNumber);Ym(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){xc("RemoteStore","Failed to raise snapshot:",t),await ig(e,t)}}async function ig(e,t,n){if(!fd(t))throw t;e.vu.add(1),await Wm(e),e.bu.set("Offline"),n||(n=()=>bm(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{xc("RemoteStore","Retrying IndexedDB access"),await n(),e.vu.delete(1),await zm(e)}))}function og(e,t){return t().catch((n=>ig(e,n,t)))}async function sg(e){const t=Mc(e),n=vg(t);let r=t.Eu.length>0?t.Eu[t.Eu.length-1].batchId:-1;for(;ag(t);)try{const e=await wm(t.localStore,r);if(null===e){0===t.Eu.length&&n.jo();break}r=e.batchId,lg(t,e)}catch(e){await ig(t,e)}ug(t)&&cg(t)}function ag(e){return Zm(e)&&e.Eu.length<10}function lg(e,t){e.Eu.push(t);const n=vg(e);n.Ko()&&n.ou&&n.uu(t.mutations)}function ug(e){return Zm(e)&&!vg(e).Uo()&&e.Eu.length>0}function cg(e){vg(e).start()}async function dg(e){vg(e).hu()}async function hg(e){const t=vg(e);for(const n of e.Eu)t.uu(n.mutations)}async function fg(e,t,n){const r=e.Eu.shift(),i=zf.from(r,t,n);await og(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await sg(e)}async function pg(e,t){t&&vg(e).ou&&await async function(e,t){if(Qf(n=t.code)&&n!==Lc.ABORTED){const n=e.Eu.shift();vg(e).Qo(),await og(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await sg(e)}var n}(e,t),ug(e)&&cg(e)}async function mg(e,t){const n=Mc(e);n.asyncQueue.verifyOperationInProgress(),xc("RemoteStore","RemoteStore received new credentials");const r=Zm(n);n.vu.add(3),await Wm(n),r&&n.bu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.vu.delete(3),await zm(n)}async function gg(e,t){const n=Mc(e);t?(n.vu.delete(2),await zm(n)):t||(n.vu.add(2),await Wm(n),n.bu.set("Unknown"))}function yg(e){return e.Su||(e.Su=function(e,t,n){const r=Mc(e);return r.fu(),new Vm(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:tg.bind(null,e),ao:ng.bind(null,e),nu:rg.bind(null,e)}),e.Ru.push((async t=>{t?(e.Su.Qo(),$m(e)?Xm(e):e.bu.set("Unknown")):(await e.Su.stop(),eg(e))}))),e.Su}function vg(e){return e.Du||(e.Du=function(e,t,n){const r=Mc(e);return r.fu(),new qm(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:dg.bind(null,e),ao:pg.bind(null,e),au:hg.bind(null,e),cu:fg.bind(null,e)}),e.Ru.push((async t=>{t?(e.Du.Qo(),await sg(e)):(await e.Du.stop(),e.Eu.length>0&&(xc("RemoteStore","Stopping write stream with ".concat(e.Eu.length," pending writes")),e.Eu=[]))}))),e.Du}class bg{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Fc,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}static createAndSchedule(e,t,n,r,i){const o=Date.now()+n,s=new bg(e,t,o,r,i);return s.start(n),s}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Uc(Lc.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Eg(e,t){if(kc("AsyncQueue","".concat(t,": ").concat(e)),fd(e))return new Uc(Lc.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class wg{constructor(e){this.comparator=e?(t,n)=>e(t,n)||rd.comparator(t.key,n.key):(e,t)=>rd.comparator(e.key,t.key),this.keyedMap=tf(),this.sortedSet=new Td(this.comparator)}static emptySet(e){return new wg(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof wg))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new wg;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Sg{constructor(){this.Cu=new Td(rd.comparator)}track(e){const t=e.doc.key,n=this.Cu.get(t);n?0!==e.type&&3===n.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==n.type?this.Cu=this.Cu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Cu=this.Cu.remove(t):1===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):Dc():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal(((t,n)=>{e.push(n)})),e}}class _g{constructor(e,t,n,r,i,o,s,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const o=[];return t.forEach((e=>{o.push({type:0,doc:e})})),new _g(e,t,wg.emptySet(t),o,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Tg{constructor(){this.Nu=void 0,this.listeners=[]}}class Cg{constructor(){this.queries=new Xh((e=>zh(e)),Gh),this.onlineState="Unknown",this.ku=new Set}}async function Ig(e,t){const n=Mc(e),r=t.query;let i=!1,o=n.queries.get(r);if(o||(i=!0,o=new Tg),i)try{o.Nu=await n.onListen(r)}catch(e){const n=Eg(e,"Initialization of query '".concat(Wh(t.query),"' failed"));return void t.onError(n)}n.queries.set(r,o),o.listeners.push(t),t.Mu(n.onlineState),o.Nu&&t.$u(o.Nu)&&kg(n)}async function Ag(e,t){const n=Mc(e),r=t.query;let i=!1;const o=n.queries.get(r);if(o){const e=o.listeners.indexOf(t);e>=0&&(o.listeners.splice(e,1),i=0===o.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function Ng(e,t){const n=Mc(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.listeners)e.$u(i)&&(r=!0);t.Nu=i}}r&&kg(n)}function xg(e,t,n){const r=Mc(e),i=r.queries.get(t);if(i)for(const o of i.listeners)o.onError(n);r.queries.delete(t)}function kg(e){e.ku.forEach((e=>{e.next()}))}class Og{constructor(e,t,n){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=n||{}}$u(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new _g(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.Ku||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){if(e.docChanges.length>0)return!0;const t=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Uu(e){e=_g.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class Rg{constructor(e){this.key=e}}class Dg{constructor(e){this.key=e}}class Pg{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=uf(),this.mutatedKeys=uf(),this.tc=Yh(e),this.ec=new wg(this.tc)}get nc(){return this.Yu}sc(e,t){const n=t?t.ic:new Sg,r=t?t.ec:this.ec;let i=t?t.mutatedKeys:this.mutatedKeys,o=r,s=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const u=r.get(e),c=Kh(this.query,t)?t:null,d=!!u&&this.mutatedKeys.has(u.key),h=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations);let f=!1;u&&c?u.data.isEqual(c.data)?d!==h&&(n.track({type:3,doc:c}),f=!0):this.rc(u,c)||(n.track({type:2,doc:c}),f=!0,(a&&this.tc(c,a)>0||l&&this.tc(c,l)<0)&&(s=!0)):!u&&c?(n.track({type:0,doc:c}),f=!0):u&&!c&&(n.track({type:1,doc:u}),f=!0,(a||l)&&(s=!0)),f&&(c?(o=o.add(c),i=h?i.add(e):i.delete(e)):(o=o.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){const e="F"===this.query.limitType?o.last():o.first();o=o.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{ec:o,ic:n,zi:s,mutatedKeys:i}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const r=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const i=e.ic.xu();i.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Dc()}};return n(e)-n(t)}(e.type,t.type)||this.tc(e.doc,t.doc))),this.oc(n);const o=t?this.uc():[],s=0===this.Zu.size&&this.current?1:0,a=s!==this.Xu;return this.Xu=s,0!==i.length||a?{snapshot:new _g(this.query,e.ec,r,i,e.mutatedKeys,0===s,a,!1,!!n&&n.resumeToken.approximateByteSize()>0),cc:o}:{cc:o}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new Sg,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach((e=>this.Yu=this.Yu.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.Yu=this.Yu.delete(e))),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=uf(),this.ec.forEach((e=>{this.ac(e.key)&&(this.Zu=this.Zu.add(e.key))}));const t=[];return e.forEach((e=>{this.Zu.has(e)||t.push(new Dg(e))})),this.Zu.forEach((n=>{e.has(n)||t.push(new Rg(n))})),t}hc(e){this.Yu=e.ir,this.Zu=uf();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return _g.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class Mg{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Lg{constructor(e){this.key=e,this.fc=!1}}class Ug{constructor(e,t,n,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.dc={},this.wc=new Xh((e=>zh(e)),Gh),this._c=new Map,this.mc=new Set,this.gc=new Td(rd.comparator),this.yc=new Map,this.Ic=new om,this.Tc={},this.Ec=new Map,this.Ac=Zp.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}async function Fg(e,t){const n=ny(e);let r,i;const o=n.wc.get(t);if(o)r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.lc();else{const e=await Sm(n.localStore,qh(t)),o=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await jg(n,t,r,"current"===o,e.resumeToken),n.isPrimaryClient&&Km(n.remoteStore,e)}return i}async function jg(e,t,n,r,i){e.Rc=(t,n,r)=>async function(e,t,n,r){let i=t.view.sc(n);i.zi&&(i=await Tm(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.sc(n,i)})));const o=r&&r.targetChanges.get(t.targetId),s=t.view.applyChanges(i,e.isPrimaryClient,o);return Qg(e,t.targetId,s.cc),s.snapshot}(e,t,n,r);const o=await Tm(e.localStore,t,!0),s=new Pg(t,o.ir),a=s.sc(o.documents),l=ap.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),u=s.applyChanges(a,e.isPrimaryClient,l);Qg(e,n,u.cc);const c=new Mg(t,n,s);return e.wc.set(t,c),e._c.has(n)?e._c.get(n).push(t):e._c.set(n,[t]),u.snapshot}async function Vg(e,t){const n=Mc(e),r=n.wc.get(t),i=n._c.get(r.targetId);if(i.length>1)return n._c.set(r.targetId,i.filter((e=>!Gh(e,t)))),void n.wc.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await _m(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),Jm(n.remoteStore,r.targetId),Jg(n,r.targetId)})).catch(dd)):(Jg(n,r.targetId),await _m(n.localStore,r.targetId,!0))}async function qg(e,t){const n=Mc(e);try{const e=await function(e,t){const n=Mc(e),r=t.snapshotVersion;let i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const o=n.Zi.newChangeBuffer({trackRemovals:!0});i=n.Ji;const s=[];t.targetChanges.forEach(((o,a)=>{const l=i.get(a);if(!l)return;s.push(n.Bs.removeMatchingKeys(e,o.removedDocuments,a).next((()=>n.Bs.addMatchingKeys(e,o.addedDocuments,a))));let u=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?u=u.withResumeToken(Od.EMPTY_BYTE_STRING,$c.min()).withLastLimboFreeSnapshotVersion($c.min()):o.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(o.resumeToken,r)),i=i.insert(a,u),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,u,o)&&s.push(n.Bs.updateTargetData(e,u))}));let a=Zh(),l=uf();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),s.push(Em(e,o,t.documentUpdates).next((e=>{a=e.nr,l=e.sr}))),!r.isEqual($c.min())){const t=n.Bs.getLastRemoteSnapshotVersion(e).next((t=>n.Bs.setTargetsMetadata(e,e.currentSequenceNumber,r)));s.push(t)}return hd.waitFor(s).next((()=>o.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.Ji=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.yc.get(t);r&&(Pc(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.fc=!0:e.modifiedDocuments.size>0?Pc(r.fc):e.removedDocuments.size>0&&(Pc(r.fc),r.fc=!1))})),await Zg(n,e,t)}catch(e){await dd(e)}}function Bg(e,t,n){const r=Mc(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.wc.forEach(((n,r)=>{const i=r.view.Mu(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=Mc(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.listeners)i.Mu(t)&&(r=!0)})),r&&kg(n)}(r.eventManager,t),e.length&&r.dc.nu(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Hg(e,t,n){const r=Mc(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.yc.get(t),o=i&&i.key;if(o){let e=new Td(rd.comparator);e=e.insert(o,oh.newNoDocument(o,$c.min()));const n=uf().add(o),i=new sp($c.min(),new Map,new Td(Yc),e,n);await qg(r,i),r.gc=r.gc.remove(o),r.yc.delete(t),$g(r)}else await _m(r.localStore,t,!1).then((()=>Jg(r,t,n))).catch(dd)}async function Gg(e,t){const n=Mc(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Mc(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.Zi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,o=i.keys();let s=hd.resolve();return o.forEach((e=>{s=s.next((()=>r.getEntry(t,e))).next((t=>{const o=n.docVersions.get(e);Pc(null!==o),t.version.compareTo(o)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),s.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=uf();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);Kg(n,r,null),Wg(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Zg(n,e)}catch(e){await dd(e)}}async function zg(e,t,n){const r=Mc(e);try{const e=await function(e,t){const n=Mc(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Pc(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);Kg(r,t,n),Wg(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Zg(r,e)}catch(n){await dd(n)}}function Wg(e,t){(e.Ec.get(t)||[]).forEach((e=>{e.resolve()})),e.Ec.delete(t)}function Kg(e,t,n){const r=Mc(e);let i=r.Tc[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Tc[r.currentUser.toKey()]=i}}function Jg(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e._c.get(t))e.wc.delete(r),n&&e.dc.Pc(r,n);e._c.delete(t),e.isPrimaryClient&&e.Ic.Is(t).forEach((t=>{e.Ic.containsKey(t)||Yg(e,t)}))}function Yg(e,t){e.mc.delete(t.path.canonicalString());const n=e.gc.get(t);null!==n&&(Jm(e.remoteStore,n),e.gc=e.gc.remove(t),e.yc.delete(n),$g(e))}function Qg(e,t,n){for(const r of n)r instanceof Rg?(e.Ic.addReference(r.key,t),Xg(e,r)):r instanceof Dg?(xc("SyncEngine","Document no longer in limbo: "+r.key),e.Ic.removeReference(r.key,t),e.Ic.containsKey(r.key)||Yg(e,r.key)):Dc()}function Xg(e,t){const n=t.key,r=n.path.canonicalString();e.gc.get(n)||e.mc.has(r)||(xc("SyncEngine","New document in limbo: "+n),e.mc.add(r),$g(e))}function $g(e){for(;e.mc.size>0&&e.gc.size<e.maxConcurrentLimboResolutions;){const t=e.mc.values().next().value;e.mc.delete(t);const n=new rd(ed.fromString(t)),r=e.Ac.next();e.yc.set(r,new Lg(n)),e.gc=e.gc.insert(n,r),Km(e.remoteStore,new Wp(qh(Mh(n.path)),r,"TargetPurposeLimboResolution",pd.ct))}}async function Zg(e,t,n){const r=Mc(e),i=[],o=[],s=[];r.wc.isEmpty()||(r.wc.forEach(((e,a)=>{s.push(r.Rc(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=pm.Li(a.targetId,e);o.push(t)}})))})),await Promise.all(s),r.dc.nu(i),await async function(e,t){const n=Mc(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>hd.forEach(t,(t=>hd.forEach(t.Fi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>hd.forEach(t.Bi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!fd(e))throw e;xc("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ji.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ji=n.Ji.insert(e,i)}}}(r.localStore,o))}async function ey(e,t){const n=Mc(e);if(!n.currentUser.isEqual(t)){xc("SyncEngine","User change. New user:",t.toKey());const e=await vm(n.localStore,t);n.currentUser=t,function(e){e.Ec.forEach((e=>{e.forEach((e=>{e.reject(new Uc(Lc.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Ec.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Zg(n,e.er)}}function ty(e,t){const n=Mc(e),r=n.yc.get(t);if(r&&r.fc)return uf().add(r.key);{let e=uf();const r=n._c.get(t);if(!r)return e;for(const t of r){const r=n.wc.get(t);e=e.unionWith(r.view.nc)}return e}}function ny(e){const t=Mc(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=qg.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=ty.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Hg.bind(null,t),t.dc.nu=Ng.bind(null,t.eventManager),t.dc.Pc=xg.bind(null,t.eventManager),t}function ry(e){const t=Mc(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Gg.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=zg.bind(null,t),t}class iy{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Um(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return ym(this.persistence,new mm,e.initialUser,this.serializer)}createPersistence(e){return new dm(fm.zs,this.serializer)}createSharedClientState(e){return new Am}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class oy{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Bg(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=ey.bind(null,this.syncEngine),await gg(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Cg}createDatastore(e){const t=Um(e.databaseInfo.databaseId),n=(r=e.databaseInfo,new Mm(r));var r;return function(e,t,n,r){return new Bm(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=e=>Bg(this.syncEngine,e,0),o=xm.D()?new xm:new Nm,new Gm(t,n,r,i,o);var t,n,r,i,o}createSyncEngine(e,t){return function(e,t,n,r,i,o,s){const a=new Ug(e,t,n,r,i,o);return s&&(a.vc=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=Mc(e);xc("RemoteStore","RemoteStore shutting down."),t.vu.add(5),await Wm(t),t.Pu.shutdown(),t.bu.set("Unknown")}(this.remoteStore)}}class sy{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):kc("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class ay{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Cc.UNAUTHENTICATED,this.clientId=Jc.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{xc("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(xc("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Uc(Lc.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Fc;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(Mv){const n=Eg(Mv,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function ly(e,t){e.asyncQueue.verifyOperationInProgress(),xc("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await vm(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function uy(e,t){e.asyncQueue.verifyOperationInProgress();const n=await dy(e);xc("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener((e=>mg(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>mg(t.remoteStore,n))),e._onlineComponents=t}function cy(e){return"FirebaseError"===e.name?e.code===Lc.FAILED_PRECONDITION||e.code===Lc.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function dy(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){xc("FirestoreClient","Using user provided OfflineComponentProvider");try{await ly(e,e._uninitializedComponentsProvider._offline)}catch(Mv){const n=Mv;if(!cy(n))throw n;Oc("Error using user provided cache. Falling back to memory cache: "+n),await ly(e,new iy)}}else xc("FirestoreClient","Using default OfflineComponentProvider"),await ly(e,new iy);return e._offlineComponents}async function hy(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(xc("FirestoreClient","Using user provided OnlineComponentProvider"),await uy(e,e._uninitializedComponentsProvider._online)):(xc("FirestoreClient","Using default OnlineComponentProvider"),await uy(e,new oy))),e._onlineComponents}function fy(e){return hy(e).then((e=>e.syncEngine))}async function py(e){const t=await hy(e),n=t.eventManager;return n.onListen=Fg.bind(null,t.syncEngine),n.onUnlisten=Vg.bind(null,t.syncEngine),n}function my(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Fc;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const o=new sy({next:n=>{t.enqueueAndForget((()=>Ag(e,s))),n.fromCache&&"server"===r.source?i.reject(new Uc(Lc.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),s=new Og(n,o,{includeMetadataChanges:!0,Ku:!0});return Ig(e,s)}(await py(e),e.asyncQueue,t,n,r))),r.promise}function gy(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const yy=new Map;function vy(e,t,n){if(!n)throw new Uc(Lc.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function by(e){if(!rd.isDocumentKey(e))throw new Uc(Lc.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Ey(e){if(rd.isDocumentKey(e))throw new Uc(Lc.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function wy(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Dc()}function Sy(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Uc(Lc.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=wy(e);throw new Uc(Lc.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}class _y{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Uc(Lc.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Uc(Lc.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Uc(Lc.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gy(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Uc(Lc.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Uc(Lc.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Uc(Lc.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}class Ty{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _y({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Uc(Lc.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Uc(Lc.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _y(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Vc;switch(e.type){case"firstParty":return new Gc(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Uc(Lc.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=yy.get(e);t&&(xc("ComponentProvider","Removing Datastore"),yy.delete(e),t.terminate())}(this),Promise.resolve()}}function Cy(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const o=(e=Sy(e,Ty))._getSettings(),s="".concat(t,":").concat(n);if("firestore.googleapis.com"!==o.host&&o.host!==s&&Oc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Cc.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Ho(JSON.stringify({alg:"none",type:"JWT"})),Ho(JSON.stringify(o)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const o=r.mockUserToken.sub||r.mockUserToken.user_id;if(!o)throw new Uc(Lc.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Cc(o)}e._authCredentials=new qc(new jc(t,n))}}class Iy{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ny(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Iy(this.firestore,e,this._key)}}class Ay{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Ay(this.firestore,e,this._query)}}class Ny extends Ay{constructor(e,t,n){super(e,t,Mh(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Iy(this.firestore,null,new rd(e))}withConverter(e){return new Ny(this.firestore,e,this._path)}}function xy(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Xo(e),1===arguments.length&&(t=Jc.A()),vy("doc","path",t),e instanceof Ty){const n=ed.fromString(t,...r);return by(n),new Iy(e,null,new rd(n))}{if(!(e instanceof Iy||e instanceof Ny))throw new Uc(Lc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ed.fromString(t,...r));return by(n),new Iy(e.firestore,e instanceof Ny?e.converter:null,new rd(n))}}class ky{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new Fm(this,"async_queue_retry"),this.Xc=()=>{const e=Lm();e&&xc("AsyncQueue","Visibility state changed to "+e.visibilityState),this.qo.Mo()};const e=Lm();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=Lm();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise((()=>{}));const t=new Fc;return this.ta((()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Qc.push(e),this.ea())))}async ea(){if(0!==this.Qc.length){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(Lv){if(!fd(Lv))throw Lv;xc("AsyncQueue","Operation failed with retryable error: "+Lv)}this.Qc.length>0&&this.qo.No((()=>this.ea()))}}ta(e){const t=this.Gc.then((()=>(this.Hc=!0,e().catch((e=>{this.Wc=e,this.Hc=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw kc("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.Hc=!1,e))))));return this.Gc=t,t}enqueueAfterDelay(e,t,n){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const r=bg.createAndSchedule(this,e,t,n,(e=>this.na(e)));return this.zc.push(r),r}Zc(){this.Wc&&Dc()}verifyOperationInProgress(){}async sa(){let e;do{e=this.Gc,await e}while(e!==this.Gc)}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then((()=>{this.zc.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()}))}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}class Oy extends Ty{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new ky,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Dy(this),this._firestoreClient.terminate()}}function Ry(e){return e._firestoreClient||Dy(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Dy(e){var t,n,r;const i=e._freezeSettings(),o=function(e,t,n,r){return new jd(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,gy(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new ay(e._authCredentials,e._appCheckCredentials,e._queue,o),(null===(n=i.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}class Py{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Py(Od.fromBase64String(e))}catch(e){throw new Uc(Lc.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Py(Od.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class My{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Uc(Lc.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nd(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ly{constructor(e){this._methodName=e}}class Uy{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Uc(Lc.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Uc(Lc.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Yc(this._lat,e._lat)||Yc(this._long,e._long)}}const Fy=/^__.*__$/;class jy{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Ff(e,this.data,this.fieldMask,t,this.fieldTransforms):new Uf(e,this.data,t,this.fieldTransforms)}}function Vy(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Dc()}}class qy{constructor(e,t,n,r,i,o){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.ua(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new qy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.fa(e),r}da(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.ua(),r}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return ev(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(Vy(this.ca)&&Fy.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class By{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Um(e)}ya(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new qy({ca:e,methodName:t,ga:n,path:nd.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Hy(e){const t=e._freezeSettings(),n=Um(e._databaseId);return new By(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Gy(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const s=e.ya(o.merge||o.mergeFields?2:0,t,n,i);Qy("Data must be an object, but it was:",s,r);const a=Jy(r,s);let l,u;if(o.merge)l=new xd(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){const e=[];for(const r of o.mergeFields){const i=Xy(t,r,n);if(!s.contains(i))throw new Uc(Lc.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));tv(e,i)||e.push(i)}l=new xd(e),u=s.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,u=s.fieldTransforms;return new jy(new rh(a),l,u)}class zy extends Ly{_toFieldTransform(e){return new Af(e.path,new bf)}isEqual(e){return e instanceof zy}}function Wy(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Ky(n,e.ya(r?4:3,t))}function Ky(e,t){if(Yy(e=Xo(e)))return Qy("Unsupported field value:",t,e),Jy(e,t);if(e instanceof Ly)return function(e,t){if(!Vy(t.ca))throw t._a("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t._a("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.la&&4!==t.ca)throw t._a("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Ky(i,t.wa(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Xo(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return pf(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Xc.fromDate(e);return{timestampValue:Ep(t.serializer,n)}}if(e instanceof Xc){const n=new Xc(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Ep(t.serializer,n)}}if(e instanceof Uy)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Py)return{bytesValue:wp(t.serializer,e._byteString)};if(e instanceof Iy){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t._a("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Tp(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._a("Unsupported field value: ".concat(wy(e)))}(e,t)}function Jy(e,t){const n={};return _d(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Sd(e,((e,r)=>{const i=Ky(r,t.ha(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Yy(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Xc||e instanceof Uy||e instanceof Py||e instanceof Iy||e instanceof Ly)}function Qy(e,t,n){if(!Yy(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=wy(n);throw"an object"===r?t._a(e+" a custom object"):t._a(e+" "+r)}}function Xy(e,t,n){if((t=Xo(t))instanceof My)return t._internalPath;if("string"==typeof t)return Zy(e,t);throw ev("Field path arguments must be of type string or ",e,!1,void 0,n)}const $y=new RegExp("[~\\*/\\[\\]]");function Zy(e,t,n){if(t.search($y)>=0)throw ev("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new My(...t.split("."))._internalPath}catch(zv){throw ev("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function ev(e,t,n,r,i){const o=r&&!r.isEmpty(),s=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=" in field ".concat(r)),s&&(l+=" in document ".concat(i)),l+=")"),new Uc(Lc.INVALID_ARGUMENT,a+e+l)}function tv(e,t){return e.some((e=>e.isEqual(t)))}class nv{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Iy(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new rv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(iv("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class rv extends nv{data(){return super.data()}}function iv(e,t){return"string"==typeof t?Zy(e,t):t instanceof My?t._internalPath:t._delegate._internalPath}function ov(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Uc(Lc.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class sv{}class av extends sv{}class lv extends av{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new lv(e,t,n)}_apply(e){const t=this._parse(e);return fv(e._query,t),new Ay(e.firestore,e.converter,Bh(e._query,t))}_parse(e){const t=Hy(e.firestore),n=function(e,t,n,r,i,o,s){let a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Uc(Lc.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(o,"' queries on documentId()."));if("in"===o||"not-in"===o){hv(s,o);const t=[];for(const n of s)t.push(dv(r,e,n));a={arrayValue:{values:t}}}else a=dv(r,e,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||hv(s,o),a=Wy(n,"where",s,"in"===o||"not-in"===o);return hh.create(i,o,a)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class uv extends sv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new uv(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:fh.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)fv(n,i),n=Bh(n,i)}(e._query,t),new Ay(e.firestore,e.converter,Bh(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class cv extends av{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new cv(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Uc(Lc.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Uc(Lc.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const r=new uh(t,n);return function(e,t){if(null===Uh(e)){const n=Fh(e);null!==n&&pv(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new Ay(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Dh(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function dv(e,t,n){if("string"==typeof(n=Xo(n))){if(""===n)throw new Uc(Lc.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!jh(t)&&-1!==n.indexOf("/"))throw new Uc(Lc.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(ed.fromString(n));if(!rd.isDocumentKey(r))throw new Uc(Lc.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Yd(e,new rd(r))}if(n instanceof Iy)return Yd(e,n._key);throw new Uc(Lc.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(wy(n),"."))}function hv(e,t){if(!Array.isArray(e)||0===e.length)throw new Uc(Lc.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function fv(e,t){if(t.isInequality()){const n=Fh(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new Uc(Lc.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));const i=Uh(e);null!==i&&pv(e,r,i)}const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Uc(Lc.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Uc(Lc.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}function pv(e,t,n){if(!n.isEqual(t))throw new Uc(Lc.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}class mv{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Bd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pd(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Md(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Dc()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Sd(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new Uy(Pd(e.latitude),Pd(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Ud(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Fd(e));default:return null}}convertTimestamp(e){const t=Dd(e);return new Xc(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=ed.fromString(e);Pc(zp(n));const r=new Vd(n.get(1),n.get(3)),i=new rd(n.popFirst(5));return r.isEqual(t)||kc("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function gv(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class yv{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class vv extends nv{constructor(e,t,n,r,i,o){super(e,t,n,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new bv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(iv("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class bv extends vv{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Ev{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new yv(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new bv(this._firestore,this._userDataWriter,n.key,n,new yv(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Uc(Lc.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new bv(e._firestore,e._userDataWriter,n.doc.key,n.doc,new yv(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new bv(e._firestore,e._userDataWriter,t.doc.key,t.doc,new yv(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,o=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),o=n.indexOf(t.doc.key)),{type:wv(t.type),doc:r,oldIndex:i,newIndex:o}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function wv(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Dc()}}class Sv extends mv{constructor(e){super(),this.firestore=e}convertBytes(e){return new Py(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Iy(this.firestore,null,t)}}function _v(e,t){return function(e,t){const n=new Fc;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=ry(e);try{const e=await function(e,t){const n=Mc(e),r=Xc.now(),i=t.reduce(((e,t)=>e.add(t.key)),uf());let o,s;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=Zh(),l=uf();return n.Zi.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{o=i;const s=[];for(const e of t){const t=Mf(e,o.get(e.key).overlayedDocument);null!=t&&s.push(new Ff(e.key,t,ih(t.value.mapValue),xf.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,s,t)})).next((t=>{s=t;const r=t.applyToLocalDocumentSet(o,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:s.batchId,changes:nf(o)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Tc[e.currentUser.toKey()];r||(r=new Td(Yc)),r=r.insert(t,n),e.Tc[e.currentUser.toKey()]=r}(r,e.batchId,n),await Zg(r,e.changes),await sg(r.remoteStore)}catch(e){const t=Eg(e,"Failed to persist write");n.reject(t)}}(await fy(e),t,n))),n.promise}(Ry(e),t)}!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Ic=e}("9.23.0"),To(new $o("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const o=e.getProvider("app").getImmediate(),s=new Oy(new Bc(e.getProvider("auth-internal")),new Wc(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Uc(Lc.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vd(e.options.projectId,t)}(o,r),o);return i=Object.assign({useFetchStreams:t},i),s._setSettings(i),s}),"PUBLIC").setMultipleInstances(!0)),xo(Tc,"3.13.0",e),xo(Tc,"3.13.0","esm2017")}();var Tv=n(579);const Cv="AIzaSyCLWcq4td2TQuOq-mlxcfjHSOo_tM3sE78",Iv="extracted_vouchers",Av=1200,Nv=function(e,t){const n="object"==typeof e?e:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bo;const t=wo.get(e);if(!t&&e===bo&&di())return No();if(!t)throw Io.create("no-app",{appName:e});return t}(),r="string"==typeof e?e:t||"(default)",i=Co(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const e=Ko("firestore");e&&Cy(i,...e)}return i}(No({apiKey:"AIzaSyCqgdC3hX8bJ_Ef0aBo_rsW0TEZArmyvzQ",authDomain:"vdvoucher.firebaseapp.com",projectId:"vdvoucher",storageBucket:"vdvoucher.firebasestorage.app",messagingSenderId:"535315980318",appId:"1:535315980318:web:ac71d91380d51f1a7ace0f"})),xv=new class{constructor(e){var t;if(null==e.apiKey)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=null!==(t=e.vertexai)&&void 0!==t&&t,this.apiKey=e.apiKey;const n=h(e.httpOptions,e.vertexai,void 0,void 0);n&&(e.httpOptions?e.httpOptions.baseUrl=n:e.httpOptions={baseUrl:n}),this.apiVersion=e.apiVersion;const r=new ri(this.apiKey);this.apiClient=new ur({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:"gl-node/web",uploader:new Zr,downloader:new Yr}),this.models=new Cr(this.apiClient),this.live=new vr(this.apiClient,r,new ei),this.batches=new qt(this.apiClient),this.chats=new rn(this.models,this.apiClient),this.caches=new Yt(this.apiClient),this.files=new ln(this.apiClient),this.operations=new Ir(this.apiClient),this.authTokens=new kr(this.apiClient),this.tunings=new Jr(this.apiClient),this.fileSearchStores=new Vr(this.apiClient)}}({apiKey:Cv});async function kv(e,t,n){try{const n=function(e,t){return{inlineData:{data:e,mimeType:t}}}(e,"image/jpeg"),r=await xv.models.generateContent({model:"gemini-2.5-flash",contents:[n,{text:t}]});if(!r.text)throw new Error("Gemini tidak menghasilkan teks balasan.");return r.text}catch(r){throw console.error("Error memanggil Gemini untuk ".concat(n,":"),r),new Error("Gagal memanggil Gemini API untuk ".concat(n,". Pesan: ").concat(r.message||"Error tidak diketahui","."))}}function Ov(e){let{userId:t,showStatus:n,handleNavigate:i}=e;const[o,s]=(0,r.useState)([]),[a,l]=(0,r.useState)(!0),[c,d]=(0,r.useState)(null),h=(0,r.useCallback)((async()=>{if(!t)return n("Gagal memuat: Pengguna tidak terautentikasi.","error"),void l(!1);l(!0),d(null);try{const e=function(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];t instanceof sv&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof uv)).length,n=e.filter((e=>e instanceof lv)).length;if(t>1||t>0&&n>0)throw new Uc(Lc.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)e=s._apply(e);return e}(function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Xo(e),vy("collection","path",t),e instanceof Ty){const n=ed.fromString(t,...r);return Ey(n),new Ny(e,null,n)}{if(!(e instanceof Iy||e instanceof Ny))throw new Uc(Lc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ed.fromString(t,...r));return Ey(n),new Ny(e.firestore,null,n)}}(Nv,Iv),function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=iv("orderBy",e);return cv._create(n,t)}("timestamp","desc")),t=await function(e){e=Sy(e,Ay);const t=Sy(e.firestore,Oy),n=Ry(t),r=new Sv(t);return ov(e._query),my(n,e._query).then((n=>new Ev(t,r,e,n)))}(e),r=[];t.forEach((e=>{r.push(u({id:e.id},e.data()))})),s(r),n("Berhasil memuat ".concat(r.length," riwayat ekstraksi."),"success")}catch(e){console.error("Error fetching history: ",e),d("Gagal memuat riwayat. Periksa koneksi Firestore Anda."),n("Gagal memuat riwayat: ".concat(e.message),"error")}finally{l(!1)}}),[t,n]);(0,r.useEffect)((()=>{h()}),[h]);const f=e=>{if(!e)return"N/A";return(e.toDate?e.toDate():new Date(e)).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})},p=(0,Tv.jsxs)("div",{className:"w-64 bg-white p-6 flex flex-col h-screen sticky top-0 shadow-lg border-r border-gray-200",children:[(0,Tv.jsxs)("div",{className:"flex items-center mb-10 pb-4 border-b border-gray-200",children:[(0,Tv.jsx)("svg",{className:"w-8 h-8 text-navy-accent mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Tv.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 7a2 2 0 012 2v2m4-2h-3m4 2v7a2 2 0 01-2 2H5a2 2 0 01-2-2V9a2 2 0 012-2h2m2 4h10m0 0l-3 3m3-3l-3-3"})}),(0,Tv.jsxs)("h1",{className:"text-xl font-extrabold text-gray-800",children:["Voucher ",(0,Tv.jsx)("span",{className:"text-navy-accent",children:"Panel"})]})]}),(0,Tv.jsxs)("nav",{className:"space-y-2 flex-grow",children:[(0,Tv.jsxs)("a",{href:"#",onClick:e=>{e.preventDefault(),i("extraction")},className:"flex items-center p-3 text-sm font-semibold text-gray-700 hover:bg-gray-100 rounded-lg transition duration-200",children:[(0,Tv.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-3",viewBox:"0 0 20 20",fill:"currentColor",children:(0,Tv.jsx)("path",{d:"M7 3a1 1 0 000 2h6a1 1 0 100-2H7zM4 9a1 1 0 100 2h12a1 1 0 100-2H4zM7 15a1 1 0 100 2h6a1 1 0 100-2H7z"})}),(0,Tv.jsx)("span",{children:"Ekstraksi"})]}),(0,Tv.jsxs)("a",{href:"#",onClick:e=>e.preventDefault(),className:"flex items-center p-3 text-sm font-semibold text-white bg-navy-accent rounded-lg shadow-md transition duration-200",children:[(0,Tv.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:(0,Tv.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 10h16M4 14h16M4 18h16"})}),(0,Tv.jsx)("span",{children:"Arsip / History (Active)"})]})]}),(0,Tv.jsxs)("div",{className:"mt-auto pt-4 border-t border-gray-200",children:[(0,Tv.jsxs)("p",{className:"text-xs text-gray-500 mb-2",children:["Status: ",t?(0,Tv.jsx)("span",{className:"text-green-600 font-medium",children:"Connected"}):(0,Tv.jsx)("span",{className:"text-yellow-600 font-medium",children:"Connecting..."})]}),(0,Tv.jsxs)("button",{onClick:()=>{localStorage.removeItem("isLoggedIn"),window.location.reload()},className:"w-full py-2 bg-red-500 text-white text-sm font-semibold rounded-lg hover:bg-red-600 transition duration-200 shadow-md",children:[(0,Tv.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 inline mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Tv.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Logout"]})]})]}),m=()=>a?(0,Tv.jsxs)("div",{className:"text-center py-20",children:[(0,Tv.jsxs)("svg",{className:"animate-spin mx-auto h-10 w-10 text-navy-accent",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,Tv.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Tv.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,Tv.jsx)("p",{className:"mt-3 text-lg text-gray-600",children:"Memuat riwayat ekstraksi..."})]}):c?(0,Tv.jsxs)("div",{className:"text-center py-20 text-red-600",children:[(0,Tv.jsx)("p",{className:"text-xl font-bold",children:"Terjadi Kesalahan"}),(0,Tv.jsx)("p",{children:c})]}):0===o.length?(0,Tv.jsxs)("div",{className:"text-center py-20 text-gray-500",children:[(0,Tv.jsx)("p",{className:"text-xl font-bold",children:"Tidak Ada Riwayat"}),(0,Tv.jsx)("p",{children:"Mulai ekstraksi voucher pertama Anda di halaman Ekstraksi. Hasil akan tersimpan otomatis."})]}):(0,Tv.jsx)("div",{className:"space-y-4",children:o.map(((e,t)=>(0,Tv.jsxs)("div",{className:"main-card p-5 flex justify-between items-center hover:shadow-lg transition duration-300",children:[(0,Tv.jsxs)("div",{className:"flex-grow",children:[(0,Tv.jsxs)("div",{className:"flex items-baseline mb-1",children:[(0,Tv.jsx)("span",{className:"text-3xl font-extrabold text-navy-accent mr-3",children:e.count}),(0,Tv.jsx)("span",{className:"text-lg font-semibold text-gray-700",children:"Kode Unik Diekstrak"})]}),(0,Tv.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:[(0,Tv.jsx)("span",{className:"font-semibold",children:"Sumber:"})," Dari ",e.sourceFiles.length," file (misalnya: ",e.sourceFiles.slice(0,3).join(", "),e.sourceFiles.length>3&&" dan ".concat(e.sourceFiles.length-3," file lainnya."),")"]})]}),(0,Tv.jsxs)("div",{className:"text-right flex flex-col items-end",children:[(0,Tv.jsx)("p",{className:"text-sm font-medium text-gray-800",children:f(e.timestamp)}),(0,Tv.jsxs)("button",{onClick:()=>(e=>{if(0===e.length)return;e.join("\n");const t=e.map((e=>'"'.concat(e,'"'))).join("\n"),r=new Blob([t],{type:"text/csv;charset=utf-8;"}),i=URL.createObjectURL(r),o=document.createElement("a"),s="history_extraction_".concat(f(new Date).replace(/, /g,"_").replace(/:/g,"-"));o.setAttribute("href",i),o.setAttribute("download","".concat(s,".csv")),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o),n("File CSV riwayat berhasil diunduh.","success")})(e.codes),className:"mt-3 px-4 py-2 bg-gold-accent text-navy-accent text-sm font-semibold rounded-lg hover:bg-yellow-500 transition shadow-md",children:[(0,Tv.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 inline mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Tv.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Unduh CSV (",e.count,")"]})]})]},e.id)))});return(0,Tv.jsxs)("div",{className:"min-h-screen bg-gray-50 flex",children:[(0,Tv.jsx)("style",{jsx:!0,global:!0,children:"\n                :root {\n                    --color-navy-accent: #0f172a; /* Slate-900 */\n                    --color-gold-accent: #fbbf24; /* Amber-400 */\n                    --color-main-bg: #ffffff; /* White */\n                    --color-panel-bg: #f9fafb; /* Gray-50 */\n                }\n                .main-card {\n                    background-color: var(--color-main-bg); \n                    border-radius: 12px;\n                    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.06); \n                    color: #1f2937; \n                    border: 1px solid #f3f4f6; \n                }\n                .text-title { color: var(--color-navy-accent); }\n            "}),p,(0,Tv.jsxs)("div",{className:"flex-grow p-10 bg-gray-50",children:[(0,Tv.jsxs)("header",{className:"mb-10 flex justify-between items-center pb-4 border-b border-gray-200",children:[(0,Tv.jsx)("h2",{className:"text-3xl font-light text-gray-800 tracking-wider",children:"Riwayat Ekstraksi Voucher"}),(0,Tv.jsxs)("button",{onClick:()=>h(),className:"flex items-center px-4 py-2 bg-gray-200 text-gray-700 text-sm font-semibold rounded-lg hover:bg-gray-300 transition disabled:opacity-50",disabled:a,children:[(0,Tv.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1 ".concat(a?"animate-spin":""),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Tv.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.962 8.962 0 0112 20c-3.132 0-6.062-1.233-8-3.232l1.424-1.424M14 12V4m-2 2h6"})}),"Refresh Data"]})]}),(0,Tv.jsx)(m,{})]})]})}function Rv(e){let{showStatus:t,userId:n,handleLogout:i,currentPage:o,handleNavigate:s}=e;const[a,l]=(0,r.useState)([]),[u,c]=(0,r.useState)([]),[d,h]=(0,r.useState)([]),[f,p]=(0,r.useState)([]),[m,g]=(0,r.useState)("Cari dan ekstrak **HANYA urutan angka yang tepat 18 digit** dari area bawah setiap voucher. Kualitas gambar sangat penting. Berikan HANYA KODE 18 digit tersebut (satu per baris). Abaikan SEMUA angka lain (seperti 12 digit barcode, tanggal, atau nomor seri pendek)."),[y,v]=(0,r.useState)(!1),[b,E]=(0,r.useState)(0),[w,S]=(0,r.useState)(!1),[_,T]=(0,r.useState)("Hasil ekstraksi kode unik akan tampil di sini, satu per baris."),[C,I]=(0,r.useState)(!1),[A,N]=(0,r.useState)(""),[x,k]=(0,r.useState)(new Date);(0,r.useEffect)((()=>{const e=setInterval((()=>{k(new Date)}),1e3);return()=>clearInterval(e)}),[]);const O=d.reduce(((e,t)=>(e.uniqueSet.has(t.code)?e.duplicateList.push(t):(e.uniqueSet.add(t.code),e.uniqueList.push(t)),e)),{uniqueSet:new Set,uniqueList:[],duplicateList:[]}),R=O.uniqueList.length,D=(0,r.useCallback)((async(e,r)=>{if(0===e.uniqueList.length)return void t("Tidak ada kode unik untuk disimpan.","info");if(!n)return void t("Gagal menyimpan: Pengguna tidak terautentikasi.","error");const i={userId:n,codes:e.uniqueList.map((e=>e.code)),count:e.uniqueList.length,sourceFiles:r.map((e=>e.name)),timestamp:new zy("serverTimestamp")};try{const e=xy(Nv,Iv,"extraction-".concat(Date.now()));await function(e,t,n){e=Sy(e,Iy);const r=Sy(e.firestore,Oy),i=gv(e.converter,t,n);return _v(r,[Gy(Hy(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,xf.none())])}(e,i),t("\u2705 ".concat(i.count," kode unik berhasil disimpan ke Firestore!"),"success")}catch(o){console.error("Error saving document to Firestore: ",o),t("Gagal menyimpan data ke Firestore. Pesan: ".concat(o.message),"error")}}),[n,t]),P=(0,r.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"full";h([]),p([]),T("Hasil ekstraksi kode unik akan tampil di sini, satu per baris."),"full"===e&&(l([]),c([])),S(!1),E(0)}),[]),M=()=>{const e=O.duplicateList;if(0===e.length)return{display:"hidden",text:"Tidak ada instance kode duplikat yang terdeteksi."};return{display:"",text:e.map((e=>{var t;return"".concat(e.code," (File: ").concat((null===(t=a[e.fileIndex])||void 0===t?void 0:t.name)||"N/A",")")})).join("\n")}},L=()=>{const e=(e=>{const t=[],n=[4,5,6],r=new Set;for(let i=0;i<e.length;i++)for(let o=i+1;o<e.length;o++){const s=e[i].code,a=e[o].code;if(r.has("".concat(s,"|").concat(a))||r.has("".concat(a,"|").concat(s)))continue;let l=!1,u=[];for(const e of n)s.substring(0,e)===a.substring(0,e)&&(l=!0,u.push("Awal ".concat(e," digit"))),s.substring(18-e)===a.substring(18-e)&&(l=!0,u.push("Akhir ".concat(e," digit")));l&&(t.push("".concat(s," vs ").concat(a," (").concat([...new Set(u)].join(", "),")")),r.add("".concat(s,"|").concat(a)))}return t})(O.uniqueList);return 0===e.length?{display:"hidden",text:"Tidak ada potensi duplikat yang terdeteksi."}:{display:"",text:e.join("\n")}};return(0,Tv.jsxs)("div",{className:"min-h-screen bg-gray-50 flex",children:[(0,Tv.jsx)("style",{jsx:!0,global:!0,children:"\n                :root {\n                    --color-navy-accent: #0f172a; /* Slate-900 */\n                    --color-gold-accent: #fbbf24; /* Amber-400 */\n                    --color-main-bg: #ffffff; /* White */\n                    --color-panel-bg: #f9fafb; /* Gray-50 */\n                }\n                .main-card {\n                    background-color: var(--color-main-bg); \n                    border-radius: 12px;\n                    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.06); \n                    color: #1f2937; \n                    border: 1px solid #f3f4f6; \n                }\n                .text-title { color: var(--color-navy-accent); }\n                .custom-file-upload { \n                    border: 2px dashed #9ca3af; \n                    background-color: #f3f4f6; \n                    padding: 2.5rem;\n                    text-align: center;\n                    cursor: pointer;\n                    border-radius: 8px;\n                    transition: border-color 0.3s, background-color 0.3s;\n                }\n                .custom-file-upload:hover { border-color: var(--color-navy-accent); background-color: #e5e7eb; }\n                #image-upload { display: none; }\n                .image-thumbnail-wrapper {\n                    border: 1px solid #d1d5db; \n                    width: 100px;\n                    height: 100px;\n                    margin: 8px;\n                    border-radius: 8px;\n                    overflow: hidden;\n                    box-shadow: 0 1px 2px rgba(0,0,0,0.05);\n                    position: relative;\n                }\n                .image-thumbnail {\n                    width: 100%;\n                    height: 100%;\n                    object-fit: cover;\n                }\n                .remove-image-button {\n                    position: absolute;\n                    top: 4px;\n                    right: 4px;\n                    width: 20px;\n                    height: 20px;\n                    border-radius: 50%;\n                    background-color: rgba(239, 68, 68, 0.9);\n                    color: white;\n                    border: 1px solid white;\n                    cursor: pointer;\n                    line-height: 1;\n                    padding: 0;\n                }\n                .pulse-ready {\n                    background-color: var(--color-gold-accent); \n                    color: var(--color-navy-accent); \n                    animation: pulse 1.5s infinite;\n                }\n                .pulse-ready:hover { background-color: #f59e0b; }\n                @keyframes pulse {\n                    0% { box-shadow: 0 0 0 0 rgba(251, 191, 36, 0.5); }\n                    70% { box-shadow: 0 0 0 10px rgba(251, 191, 36, 0); }\n                    100% { box-shadow: 0 0 0 0 rgba(251, 191, 36, 0); }\n                }\n                .total-count-display {\n                    font-size: 2rem;\n                    color: var(--color-navy-accent); \n                    font-weight: 800;\n                    margin-left: 8px;\n                }\n                .dot {\n                    background-color: white;\n                    height: 8px;\n                    width: 8px;\n                    border-radius: 50%;\n                    margin: 0 2px;\n                    animation: dot-loading 1.4s infinite ease-in-out both;\n                }\n                .dot:nth-child(1) { animation-delay: -0.32s; }\n                    .dot:nth-child(2) { animation-delay: -0.16s; }\n                    @keyframes dot-loading {\n                        0%, 80%, 100% { transform: scale(0); }\n                        40% { transform: scale(1.0); }\n                    }\n                "}),(0,Tv.jsxs)("div",{className:"w-64 bg-white p-6 flex flex-col h-screen sticky top-0 shadow-lg border-r border-gray-200",children:[(0,Tv.jsxs)("div",{className:"flex items-center mb-10 pb-4 border-b border-gray-200",children:[(0,Tv.jsx)("svg",{className:"w-8 h-8 text-navy-accent mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Tv.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 7a2 2 0 012 2v2m4-2h-3m4 2v7a2 2 0 01-2 2H5a2 2 0 01-2-2V9a2 2 0 012-2h2m2 4h10m0 0l-3 3m3-3l-3-3"})}),(0,Tv.jsxs)("h1",{className:"text-xl font-extrabold text-gray-800",children:["Voucher ",(0,Tv.jsx)("span",{className:"text-navy-accent",children:"Panel"})]})]}),(0,Tv.jsxs)("nav",{className:"space-y-2 flex-grow",children:[(0,Tv.jsxs)("a",{href:"#",onClick:e=>e.preventDefault(),className:"flex items-center p-3 text-sm font-semibold text-white bg-navy-accent rounded-lg shadow-md transition duration-200",children:[(0,Tv.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-3",viewBox:"0 0 20 20",fill:"currentColor",children:(0,Tv.jsx)("path",{d:"M7 3a1 1 0 000 2h6a1 1 0 100-2H7zM4 9a1 1 0 100 2h12a1 1 0 100-2H4zM7 15a1 1 0 100 2h6a1 1 0 100-2H7z"})}),(0,Tv.jsx)("span",{children:"Ekstraksi (Active)"})]}),(0,Tv.jsxs)("a",{href:"#",onClick:e=>{e.preventDefault(),s("history")},className:"flex items-center p-3 text-sm font-semibold text-gray-700 hover:bg-gray-100 rounded-lg transition duration-200",children:[(0,Tv.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:(0,Tv.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 10h16M4 14h16M4 18h16"})}),(0,Tv.jsx)("span",{children:"Arsip / History"})]})]}),(0,Tv.jsxs)("div",{className:"mt-auto pt-4 border-t border-gray-200",children:[(0,Tv.jsxs)("p",{className:"text-xs text-gray-500 mb-2",children:["Status: ",n?(0,Tv.jsx)("span",{className:"text-green-600 font-medium",children:"Connected"}):(0,Tv.jsx)("span",{className:"text-yellow-600 font-medium",children:"Connecting..."})]}),(0,Tv.jsxs)("button",{onClick:i,className:"w-full py-2 bg-red-500 text-white text-sm font-semibold rounded-lg hover:bg-red-600 transition duration-200 shadow-md",children:[(0,Tv.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 inline mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Tv.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Logout"]})]})]}),(0,Tv.jsxs)("div",{className:"flex-grow p-10 bg-gray-50",children:[(0,Tv.jsxs)("header",{className:"mb-10 flex justify-between items-center pb-4 border-b border-gray-200",children:[(0,Tv.jsx)("h2",{className:"text-3xl font-light text-gray-800 tracking-wider",children:"Dashboard Ekstraksi Voucher"}),(0,Tv.jsxs)("p",{className:"text-sm text-gray-500",children:["Panel v1.0 | Selamat datang, ",(0,Tv.jsx)("span",{className:"font-semibold",children:"Admin"})]})]}),(0,Tv.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mb-10",children:[(0,Tv.jsxs)("div",{className:"main-card p-6 border-l-4 border-navy-accent hover:shadow-lg transition duration-300",children:[(0,Tv.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Total File Diunggah"}),(0,Tv.jsxs)("div",{className:"flex items-center mt-1",children:[(0,Tv.jsx)("span",{className:"text-4xl font-extrabold text-gray-800",children:a.length}),(0,Tv.jsx)("span",{className:"ml-2 text-sm text-navy-accent font-semibold",children:"Gambar"})]})]}),(0,Tv.jsxs)("div",{className:"main-card p-6 border-l-4 border-gold-accent hover:shadow-lg transition duration-300",children:[(0,Tv.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Kode Unik Ditemukan"}),(0,Tv.jsxs)("div",{className:"flex items-center mt-1",children:[(0,Tv.jsx)("span",{className:"text-4xl font-extrabold text-gray-800",children:R}),(0,Tv.jsx)("span",{className:"ml-2 text-sm text-gold-accent font-semibold",children:"Kode 18 Digit"})]})]}),(0,Tv.jsxs)("div",{className:"main-card p-6 border-l-4 border-gray-300 hover:shadow-lg transition duration-300",children:[(0,Tv.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Aktivitas Terkini"}),(0,Tv.jsxs)("div",{className:"mt-1",children:[(0,Tv.jsx)("span",{className:"text-lg font-extrabold text-gray-800 block",children:(U=x,new Intl.DateTimeFormat("id-ID",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).format(U))}),(0,Tv.jsx)("span",{className:"text-xs text-green-500 font-semibold block mt-1",children:n?"Firestore Aktif":"Menunggu Koneksi"})]})]})]}),(0,Tv.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,Tv.jsxs)("div",{className:"lg:col-span-1 space-y-8",children:[(0,Tv.jsxs)("div",{className:"main-card p-6",children:[(0,Tv.jsxs)("h2",{className:"text-xl font-bold text-title mb-4 flex items-center border-b border-gray-200 pb-3",children:[(0,Tv.jsx)("span",{className:"bg-navy-accent text-white rounded-full w-6 h-6 flex items-center justify-center mr-3 text-sm font-bold",children:"1"}),"Unggah File Voucher"]}),(0,Tv.jsxs)("label",{htmlFor:"image-upload",className:"custom-file-upload block mb-4",children:[(0,Tv.jsx)("svg",{className:"mx-auto h-10 w-10 text-navy-accent mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Tv.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,Tv.jsx)("span",{className:"font-bold text-lg text-gray-700",children:"Klik atau Seret"}),(0,Tv.jsx)("span",{id:"file-name",className:"block text-sm text-gray-500 mt-1",children:a.length>0?"".concat(a.length," file dipilih."):"Pilih gambar voucher (JPG/PNG)."})]}),(0,Tv.jsx)("input",{type:"file",id:"image-upload",accept:"image/*",multiple:!0,onChange:async e=>{const n=Array.from(e.target.files);if(0===n.length)return;P("soft");const r=[...a,...n];l(r);try{const e=n.map((e=>(e=>new Promise(((t,n)=>{const r=new FileReader;r.onload=r=>{const i=new Image;i.onload=()=>{const n=document.createElement("canvas"),r=n.getContext("2d");let o=i.width,s=i.height;o>Av&&(s*=Av/o,o=Av),n.width=o,n.height=s,r.drawImage(i,0,0,o,s);const a=n.toDataURL("image/jpeg",.8),l=a.split(",")[1];t({base64:l,dataURL:a,name:e.name,mimeType:"image/jpeg"})},i.onerror=n,i.src=r.target.result},r.onerror=n,r.readAsDataURL(e)})))(e))),r=await Promise.all(e);c((e=>[...e,...r])),t("Berhasil mengunggah dan mengoptimasi ".concat(n.length," gambar. \u2705 Siap memproses."),"success")}catch(i){console.error("Error processing files:",i),t("Gagal memproses salah satu gambar. Coba lagi.","error")}}}),(0,Tv.jsx)("div",{id:"image-preview-container",className:"mt-4 flex flex-wrap justify-center p-2 border border-gray-200 rounded-lg ".concat(0===a.length?"hidden":"bg-gray-100"),children:u.map(((e,t)=>(0,Tv.jsxs)("div",{className:"image-thumbnail-wrapper","data-index":t,children:[(0,Tv.jsx)("img",{src:e.dataURL,className:"image-thumbnail",alt:"Voucher Image ".concat(t+1)}),(0,Tv.jsx)("button",{className:"remove-image-button absolute flex items-center justify-center",onClick:()=>{return e=t,l((t=>t.filter(((t,n)=>n!==e)))),c((t=>t.filter(((t,n)=>n!==e)))),void(d.length>0&&P("soft"));var e},children:(0,Tv.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Tv.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]},t)))})]}),(0,Tv.jsxs)("div",{className:"main-card p-6",children:[(0,Tv.jsxs)("h2",{className:"text-xl font-bold text-title mb-4 flex items-center border-b border-gray-200 pb-3",children:[(0,Tv.jsx)("span",{className:"bg-navy-accent text-white rounded-full w-6 h-6 flex items-center justify-center mr-3 text-sm font-bold",children:"2"}),"Ekstraksi AI"]}),(0,Tv.jsx)("label",{htmlFor:"prompt",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Instruksi AI"}),(0,Tv.jsx)("textarea",{id:"prompt",rows:"3",className:"w-full p-3 border border-gray-300 bg-white rounded-lg focus:ring-navy-accent focus:border-navy-accent transition duration-150 text-sm shadow-sm resize-none text-gray-800",value:m,onChange:e=>g(e.target.value)}),(0,Tv.jsx)("p",{className:"text-xs text-gray-500 mt-1 mb-4",children:"Pastikan kriteria kode 18 digit sudah benar."}),(0,Tv.jsxs)("button",{id:"generate-button",className:"w-full py-3 text-white font-bold text-lg rounded-lg shadow-md disabled:opacity-50 disabled:shadow-none disabled:animate-none flex items-center justify-center transition duration-300 ".concat(a.length>0&&!y?"pulse-ready text-navy-accent":"bg-gray-400 text-gray-700"),disabled:y||0===a.length,onClick:async()=>{if(0===a.length)return void t("Mohon unggah minimal satu gambar voucher.","error");P("soft"),v(!0),t("Memulai ekstraksi untuk ".concat(a.length," gambar via Gemini API..."),"info");const e=m,n=[],r=[];let i=!1;try{for(let i=0;i<u.length;i++){const o=u[i],s=a[i].name,l=(i+1)/u.length*100;E(l),t("[".concat(i+1,"/").concat(u.length,"] Memproses file: ").concat(s,"..."),"info");const c=(await kv(o.base64,e,s)).split("\n").map((e=>e.trim())).filter((e=>e.length>0)),d=c.filter((e=>18===e.length&&/^\d+$/.test(e)));r.push({file:a[i],extractedCodes:d,allSequences:c}),d.forEach((e=>{n.push({code:e,source:s,id:"".concat(s,"-").concat(i,"-").concat(Math.random()),fileIndex:i})}))}h(n),p(r);const o=n.reduce(((e,t)=>(e.set.has(t.code)||(e.list.push(t),e.set.add(t.code)),e)),{set:new Set,list:[]}),s=o.list.map((e=>e.code)).join("\n");T(s||"Tidak ada kode 18 digit yang terdeteksi."),t("\u2705 Ekstraksi selesai! Ditemukan ".concat(o.list.length," kode unik 18 digit."),"success"),await D({uniqueList:o.list,uniqueSet:o.set},a),i=!0}catch(o){console.error("Kesalahan saat memproses gambar:",o),t("Terjadi kesalahan: ".concat(o.message,". Ekstraksi gagal."),"error")}finally{v(!1),E(0)}},children:[(0,Tv.jsxs)("div",{id:"loading-spinner",className:"flex items-end justify-center -ml-1 mr-3 h-5 w-5 ".concat(y?"":"hidden"),children:[(0,Tv.jsx)("div",{className:"dot"}),(0,Tv.jsx)("div",{className:"dot"}),(0,Tv.jsx)("div",{className:"dot"})]}),(0,Tv.jsx)("span",{id:"button-text",children:y?"Memproses dengan Gemini...":"Mulai Proses Ekstraksi"})]}),(0,Tv.jsx)("div",{id:"progress-container",className:"mt-3 h-1.5 bg-gray-200 rounded-full overflow-hidden ".concat(y?"":"hidden"),children:(0,Tv.jsx)("div",{id:"progress-bar",className:"h-full bg-gold-accent transition-all duration-300 ease-out",style:{width:"".concat(b,"%")}})})]})]}),(0,Tv.jsxs)("div",{className:"lg:col-span-2 space-y-8",children:[(0,Tv.jsxs)("div",{id:"unique-codes-card",className:"main-card p-6",children:[(0,Tv.jsxs)("div",{className:"flex justify-between items-center mb-4 border-b border-gray-200 pb-3",children:[(0,Tv.jsxs)("h2",{className:"text-xl font-bold text-title flex items-center",children:[(0,Tv.jsx)("span",{className:"bg-navy-accent text-white rounded-full w-6 h-6 flex items-center justify-center mr-3 text-sm font-bold",children:"3"}),"Kode Unik Ditemukan"]}),(0,Tv.jsxs)("div",{className:"flex items-center p-2 rounded-md bg-gray-100 border border-gray-200",children:[(0,Tv.jsx)("p",{className:"text-base font-semibold text-gray-700",children:"Total Unik:"}),(0,Tv.jsx)("span",{id:"code-count",className:"total-count-display text-gold-accent",children:R})]})]}),(0,Tv.jsx)("textarea",{id:"unique-code-display",rows:"10",className:"w-full p-3 border rounded-lg font-mono text-sm resize-none transition duration-150 ".concat(w?"bg-yellow-50 border-yellow-500 shadow-xl text-gray-800":"bg-gray-100 border-gray-300 text-gray-800"),readOnly:!w,value:_,onChange:e=>T(e.target.value)}),(0,Tv.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Daftar kode unik 18 digit."}),(0,Tv.jsxs)("div",{className:"flex flex-col sm:flex-row justify-end items-end sm:items-center space-y-3 sm:space-y-0 sm:space-x-3 mt-5 border-t border-gray-200 pt-5",children:[(0,Tv.jsx)("input",{type:"text",id:"filename-input",placeholder:"Nama file CSV (Opsional)",className:"p-2 border border-gray-300 bg-white rounded-lg text-sm w-full sm:w-48 focus:border-navy-accent focus:ring-navy-accent transition text-gray-800",value:A,onChange:e=>N(e.target.value)}),(0,Tv.jsxs)("button",{id:"edit-button",className:"px-4 py-2.5 text-white text-sm font-semibold rounded-lg shadow-md transition duration-200 disabled:opacity-50 disabled:bg-gray-300 disabled:text-gray-500 w-full sm:w-auto \n                                        ".concat(w?"bg-green-600 hover:bg-green-700":"bg-yellow-600 hover:bg-yellow-700"),disabled:0===R||y,onClick:()=>{S((e=>{const n=!e;if(n)t("Mode Edit Aktif. Harap koreksi kode 18 digit Anda.","info");else{const e=_.split("\n").map((e=>e.trim())).filter((e=>e.match(/^\d{18}$/)));T(e.join("\n")),t("Daftar kode unik divalidasi dan siap disalin/diunduh.","success")}return n}))},children:[(0,Tv.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 inline mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Tv.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),w?"Selesai Edit":"Mode Edit"]}),(0,Tv.jsxs)("button",{id:"copy-button",className:"px-4 py-2.5 bg-navy-accent text-white text-sm font-semibold rounded-lg shadow-md hover:bg-slate-700 transition duration-200 disabled:opacity-50 disabled:bg-gray-300 disabled:text-gray-500 w-full sm:w-auto",disabled:0===R||y||w,onClick:()=>{const e=_.trim();if(e){const r=document.createElement("textarea");r.value=e,document.body.appendChild(r),r.select();try{document.execCommand("copy"),t("Daftar kode unik berhasil disalin!","success")}catch(n){console.error("Failed to copy text:",n),t("Gagal menyalin. Harap salin manual dari kotak teks.","error")}document.body.removeChild(r)}},children:[(0,Tv.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 inline mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Tv.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2m-2 2h2m-2 2h2m-2 2h2m-2 2h2"})}),"Salin"]}),(0,Tv.jsxs)("button",{id:"download-button",className:"px-4 py-2.5 bg-gray-500 text-white text-sm font-semibold rounded-lg shadow-md hover:bg-gray-600 transition duration-200 disabled:opacity-50 disabled:bg-gray-300 disabled:text-gray-500 w-full sm:w-auto",disabled:0===R||y||w,onClick:()=>{const e=_.trim();if(e){const n=e.split("\n").filter((e=>e)),r=n.map((e=>'"'.concat(e,'"'))).join("\n"),i=new Blob([r],{type:"text/csv;charset=utf-8;"}),o=URL.createObjectURL(i),s=document.createElement("a"),a=A.trim()||"extracted_vouchers";s.setAttribute("href",o),s.setAttribute("download","".concat(a,".csv")),s.style.visibility="hidden",document.body.appendChild(s),s.click(),document.body.removeChild(s),t("File CSV berhasil diunduh.","success")}},children:[(0,Tv.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 inline mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Tv.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Unduh CSV"]})]})]}),(0,Tv.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,Tv.jsxs)("div",{id:"duplicate-codes-card",className:"main-card p-6 border-l-4 border-red-500 ".concat("hidden"===M().display?"opacity-70":""),children:[(0,Tv.jsxs)("h2",{className:"text-lg font-bold text-red-700 mb-3 flex items-center border-b border-gray-200 pb-2",children:[(0,Tv.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Tv.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})}),"Duplikat Eksak"]}),(0,Tv.jsx)("p",{className:"text-xs text-red-600 mb-3",children:"Kode ini terdeteksi di file berbeda. Tidak dihitung unik."}),(0,Tv.jsx)("textarea",{id:"duplicate-code-display",rows:"5",className:"w-full p-3 border border-red-300 rounded-lg bg-red-50 text-red-700 font-mono text-xs resize-none",readOnly:!0,value:M().text})]}),(0,Tv.jsxs)("div",{id:"potential-duplicates-card",className:"main-card p-6 border-l-4 border-yellow-500 ".concat("hidden"===L().display?"opacity-70":""),children:[(0,Tv.jsxs)("h2",{className:"text-lg font-bold text-yellow-700 mb-3 flex items-center border-b border-gray-200 pb-2",children:[(0,Tv.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-yellow-500 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Tv.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.368 15c-.77 1.333.192 3 1.732 3z"})}),"Potensi Duplikat"]}),(0,Tv.jsx)("p",{className:"text-xs text-yellow-600 mb-3",children:"Kesamaan prefix/suffix. Perlu tinjauan manual."}),(0,Tv.jsx)("textarea",{id:"potential-code-display",rows:"5",className:"w-full p-3 border border-yellow-300 rounded-lg bg-yellow-50 text-yellow-700 font-mono text-xs resize-none",readOnly:!0,value:L().text})]})]}),(0,Tv.jsxs)("div",{className:"main-card p-6",children:[(0,Tv.jsx)("div",{className:"flex justify-between items-center mb-4 border-b border-gray-200 pb-3",children:(0,Tv.jsxs)("h3",{className:"text-xl font-bold text-gray-700 flex items-center",children:[(0,Tv.jsx)("span",{className:"bg-gray-500 text-white rounded-full w-6 h-6 flex items-center justify-center mr-3 text-sm font-bold",children:"4"}),"Log & Validasi Hasil"]})}),(0,Tv.jsxs)("div",{className:"flex items-center mb-4",children:[(0,Tv.jsx)("input",{type:"checkbox",id:"show-all-details-toggle",className:"form-checkbox h-4 w-4 text-navy-accent transition duration-150 ease-in-out border-gray-300 rounded focus:ring-navy-accent bg-white",checked:!C,onChange:()=>I((e=>!e))}),(0,Tv.jsx)("label",{htmlFor:"show-all-details-toggle",className:"ml-2 block text-sm leading-5 text-gray-600 select-none cursor-pointer",children:"Tampilkan Hanya Kode Unik yang Diterima (Mode Filter)"})]}),(0,Tv.jsx)("div",{id:"detail-output",className:"p-3 bg-gray-100 text-gray-700 overflow-auto min-h-[150px] border border-gray-200 rounded-lg shadow-inner text-sm",children:(()=>{if(0===f.length)return"Detail proses ekstraksi (Validasi, Gagal, Duplikat) akan ditampilkan di sini.";const e=O.uniqueSet;return f.map(((t,n)=>{const r=t.file.name,i=t.extractedCodes.length>0?"\u2705":"\u274c";let o,s=0;return C?(o=t.extractedCodes.map((t=>e.has(t)?(s++,"<span key=".concat(t,">").concat(t,"</span>")):"<span key=".concat(t,' class="line-through text-red-500" title="Duplikat">').concat(t,"</span>"))).join("<br/>"),(0,Tv.jsxs)("div",{className:"mb-3 p-2 border-b border-gray-200",children:[(0,Tv.jsxs)("p",{className:"font-semibold text-gray-800",children:[i," File ",n+1," (",r,")"]}),(0,Tv.jsxs)("p",{className:"ml-5 text-xs ".concat(s>0?"text-green-600":"text-red-600"),children:["Kode 18 digit unik yang diterima: ",s]}),(0,Tv.jsx)("div",{className:"mt-1 ml-5 font-mono text-xs",dangerouslySetInnerHTML:{__html:o}})]},n)):(o=t.extractedCodes.filter((t=>e.has(t))).map((e=>(s++,"<span key={code}>".concat(e,"</span>")))).join("<br/>"),(0,Tv.jsxs)("div",{className:"mb-3 p-2 border-b border-gray-200",children:[(0,Tv.jsxs)("p",{className:"font-semibold text-gray-800",children:[i," File ",n+1," (",r,")"]}),(0,Tv.jsxs)("p",{className:"text-xs ".concat(s>0?"text-green-600":"text-gray-500"," ml-5"),children:["Diterima: ",s," kode unik 18 digit."]}),s>0&&(0,Tv.jsx)("div",{className:"mt-1 ml-5 font-mono text-xs",dangerouslySetInnerHTML:{__html:o}})]},n))}))})()})]})]})]})]})]});var U}function Dv(e){let{handleLogin:t,statusMessage:n}=e;const[i,o]=(0,r.useState)(""),[s,a]=(0,r.useState)(""),[l,u]=(0,r.useState)(!1);return(0,Tv.jsxs)("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:[(0,Tv.jsx)("style",{jsx:!0,global:!0,children:"\n                .login-card {\n                    background-color: white;\n                    border-radius: 16px;\n                    box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 5px 10px -5px rgba(0, 0, 0, 0.04);\n                    border: 1px solid #e5e7eb;\n                    width: 100%;\n                    max-width: 400px;\n                }\n                .input-field {\n                    border: 1px solid #d1d5db; /* Gray-300 */\n                    border-radius: 8px;\n                    padding: 0.75rem;\n                    width: 100%;\n                    transition: border-color 0.2s, box-shadow 0.2s;\n                }\n                .input-field:focus {\n                    border-color: #0f172a; /* Navy Accent */\n                    box-shadow: 0 0 0 2px rgba(15, 23, 42, 0.1);\n                    outline: none;\n                }\n            "}),(0,Tv.jsxs)("div",{className:"login-card p-8",children:[(0,Tv.jsxs)("div",{className:"flex flex-col items-center mb-6",children:[(0,Tv.jsx)("svg",{className:"w-10 h-10 text-navy-accent mb-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Tv.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 7a2 2 0 012 2v2m4-2h-3m4 2v7a2 2 0 01-2 2H5a2 2 0 01-2-2V9a2 2 0 012-2h2m2 4h10m0 0l-3 3m3-3l-3-3"})}),(0,Tv.jsxs)("h2",{className:"text-3xl font-extrabold text-gray-800 tracking-tight",children:["Voucher ",(0,Tv.jsx)("span",{className:"text-navy-accent",children:"Panel"})]}),(0,Tv.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Akses Admin Ekstraksi"})]}),n.visible&&(0,Tv.jsx)("div",{className:"p-3 mb-4 rounded-lg text-sm ".concat("error"===n.type?"border-red-400 bg-red-100 text-red-800":"border-blue-400 bg-blue-100 text-blue-800"),role:"alert",children:n.text}),(0,Tv.jsxs)("form",{onSubmit:e=>{e.preventDefault(),u(!0),setTimeout((()=>{t(i,s),u(!1)}),800)},children:[(0,Tv.jsxs)("div",{className:"mb-4",children:[(0,Tv.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",htmlFor:"username",children:"Username"}),(0,Tv.jsx)("input",{type:"text",id:"username",className:"input-field",placeholder:"Masukkan Username",value:i,onChange:e=>o(e.target.value),required:!0})]}),(0,Tv.jsxs)("div",{className:"mb-6",children:[(0,Tv.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",htmlFor:"password",children:"Password"}),(0,Tv.jsx)("input",{type:"password",id:"password",className:"input-field",placeholder:"Masukkan Password",value:s,onChange:e=>a(e.target.value),required:!0})]}),(0,Tv.jsx)("button",{type:"submit",className:"w-full py-3 bg-navy-accent text-white font-semibold rounded-lg shadow-md hover:bg-slate-700 transition duration-200 disabled:opacity-50 flex items-center justify-center",disabled:l,children:l?(0,Tv.jsxs)("span",{className:"flex items-center",children:[(0,Tv.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,Tv.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Tv.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Authenticating..."]}):"Login ke Panel"}),(0,Tv.jsx)("p",{className:"text-xs text-gray-400 text-center mt-4"})]})]})]})}const Pv=function(){const[e,t]=(0,r.useState)(!1),[n,i]=(0,r.useState)(null),[o,s]=(0,r.useState)("extraction"),[a,l]=(0,r.useState)({text:"",type:"info",visible:!1}),c=(0,r.useCallback)((function(e){l({text:e,type:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",visible:!0}),setTimeout((()=>l((e=>u(u({},e),{},{visible:!1})))),7e3)}),[]),d=(0,r.useCallback)((e=>{s(e),c("Navigasi ke halaman ".concat("extraction"===e?"Ekstraksi":"Riwayat","."),"info")}),[c]);return(0,r.useEffect)((()=>{"true"===localStorage.getItem("isLoggedIn")&&(t(!0),i("admin-user-123"))}),[]),(0,Tv.jsx)(Tv.Fragment,{children:e?(0,Tv.jsxs)(Tv.Fragment,{children:["extraction"===o?(0,Tv.jsx)(Rv,{showStatus:c,userId:n,handleLogout:()=>{localStorage.removeItem("isLoggedIn"),t(!1),i(null),c("Anda telah berhasil Logout.","info")},currentPage:o,handleNavigate:d}):(0,Tv.jsx)(Ov,{userId:n,showStatus:c,handleNavigate:d}),(0,Tv.jsx)("div",{id:"status-message",className:"fixed bottom-6 right-6 z-50 p-4 border rounded-lg text-sm shadow-xl transition-all duration-500 transform ".concat(a.visible?"opacity-100 translate-y-0":"opacity-0 translate-y-12 pointer-events-none"," ").concat("success"===a.type?"border-green-400 bg-green-100 text-green-800":"error"===a.type?"border-red-400 bg-red-100 text-red-800":"border-blue-400 bg-blue-100 text-blue-800"),role:"alert",children:a.text})]}):(0,Tv.jsx)(Dv,{handleLogin:(e,n)=>{"admin"===e&&"1234"===n?(t(!0),i("admin-user-123"),localStorage.setItem("isLoggedIn","true"),c("Login Berhasil! Selamat datang di Dashboard.","success")):(t(!1),c("Gagal Login. Username atau Password salah.","error"))},statusMessage:a})})};var Mv,Lv,Uv,Fv,jv=function(e,t){return{name:e,value:void 0===t?-1:t,delta:0,entries:[],id:"v2-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12)}},Vv=function(e,t){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){if("first-input"===e&&!("PerformanceEventTiming"in self))return;var n=new PerformanceObserver((function(e){return e.getEntries().map(t)}));return n.observe({type:e,buffered:!0}),n}}catch(e){}},qv=function(e,t){var n=function n(r){"pagehide"!==r.type&&"hidden"!==document.visibilityState||(e(r),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)},Bv=function(e){addEventListener("pageshow",(function(t){t.persisted&&e(t)}),!0)},Hv=function(e,t,n){var r;return function(i){t.value>=0&&(i||n)&&(t.delta=t.value-(r||0),(t.delta||void 0===r)&&(r=t.value,e(t)))}},Gv=-1,zv=function(){return"hidden"===document.visibilityState?0:1/0},Wv=function(){qv((function(e){var t=e.timeStamp;Gv=t}),!0)},Kv=function(){return Gv<0&&(Gv=zv(),Wv(),Bv((function(){setTimeout((function(){Gv=zv(),Wv()}),0)}))),{get firstHiddenTime(){return Gv}}},Jv=!1,Yv=-1,Qv=function(e,t){Jv||(function(e,t){var n,r=Kv(),i=jv("FCP"),o=function(e){"first-contentful-paint"===e.name&&(a&&a.disconnect(),e.startTime<r.firstHiddenTime&&(i.value=e.startTime,i.entries.push(e),n(!0)))},s=window.performance&&performance.getEntriesByName&&performance.getEntriesByName("first-contentful-paint")[0],a=s?null:Vv("paint",o);(s||a)&&(n=Hv(e,i,t),s&&o(s),Bv((function(r){i=jv("FCP"),n=Hv(e,i,t),requestAnimationFrame((function(){requestAnimationFrame((function(){i.value=performance.now()-r.timeStamp,n(!0)}))}))})))}((function(e){Yv=e.value})),Jv=!0);var n,r=function(t){Yv>-1&&e(t)},i=jv("CLS",0),o=0,s=[],a=function(e){if(!e.hadRecentInput){var t=s[0],r=s[s.length-1];o&&e.startTime-r.startTime<1e3&&e.startTime-t.startTime<5e3?(o+=e.value,s.push(e)):(o=e.value,s=[e]),o>i.value&&(i.value=o,i.entries=s,n())}},l=Vv("layout-shift",a);l&&(n=Hv(r,i,t),qv((function(){l.takeRecords().map(a),n(!0)})),Bv((function(){o=0,Yv=-1,i=jv("CLS",0),n=Hv(r,i,t)})))},Xv={passive:!0,capture:!0},$v=new Date,Zv=function(e,t){Mv||(Mv=t,Lv=e,Uv=new Date,nb(removeEventListener),eb())},eb=function(){if(Lv>=0&&Lv<Uv-$v){var e={entryType:"first-input",name:Mv.type,target:Mv.target,cancelable:Mv.cancelable,startTime:Mv.timeStamp,processingStart:Mv.timeStamp+Lv};Fv.forEach((function(t){t(e)})),Fv=[]}},tb=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?function(e,t){var n=function(){Zv(e,t),i()},r=function(){i()},i=function(){removeEventListener("pointerup",n,Xv),removeEventListener("pointercancel",r,Xv)};addEventListener("pointerup",n,Xv),addEventListener("pointercancel",r,Xv)}(t,e):Zv(t,e)}},nb=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return e(t,tb,Xv)}))},rb={};const ib=e=>{e&&e instanceof Function&&(Qv(e),function(e,t){var n,r=Kv(),i=jv("FID"),o=function(e){e.startTime<r.firstHiddenTime&&(i.value=e.processingStart-e.startTime,i.entries.push(e),n(!0))},s=Vv("first-input",o);n=Hv(e,i,t),s&&qv((function(){s.takeRecords().map(o),s.disconnect()}),!0),s&&Bv((function(){var r;i=jv("FID"),n=Hv(e,i,t),Fv=[],Lv=-1,Mv=null,nb(addEventListener),r=o,Fv.push(r),eb()}))}(e),function(e,t){var n,r=Kv(),i=jv("LCP"),o=function(e){var t=e.startTime;t<r.firstHiddenTime&&(i.value=t,i.entries.push(e),n())},s=Vv("largest-contentful-paint",o);if(s){n=Hv(e,i,t);var a=function(){rb[i.id]||(s.takeRecords().map(o),s.disconnect(),rb[i.id]=!0,n(!0))};["keydown","click"].forEach((function(e){addEventListener(e,a,{once:!0,capture:!0})})),qv(a,!0),Bv((function(r){i=jv("LCP"),n=Hv(e,i,t),requestAnimationFrame((function(){requestAnimationFrame((function(){i.value=performance.now()-r.timeStamp,rb[i.id]=!0,n(!0)}))}))}))}}(e))};i.createRoot(document.getElementById("root")).render((0,Tv.jsx)(r.StrictMode,{children:(0,Tv.jsx)(Pv,{})})),ib()})();
//# sourceMappingURL=main.9ab9c933.js.map