/*! For license information please see main.0d2b284b.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},153:(e,t,n)=>{var r=n(43),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,o={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)s.call(t,r)&&!l.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:c,props:o,_owner:a.current}}t.Fragment=o,t.jsx=u,t.jsxs=u},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var E=b.prototype=new v;E.constructor=b,m(E,y.prototype),E.isPureReactComponent=!0;var w=Array.isArray,S=Object.prototype.hasOwnProperty,_={current:null},T={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,r){var i,o={},s=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)S.call(t,i)&&!T.hasOwnProperty(i)&&(o[i]=t[i]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];o.children=u}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:n,type:e,key:s,ref:a,props:o,_owner:_.current}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var A=/\/+/g;function x(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,o,s){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return s=s(l=e),e=""===o?"."+x(l,0):o,w(s)?(i="",null!=e&&(i=e.replace(A,"$&/")+"/"),N(s,t,i,"",(function(e){return e}))):null!=s&&(I(s)&&(s=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,i+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(A,"$&/")+"/")+e)),t.push(s)),1;if(l=0,o=""===o?".":o+":",w(e))for(var u=0;u<e.length;u++){var c=o+x(a=e[u],u);l+=N(a,t,i,c,s)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),u=0;!(a=e.next()).done;)l+=N(a=a.value,t,i,c=o+x(a,u++),s);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function k(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function O(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},D={transition:null},P={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:D,ReactCurrentOwner:_};function M(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:k,forEach:function(e,t,n){k(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return k(e,(function(){t++})),t},toArray:function(e){return k(e,(function(e){return e}))||[]},only:function(e){if(!I(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=s,t.PureComponent=b,t.StrictMode=o,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.act=M,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),o=e.key,s=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,a=_.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)S.call(t,u)&&!T.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:n,type:e.type,key:o,ref:s,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:O}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=M,t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,s=i>>>1;r<s;){var a=2*(r+1)-1,l=e[a],u=a+1,c=e[u];if(0>o(l,n))u<i&&0>o(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[a]=n,r=a);else{if(!(u<i&&0>o(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],c=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function E(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function w(e){if(g=!1,E(e),!m)if(null!==r(u))m=!0,D(S);else{var t=r(c);null!==t&&P(w,t.startTime-e)}}function S(e,n){m=!1,g&&(g=!1,v(I),I=-1),p=!0;var o=f;try{for(E(n),h=r(u);null!==h&&(!(h.expirationTime>n)||e&&!N());){var s=h.callback;if("function"===typeof s){h.callback=null,f=h.priorityLevel;var a=s(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?h.callback=a:h===r(u)&&i(u),E(n)}else i(u);h=r(u)}if(null!==h)var l=!0;else{var d=r(c);null!==d&&P(w,d.startTime-n),l=!1}return l}finally{h=null,f=o,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,T=!1,C=null,I=-1,A=5,x=-1;function N(){return!(t.unstable_now()-x<A)}function k(){if(null!==C){var e=t.unstable_now();x=e;var n=!0;try{n=C(!0,e)}finally{n?_():(T=!1,C=null)}}else T=!1}if("function"===typeof b)_=function(){b(k)};else if("undefined"!==typeof MessageChannel){var O=new MessageChannel,R=O.port2;O.port1.onmessage=k,_=function(){R.postMessage(null)}}else _=function(){y(k,0)};function D(e){C=e,T||(T=!0,_())}function P(e,n){I=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,D(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(e.sortIndex=o,n(c,e),null===r(u)&&e===r(c)&&(g?(v(I),I=-1):g=!0,P(w,o-s))):(e.sortIndex=a,n(u,e),m||p||(m=!0,D(S))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},391:(e,t,n)=>{var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},579:(e,t,n)=>{e.exports=n(153)},730:(e,t,n)=>{var r=n(43),i=n(853);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function l(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(a[e]=t,e=0;e<t.length;e++)s.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,o,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var E=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),S=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),A=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var P=Symbol.iterator;function M(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=P&&e[P]||e["@@iterator"])?e:null}var L,U=Object.assign;function F(e){if(void 0===L)try{throw Error()}catch(Yv){var t=Yv.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var j=!1;function V(e,t){if(!e||j)return"";j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(cs){var r=cs}Reflect.construct(e,[],t)}else{try{t.call()}catch(cs){r=cs}e.call(t.prototype)}else{try{throw Error()}catch(cs){r=cs}e()}}catch(cs){if(cs&&r&&"string"===typeof cs.stack){for(var i=cs.stack.split("\n"),o=r.stack.split("\n"),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(1!==s||1!==a)do{if(s--,0>--a||i[s]!==o[a]){var l="\n"+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=s&&0<=a);break}}}finally{j=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function q(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case S:return"Portal";case C:return"Profiler";case T:return"StrictMode";case N:return"Suspense";case k:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case A:return(e.displayName||"Context")+".Consumer";case I:return(e._context.displayName||"Context")+".Provider";case x:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case O:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return B(e(t))}catch(Yv){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function G(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function z(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=z(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=z(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function J(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(Cc){return e.body}}function Y(e,t){var n=t.checked;return U({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Q(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=G(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function $(e,t){X(e,t);var n=G(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,G(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&J(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+G(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return U({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:G(n)}}function oe(e,t){var n=G(t.value),r=G(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,ce=function(e){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction((function(){return e(t,n)}))}:e}((function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}));function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var he={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function pe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||he.hasOwnProperty(e)&&he[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=pe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(he).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),he[t]=he[e]}))}));var ge=U({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function ve(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function Ee(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,Se=null,_e=null;function Te(e){if(e=vi(e)){if("function"!==typeof we)throw Error(o(280));var t=e.stateNode;t&&(t=Ei(t),we(e.stateNode,e.type,t))}}function Ce(e){Se?_e?_e.push(e):_e=[e]:Se=e}function Ie(){if(Se){var e=Se,t=_e;if(_e=Se=null,Te(e),t)for(e=0;e<t.length;e++)Te(t[e])}}function Ae(e,t){return e(t)}function xe(){}var Ne=!1;function ke(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return Ae(e,t,n)}finally{Ne=!1,(null!==Se||null!==_e)&&(xe(),Ie())}}function Oe(e,t){var n=e.stateNode;if(null===n)return null;var r=Ei(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Re=!1;if(c)try{var De={};Object.defineProperty(De,"passive",{get:function(){Re=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(Wv){Re=!1}function Pe(e,t,n,r,i,o,s,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch($v){this.onError($v)}}var Me=!1,Le=null,Ue=!1,Fe=null,je={onError:function(e){Me=!0,Le=e}};function Ve(e,t,n,r,i,o,s,a,l){Me=!1,Le=null,Pe.apply(je,arguments)}function qe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Be(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(qe(e)!==e)throw Error(o(188))}function Ge(e){return e=function(e){var t=e.alternate;if(!t){if(null===(t=qe(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return He(i),e;if(s===r)return He(i),t;s=s.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e),null!==e?ze(e):null}function ze(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=ze(e);if(null!==t)return t;e=e.sibling}return null}var We=i.unstable_scheduleCallback,Ke=i.unstable_cancelCallback,Je=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Qe=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,$e=i.unstable_ImmediatePriority,Ze=i.unstable_UserBlockingPriority,et=i.unstable_NormalPriority,tt=i.unstable_LowPriority,nt=i.unstable_IdlePriority,rt=null,it=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/at|0)|0},st=Math.log,at=Math.LN2;var lt=64,ut=4194304;function ct(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,s=268435455&n;if(0!==s){var a=s&~i;0!==a?r=ct(a):0!==(o&=s)&&(r=ct(o))}else 0!==(s=n&~i)?r=ct(s):0!==o&&(r=ct(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ht(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function pt(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var vt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var Et,wt,St,_t,Tt,Ct=!1,It=[],At=null,xt=null,Nt=null,kt=new Map,Ot=new Map,Rt=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pt(e,t){switch(e){case"focusin":case"focusout":At=null;break;case"dragenter":case"dragleave":xt=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":kt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function Mt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=vi(t))&&wt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Lt(e){var t=yi(e.target);if(null!==t){var n=qe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Be(n)))return e.blockedOn=t,void Tt(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=vi(n))&&wt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ft(e,t,n){Ut(e)&&n.delete(t)}function jt(){Ct=!1,null!==At&&Ut(At)&&(At=null),null!==xt&&Ut(xt)&&(xt=null),null!==Nt&&Ut(Nt)&&(Nt=null),kt.forEach(Ft),Ot.forEach(Ft)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,jt)))}function qt(e){function t(t){return Vt(t,e)}if(0<It.length){Vt(It[0],e);for(var n=1;n<It.length;n++){var r=It[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==At&&Vt(At,e),null!==xt&&Vt(xt,e),null!==Nt&&Vt(Nt,e),kt.forEach(t),Ot.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Lt(n),null===n.blockedOn&&Rt.shift()}var Bt=E.ReactCurrentBatchConfig,Ht=!0;function Gt(e,t,n,r){var i=vt,o=Bt.transition;Bt.transition=null;try{vt=1,Wt(e,t,n,r)}finally{vt=i,Bt.transition=o}}function zt(e,t,n,r){var i=vt,o=Bt.transition;Bt.transition=null;try{vt=4,Wt(e,t,n,r)}finally{vt=i,Bt.transition=o}}function Wt(e,t,n,r){if(Ht){var i=Jt(e,t,n,r);if(null===i)Hr(e,t,r,Kt,n),Pt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return At=Mt(At,e,t,n,r,i),!0;case"dragenter":return xt=Mt(xt,e,t,n,r,i),!0;case"mouseover":return Nt=Mt(Nt,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return kt.set(o,Mt(kt.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Ot.set(o,Mt(Ot.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Pt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var o=vi(i);if(null!==o&&Et(o),null===(o=Jt(e,t,n,r))&&Hr(e,t,r,Kt,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Kt=null;function Jt(e,t,n,r){if(Kt=null,null!==(e=yi(e=Ee(r))))if(null===(t=qe(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Be(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case $e:return 1;case Ze:return 4;case et:case tt:return 16;case nt:return 536870912;default:return 16}default:return 16}}var Qt=null,Xt=null,$t=null;function Zt(){if($t)return $t;var e,t,n=Xt,r=n.length,i="value"in Qt?Qt.value:Qt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[o-t];t++);return $t=i.slice(e,1<t?1-t:void 0)}function en(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function tn(){return!0}function nn(){return!1}function rn(e){function t(t,n,r,i,o){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?tn:nn,this.isPropagationStopped=nn,this}return U(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=tn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=tn)},persist:function(){},isPersistent:tn}),t}var on,sn,an,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=rn(ln),cn=U({},ln,{view:0,detail:0}),dn=rn(cn),hn=U({},cn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==an&&(an&&"mousemove"===e.type?(on=e.screenX-an.screenX,sn=e.screenY-an.screenY):sn=on=0,an=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),fn=rn(hn),pn=rn(U({},hn,{dataTransfer:0})),mn=rn(U({},cn,{relatedTarget:0})),gn=rn(U({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=U({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vn=rn(yn),bn=rn(U({},ln,{data:0})),En={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _n(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function Tn(){return _n}var Cn=U({},cn,{key:function(e){if(e.key){var t=En[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=en(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?en(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?en(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),In=rn(Cn),An=rn(U({},hn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),xn=rn(U({},cn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),Nn=rn(U({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),kn=U({},hn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),On=rn(kn),Rn=[9,13,27,32],Dn=c&&"CompositionEvent"in window,Pn=null;c&&"documentMode"in document&&(Pn=document.documentMode);var Mn=c&&"TextEvent"in window&&!Pn,Ln=c&&(!Dn||Pn&&8<Pn&&11>=Pn),Un=String.fromCharCode(32),Fn=!1;function jn(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var qn=!1;var Bn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Bn[e.type]:"textarea"===t}function Gn(e,t,n,r){Ce(r),0<(t=zr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var zn=null,Wn=null;function Kn(e){Ur(e,0)}function Jn(e){if(K(bi(e)))return e}function Yn(e,t){if("change"===e)return t}var Qn=!1;if(c){var Xn;if(c){var $n="oninput"in document;if(!$n){var Zn=document.createElement("div");Zn.setAttribute("oninput","return;"),$n="function"===typeof Zn.oninput}Xn=$n}else Xn=!1;Qn=Xn&&(!document.documentMode||9<document.documentMode)}function er(){zn&&(zn.detachEvent("onpropertychange",tr),Wn=zn=null)}function tr(e){if("value"===e.propertyName&&Jn(Wn)){var t=[];Gn(t,Wn,e,Ee(e)),ke(Kn,t)}}function nr(e,t,n){"focusin"===e?(er(),Wn=n,(zn=t).attachEvent("onpropertychange",tr)):"focusout"===e&&er()}function rr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn(Wn)}function ir(e,t){if("click"===e)return Jn(t)}function or(e,t){if("input"===e||"change"===e)return Jn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ar(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function cr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?cr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=J();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=J((e=t.contentWindow).document)}return t}function hr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&cr(n.ownerDocument.documentElement,n)){if(null!==r&&hr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=ur(n,o);var s=ur(n,r);i&&s&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var pr=c&&"documentMode"in document&&11>=document.documentMode,mr=null,gr=null,yr=null,vr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;vr||null==mr||mr!==J(r)||("selectionStart"in(r=mr)&&hr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&ar(yr,r)||(yr=r,0<(r=zr(gr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function Er(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wr={animationend:Er("Animation","AnimationEnd"),animationiteration:Er("Animation","AnimationIteration"),animationstart:Er("Animation","AnimationStart"),transitionend:Er("Transition","TransitionEnd")},Sr={},_r={};function Tr(e){if(Sr[e])return Sr[e];if(!wr[e])return e;var t,n=wr[e];for(t in n)if(n.hasOwnProperty(t)&&t in _r)return Sr[e]=n[t];return e}c&&(_r=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);var Cr=Tr("animationend"),Ir=Tr("animationiteration"),Ar=Tr("animationstart"),xr=Tr("transitionend"),Nr=new Map,kr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(e,t){Nr.set(e,t),l(t,[e])}for(var Rr=0;Rr<kr.length;Rr++){var Dr=kr[Rr];Or(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Or(Cr,"onAnimationEnd"),Or(Ir,"onAnimationIteration"),Or(Ar,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(xr,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pr));function Lr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,s,a,l,u){if(Ve.apply(this,arguments),Me){if(!Me)throw Error(o(198));var c=Le;Me=!1,Le=null,Ue||(Ue=!0,Fe=c)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;Lr(i,a,u),o=l}else for(s=0;s<r.length;s++){if(l=(a=r[s]).instance,u=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;Lr(i,a,u),o=l}}}if(Ue)throw e=Fe,Ue=!1,Fe=null,e}function Fr(e,t){var n=t[pi];void 0===n&&(n=t[pi]=new Set);var r=e+"__bubble";n.has(r)||(Br(t,e,2,!1),n.add(r))}function jr(e,t,n){var r=0;t&&(r|=4),Br(n,e,r,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function qr(e){if(!e[Vr]){e[Vr]=!0,s.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||jr(t,!1,e),jr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vr]||(t[Vr]=!0,jr("selectionchange",!1,t))}}function Br(e,t,n,r){switch(Yt(t)){case 1:var i=Gt;break;case 4:i=zt;break;default:i=Wt}n=i.bind(null,t,n,e),i=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===s)for(s=r.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;s=s.return}for(;null!==a;){if(null===(s=yi(a)))return;if(5===(l=s.tag)||6===l){r=o=s;continue e}a=a.parentNode}}r=r.return}ke((function(){var r=o,i=Ee(n),s=[];e:{var a=Nr.get(e);if(void 0!==a){var l=un,u=e;switch(e){case"keypress":if(0===en(n))break e;case"keydown":case"keyup":l=In;break;case"focusin":u="focus",l=mn;break;case"focusout":u="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=pn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=xn;break;case Cr:case Ir:case Ar:l=gn;break;case xr:l=Nn;break;case"scroll":l=dn;break;case"wheel":l=On;break;case"copy":case"cut":case"paste":l=vn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=An}var c=0!==(4&t),d=!c&&"scroll"===e,h=c?null!==a?a+"Capture":null:a;c=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=Oe(p,h))&&c.push(Gr(p,m,f)))),d)break;p=p.return}0<c.length&&(a=new l(a,u,null,n,i),s.push({event:a,listeners:c}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===be||!(u=n.relatedTarget||n.fromElement)||!yi(u)&&!u[fi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?yi(u):null)&&(u!==(d=qe(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=fn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=An,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?a:bi(l),f=null==u?a:bi(u),(a=new c(m,p+"leave",l,n,i)).target=d,a.relatedTarget=f,m=null,yi(i)===r&&((c=new c(h,p+"enter",u,n,i)).target=f,c.relatedTarget=d,m=c),d=m,l&&u)e:{for(h=u,p=0,f=c=l;f;f=Wr(f))p++;for(f=0,m=h;m;m=Wr(m))f++;for(;0<p-f;)c=Wr(c),p--;for(;0<f-p;)h=Wr(h),f--;for(;p--;){if(c===h||null!==h&&c===h.alternate)break e;c=Wr(c),h=Wr(h)}c=null}else c=null;null!==l&&Kr(s,a,l,c,!1),null!==u&&null!==d&&Kr(s,d,u,c,!0)}if("select"===(l=(a=r?bi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Yn;else if(Hn(a))if(Qn)g=or;else{g=rr;var y=nr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=ir);switch(g&&(g=g(e,r))?Gn(s,g,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=r?bi(r):window,e){case"focusin":(Hn(y)||"true"===y.contentEditable)&&(mr=y,gr=r,yr=null);break;case"focusout":yr=gr=mr=null;break;case"mousedown":vr=!0;break;case"contextmenu":case"mouseup":case"dragend":vr=!1,br(s,n,i);break;case"selectionchange":if(pr)break;case"keydown":case"keyup":br(s,n,i)}var v;if(Dn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else qn?jn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Ln&&"ko"!==n.locale&&(qn||"onCompositionStart"!==b?"onCompositionEnd"===b&&qn&&(v=Zt()):(Xt="value"in(Qt=i)?Qt.value:Qt.textContent,qn=!0)),0<(y=zr(r,b)).length&&(b=new bn(b,e,null,n,i),s.push({event:b,listeners:y}),v?b.data=v:null!==(v=Vn(n))&&(b.data=v))),(v=Mn?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(Fn=!0,Un);case"textInput":return(e=t.data)===Un&&Fn?null:e;default:return null}}(e,n):function(e,t){if(qn)return"compositionend"===e||!Dn&&jn(e,t)?(e=Zt(),$t=Xt=Qt=null,qn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ln&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=zr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),s.push({event:i,listeners:r}),i.data=v))}Ur(s,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function zr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Oe(e,n))&&r.unshift(Gr(e,o,i)),null!=(o=Oe(e,t))&&r.push(Gr(e,o,i))),e=e.return}return r}function Wr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Kr(e,t,n,r,i){for(var o=t._reactName,s=[];null!==n&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==u&&(a=u,i?null!=(l=Oe(n,o))&&s.unshift(Gr(n,l,a)):i||null!=(l=Oe(n,o))&&s.push(Gr(n,l,a))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var Jr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Qr(e){return("string"===typeof e?e:""+e).replace(Jr,"\n").replace(Yr,"")}function Xr(e,t,n){if(t=Qr(t),Qr(e)!==t&&n)throw Error(o(425))}function $r(){}var Zr=null,ei=null;function ti(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ni="function"===typeof setTimeout?setTimeout:void 0,ri="function"===typeof clearTimeout?clearTimeout:void 0,ii="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ii?function(e){return ii.resolve(null).then(e).catch(si)}:ni;function si(e){setTimeout((function(){throw e}))}function ai(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void qt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);qt(t)}function li(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ci=Math.random().toString(36).slice(2),di="__reactFiber$"+ci,hi="__reactProps$"+ci,fi="__reactContainer$"+ci,pi="__reactEvents$"+ci,mi="__reactListeners$"+ci,gi="__reactHandles$"+ci;function yi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[di])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function vi(e){return!(e=e[di]||e[fi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function Ei(e){return e[hi]||null}var wi=[],Si=-1;function _i(e){return{current:e}}function Ti(e){0>Si||(e.current=wi[Si],wi[Si]=null,Si--)}function Ci(e,t){Si++,wi[Si]=e.current,e.current=t}var Ii={},Ai=_i(Ii),xi=_i(!1),Ni=Ii;function ki(e,t){var n=e.type.contextTypes;if(!n)return Ii;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Oi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ri(){Ti(xi),Ti(Ai)}function Di(e,t,n){if(Ai.current!==Ii)throw Error(o(168));Ci(Ai,t),Ci(xi,n)}function Pi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(o(108,H(e)||"Unknown",i));return U({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ii,Ni=Ai.current,Ci(Ai,e),Ci(xi,xi.current),!0}function Li(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Pi(e,t,Ni),r.__reactInternalMemoizedMergedChildContext=e,Ti(xi),Ti(Ai),Ci(Ai,e)):Ti(xi),Ci(xi,n)}var Ui=null,Fi=!1,ji=!1;function Vi(e){null===Ui?Ui=[e]:Ui.push(e)}function qi(){if(!ji&&null!==Ui){ji=!0;var e=0,t=vt;try{var n=Ui;for(vt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,Fi=!1}catch(qv){throw null!==Ui&&(Ui=Ui.slice(e+1)),We($e,qi),qv}finally{vt=t,ji=!1}}return null}var Bi=[],Hi=0,Gi=null,zi=0,Wi=[],Ki=0,Ji=null,Yi=1,Qi="";function Xi(e,t){Bi[Hi++]=zi,Bi[Hi++]=Gi,Gi=e,zi=t}function $i(e,t,n){Wi[Ki++]=Yi,Wi[Ki++]=Qi,Wi[Ki++]=Ji,Ji=e;var r=Yi;e=Qi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var o=32-ot(t)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Yi=1<<32-ot(t)+i|n<<i|r,Qi=o+e}else Yi=1<<o|n<<i|r,Qi=e}function Zi(e){null!==e.return&&(Xi(e,1),$i(e,1,0))}function eo(e){for(;e===Gi;)Gi=Bi[--Hi],Bi[Hi]=null,zi=Bi[--Hi],Bi[Hi]=null;for(;e===Ji;)Ji=Wi[--Ki],Wi[Ki]=null,Qi=Wi[--Ki],Wi[Ki]=null,Yi=Wi[--Ki],Wi[Ki]=null}var to=null,no=null,ro=!1,io=null;function oo(e,t){var n=Mu(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function so(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,to=e,no=li(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,to=e,no=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ji?{id:Yi,overflow:Qi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Mu(18,null,null,0)).stateNode=t,n.return=e,e.child=n,to=e,no=null,!0);default:return!1}}function ao(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function lo(e){if(ro){var t=no;if(t){var n=t;if(!so(e,t)){if(ao(e))throw Error(o(418));t=li(n.nextSibling);var r=to;t&&so(e,t)?oo(r,n):(e.flags=-4097&e.flags|2,ro=!1,to=e)}}else{if(ao(e))throw Error(o(418));e.flags=-4097&e.flags|2,ro=!1,to=e}}}function uo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;to=e}function co(e){if(e!==to)return!1;if(!ro)return uo(e),ro=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ti(e.type,e.memoizedProps)),t&&(t=no)){if(ao(e))throw ho(),Error(o(418));for(;t;)oo(e,t),t=li(t.nextSibling)}if(uo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){no=li(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}no=null}}else no=to?li(e.stateNode.nextSibling):null;return!0}function ho(){for(var e=no;e;)e=li(e.nextSibling)}function fo(){no=to=null,ro=!1}function po(e){null===io?io=[e]:io.push(e)}var mo=E.ReactCurrentBatchConfig;function go(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=i.refs;null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function yo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function vo(e){return(0,e._init)(e._payload)}function bo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Uu(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=qu(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){var o=n.type;return o===_?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===R&&vo(o)===t.type)?((r=i(t,n.props)).ref=go(e,t,n),r.return=e,r):((r=Fu(n.type,n.key,n.props,null,e.mode,r)).ref=go(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Bu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,o){return null===t||7!==t.tag?((t=ju(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=qu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Fu(t.type,t.key,t.props,null,e.mode,n)).ref=go(e,null,t),n.return=e,n;case S:return(t=Bu(t,e.mode,n)).return=e,t;case R:return h(e,(0,t._init)(t._payload),n)}if(te(t)||M(t))return(t=ju(t,e.mode,n,null)).return=e,t;yo(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?u(e,t,n,r):null;case S:return n.key===i?c(e,t,n,r):null;case R:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||M(n))return null!==i?null:d(e,t,n,r,null);yo(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case S:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||M(r))return d(t,e=e.get(n)||null,r,i,null);yo(t,r)}return null}function m(i,o,a,l){for(var u=null,c=null,d=o,m=o=0,g=null;null!==d&&m<a.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var y=f(i,d,a[m],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(i,d),o=s(y,o,m),null===c?u=y:c.sibling=y,c=y,d=g}if(m===a.length)return n(i,d),ro&&Xi(i,m),u;if(null===d){for(;m<a.length;m++)null!==(d=h(i,a[m],l))&&(o=s(d,o,m),null===c?u=d:c.sibling=d,c=d);return ro&&Xi(i,m),u}for(d=r(i,d);m<a.length;m++)null!==(g=p(d,i,m,a[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),o=s(g,o,m),null===c?u=g:c.sibling=g,c=g);return e&&d.forEach((function(e){return t(i,e)})),ro&&Xi(i,m),u}function g(i,a,l,u){var c=M(l);if("function"!==typeof c)throw Error(o(150));if(null==(l=c.call(l)))throw Error(o(151));for(var d=c=null,m=a,g=a=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=f(i,m,v.value,u);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(i,m),a=s(b,a,g),null===d?c=b:d.sibling=b,d=b,m=y}if(v.done)return n(i,m),ro&&Xi(i,g),c;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=h(i,v.value,u))&&(a=s(v,a,g),null===d?c=v:d.sibling=v,d=v);return ro&&Xi(i,g),c}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=p(m,i,g,v.value,u))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=s(v,a,g),null===d?c=v:d.sibling=v,d=v);return e&&m.forEach((function(e){return t(i,e)})),ro&&Xi(i,g),c}return function e(r,o,s,l){if("object"===typeof s&&null!==s&&s.type===_&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case w:e:{for(var u=s.key,c=o;null!==c;){if(c.key===u){if((u=s.type)===_){if(7===c.tag){n(r,c.sibling),(o=i(c,s.props.children)).return=r,r=o;break e}}else if(c.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===R&&vo(u)===c.type){n(r,c.sibling),(o=i(c,s.props)).ref=go(r,c,s),o.return=r,r=o;break e}n(r,c);break}t(r,c),c=c.sibling}s.type===_?((o=ju(s.props.children,r.mode,l,s.key)).return=r,r=o):((l=Fu(s.type,s.key,s.props,null,r.mode,l)).ref=go(r,o,s),l.return=r,r=l)}return a(r);case S:e:{for(c=s.key;null!==o;){if(o.key===c){if(4===o.tag&&o.stateNode.containerInfo===s.containerInfo&&o.stateNode.implementation===s.implementation){n(r,o.sibling),(o=i(o,s.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=Bu(s,r.mode,l)).return=r,r=o}return a(r);case R:return e(r,o,(c=s._init)(s._payload),l)}if(te(s))return m(r,o,s,l);if(M(s))return g(r,o,s,l);yo(r,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,s)).return=r,r=o):(n(r,o),(o=qu(s,r.mode,l)).return=r,r=o),a(r)):n(r,o)}}var Eo=bo(!0),wo=bo(!1),So=_i(null),_o=null,To=null,Co=null;function Io(){Co=To=_o=null}function Ao(e){var t=So.current;Ti(So),e._currentValue=t}function xo(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function No(e,t){_o=e,Co=To=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Sa=!0),e.firstContext=null)}function ko(e){var t=e._currentValue;if(Co!==e)if(e={context:e,memoizedValue:t,next:null},null===To){if(null===_o)throw Error(o(308));To=e,_o.dependencies={lanes:0,firstContext:e}}else To=To.next=e;return t}var Oo=null;function Ro(e){null===Oo?Oo=[e]:Oo.push(e)}function Do(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ro(t)):(n.next=i.next,i.next=n),t.interleaved=n,Po(e,r)}function Po(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Mo=!1;function Lo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Uo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function jo(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Rl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Po(e,n)}return null===(i=r.interleaved)?(t.next=t,Ro(r)):(t.next=i.next,i.next=t),r.interleaved=t,Po(e,n)}function Vo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function qo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Bo(e,t,n,r){var i=e.updateQueue;Mo=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,u=l.next;l.next=null,null===s?o=u:s.next=u,s=l;var c=e.alternate;null!==c&&((a=(c=c.updateQueue).lastBaseUpdate)!==s&&(null===a?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(null!==o){var d=i.baseState;for(s=0,c=u=l=null,a=o;;){var h=a.lane,f=a.eventTime;if((r&h)===h){null!==c&&(c=c.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(h=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=m.payload)?p.call(f,d,h):p)||void 0===h)break e;d=U({},d,h);break e;case 2:Mo=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===c?(u=c=f,l=d):c=c.next=f,s|=h;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(h=a).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===c&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{s|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);Vl|=s,e.lanes=s,e.memoizedState=d}}function Ho(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var Go={},zo=_i(Go),Wo=_i(Go),Ko=_i(Go);function Jo(e){if(e===Go)throw Error(o(174));return e}function Yo(e,t){switch(Ci(Ko,t),Ci(Wo,e),Ci(zo,Go),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ti(zo),Ci(zo,t)}function Qo(){Ti(zo),Ti(Wo),Ti(Ko)}function Xo(e){Jo(Ko.current);var t=Jo(zo.current),n=le(t,e.type);t!==n&&(Ci(Wo,e),Ci(zo,n))}function $o(e){Wo.current===e&&(Ti(zo),Ti(Wo))}var Zo=_i(0);function es(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ts=[];function ns(){for(var e=0;e<ts.length;e++)ts[e]._workInProgressVersionPrimary=null;ts.length=0}var rs=E.ReactCurrentDispatcher,is=E.ReactCurrentBatchConfig,os=0,as=null,ls=null,us=null,ds=!1,hs=!1,fs=0,ps=0;function ms(){throw Error(o(321))}function gs(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function ys(e,t,n,r,i,s){if(os=s,as=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,rs.current=null===e||null===e.memoizedState?na:ra,e=n(r,i),hs){s=0;do{if(hs=!1,fs=0,25<=s)throw Error(o(301));s+=1,us=ls=null,t.updateQueue=null,rs.current=ia,e=n(r,i)}while(hs)}if(rs.current=ta,t=null!==ls&&null!==ls.next,os=0,us=ls=as=null,ds=!1,t)throw Error(o(300));return e}function vs(){var e=0!==fs;return fs=0,e}function Es(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===us?as.memoizedState=us=e:us=us.next=e,us}function ws(){if(null===ls){var e=as.alternate;e=null!==e?e.memoizedState:null}else e=ls.next;var t=null===us?as.memoizedState:us.next;if(null!==t)us=t,ls=e;else{if(null===e)throw Error(o(310));e={memoizedState:(ls=e).memoizedState,baseState:ls.baseState,baseQueue:ls.baseQueue,queue:ls.queue,next:null},null===us?as.memoizedState=us=e:us=us.next=e}return us}function Ss(e,t){return"function"===typeof t?t(e):t}function Ts(e){var t=ws(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=ls,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(null!==i){s=i.next,r=r.baseState;var l=a=null,u=null,c=s;do{var d=c.lane;if((os&d)===d)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=h,a=r):u=u.next=h,as.lanes|=d,Vl|=d}c=c.next}while(null!==c&&c!==s);null===u?a=r:u.next=l,sr(r,t.memoizedState)||(Sa=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=u,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{s=i.lane,as.lanes|=s,Vl|=s,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Cs(e){var t=ws(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=e(s,a.action),a=a.next}while(a!==i);sr(s,t.memoizedState)||(Sa=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Is(){}function As(e,t){var n=as,r=ws(),i=t(),s=!sr(r.memoizedState,i);if(s&&(r.memoizedState=i,Sa=!0),r=r.queue,js(ks.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||null!==us&&1&us.memoizedState.tag){if(n.flags|=2048,Ps(9,Ns.bind(null,n,r,i,t),void 0,null),null===Dl)throw Error(o(349));0!==(30&os)||xs(n,t,i)}return i}function xs(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=as.updateQueue)?(t={lastEffect:null,stores:null},as.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ns(e,t,n,r){t.value=n,t.getSnapshot=r,Os(t)&&Rs(e)}function ks(e,t,n){return n((function(){Os(t)&&Rs(e)}))}function Os(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Rs(e){var t=Po(e,1);null!==t&&su(t,e,1,-1)}function Ds(e){var t=Es();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ss,lastRenderedState:e},t.queue=e,e=e.dispatch=Xs.bind(null,as,e),[t.memoizedState,e]}function Ps(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=as.updateQueue)?(t={lastEffect:null,stores:null},as.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ms(){return ws().memoizedState}function Ls(e,t,n,r){var i=Es();as.flags|=e,i.memoizedState=Ps(1|t,n,void 0,void 0===r?null:r)}function Us(e,t,n,r){var i=ws();r=void 0===r?null:r;var o=void 0;if(null!==ls){var s=ls.memoizedState;if(o=s.destroy,null!==r&&gs(r,s.deps))return void(i.memoizedState=Ps(t,n,o,r))}as.flags|=e,i.memoizedState=Ps(1|t,n,o,r)}function Fs(e,t){return Ls(8390656,8,e,t)}function js(e,t){return Us(2048,8,e,t)}function Vs(e,t){return Us(4,2,e,t)}function qs(e,t){return Us(4,4,e,t)}function Bs(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Hs(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Us(4,4,Bs.bind(null,t,e),n)}function Gs(){}function zs(e,t){var n=ws();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&gs(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ws(e,t){var n=ws();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&gs(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ks(e,t,n){return 0===(21&os)?(e.baseState&&(e.baseState=!1,Sa=!0),e.memoizedState=n):(sr(n,t)||(n=pt(),as.lanes|=n,Vl|=n,e.baseState=!0),t)}function Js(e,t){var n=vt;vt=0!==n&&4>n?n:4,e(!0);var r=is.transition;is.transition={};try{e(!1),t()}finally{vt=n,is.transition=r}}function Ys(){return ws().memoizedState}function Qs(e,t,n){var r=ou(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},$s(e))Zs(t,n);else if(null!==(n=Do(e,t,n,r))){su(n,e,r,iu()),ea(n,t,r)}}function Xs(e,t,n){var r=ou(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if($s(e))Zs(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,sr(a,s)){var l=t.interleaved;return null===l?(i.next=i,Ro(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(cs){}null!==(n=Do(e,t,i,r))&&(su(n,e,r,i=iu()),ea(n,t,r))}}function $s(e){var t=e.alternate;return e===as||null!==t&&t===as}function Zs(e,t){hs=ds=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ea(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var ta={readContext:ko,useCallback:ms,useContext:ms,useEffect:ms,useImperativeHandle:ms,useInsertionEffect:ms,useLayoutEffect:ms,useMemo:ms,useReducer:ms,useRef:ms,useState:ms,useDebugValue:ms,useDeferredValue:ms,useTransition:ms,useMutableSource:ms,useSyncExternalStore:ms,useId:ms,unstable_isNewReconciler:!1},na={readContext:ko,useCallback:function(e,t){return Es().memoizedState=[e,void 0===t?null:t],e},useContext:ko,useEffect:Fs,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ls(4194308,4,Bs.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ls(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ls(4,2,e,t)},useMemo:function(e,t){var n=Es();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Es();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Qs.bind(null,as,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Es().memoizedState=e},useState:Ds,useDebugValue:Gs,useDeferredValue:function(e){return Es().memoizedState=e},useTransition:function(){var e=Ds(!1),t=e[0];return e=Js.bind(null,e[1]),Es().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=as,i=Es();if(ro){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Dl)throw Error(o(349));0!==(30&os)||xs(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Fs(ks.bind(null,r,s,e),[e]),r.flags|=2048,Ps(9,Ns.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Es(),t=Dl.identifierPrefix;if(ro){var n=Qi;t=":"+t+"R"+(n=(Yi&~(1<<32-ot(Yi)-1)).toString(32)+n),0<(n=fs++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ps++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ra={readContext:ko,useCallback:zs,useContext:ko,useEffect:js,useImperativeHandle:Hs,useInsertionEffect:Vs,useLayoutEffect:qs,useMemo:Ws,useReducer:Ts,useRef:Ms,useState:function(){return Ts(Ss)},useDebugValue:Gs,useDeferredValue:function(e){return Ks(ws(),ls.memoizedState,e)},useTransition:function(){return[Ts(Ss)[0],ws().memoizedState]},useMutableSource:Is,useSyncExternalStore:As,useId:Ys,unstable_isNewReconciler:!1},ia={readContext:ko,useCallback:zs,useContext:ko,useEffect:js,useImperativeHandle:Hs,useInsertionEffect:Vs,useLayoutEffect:qs,useMemo:Ws,useReducer:Cs,useRef:Ms,useState:function(){return Cs(Ss)},useDebugValue:Gs,useDeferredValue:function(e){var t=ws();return null===ls?t.memoizedState=e:Ks(t,ls.memoizedState,e)},useTransition:function(){return[Cs(Ss)[0],ws().memoizedState]},useMutableSource:Is,useSyncExternalStore:As,useId:Ys,unstable_isNewReconciler:!1};function oa(e,t){if(e&&e.defaultProps){for(var n in t=U({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function sa(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:U({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var aa={isMounted:function(e){return!!(e=e._reactInternals)&&qe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=iu(),i=ou(e),o=Fo(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=jo(e,o,i))&&(su(t,e,i,r),Vo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=iu(),i=ou(e),o=Fo(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=jo(e,o,i))&&(su(t,e,i,r),Vo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=iu(),r=ou(e),i=Fo(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=jo(e,i,r))&&(su(t,e,r,n),Vo(t,e,r))}};function la(e,t,n,r,i,o,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,s):!t.prototype||!t.prototype.isPureReactComponent||(!ar(n,r)||!ar(i,o))}function ua(e,t,n){var r=!1,i=Ii,o=t.contextType;return"object"===typeof o&&null!==o?o=ko(o):(i=Oi(t)?Ni:Ai.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?ki(e,i):Ii),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=aa,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function ca(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&aa.enqueueReplaceState(t,t.state,null)}function da(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Lo(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=ko(o):(o=Oi(t)?Ni:Ai.current,i.context=ki(e,o)),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(sa(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&aa.enqueueReplaceState(i,i.state,null),Bo(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function ha(e,t){try{var n="",r=t;do{n+=q(r),r=r.return}while(r);var i=n}catch(Qv){i="\nError generating stack: "+Qv.message+"\n"+Qv.stack}return{value:e,source:t,stack:i,digest:null}}function fa(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function pa(e,t){try{console.error(t.value)}catch(Yv){setTimeout((function(){throw Yv}))}}var ma="function"===typeof WeakMap?WeakMap:Map;function ga(e,t,n){(n=Fo(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Jl||(Jl=!0,Yl=r),pa(0,t)},n}function ya(e,t,n){(n=Fo(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){pa(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){pa(0,t),"function"!==typeof r&&(null===Ql?Ql=new Set([this]):Ql.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function va(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ma;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Nu.bind(null,e,t,n),t.then(e,e))}function ba(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function Ea(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fo(-1,1)).tag=2,jo(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var wa=E.ReactCurrentOwner,Sa=!1;function _a(e,t,n,r){t.child=null===e?wo(t,null,n,r):Eo(t,e.child,n,r)}function Ta(e,t,n,r,i){n=n.render;var o=t.ref;return No(t,i),r=ys(e,t,n,r,o,i),n=vs(),null===e||Sa?(ro&&n&&Zi(t),t.flags|=1,_a(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ja(e,t,i))}function Ca(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||Lu(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Fu(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Ia(e,t,o,r,i))}if(o=e.child,0===(e.lanes&i)){var s=o.memoizedProps;if((n=null!==(n=n.compare)?n:ar)(s,r)&&e.ref===t.ref)return Ja(e,t,i)}return t.flags|=1,(e=Uu(o,r)).ref=t.ref,e.return=t,t.child=e}function Ia(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(ar(o,r)&&e.ref===t.ref){if(Sa=!1,t.pendingProps=r=o,0===(e.lanes&i))return t.lanes=e.lanes,Ja(e,t,i);0!==(131072&e.flags)&&(Sa=!0)}}return Na(e,t,n,r,i)}function Aa(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ci(Ul,Ll),Ll|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ci(Ul,Ll),Ll|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Ci(Ul,Ll),Ll|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ci(Ul,Ll),Ll|=r;return _a(e,t,i,n),t.child}function xa(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Na(e,t,n,r,i){var o=Oi(n)?Ni:Ai.current;return o=ki(t,o),No(t,i),n=ys(e,t,n,r,o,i),r=vs(),null===e||Sa?(ro&&r&&Zi(t),t.flags|=1,_a(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ja(e,t,i))}function ka(e,t,n,r,i){if(Oi(n)){var o=!0;Mi(t)}else o=!1;if(No(t,i),null===t.stateNode)Ka(e,t),ua(t,n,r),da(t,n,r,i),r=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,u=n.contextType;"object"===typeof u&&null!==u?u=ko(u):u=ki(t,u=Oi(n)?Ni:Ai.current);var c=n.getDerivedStateFromProps,d="function"===typeof c||"function"===typeof s.getSnapshotBeforeUpdate;d||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==r||l!==u)&&ca(t,s,r,u),Mo=!1;var h=t.memoizedState;s.state=h,Bo(t,r,s,i),l=t.memoizedState,a!==r||h!==l||xi.current||Mo?("function"===typeof c&&(sa(t,n,c,r),l=t.memoizedState),(a=Mo||la(t,n,a,r,h,l,u))?(d||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=u,r=a):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,Uo(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:oa(t.type,a),s.props=u,d=t.pendingProps,h=s.context,"object"===typeof(l=n.contextType)&&null!==l?l=ko(l):l=ki(t,l=Oi(n)?Ni:Ai.current);var f=n.getDerivedStateFromProps;(c="function"===typeof f||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==d||h!==l)&&ca(t,s,r,l),Mo=!1,h=t.memoizedState,s.state=h,Bo(t,r,s,i);var p=t.memoizedState;a!==d||h!==p||xi.current||Mo?("function"===typeof f&&(sa(t,n,f,r),p=t.memoizedState),(u=Mo||la(t,n,u,r,h,p,l)||!1)?(c||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,p,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),s.props=r,s.state=p,s.context=l,r=u):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Oa(e,t,n,r,o,i)}function Oa(e,t,n,r,i,o){xa(e,t);var s=0!==(128&t.flags);if(!r&&!s)return i&&Li(t,n,!1),Ja(e,t,o);r=t.stateNode,wa.current=t;var a=s&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&s?(t.child=Eo(t,e.child,null,o),t.child=Eo(t,null,a,o)):_a(e,t,a,o),t.memoizedState=r.state,i&&Li(t,n,!0),t.child}function Ra(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),Yo(e,t.containerInfo)}function Da(e,t,n,r,i){return fo(),po(i),t.flags|=256,_a(e,t,n,r),t.child}var Pa,Ma,La,Ua,Fa={dehydrated:null,treeContext:null,retryLane:0};function ja(e){return{baseLanes:e,cachePool:null,transitions:null}}function Va(e,t,n){var r,i=t.pendingProps,s=Zo.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&s)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),Ci(Zo,1&s),null===e)return lo(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Vu(l,i,0,null),e=ju(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=ja(n),t.memoizedState=Fa,e):qa(t,l));if(null!==(s=e.memoizedState)&&null!==(r=s.dehydrated))return function(e,t,n,r,i,s,a){if(n)return 256&t.flags?(t.flags&=-257,Ba(e,t,a,r=fa(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=Vu({mode:"visible",children:r.children},i,0,null),(s=ju(s,i,a,null)).flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,0!==(1&t.mode)&&Eo(t,e.child,null,a),t.child.memoizedState=ja(a),t.memoizedState=Fa,s);if(0===(1&t.mode))return Ba(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Ba(e,t,a,r=fa(s=Error(o(419)),r,void 0))}if(l=0!==(a&e.childLanes),Sa||l){if(null!==(r=Dl)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==s.retryLane&&(s.retryLane=i,Po(e,i),su(r,e,i,-1))}return bu(),Ba(e,t,a,r=fa(Error(o(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Ou.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,no=li(i.nextSibling),to=t,ro=!0,io=null,null!==e&&(Wi[Ki++]=Yi,Wi[Ki++]=Qi,Wi[Ki++]=Ji,Yi=e.id,Qi=e.overflow,Ji=t),t=qa(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,s,n);if(a){a=i.fallback,l=t.mode,r=(s=e.child).sibling;var u={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==s?((i=t.child).childLanes=0,i.pendingProps=u,t.deletions=null):(i=Uu(s,u)).subtreeFlags=14680064&s.subtreeFlags,null!==r?a=Uu(r,a):(a=ju(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?ja(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Fa,i}return e=(a=e.child).sibling,i=Uu(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function qa(e,t){return(t=Vu({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ba(e,t,n,r){return null!==r&&po(r),Eo(t,e.child,null,n),(e=qa(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ha(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xo(e.return,t,n)}function Ga(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function za(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(_a(e,t,r.children,n),0!==(2&(r=Zo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ha(e,n,t);else if(19===e.tag)Ha(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ci(Zo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===es(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ga(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===es(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ga(t,!0,n,null,o);break;case"together":Ga(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ka(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ja(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Vl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Uu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Uu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ya(e,t){if(!ro)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Qa(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Xa(e,t,n){var r=t.pendingProps;switch(eo(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qa(t),null;case 1:case 17:return Oi(t.type)&&Ri(),Qa(t),null;case 3:return r=t.stateNode,Qo(),Ti(xi),Ti(Ai),ns(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(co(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==io&&(cu(io),io=null))),Ma(e,t),Qa(t),null;case 5:$o(t);var i=Jo(Ko.current);if(n=t.type,null!==e&&null!=t.stateNode)La(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return Qa(t),null}if(e=Jo(zo.current),co(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[di]=t,r[hi]=s,e=0!==(1&t.mode),n){case"dialog":Fr("cancel",r),Fr("close",r);break;case"iframe":case"object":case"embed":Fr("load",r);break;case"video":case"audio":for(i=0;i<Pr.length;i++)Fr(Pr[i],r);break;case"source":Fr("error",r);break;case"img":case"image":case"link":Fr("error",r),Fr("load",r);break;case"details":Fr("toggle",r);break;case"input":Q(r,s),Fr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Fr("invalid",r);break;case"textarea":ie(r,s),Fr("invalid",r)}for(var l in ye(n,s),i=null,s)if(s.hasOwnProperty(l)){var u=s[l];"children"===l?"string"===typeof u?r.textContent!==u&&(!0!==s.suppressHydrationWarning&&Xr(r.textContent,u,e),i=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(!0!==s.suppressHydrationWarning&&Xr(r.textContent,u,e),i=["children",""+u]):a.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&Fr("scroll",r)}switch(n){case"input":W(r),Z(r,s,!0);break;case"textarea":W(r),se(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=$r)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[di]=t,e[hi]=r,Pa(e,t,!1,!1),t.stateNode=e;e:{switch(l=ve(n,r),n){case"dialog":Fr("cancel",e),Fr("close",e),i=r;break;case"iframe":case"object":case"embed":Fr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Pr.length;i++)Fr(Pr[i],e);i=r;break;case"source":Fr("error",e),i=r;break;case"img":case"image":case"link":Fr("error",e),Fr("load",e),i=r;break;case"details":Fr("toggle",e),i=r;break;case"input":Q(e,r),i=Y(e,r),Fr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=U({},r,{value:void 0}),Fr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Fr("invalid",e)}for(s in ye(n,i),u=i)if(u.hasOwnProperty(s)){var c=u[s];"style"===s?me(e,c):"dangerouslySetInnerHTML"===s?null!=(c=c?c.__html:void 0)&&ce(e,c):"children"===s?"string"===typeof c?("textarea"!==n||""!==c)&&de(e,c):"number"===typeof c&&de(e,""+c):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(a.hasOwnProperty(s)?null!=c&&"onScroll"===s&&Fr("scroll",e):null!=c&&b(e,s,c,l))}switch(n){case"input":W(e),Z(e,r,!1);break;case"textarea":W(e),se(e);break;case"option":null!=r.value&&e.setAttribute("value",""+G(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ne(e,!!r.multiple,s,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=$r)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Qa(t),null;case 6:if(e&&null!=t.stateNode)Ua(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(n=Jo(Ko.current),Jo(zo.current),co(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(s=r.nodeValue!==n)&&null!==(e=to))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}s&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Qa(t),null;case 13:if(Ti(Zo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ro&&null!==no&&0!==(1&t.mode)&&0===(128&t.flags))ho(),fo(),t.flags|=98560,s=!1;else if(s=co(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(o(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(o(317));s[di]=t}else fo(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Qa(t),s=!1}else null!==io&&(cu(io),io=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zo.current)?0===Fl&&(Fl=3):bu())),null!==t.updateQueue&&(t.flags|=4),Qa(t),null);case 4:return Qo(),Ma(e,t),null===e&&qr(t.stateNode.containerInfo),Qa(t),null;case 10:return Ao(t.type._context),Qa(t),null;case 19:if(Ti(Zo),null===(s=t.memoizedState))return Qa(t),null;if(r=0!==(128&t.flags),null===(l=s.rendering))if(r)Ya(s,!1);else{if(0!==Fl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=es(e))){for(t.flags|=128,Ya(s,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=14680066,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ci(Zo,1&Zo.current|2),t.child}e=e.sibling}null!==s.tail&&Qe()>Wl&&(t.flags|=128,r=!0,Ya(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=es(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ya(s,!0),null===s.tail&&"hidden"===s.tailMode&&!l.alternate&&!ro)return Qa(t),null}else 2*Qe()-s.renderingStartTime>Wl&&1073741824!==n&&(t.flags|=128,r=!0,Ya(s,!1),t.lanes=4194304);s.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=s.last)?n.sibling=l:t.child=l,s.last=l)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Qe(),t.sibling=null,n=Zo.current,Ci(Zo,r?1&n|2:1&n),t):(Qa(t),null);case 22:case 23:return mu(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ll)&&(Qa(t),6&t.subtreeFlags&&(t.flags|=8192)):Qa(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function $a(e,t){switch(eo(t),t.tag){case 1:return Oi(t.type)&&Ri(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Qo(),Ti(xi),Ti(Ai),ns(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return $o(t),null;case 13:if(Ti(Zo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));fo()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ti(Zo),null;case 4:return Qo(),null;case 10:return Ao(t.type._context),null;case 22:case 23:return mu(),null;default:return null}}Pa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ma=function(){},La=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Jo(zo.current);var o,s=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),s=[];break;case"select":i=U({},i,{value:void 0}),r=U({},r,{value:void 0}),s=[];break;case"textarea":i=re(e,i),r=re(e,r),s=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=$r)}for(c in ye(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var l=i[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(a.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var u=r[c];if(l=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(s=s||[]).push(c,u)):"children"===c?"string"!==typeof u&&"number"!==typeof u||(s=s||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(a.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&Fr("scroll",e),s||l===u||(s=[])):(s=s||[]).push(c,u))}n&&(s=s||[]).push("style",n);var c=s;(t.updateQueue=c)&&(t.flags|=4)}},Ua=function(e,t,n,r){n!==r&&(t.flags|=4)};var Za=!1,el=!1,tl="function"===typeof WeakSet?WeakSet:Set,nl=null;function rl(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){xu(e,t,r)}else n.current=null}function il(e,t,n){try{n()}catch(r){xu(e,t,r)}}var ol=!1;function sl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&il(t,n,o)}i=i.next}while(i!==r)}}function al(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ll(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ul(e){var t=e.alternate;null!==t&&(e.alternate=null,ul(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[hi],delete t[pi],delete t[mi],delete t[gi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function cl(e){return 5===e.tag||3===e.tag||4===e.tag}function dl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||cl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function hl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$r));else if(4!==r&&null!==(e=e.child))for(hl(e,t,n),e=e.sibling;null!==e;)hl(e,t,n),e=e.sibling}function fl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(fl(e,t,n),e=e.sibling;null!==e;)fl(e,t,n),e=e.sibling}var pl=null,ml=!1;function gl(e,t,n){for(n=n.child;null!==n;)yl(e,t,n),n=n.sibling}function yl(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(rt,n)}catch(nb){}switch(n.tag){case 5:el||rl(n,t);case 6:var r=pl,i=ml;pl=null,gl(e,t,n),ml=i,null!==(pl=r)&&(ml?(e=pl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):pl.removeChild(n.stateNode));break;case 18:null!==pl&&(ml?(e=pl,n=n.stateNode,8===e.nodeType?ai(e.parentNode,n):1===e.nodeType&&ai(e,n),qt(e)):ai(pl,n.stateNode));break;case 4:r=pl,i=ml,pl=n.stateNode.containerInfo,ml=!0,gl(e,t,n),pl=r,ml=i;break;case 0:case 11:case 14:case 15:if(!el&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,void 0!==s&&(0!==(2&o)||0!==(4&o))&&il(n,t,s),i=i.next}while(i!==r)}gl(e,t,n);break;case 1:if(!el&&(rl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(nb){xu(n,t,nb)}gl(e,t,n);break;case 21:gl(e,t,n);break;case 22:1&n.mode?(el=(r=el)||null!==n.memoizedState,gl(e,t,n),el=r):gl(e,t,n);break;default:gl(e,t,n)}}function vl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new tl),t.forEach((function(t){var r=Ru.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function bl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:pl=l.stateNode,ml=!1;break e;case 3:case 4:pl=l.stateNode.containerInfo,ml=!0;break e}l=l.return}if(null===pl)throw Error(o(160));yl(s,a,i),pl=null,ml=!1;var u=i.alternate;null!==u&&(u.return=null),i.return=null}catch(cs){xu(i,t,cs)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)El(t,e),t=t.sibling}function El(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(bl(t,e),wl(e),4&r){try{sl(3,e,e.return),al(3,e)}catch(Bv){xu(e,e.return,Bv)}try{sl(5,e,e.return)}catch(Bv){xu(e,e.return,Bv)}}break;case 1:bl(t,e),wl(e),512&r&&null!==n&&rl(n,n.return);break;case 5:if(bl(t,e),wl(e),512&r&&null!==n&&rl(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(Bv){xu(e,e.return,Bv)}}if(4&r&&null!=(i=e.stateNode)){var s=e.memoizedProps,a=null!==n?n.memoizedProps:s,l=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===l&&"radio"===s.type&&null!=s.name&&X(i,s),ve(l,a);var c=ve(l,s);for(a=0;a<u.length;a+=2){var d=u[a],h=u[a+1];"style"===d?me(i,h):"dangerouslySetInnerHTML"===d?ce(i,h):"children"===d?de(i,h):b(i,d,h,c)}switch(l){case"input":$(i,s);break;case"textarea":oe(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;null!=p?ne(i,!!s.multiple,p,!1):f!==!!s.multiple&&(null!=s.defaultValue?ne(i,!!s.multiple,s.defaultValue,!0):ne(i,!!s.multiple,s.multiple?[]:"",!1))}i[hi]=s}catch(Bv){xu(e,e.return,Bv)}}break;case 6:if(bl(t,e),wl(e),4&r){if(null===e.stateNode)throw Error(o(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(Bv){xu(e,e.return,Bv)}}break;case 3:if(bl(t,e),wl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{qt(t.containerInfo)}catch(Bv){xu(e,e.return,Bv)}break;case 4:default:bl(t,e),wl(e);break;case 13:bl(t,e),wl(e),8192&(i=e.child).flags&&(s=null!==i.memoizedState,i.stateNode.isHidden=s,!s||null!==i.alternate&&null!==i.alternate.memoizedState||(zl=Qe())),4&r&&vl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(el=(c=el)||d,bl(t,e),el=c):bl(t,e),wl(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!d&&0!==(1&e.mode))for(nl=e,d=e.child;null!==d;){for(h=nl=d;null!==nl;){switch(p=(f=nl).child,f.tag){case 0:case 11:case 14:case 15:sl(4,f,f.return);break;case 1:rl(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(Bv){xu(r,n,Bv)}}break;case 5:rl(f,f.return);break;case 22:if(null!==f.memoizedState){Cl(h);continue}}null!==p?(p.return=f,nl=p):Cl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,c?"function"===typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none":(l=h.stateNode,a=void 0!==(u=h.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,l.style.display=pe("display",a))}catch(Bv){xu(e,e.return,Bv)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(Bv){xu(e,e.return,Bv)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:bl(t,e),wl(e),4&r&&vl(e);case 21:}}function wl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(cl(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),fl(e,dl(e),i);break;case 3:case 4:var s=r.stateNode.containerInfo;hl(e,dl(e),s);break;default:throw Error(o(161))}}catch(ss){xu(e,e.return,ss)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Sl(e,t,n){nl=e,_l(e,t,n)}function _l(e,t,n){for(var r=0!==(1&e.mode);null!==nl;){var i=nl,o=i.child;if(22===i.tag&&r){var s=null!==i.memoizedState||Za;if(!s){var a=i.alternate,l=null!==a&&null!==a.memoizedState||el;a=Za;var u=el;if(Za=s,(el=l)&&!u)for(nl=i;null!==nl;)l=(s=nl).child,22===s.tag&&null!==s.memoizedState?Il(i):null!==l?(l.return=s,nl=l):Il(i);for(;null!==o;)nl=o,_l(o,t,n),o=o.sibling;nl=i,Za=a,el=u}Tl(e)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,nl=o):Tl(e)}}function Tl(e){for(;null!==nl;){var t=nl;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:el||al(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!el)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:oa(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&Ho(t,s,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ho(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var d=c.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&qt(h)}}}break;default:throw Error(o(163))}el||512&t.flags&&ll(t)}catch(bs){xu(t,t.return,bs)}}if(t===e){nl=null;break}if(null!==(n=t.sibling)){n.return=t.return,nl=n;break}nl=t.return}}function Cl(e){for(;null!==nl;){var t=nl;if(t===e){nl=null;break}var n=t.sibling;if(null!==n){n.return=t.return,nl=n;break}nl=t.return}}function Il(e){for(;null!==nl;){var t=nl;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{al(4,t)}catch(ss){xu(t,n,ss)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(ss){xu(t,i,ss)}}var o=t.return;try{ll(t)}catch(ss){xu(t,o,ss)}break;case 5:var s=t.return;try{ll(t)}catch(ss){xu(t,s,ss)}}}catch(ss){xu(t,t.return,ss)}if(t===e){nl=null;break}var a=t.sibling;if(null!==a){a.return=t.return,nl=a;break}nl=t.return}}var Al,xl=Math.ceil,Nl=E.ReactCurrentDispatcher,kl=E.ReactCurrentOwner,Ol=E.ReactCurrentBatchConfig,Rl=0,Dl=null,Pl=null,Ml=0,Ll=0,Ul=_i(0),Fl=0,jl=null,Vl=0,ql=0,Bl=0,Hl=null,Gl=null,zl=0,Wl=1/0,Kl=null,Jl=!1,Yl=null,Ql=null,Xl=!1,$l=null,Zl=0,eu=0,tu=null,nu=-1,ru=0;function iu(){return 0!==(6&Rl)?Qe():-1!==nu?nu:nu=Qe()}function ou(e){return 0===(1&e.mode)?1:0!==(2&Rl)&&0!==Ml?Ml&-Ml:null!==mo.transition?(0===ru&&(ru=pt()),ru):0!==(e=vt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function su(e,t,n,r){if(50<eu)throw eu=0,tu=null,Error(o(185));gt(e,n,r),0!==(2&Rl)&&e===Dl||(e===Dl&&(0===(2&Rl)&&(ql|=n),4===Fl&&du(e,Ml)),au(e,r),1===n&&0===Rl&&0===(1&t.mode)&&(Wl=Qe()+500,Fi&&qi()))}function au(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-ot(o),a=1<<s,l=i[s];-1===l?0!==(a&n)&&0===(a&r)||(i[s]=ht(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}}(e,t);var r=dt(e,e===Dl?Ml:0);if(0===r)null!==n&&Ke(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ke(n),1===t)0===e.tag?function(e){Fi=!0,Vi(e)}(hu.bind(null,e)):Vi(hu.bind(null,e)),oi((function(){0===(6&Rl)&&qi()})),n=null;else{switch(bt(r)){case 1:n=$e;break;case 4:n=Ze;break;case 16:default:n=et;break;case 536870912:n=nt}n=Du(n,lu.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function lu(e,t){if(nu=-1,ru=0,0!==(6&Rl))throw Error(o(327));var n=e.callbackNode;if(Iu()&&e.callbackNode!==n)return null;var r=dt(e,e===Dl?Ml:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=Eu(e,r);else{t=r;var i=Rl;Rl|=2;var s=vu();for(Dl===e&&Ml===t||(Kl=null,Wl=Qe()+500,gu(e,t));;)try{Su();break}catch(nb){yu(e,nb)}Io(),Nl.current=s,Rl=i,null!==Pl?t=0:(Dl=null,Ml=0,t=Fl)}if(0!==t){if(2===t&&(0!==(i=ft(e))&&(r=i,t=uu(e,i))),1===t)throw n=jl,gu(e,0),du(e,r),au(e,Qe()),n;if(6===t)du(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!sr(o(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=Eu(e,r))&&(0!==(s=ft(e))&&(r=s,t=uu(e,s))),1===t))throw n=jl,gu(e,0),du(e,r),au(e,Qe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:Cu(e,Gl,Kl);break;case 3:if(du(e,r),(130023424&r)===r&&10<(t=zl+500-Qe())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){iu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ni(Cu.bind(null,e,Gl,Kl),t);break}Cu(e,Gl,Kl);break;case 4:if(du(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);s=1<<a,(a=t[a])>i&&(i=a),r&=~s}if(r=i,10<(r=(120>(r=Qe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*xl(r/1960))-r)){e.timeoutHandle=ni(Cu.bind(null,e,Gl,Kl),r);break}Cu(e,Gl,Kl);break;default:throw Error(o(329))}}}return au(e,Qe()),e.callbackNode===n?lu.bind(null,e):null}function uu(e,t){var n=Hl;return e.current.memoizedState.isDehydrated&&(gu(e,t).flags|=256),2!==(e=Eu(e,t))&&(t=Gl,Gl=n,null!==t&&cu(t)),e}function cu(e){null===Gl?Gl=e:Gl.push.apply(Gl,e)}function du(e,t){for(t&=~Bl,t&=~ql,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function hu(e){if(0!==(6&Rl))throw Error(o(327));Iu();var t=dt(e,0);if(0===(1&t))return au(e,Qe()),null;var n=Eu(e,t);if(0!==e.tag&&2===n){var r=ft(e);0!==r&&(t=r,n=uu(e,r))}if(1===n)throw n=jl,gu(e,0),du(e,t),au(e,Qe()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Cu(e,Gl,Kl),au(e,Qe()),null}function fu(e,t){var n=Rl;Rl|=1;try{return e(t)}finally{0===(Rl=n)&&(Wl=Qe()+500,Fi&&qi())}}function pu(e){null!==$l&&0===$l.tag&&0===(6&Rl)&&Iu();var t=Rl;Rl|=1;var n=Ol.transition,r=vt;try{if(Ol.transition=null,vt=1,e)return e()}finally{vt=r,Ol.transition=n,0===(6&(Rl=t))&&qi()}}function mu(){Ll=Ul.current,Ti(Ul)}function gu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ri(n)),null!==Pl)for(n=Pl.return;null!==n;){var r=n;switch(eo(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ri();break;case 3:Qo(),Ti(xi),Ti(Ai),ns();break;case 5:$o(r);break;case 4:Qo();break;case 13:case 19:Ti(Zo);break;case 10:Ao(r.type._context);break;case 22:case 23:mu()}n=n.return}if(Dl=e,Pl=e=Uu(e.current,null),Ml=Ll=t,Fl=0,jl=null,Bl=ql=Vl=0,Gl=Hl=null,null!==Oo){for(t=0;t<Oo.length;t++)if(null!==(r=(n=Oo[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var s=o.next;o.next=i,r.next=s}n.pending=r}Oo=null}return e}function yu(e,t){for(;;){var n=Pl;try{if(Io(),rs.current=ta,ds){for(var r=as.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ds=!1}if(os=0,us=ls=as=null,hs=!1,fs=0,kl.current=null,null===n||null===n.return){Fl=1,jl=t,Pl=null;break}e:{var s=e,a=n.return,l=n,u=t;if(t=Ml,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=ba(a);if(null!==p){p.flags&=-257,Ea(p,a,l,0,t),1&p.mode&&va(s,c,t),u=c;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(u),t.updateQueue=g}else m.add(u);break e}if(0===(1&t)){va(s,c,t),bu();break e}u=Error(o(426))}else if(ro&&1&l.mode){var y=ba(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),Ea(y,a,l,0,t),po(ha(u,l));break e}}s=u=ha(u,l),4!==Fl&&(Fl=2),null===Hl?Hl=[s]:Hl.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,qo(s,ga(0,u,t));break e;case 1:l=u;var v=s.type,b=s.stateNode;if(0===(128&s.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Ql||!Ql.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t,qo(s,ya(s,l,t));break e}}s=s.return}while(null!==s)}Tu(n)}catch(_s){t=_s,Pl===n&&null!==n&&(Pl=n=n.return);continue}break}}function vu(){var e=Nl.current;return Nl.current=ta,null===e?ta:e}function bu(){0!==Fl&&3!==Fl&&2!==Fl||(Fl=4),null===Dl||0===(268435455&Vl)&&0===(268435455&ql)||du(Dl,Ml)}function Eu(e,t){var n=Rl;Rl|=2;var r=vu();for(Dl===e&&Ml===t||(Kl=null,gu(e,t));;)try{wu();break}catch(qv){yu(e,qv)}if(Io(),Rl=n,Nl.current=r,null!==Pl)throw Error(o(261));return Dl=null,Ml=0,Fl}function wu(){for(;null!==Pl;)_u(Pl)}function Su(){for(;null!==Pl&&!Je();)_u(Pl)}function _u(e){var t=Al(e.alternate,e,Ll);e.memoizedProps=e.pendingProps,null===t?Tu(e):Pl=t,kl.current=null}function Tu(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Xa(n,t,Ll)))return void(Pl=n)}else{if(null!==(n=$a(n,t)))return n.flags&=32767,void(Pl=n);if(null===e)return Fl=6,void(Pl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pl=t);Pl=t=e}while(null!==t);0===Fl&&(Fl=5)}function Cu(e,t,n){var r=vt,i=Ol.transition;try{Ol.transition=null,vt=1,function(e,t,n,r){do{Iu()}while(null!==$l);if(0!==(6&Rl))throw Error(o(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,s),e===Dl&&(Pl=Dl=null,Ml=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Xl||(Xl=!0,Du(et,(function(){return Iu(),null}))),s=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||s){s=Ol.transition,Ol.transition=null;var a=vt;vt=1;var l=Rl;Rl|=4,kl.current=null,function(e,t){if(Zr=Ht,hr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(Wa){n=null;break e}var a=0,l=-1,u=-1,c=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(l=a+i),h!==s||0!==r&&3!==h.nodeType||(u=a+r),3===h.nodeType&&(a+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++c===i&&(l=a),f===s&&++d===r&&(u=a),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ei={focusedElem:e,selectionRange:n},Ht=!1,nl=t;null!==nl;)if(e=(t=nl).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,nl=e;else for(;null!==nl;){t=nl;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:oa(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var E=t.stateNode.containerInfo;1===E.nodeType?E.textContent="":9===E.nodeType&&E.documentElement&&E.removeChild(E.documentElement);break;default:throw Error(o(163))}}catch(Wa){xu(t,t.return,Wa)}if(null!==(e=t.sibling)){e.return=t.return,nl=e;break}nl=t.return}m=ol,ol=!1}(e,n),El(n,e),fr(ei),Ht=!!Zr,ei=Zr=null,e.current=n,Sl(n,e,i),Ye(),Rl=l,vt=a,Ol.transition=s}else e.current=n;if(Xl&&(Xl=!1,$l=e,Zl=i),s=e.pendingLanes,0===s&&(Ql=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),au(e,Qe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Jl)throw Jl=!1,e=Yl,Yl=null,e;0!==(1&Zl)&&0!==e.tag&&Iu(),s=e.pendingLanes,0!==(1&s)?e===tu?eu++:(eu=0,tu=e):eu=0,qi()}(e,t,n,r)}finally{Ol.transition=i,vt=r}return null}function Iu(){if(null!==$l){var e=bt(Zl),t=Ol.transition,n=vt;try{if(Ol.transition=null,vt=16>e?16:e,null===$l)var r=!1;else{if(e=$l,$l=null,Zl=0,0!==(6&Rl))throw Error(o(331));var i=Rl;for(Rl|=4,nl=e.current;null!==nl;){var s=nl,a=s.child;if(0!==(16&nl.flags)){var l=s.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(nl=c;null!==nl;){var d=nl;switch(d.tag){case 0:case 11:case 15:sl(8,d,s)}var h=d.child;if(null!==h)h.return=d,nl=h;else for(;null!==nl;){var f=(d=nl).sibling,p=d.return;if(ul(d),d===c){nl=null;break}if(null!==f){f.return=p,nl=f;break}nl=p}}}var m=s.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}nl=s}}if(0!==(2064&s.subtreeFlags)&&null!==a)a.return=s,nl=a;else e:for(;null!==nl;){if(0!==(2048&(s=nl).flags))switch(s.tag){case 0:case 11:case 15:sl(9,s,s.return)}var v=s.sibling;if(null!==v){v.return=s.return,nl=v;break e}nl=s.return}}var b=e.current;for(nl=b;null!==nl;){var E=(a=nl).child;if(0!==(2064&a.subtreeFlags)&&null!==E)E.return=a,nl=E;else e:for(a=b;null!==nl;){if(0!==(2048&(l=nl).flags))try{switch(l.tag){case 0:case 11:case 15:al(9,l)}}catch(_s){xu(l,l.return,_s)}if(l===a){nl=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,nl=w;break e}nl=l.return}}if(Rl=i,qi(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(rt,e)}catch(_s){}r=!0}return r}finally{vt=n,Ol.transition=t}}return!1}function Au(e,t,n){e=jo(e,t=ga(0,t=ha(n,t),1),1),t=iu(),null!==e&&(gt(e,1,t),au(e,t))}function xu(e,t,n){if(3===e.tag)Au(e,e,n);else for(;null!==t;){if(3===t.tag){Au(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ql||!Ql.has(r))){t=jo(t,e=ya(t,e=ha(n,e),1),1),e=iu(),null!==t&&(gt(t,1,e),au(t,e));break}}t=t.return}}function Nu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=iu(),e.pingedLanes|=e.suspendedLanes&n,Dl===e&&(Ml&n)===n&&(4===Fl||3===Fl&&(130023424&Ml)===Ml&&500>Qe()-zl?gu(e,0):Bl|=n),au(e,t)}function ku(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=iu();null!==(e=Po(e,t))&&(gt(e,t,n),au(e,n))}function Ou(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),ku(e,n)}function Ru(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),ku(e,n)}function Du(e,t){return We(e,t)}function Pu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mu(e,t,n,r){return new Pu(e,t,n,r)}function Lu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Uu(e,t){var n=e.alternate;return null===n?((n=Mu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Fu(e,t,n,r,i,s){var a=2;if(r=e,"function"===typeof e)Lu(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case _:return ju(n.children,i,s,t);case T:a=8,i|=8;break;case C:return(e=Mu(12,n,t,2|i)).elementType=C,e.lanes=s,e;case N:return(e=Mu(13,n,t,i)).elementType=N,e.lanes=s,e;case k:return(e=Mu(19,n,t,i)).elementType=k,e.lanes=s,e;case D:return Vu(n,i,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case I:a=10;break e;case A:a=9;break e;case x:a=11;break e;case O:a=14;break e;case R:a=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Mu(a,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function ju(e,t,n,r){return(e=Mu(7,e,r,t)).lanes=n,e}function Vu(e,t,n,r){return(e=Mu(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function qu(e,t,n){return(e=Mu(6,e,null,t)).lanes=n,e}function Bu(e,t,n){return(t=Mu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Hu(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Gu(e,t,n,r,i,o,s,a,l){return e=new Hu(e,t,n,a,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Mu(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Lo(o),e}function zu(e){if(!e)return Ii;e:{if(qe(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Oi(n))return Pi(e,n,t)}return t}function Wu(e,t,n,r,i,o,s,a,l){return(e=Gu(n,r,!0,e,0,o,0,a,l)).context=zu(null),n=e.current,(o=Fo(r=iu(),i=ou(n))).callback=void 0!==t&&null!==t?t:null,jo(n,o,i),e.current.lanes=i,gt(e,i,r),au(e,r),e}function Ku(e,t,n,r){var i=t.current,o=iu(),s=ou(i);return n=zu(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fo(o,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=jo(i,t,s))&&(su(e,i,s,o),Vo(e,i,s)),s}function Ju(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Yu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Qu(e,t){Yu(e,t),(e=e.alternate)&&Yu(e,t)}Al=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||xi.current)Sa=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return Sa=!1,function(e,t,n){switch(t.tag){case 3:Ra(t),fo();break;case 5:Xo(t);break;case 1:Oi(t.type)&&Mi(t);break;case 4:Yo(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ci(So,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ci(Zo,1&Zo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Va(e,t,n):(Ci(Zo,1&Zo.current),null!==(e=Ja(e,t,n))?e.sibling:null);Ci(Zo,1&Zo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return za(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ci(Zo,Zo.current),r)break;return null;case 22:case 23:return t.lanes=0,Aa(e,t,n)}return Ja(e,t,n)}(e,t,n);Sa=0!==(131072&e.flags)}else Sa=!1,ro&&0!==(1048576&t.flags)&&$i(t,zi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ka(e,t),e=t.pendingProps;var i=ki(t,Ai.current);No(t,n),i=ys(null,t,r,e,i,n);var s=vs();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oi(r)?(s=!0,Mi(t)):s=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Lo(t),i.updater=aa,t.stateNode=i,i._reactInternals=t,da(t,r,e,n),t=Oa(null,t,r,!0,s,n)):(t.tag=0,ro&&s&&Zi(t),_a(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ka(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Lu(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===x)return 11;if(e===O)return 14}return 2}(r),e=oa(r,e),i){case 0:t=Na(null,t,r,e,n);break e;case 1:t=ka(null,t,r,e,n);break e;case 11:t=Ta(null,t,r,e,n);break e;case 14:t=Ca(null,t,r,oa(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Na(e,t,r,i=t.elementType===r?i:oa(r,i),n);case 1:return r=t.type,i=t.pendingProps,ka(e,t,r,i=t.elementType===r?i:oa(r,i),n);case 3:e:{if(Ra(t),null===e)throw Error(o(387));r=t.pendingProps,i=(s=t.memoizedState).element,Uo(e,t),Bo(t,r,null,n);var a=t.memoizedState;if(r=a.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Da(e,t,r,n,i=ha(Error(o(423)),t));break e}if(r!==i){t=Da(e,t,r,n,i=ha(Error(o(424)),t));break e}for(no=li(t.stateNode.containerInfo.firstChild),to=t,ro=!0,io=null,n=wo(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fo(),r===i){t=Ja(e,t,n);break e}_a(e,t,r,n)}t=t.child}return t;case 5:return Xo(t),null===e&&lo(t),r=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,a=i.children,ti(r,i)?a=null:null!==s&&ti(r,s)&&(t.flags|=32),xa(e,t),_a(e,t,a,n),t.child;case 6:return null===e&&lo(t),null;case 13:return Va(e,t,n);case 4:return Yo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Eo(t,null,r,n):_a(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Ta(e,t,r,i=t.elementType===r?i:oa(r,i),n);case 7:return _a(e,t,t.pendingProps,n),t.child;case 8:case 12:return _a(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,Ci(So,r._currentValue),r._currentValue=a,null!==s)if(sr(s.value,a)){if(s.children===i.children&&!xi.current){t=Ja(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var l=s.dependencies;if(null!==l){a=s.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===s.tag){(u=Fo(-1,n&-n)).tag=2;var c=s.updateQueue;if(null!==c){var d=(c=c.shared).pending;null===d?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),xo(s.return,n,t),l.lanes|=n;break}u=u.next}}else if(10===s.tag)a=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(a=s.return))throw Error(o(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),xo(a,n,t),a=s.sibling}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===t){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}_a(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,No(t,n),r=r(i=ko(i)),t.flags|=1,_a(e,t,r,n),t.child;case 14:return i=oa(r=t.type,t.pendingProps),Ca(e,t,r,i=oa(r.type,i),n);case 15:return Ia(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:oa(r,i),Ka(e,t),t.tag=1,Oi(r)?(e=!0,Mi(t)):e=!1,No(t,n),ua(t,r,i),da(t,r,i,n),Oa(null,t,r,!0,e,n);case 19:return za(e,t,n);case 22:return Aa(e,t,n)}throw Error(o(156,t.tag))};var Xu="function"===typeof reportError?reportError:function(e){console.error(e)};function $u(e){this._internalRoot=e}function Zu(e){this._internalRoot=e}function ec(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function tc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function nc(){}function rc(e,t,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if("function"===typeof i){var a=i;i=function(){var e=Ju(s);a.call(e)}}Ku(t,s,e,i)}else s=function(e,t,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var e=Ju(s);o.call(e)}}var s=Wu(t,r,e,0,null,!1,0,"",nc);return e._reactRootContainer=s,e[fi]=s.current,qr(8===e.nodeType?e.parentNode:e),pu(),s}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Ju(l);a.call(e)}}var l=Gu(e,0,!1,null,0,!1,0,"",nc);return e._reactRootContainer=l,e[fi]=l.current,qr(8===e.nodeType?e.parentNode:e),pu((function(){Ku(t,l,n,r)})),l}(n,t,e,i,r);return Ju(s)}Zu.prototype.render=$u.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Ku(e,t,null,null)},Zu.prototype.unmount=$u.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;pu((function(){Ku(null,e,null,null)})),t[fi]=null}},Zu.prototype.unstable_scheduleHydration=function(e){if(e){var t=_t();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Lt(e)}},Et=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ct(t.pendingLanes);0!==n&&(yt(t,1|n),au(t,Qe()),0===(6&Rl)&&(Wl=Qe()+500,qi()))}break;case 13:pu((function(){var t=Po(e,1);if(null!==t){var n=iu();su(t,e,1,n)}})),Qu(e,1)}},wt=function(e){if(13===e.tag){var t=Po(e,134217728);if(null!==t)su(t,e,134217728,iu());Qu(e,134217728)}},St=function(e){if(13===e.tag){var t=ou(e),n=Po(e,t);if(null!==n)su(n,e,t,iu());Qu(e,t)}},_t=function(){return vt},Tt=function(e,t){var n=vt;try{return vt=e,t()}finally{vt=n}},we=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Ei(r);if(!i)throw Error(o(90));K(r),$(r,i)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ae=fu,xe=pu;var ic={usingClientEntryPoint:!1,Events:[vi,bi,Ei,Ce,Ie,fu]},oc={findFiberByHostInstance:yi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},sc={bundleType:oc.bundleType,version:oc.version,rendererPackageName:oc.rendererPackageName,rendererConfig:oc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:E.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:oc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ac=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ac.isDisabled&&ac.supportsFiber)try{rt=ac.inject(sc),it=ac}catch(Wv){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ic,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ec(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!ec(e))throw Error(o(299));var n=!1,r="",i=Xu;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Gu(e,1,!1,null,0,n,0,r,i),e[fi]=t.current,qr(8===e.nodeType?e.parentNode:e),new $u(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return pu(e)},t.hydrate=function(e,t,n){if(!tc(t))throw Error(o(200));return rc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!ec(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,s="",a=Xu;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Wu(t,null,e,1,null!=n?n:null,i,0,s,a),e[fi]=t.current,qr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Zu(t)},t.render=function(e,t,n){if(!tc(t))throw Error(o(200));return rc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!tc(e))throw Error(o(40));return!!e._reactRootContainer&&(pu((function(){rc(null,null,e,!1,(function(){e._reactRootContainer=null,e[fi]=null}))})),!0)},t.unstable_batchedUpdates=fu,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!tc(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return rc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(qv){if("object"===typeof window)return window}}();var r=n(43),i=n(391);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function s(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}function a(e,t,n){return(t=s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let c,d;function h(e,t,n,r){var i,o;if(!(null===e||void 0===e?void 0:e.baseUrl)){const e={geminiUrl:c,vertexUrl:d};return t?null!==(i=e.vertexUrl)&&void 0!==i?i:n:null!==(o=e.geminiUrl)&&void 0!==o?o:r}return e.baseUrl}class f{}function p(e,t){return e.replace(/\{([^}]+)\}/g,((e,n)=>{if(Object.prototype.hasOwnProperty.call(t,n)){const e=t[n];return void 0!==e&&null!==e?String(e):""}throw new Error("Key '".concat(n,"' not found in valueMap."))}))}function m(e,t,n){for(let o=0;o<t.length-1;o++){const r=t[o];if(r.endsWith("[]")){const i=r.slice(0,-2);if(!(i in e)){if(!Array.isArray(n))throw new Error("Value must be a list given an array path ".concat(r));e[i]=Array.from({length:n.length},(()=>({})))}if(Array.isArray(e[i])){const r=e[i];if(Array.isArray(n))for(let e=0;e<r.length;e++){m(r[e],t.slice(o+1),n[e])}else for(const e of r)m(e,t.slice(o+1),n)}return}if(r.endsWith("[0]")){const i=r.slice(0,-3);i in e||(e[i]=[{}]);return void m(e[i][0],t.slice(o+1),n)}e[r]&&"object"===typeof e[r]||(e[r]={}),e=e[r]}const r=t[t.length-1],i=e[r];if(void 0!==i){if(!n||"object"===typeof n&&0===Object.keys(n).length)return;if(n===i)return;if("object"!==typeof i||"object"!==typeof n||null===i||null===n)throw new Error("Cannot set value for an existing key. Key: ".concat(r));Object.assign(i,n)}else if("_self"!==r||"object"!==typeof n||null===n||Array.isArray(n))e[r]=n;else{const t=n;Object.assign(e,t)}}function g(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;try{if(1===t.length&&"_self"===t[0])return e;for(let r=0;r<t.length;r++){if("object"!==typeof e||null===e)return n;const i=t[r];if(i.endsWith("[]")){const o=i.slice(0,-2);if(o in e){const i=e[o];return Array.isArray(i)?i.map((e=>g(e,t.slice(r+1),n))):n}return n}e=e[i]}return e}catch(r){if(r instanceof TypeError)return n;throw r}}function y(e,t,n,r,i){if(r>=t.length)return;if("object"!==typeof e||null===e)return;const o=t[r];if(o.endsWith("[]")){const s=o.slice(0,-2),a=e;if(s in a&&Array.isArray(a[s]))for(const e of a[s])y(e,t,n,r+1,i)}else if("*"===o){if("object"===typeof e&&null!==e&&!Array.isArray(e)){const t=e,o=Object.keys(t).filter((e=>!e.startsWith("_")&&!i.has(e))),s={};for(const e of o)s[e]=t[e];for(const[e,i]of Object.entries(s)){const o=[];for(const t of n.slice(r))"*"===t?o.push(e):o.push(t);m(t,o,i)}for(const e of o)delete t[e]}}else{o in e&&y(e[o],t,n,r+1,i)}}function v(e){if("string"!==typeof e)throw new Error("fromImageBytes must be a string");return e}function b(e){const t={},n=g(e,["name"]);null!=n&&m(t,["name"],n);const r=g(e,["metadata"]);null!=r&&m(t,["metadata"],r);const i=g(e,["done"]);null!=i&&m(t,["done"],i);const o=g(e,["error"]);null!=o&&m(t,["error"],o);const s=g(e,["response","generateVideoResponse"]);return null!=s&&m(t,["response"],function(e){const t={},n=g(e,["generatedSamples"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>function(e){const t={},n=g(e,["video"]);null!=n&&m(t,["video"],function(e){const t={},n=g(e,["uri"]);null!=n&&m(t,["uri"],n);const r=g(e,["encodedVideo"]);null!=r&&m(t,["videoBytes"],v(r));const i=g(e,["encoding"]);null!=i&&m(t,["mimeType"],i);return t}(n));return t}(e)))),m(t,["generatedVideos"],e)}const r=g(e,["raiMediaFilteredCount"]);null!=r&&m(t,["raiMediaFilteredCount"],r);const i=g(e,["raiMediaFilteredReasons"]);null!=i&&m(t,["raiMediaFilteredReasons"],i);return t}(s)),t}function E(e){const t={},n=g(e,["name"]);null!=n&&m(t,["name"],n);const r=g(e,["metadata"]);null!=r&&m(t,["metadata"],r);const i=g(e,["done"]);null!=i&&m(t,["done"],i);const o=g(e,["error"]);null!=o&&m(t,["error"],o);const s=g(e,["response"]);return null!=s&&m(t,["response"],function(e){const t={},n=g(e,["videos"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>function(e){const t={},n=g(e,["_self"]);null!=n&&m(t,["video"],function(e){const t={},n=g(e,["gcsUri"]);null!=n&&m(t,["uri"],n);const r=g(e,["bytesBase64Encoded"]);null!=r&&m(t,["videoBytes"],v(r));const i=g(e,["mimeType"]);null!=i&&m(t,["mimeType"],i);return t}(n));return t}(e)))),m(t,["generatedVideos"],e)}const r=g(e,["raiMediaFilteredCount"]);null!=r&&m(t,["raiMediaFilteredCount"],r);const i=g(e,["raiMediaFilteredReasons"]);null!=i&&m(t,["raiMediaFilteredReasons"],i);return t}(s)),t}function w(e){const t={},n=g(e,["name"]);null!=n&&m(t,["name"],n);const r=g(e,["metadata"]);null!=r&&m(t,["metadata"],r);const i=g(e,["done"]);null!=i&&m(t,["done"],i);const o=g(e,["error"]);null!=o&&m(t,["error"],o);const s=g(e,["response"]);return null!=s&&m(t,["response"],function(e){const t={},n=g(e,["sdkHttpResponse"]);null!=n&&m(t,["sdkHttpResponse"],n);const r=g(e,["parent"]);null!=r&&m(t,["parent"],r);const i=g(e,["documentName"]);null!=i&&m(t,["documentName"],i);return t}(s)),t}function S(e){const t={},n=g(e,["name"]);null!=n&&m(t,["name"],n);const r=g(e,["metadata"]);null!=r&&m(t,["metadata"],r);const i=g(e,["done"]);null!=i&&m(t,["done"],i);const o=g(e,["error"]);null!=o&&m(t,["error"],o);const s=g(e,["response"]);return null!=s&&m(t,["response"],function(e){const t={},n=g(e,["sdkHttpResponse"]);null!=n&&m(t,["sdkHttpResponse"],n);const r=g(e,["parent"]);null!=r&&m(t,["parent"],r);const i=g(e,["documentName"]);null!=i&&m(t,["documentName"],i);return t}(s)),t}var _,T,C,I,A,x,N,k,O,R,D,P,M,L,U,F,j,V,q,B,H,G,z,W,K,J,Y,Q,X,$,Z,ee,te,ne,re,ie,oe,se,ae,le,ue,ce,de,he,fe,pe,me,ge,ye,ve,be,Ee,we,Se,_e,Te;!function(e){e.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",e.OUTCOME_OK="OUTCOME_OK",e.OUTCOME_FAILED="OUTCOME_FAILED",e.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"}(_||(_={})),function(e){e.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",e.PYTHON="PYTHON"}(T||(T={})),function(e){e.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",e.SILENT="SILENT",e.WHEN_IDLE="WHEN_IDLE",e.INTERRUPT="INTERRUPT"}(C||(C={})),function(e){e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.STRING="STRING",e.NUMBER="NUMBER",e.INTEGER="INTEGER",e.BOOLEAN="BOOLEAN",e.ARRAY="ARRAY",e.OBJECT="OBJECT",e.NULL="NULL"}(I||(I={})),function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"}(A||(A={})),function(e){e.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",e.SIMPLE_SEARCH="SIMPLE_SEARCH",e.ELASTIC_SEARCH="ELASTIC_SEARCH"}(x||(x={})),function(e){e.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",e.NO_AUTH="NO_AUTH",e.API_KEY_AUTH="API_KEY_AUTH",e.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",e.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",e.OAUTH="OAUTH",e.OIDC_AUTH="OIDC_AUTH"}(N||(N={})),function(e){e.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",e.HTTP_IN_QUERY="HTTP_IN_QUERY",e.HTTP_IN_HEADER="HTTP_IN_HEADER",e.HTTP_IN_PATH="HTTP_IN_PATH",e.HTTP_IN_BODY="HTTP_IN_BODY",e.HTTP_IN_COOKIE="HTTP_IN_COOKIE"}(k||(k={})),function(e){e.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",e.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",e.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",e.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"}(O||(O={})),function(e){e.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",e.LOW="LOW",e.HIGH="HIGH"}(R||(R={})),function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",e.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",e.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",e.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",e.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"}(D||(D={})),function(e){e.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",e.SEVERITY="SEVERITY",e.PROBABILITY="PROBABILITY"}(P||(P={})),function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE",e.OFF="OFF"}(M||(M={})),function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.IMAGE_SAFETY="IMAGE_SAFETY",e.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",e.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",e.NO_IMAGE="NO_IMAGE"}(L||(L={})),function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"}(U||(U={})),function(e){e.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",e.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",e.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",e.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",e.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"}(F||(F={})),function(e){e.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",e.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",e.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",e.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",e.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"}(j||(j={})),function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.IMAGE_SAFETY="IMAGE_SAFETY",e.MODEL_ARMOR="MODEL_ARMOR",e.JAILBREAK="JAILBREAK"}(V||(V={})),function(e){e.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",e.ON_DEMAND="ON_DEMAND",e.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"}(q||(q={})),function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.AUDIO="AUDIO"}(B||(B={})),function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"}(H||(H={})),function(e){e.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",e.TUNING_MODE_FULL="TUNING_MODE_FULL",e.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"}(G||(G={})),function(e){e.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",e.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",e.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",e.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",e.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",e.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",e.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"}(z||(z={})),function(e){e.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",e.JOB_STATE_QUEUED="JOB_STATE_QUEUED",e.JOB_STATE_PENDING="JOB_STATE_PENDING",e.JOB_STATE_RUNNING="JOB_STATE_RUNNING",e.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",e.JOB_STATE_FAILED="JOB_STATE_FAILED",e.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",e.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",e.JOB_STATE_PAUSED="JOB_STATE_PAUSED",e.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",e.JOB_STATE_UPDATING="JOB_STATE_UPDATING",e.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"}(W||(W={})),function(e){e.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",e.TUNING_TASK_I2V="TUNING_TASK_I2V",e.TUNING_TASK_T2V="TUNING_TASK_T2V",e.TUNING_TASK_R2V="TUNING_TASK_R2V"}(K||(K={})),function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"}(J||(J={})),function(e){e.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",e.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",e.BALANCED="BALANCED",e.PRIORITIZE_COST="PRIORITIZE_COST"}(Y||(Y={})),function(e){e.UNSPECIFIED="UNSPECIFIED",e.BLOCKING="BLOCKING",e.NON_BLOCKING="NON_BLOCKING"}(Q||(Q={})),function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"}(X||(X={})),function(e){e.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",e.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"}($||($={})),function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE",e.VALIDATED="VALIDATED"}(Z||(Z={})),function(e){e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"}(ee||(ee={})),function(e){e.DONT_ALLOW="DONT_ALLOW",e.ALLOW_ADULT="ALLOW_ADULT",e.ALLOW_ALL="ALLOW_ALL"}(te||(te={})),function(e){e.auto="auto",e.en="en",e.ja="ja",e.ko="ko",e.hi="hi",e.zh="zh",e.pt="pt",e.es="es"}(ne||(ne={})),function(e){e.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",e.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",e.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",e.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",e.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"}(re||(re={})),function(e){e.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",e.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",e.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",e.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"}(ie||(ie={})),function(e){e.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",e.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",e.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",e.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"}(oe||(oe={})),function(e){e.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",e.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",e.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",e.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",e.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",e.EDIT_MODE_STYLE="EDIT_MODE_STYLE",e.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",e.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"}(se||(se={})),function(e){e.FOREGROUND="FOREGROUND",e.BACKGROUND="BACKGROUND",e.PROMPT="PROMPT",e.SEMANTIC="SEMANTIC",e.INTERACTIVE="INTERACTIVE"}(ae||(ae={})),function(e){e.ASSET="ASSET",e.STYLE="STYLE"}(le||(le={})),function(e){e.INSERT="INSERT",e.REMOVE="REMOVE",e.REMOVE_STATIC="REMOVE_STATIC",e.OUTPAINT="OUTPAINT"}(ue||(ue={})),function(e){e.OPTIMIZED="OPTIMIZED",e.LOSSLESS="LOSSLESS"}(ce||(ce={})),function(e){e.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",e.PREFERENCE_TUNING="PREFERENCE_TUNING"}(de||(de={})),function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.STATE_PENDING="STATE_PENDING",e.STATE_ACTIVE="STATE_ACTIVE",e.STATE_FAILED="STATE_FAILED"}(he||(he={})),function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.PROCESSING="PROCESSING",e.ACTIVE="ACTIVE",e.FAILED="FAILED"}(fe||(fe={})),function(e){e.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",e.UPLOADED="UPLOADED",e.GENERATED="GENERATED"}(pe||(pe={})),function(e){e.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.RESPONSE_REJECTED="RESPONSE_REJECTED",e.NEED_MORE_INPUT="NEED_MORE_INPUT"}(me||(me={})),function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.VIDEO="VIDEO",e.AUDIO="AUDIO",e.DOCUMENT="DOCUMENT"}(ge||(ge={})),function(e){e.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",e.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",e.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"}(ye||(ye={})),function(e){e.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",e.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",e.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"}(ve||(ve={})),function(e){e.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",e.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",e.NO_INTERRUPTION="NO_INTERRUPTION"}(be||(be={})),function(e){e.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",e.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",e.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"}(Ee||(Ee={})),function(e){e.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",e.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",e.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",e.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",e.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",e.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",e.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",e.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",e.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",e.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",e.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",e.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",e.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"}(we||(we={})),function(e){e.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",e.QUALITY="QUALITY",e.DIVERSITY="DIVERSITY",e.VOCALIZATION="VOCALIZATION"}(Se||(Se={})),function(e){e.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",e.PLAY="PLAY",e.PAUSE="PAUSE",e.STOP="STOP",e.RESET_CONTEXT="RESET_CONTEXT"}(_e||(_e={}));class Ce{constructor(e){const t={};for(const n of e.headers.entries())t[n[0]]=n[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class Ie{get text(){var e,t,n,r,i,o,s,a;if(0===(null===(r=null===(n=null===(t=null===(e=this.candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content)||void 0===n?void 0:n.parts)||void 0===r?void 0:r.length))return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let l="",u=!1;const c=[];for(const d of null!==(a=null===(s=null===(o=null===(i=this.candidates)||void 0===i?void 0:i[0])||void 0===o?void 0:o.content)||void 0===s?void 0:s.parts)&&void 0!==a?a:[]){for(const[e,t]of Object.entries(d))"text"===e||"thought"===e||"thoughtSignature"===e||null===t&&void 0===t||c.push(e);if("string"===typeof d.text){if("boolean"===typeof d.thought&&d.thought)continue;u=!0,l+=d.text}}return c.length>0&&console.warn("there are non-text parts ".concat(c," in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.")),u?l:void 0}get data(){var e,t,n,r,i,o,s,a;if(0===(null===(r=null===(n=null===(t=null===(e=this.candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content)||void 0===n?void 0:n.parts)||void 0===r?void 0:r.length))return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let l="";const u=[];for(const c of null!==(a=null===(s=null===(o=null===(i=this.candidates)||void 0===i?void 0:i[0])||void 0===o?void 0:o.content)||void 0===s?void 0:s.parts)&&void 0!==a?a:[]){for(const[e,t]of Object.entries(c))"inlineData"===e||null===t&&void 0===t||u.push(e);c.inlineData&&"string"===typeof c.inlineData.data&&(l+=atob(c.inlineData.data))}return u.length>0&&console.warn("there are non-data parts ".concat(u," in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.")),l.length>0?btoa(l):void 0}get functionCalls(){var e,t,n,r,i,o,s,a;if(0===(null===(r=null===(n=null===(t=null===(e=this.candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content)||void 0===n?void 0:n.parts)||void 0===r?void 0:r.length))return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const l=null===(a=null===(s=null===(o=null===(i=this.candidates)||void 0===i?void 0:i[0])||void 0===o?void 0:o.content)||void 0===s?void 0:s.parts)||void 0===a?void 0:a.filter((e=>e.functionCall)).map((e=>e.functionCall)).filter((e=>void 0!==e));return 0!==(null===l||void 0===l?void 0:l.length)?l:void 0}get executableCode(){var e,t,n,r,i,o,s,a,l;if(0===(null===(r=null===(n=null===(t=null===(e=this.candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content)||void 0===n?void 0:n.parts)||void 0===r?void 0:r.length))return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const u=null===(a=null===(s=null===(o=null===(i=this.candidates)||void 0===i?void 0:i[0])||void 0===o?void 0:o.content)||void 0===s?void 0:s.parts)||void 0===a?void 0:a.filter((e=>e.executableCode)).map((e=>e.executableCode)).filter((e=>void 0!==e));return 0!==(null===u||void 0===u?void 0:u.length)?null===(l=null===u||void 0===u?void 0:u[0])||void 0===l?void 0:l.code:void 0}get codeExecutionResult(){var e,t,n,r,i,o,s,a,l;if(0===(null===(r=null===(n=null===(t=null===(e=this.candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content)||void 0===n?void 0:n.parts)||void 0===r?void 0:r.length))return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const u=null===(a=null===(s=null===(o=null===(i=this.candidates)||void 0===i?void 0:i[0])||void 0===o?void 0:o.content)||void 0===s?void 0:s.parts)||void 0===a?void 0:a.filter((e=>e.codeExecutionResult)).map((e=>e.codeExecutionResult)).filter((e=>void 0!==e));return 0!==(null===u||void 0===u?void 0:u.length)?null===(l=null===u||void 0===u?void 0:u[0])||void 0===l?void 0:l.output:void 0}}class Ae{}class xe{}class Ne{}class ke{}class Oe{}class Re{}class De{}class Pe{}class Me{}class Le{}class Ue{_fromAPIResponse(e){let{apiResponse:t,_isVertexAI:n}=e;const r=new Ue;let i;const o=t;return i=n?E(o):b(o),Object.assign(r,i),r}}class Fe{}class je{}class Ve{}class qe{}class Be{}class He{}class Ge{}class ze{_fromAPIResponse(e){let{apiResponse:t,_isVertexAI:n}=e;const r=new ze,i=w(t);return Object.assign(r,i),r}}class We{}class Ke{}class Je{}class Ye{}class Qe{get text(){var e,t,n;let r="",i=!1;const o=[];for(const s of null!==(n=null===(t=null===(e=this.serverContent)||void 0===e?void 0:e.modelTurn)||void 0===t?void 0:t.parts)&&void 0!==n?n:[]){for(const[e,t]of Object.entries(s))"text"!==e&&"thought"!==e&&null!==t&&o.push(e);if("string"===typeof s.text){if("boolean"===typeof s.thought&&s.thought)continue;i=!0,r+=s.text}}return o.length>0&&console.warn("there are non-text parts ".concat(o," in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.")),i?r:void 0}get data(){var e,t,n;let r="";const i=[];for(const o of null!==(n=null===(t=null===(e=this.serverContent)||void 0===e?void 0:e.modelTurn)||void 0===t?void 0:t.parts)&&void 0!==n?n:[]){for(const[e,t]of Object.entries(o))"inlineData"!==e&&null!==t&&i.push(e);o.inlineData&&"string"===typeof o.inlineData.data&&(r+=atob(o.inlineData.data))}return i.length>0&&console.warn("there are non-data parts ".concat(i," in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.")),r.length>0?btoa(r):void 0}}class Xe{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class $e{_fromAPIResponse(e){let{apiResponse:t,_isVertexAI:n}=e;const r=new $e,i=S(t);return Object.assign(r,i),r}}function Ze(e,t){if(!t||"string"!==typeof t)throw new Error("model is required and must be a string");if(t.includes("..")||t.includes("?")||t.includes("&"))throw new Error("invalid model parameter");if(e.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const e=t.split("/",2);return"publishers/".concat(e[0],"/models/").concat(e[1])}return"publishers/google/models/".concat(t)}return t.startsWith("models/")||t.startsWith("tunedModels/")?t:"models/".concat(t)}function et(e,t){const n=Ze(e,t);return n?n.startsWith("publishers/")&&e.isVertexAI()?"projects/".concat(e.getProject(),"/locations/").concat(e.getLocation(),"/").concat(n):n.startsWith("models/")&&e.isVertexAI()?"projects/".concat(e.getProject(),"/locations/").concat(e.getLocation(),"/publishers/google/").concat(n):n:""}function tt(e){return Array.isArray(e)?e.map((e=>nt(e))):[nt(e)]}function nt(e){if("object"===typeof e&&null!==e)return e;throw new Error("Could not parse input as Blob. Unsupported blob type: ".concat(typeof e))}function rt(e){const t=nt(e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error("Unsupported mime type: ".concat(t.mimeType))}function it(e){const t=nt(e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error("Unsupported mime type: ".concat(t.mimeType))}function ot(e){if(null===e||void 0===e)throw new Error("PartUnion is required");if("object"===typeof e)return e;if("string"===typeof e)return{text:e};throw new Error("Unsupported part type: ".concat(typeof e))}function st(e){if(null===e||void 0===e||Array.isArray(e)&&0===e.length)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map((e=>ot(e))):[ot(e)]}function at(e){return null!==e&&void 0!==e&&"object"===typeof e&&"parts"in e&&Array.isArray(e.parts)}function lt(e){return null!==e&&void 0!==e&&"object"===typeof e&&"functionCall"in e}function ut(e){return null!==e&&void 0!==e&&"object"===typeof e&&"functionResponse"in e}function ct(e){if(null===e||void 0===e)throw new Error("ContentUnion is required");return at(e)?e:{role:"user",parts:st(e)}}function dt(e,t){if(!t)return[];if(e.isVertexAI()&&Array.isArray(t))return t.flatMap((e=>{const t=ct(e);return t.parts&&t.parts.length>0&&void 0!==t.parts[0].text?[t.parts[0].text]:[]}));if(e.isVertexAI()){const e=ct(t);return e.parts&&e.parts.length>0&&void 0!==e.parts[0].text?[e.parts[0].text]:[]}return Array.isArray(t)?t.map((e=>ct(e))):[ct(t)]}function ht(e){if(null===e||void 0===e||Array.isArray(e)&&0===e.length)throw new Error("contents are required");if(!Array.isArray(e)){if(lt(e)||ut(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[ct(e)]}const t=[],n=[],r=at(e[0]);for(const i of e){const e=at(i);if(e!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(e)t.push(i);else{if(lt(i)||ut(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return r||t.push({role:"user",parts:st(n)}),t}function ft(e){const t={},n=["items"],r=["anyOf"],i=["properties"];if(e.type&&e.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=e.anyOf;null!=o&&2==o.length&&("null"===o[0].type?(t.nullable=!0,e=o[1]):"null"===o[1].type&&(t.nullable=!0,e=o[0])),e.type instanceof Array&&function(e,t){e.includes("null")&&(t.nullable=!0);const n=e.filter((e=>"null"!==e));if(1===n.length)t.type=Object.values(I).includes(n[0].toUpperCase())?n[0].toUpperCase():I.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const e of n)t.anyOf.push({type:Object.values(I).includes(e.toUpperCase())?e.toUpperCase():I.TYPE_UNSPECIFIED})}}(e.type,t);for(const[s,a]of Object.entries(e))if(null!=a)if("type"==s){if("null"===a)throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;t.type=Object.values(I).includes(a.toUpperCase())?a.toUpperCase():I.TYPE_UNSPECIFIED}else if(n.includes(s))t[s]=ft(a);else if(r.includes(s)){const e=[];for(const n of a)"null"!=n.type?e.push(ft(n)):t.nullable=!0;t[s]=e}else if(i.includes(s)){const e={};for(const[t,n]of Object.entries(a))e[t]=ft(n);t[s]=e}else{if("additionalProperties"===s)continue;t[s]=a}return t}function pt(e){return ft(e)}function mt(e){if("object"===typeof e)return e;if("string"===typeof e)return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error("Unsupported speechConfig type: ".concat(typeof e))}function gt(e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function yt(e){if(e.functionDeclarations)for(const t of e.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=ft(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=ft(t.response));return e}function vt(e){if(void 0===e||null===e)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");const t=[];for(const n of e)t.push(n);return t}function bt(e,t){if("string"!==typeof t)throw new Error("name must be a string");return function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const i=!t.startsWith("".concat(n,"/"))&&t.split("/").length===r;return e.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?"projects/".concat(e.getProject(),"/").concat(t):t.startsWith("".concat(n,"/"))?"projects/".concat(e.getProject(),"/locations/").concat(e.getLocation(),"/").concat(t):i?"projects/".concat(e.getProject(),"/locations/").concat(e.getLocation(),"/").concat(n,"/").concat(t):t:i?"".concat(n,"/").concat(t):t}(e,t,"cachedContents")}function Et(e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function wt(e){return v(e)}function St(e){var t;let n;var r;if(null!==(r=e)&&void 0!==r&&"object"===typeof r&&"name"in r&&(n=e.name),(!function(e){return null!==e&&void 0!==e&&"object"===typeof e&&"uri"in e}(e)||(n=e.uri,void 0!==n))&&(!function(e){return null!==e&&void 0!==e&&"object"===typeof e&&"video"in e}(e)||(n=null===(t=e.video)||void 0===t?void 0:t.uri,void 0!==n))){if("string"===typeof e&&(n=e),void 0===n)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const e=n.split("files/")[1].match(/[a-z0-9]+/);if(null===e)throw new Error("Could not extract file name from URI ".concat(n));n=e[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function _t(e,t){let n;return n=e.isVertexAI()?t?"publishers/google/models":"models":t?"models":"tunedModels",n}function Tt(e){for(const r of["models","tunedModels","publisherModels"])if(n=r,null!==(t=e)&&"object"===typeof t&&n in t)return e[r];var t,n;return[]}function Ct(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};n.outputSchema&&(r.responseJsonSchema=n.outputSchema),t.behavior&&(r.behavior=t.behavior);return{functionDeclarations:[r]}}function It(e,t){let n;if("string"===typeof t)if(e.isVertexAI())if(t.startsWith("gs://"))n={format:"jsonl",gcsUri:[t]};else{if(!t.startsWith("bq://"))throw new Error("Unsupported string source for Vertex AI: ".concat(t));n={format:"bigquery",bigqueryUri:t}}else{if(!t.startsWith("files/"))throw new Error("Unsupported string source for Gemini API: ".concat(t));n={fileName:t}}else if(Array.isArray(t)){if(e.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:t}}else n=t;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,i=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(e.isVertexAI()){if(i>0||1!==r)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||1!==i)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function At(e){if("object"!==typeof e||null===e)return{};const t=e,n=t.inlinedResponses;if("object"!==typeof n||null===n)return e;const r=n.inlinedResponses;if(!Array.isArray(r)||0===r.length)return e;let i=!1;for(const o of r){if("object"!==typeof o||null===o)continue;const e=o.response;if("object"!==typeof e||null===e)continue;if(void 0!==e.embedding){i=!0;break}}return i&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),e}function xt(e,t){const n=t;if(!e.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error("Invalid batch job name: ".concat(n,"."))}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error("Invalid batch job name: ".concat(n,"."))}function Nt(e){return"BATCH_STATE_UNSPECIFIED"===e?"JOB_STATE_UNSPECIFIED":"BATCH_STATE_PENDING"===e?"JOB_STATE_PENDING":"BATCH_STATE_RUNNING"===e?"JOB_STATE_RUNNING":"BATCH_STATE_SUCCEEDED"===e?"JOB_STATE_SUCCEEDED":"BATCH_STATE_FAILED"===e?"JOB_STATE_FAILED":"BATCH_STATE_CANCELLED"===e?"JOB_STATE_CANCELLED":"BATCH_STATE_EXPIRED"===e?"JOB_STATE_EXPIRED":e}function kt(e){const t={},n=g(e,["responsesFile"]);null!=n&&m(t,["fileName"],n);const r=g(e,["inlinedResponses","inlinedResponses"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map((e=>function(e){const t={},n=g(e,["response"]);null!=n&&m(t,["response"],function(e){const t={},n=g(e,["sdkHttpResponse"]);null!=n&&m(t,["sdkHttpResponse"],n);const r=g(e,["candidates"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map((e=>function(e){const t={},n=g(e,["content"]);null!=n&&m(t,["content"],n);const r=g(e,["citationMetadata"]);null!=r&&m(t,["citationMetadata"],function(e){const t={},n=g(e,["citationSources"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>e))),m(t,["citations"],e)}return t}(r));const i=g(e,["tokenCount"]);null!=i&&m(t,["tokenCount"],i);const o=g(e,["finishReason"]);null!=o&&m(t,["finishReason"],o);const s=g(e,["avgLogprobs"]);null!=s&&m(t,["avgLogprobs"],s);const a=g(e,["groundingMetadata"]);null!=a&&m(t,["groundingMetadata"],a);const l=g(e,["index"]);null!=l&&m(t,["index"],l);const u=g(e,["logprobsResult"]);null!=u&&m(t,["logprobsResult"],u);const c=g(e,["safetyRatings"]);if(null!=c){let e=c;Array.isArray(e)&&(e=e.map((e=>e))),m(t,["safetyRatings"],e)}const d=g(e,["urlContextMetadata"]);null!=d&&m(t,["urlContextMetadata"],d);return t}(e)))),m(t,["candidates"],e)}const i=g(e,["modelVersion"]);null!=i&&m(t,["modelVersion"],i);const o=g(e,["promptFeedback"]);null!=o&&m(t,["promptFeedback"],o);const s=g(e,["responseId"]);null!=s&&m(t,["responseId"],s);const a=g(e,["usageMetadata"]);null!=a&&m(t,["usageMetadata"],a);return t}(n));const r=g(e,["error"]);null!=r&&m(t,["error"],r);return t}(e)))),m(t,["inlinedResponses"],e)}const i=g(e,["inlinedEmbedContentResponses","inlinedResponses"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map((e=>e))),m(t,["inlinedEmbedContentResponses"],e)}return t}function Ot(e){const t={},n=g(e,["name"]);null!=n&&m(t,["name"],n);const r=g(e,["metadata","displayName"]);null!=r&&m(t,["displayName"],r);const i=g(e,["metadata","state"]);null!=i&&m(t,["state"],Nt(i));const o=g(e,["metadata","createTime"]);null!=o&&m(t,["createTime"],o);const s=g(e,["metadata","endTime"]);null!=s&&m(t,["endTime"],s);const a=g(e,["metadata","updateTime"]);null!=a&&m(t,["updateTime"],a);const l=g(e,["metadata","model"]);null!=l&&m(t,["model"],l);const u=g(e,["metadata","output"]);return null!=u&&m(t,["dest"],kt(At(u))),t}function Rt(e){const t={},n=g(e,["name"]);null!=n&&m(t,["name"],n);const r=g(e,["displayName"]);null!=r&&m(t,["displayName"],r);const i=g(e,["state"]);null!=i&&m(t,["state"],Nt(i));const o=g(e,["error"]);null!=o&&m(t,["error"],o);const s=g(e,["createTime"]);null!=s&&m(t,["createTime"],s);const a=g(e,["startTime"]);null!=a&&m(t,["startTime"],a);const l=g(e,["endTime"]);null!=l&&m(t,["endTime"],l);const u=g(e,["updateTime"]);null!=u&&m(t,["updateTime"],u);const c=g(e,["model"]);null!=c&&m(t,["model"],c);const d=g(e,["inputConfig"]);null!=d&&m(t,["src"],function(e){const t={},n=g(e,["instancesFormat"]);null!=n&&m(t,["format"],n);const r=g(e,["gcsSource","uris"]);null!=r&&m(t,["gcsUri"],r);const i=g(e,["bigquerySource","inputUri"]);null!=i&&m(t,["bigqueryUri"],i);return t}(d));const h=g(e,["outputConfig"]);null!=h&&m(t,["dest"],function(e){const t={},n=g(e,["predictionsFormat"]);null!=n&&m(t,["format"],n);const r=g(e,["gcsDestination","outputUriPrefix"]);null!=r&&m(t,["gcsUri"],r);const i=g(e,["bigqueryDestination","outputUri"]);return null!=i&&m(t,["bigqueryUri"],i),t}(At(h)));const f=g(e,["completionStats"]);return null!=f&&m(t,["completionStats"],f),t}function Dt(e,t){const n={};if(void 0!==g(t,["format"]))throw new Error("format parameter is not supported in Gemini API.");if(void 0!==g(t,["gcsUri"]))throw new Error("gcsUri parameter is not supported in Gemini API.");if(void 0!==g(t,["bigqueryUri"]))throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=g(t,["fileName"]);null!=r&&m(n,["fileName"],r);const i=g(t,["inlinedRequests"]);if(null!=i){let t=i;Array.isArray(t)&&(t=t.map((t=>function(e,t){const n={},r=g(t,["model"]);null!=r&&m(n,["request","model"],Ze(e,r));const i=g(t,["contents"]);if(null!=i){let e=ht(i);Array.isArray(e)&&(e=e.map((e=>Pt(e)))),m(n,["request","contents"],e)}const o=g(t,["metadata"]);null!=o&&m(n,["metadata"],o);const s=g(t,["config"]);null!=s&&m(n,["request","generationConfig"],function(e,t,n){const r={},i=g(t,["systemInstruction"]);void 0!==n&&null!=i&&m(n,["systemInstruction"],Pt(ct(i)));const o=g(t,["temperature"]);null!=o&&m(r,["temperature"],o);const s=g(t,["topP"]);null!=s&&m(r,["topP"],s);const a=g(t,["topK"]);null!=a&&m(r,["topK"],a);const l=g(t,["candidateCount"]);null!=l&&m(r,["candidateCount"],l);const u=g(t,["maxOutputTokens"]);null!=u&&m(r,["maxOutputTokens"],u);const c=g(t,["stopSequences"]);null!=c&&m(r,["stopSequences"],c);const d=g(t,["responseLogprobs"]);null!=d&&m(r,["responseLogprobs"],d);const h=g(t,["logprobs"]);null!=h&&m(r,["logprobs"],h);const f=g(t,["presencePenalty"]);null!=f&&m(r,["presencePenalty"],f);const p=g(t,["frequencyPenalty"]);null!=p&&m(r,["frequencyPenalty"],p);const y=g(t,["seed"]);null!=y&&m(r,["seed"],y);const v=g(t,["responseMimeType"]);null!=v&&m(r,["responseMimeType"],v);const b=g(t,["responseSchema"]);null!=b&&m(r,["responseSchema"],pt(b));const E=g(t,["responseJsonSchema"]);null!=E&&m(r,["responseJsonSchema"],E);if(void 0!==g(t,["routingConfig"]))throw new Error("routingConfig parameter is not supported in Gemini API.");if(void 0!==g(t,["modelSelectionConfig"]))throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const w=g(t,["safetySettings"]);if(void 0!==n&&null!=w){let e=w;Array.isArray(e)&&(e=e.map((e=>function(e){const t={},n=g(e,["category"]);null!=n&&m(t,["category"],n);if(void 0!==g(e,["method"]))throw new Error("method parameter is not supported in Gemini API.");const r=g(e,["threshold"]);null!=r&&m(t,["threshold"],r);return t}(e)))),m(n,["safetySettings"],e)}const S=g(t,["tools"]);if(void 0!==n&&null!=S){let e=vt(S);Array.isArray(e)&&(e=e.map((e=>function(e){const t={},n=g(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>e))),m(t,["functionDeclarations"],e)}if(void 0!==g(e,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");const r=g(e,["googleSearchRetrieval"]);null!=r&&m(t,["googleSearchRetrieval"],r);const i=g(e,["computerUse"]);null!=i&&m(t,["computerUse"],i);const o=g(e,["fileSearch"]);null!=o&&m(t,["fileSearch"],o);const s=g(e,["codeExecution"]);null!=s&&m(t,["codeExecution"],s);if(void 0!==g(e,["enterpriseWebSearch"]))throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=g(e,["googleMaps"]);null!=a&&m(t,["googleMaps"],function(e){const t={};if(void 0!==g(e,["authConfig"]))throw new Error("authConfig parameter is not supported in Gemini API.");const n=g(e,["enableWidget"]);null!=n&&m(t,["enableWidget"],n);return t}(a));const l=g(e,["googleSearch"]);null!=l&&m(t,["googleSearch"],function(e){const t={};if(void 0!==g(e,["excludeDomains"]))throw new Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==g(e,["blockingConfidence"]))throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=g(e,["timeRangeFilter"]);null!=n&&m(t,["timeRangeFilter"],n);return t}(l));const u=g(e,["urlContext"]);null!=u&&m(t,["urlContext"],u);return t}(yt(e))))),m(n,["tools"],e)}const _=g(t,["toolConfig"]);void 0!==n&&null!=_&&m(n,["toolConfig"],function(e){const t={},n=g(e,["functionCallingConfig"]);null!=n&&m(t,["functionCallingConfig"],function(e){const t={},n=g(e,["mode"]);null!=n&&m(t,["mode"],n);const r=g(e,["allowedFunctionNames"]);null!=r&&m(t,["allowedFunctionNames"],r);if(void 0!==g(e,["streamFunctionCallArguments"]))throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}(n));const r=g(e,["retrievalConfig"]);null!=r&&m(t,["retrievalConfig"],r);return t}(_));if(void 0!==g(t,["labels"]))throw new Error("labels parameter is not supported in Gemini API.");const T=g(t,["cachedContent"]);void 0!==n&&null!=T&&m(n,["cachedContent"],bt(e,T));const C=g(t,["responseModalities"]);null!=C&&m(r,["responseModalities"],C);const I=g(t,["mediaResolution"]);null!=I&&m(r,["mediaResolution"],I);const A=g(t,["speechConfig"]);null!=A&&m(r,["speechConfig"],mt(A));if(void 0!==g(t,["audioTimestamp"]))throw new Error("audioTimestamp parameter is not supported in Gemini API.");const x=g(t,["thinkingConfig"]);null!=x&&m(r,["thinkingConfig"],x);const N=g(t,["imageConfig"]);null!=N&&m(r,["imageConfig"],function(e){const t={},n=g(e,["aspectRatio"]);null!=n&&m(t,["aspectRatio"],n);const r=g(e,["imageSize"]);null!=r&&m(t,["imageSize"],r);if(void 0!==g(e,["outputMimeType"]))throw new Error("outputMimeType parameter is not supported in Gemini API.");if(void 0!==g(e,["outputCompressionQuality"]))throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}(N));return r}(e,s,g(n,["request"],{})));return n}(e,t)))),m(n,["requests","requests"],t)}return n}function Pt(e){const t={},n=g(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>function(e){const t={},n=g(e,["mediaResolution"]);null!=n&&m(t,["mediaResolution"],n);const r=g(e,["codeExecutionResult"]);null!=r&&m(t,["codeExecutionResult"],r);const i=g(e,["executableCode"]);null!=i&&m(t,["executableCode"],i);const o=g(e,["fileData"]);null!=o&&m(t,["fileData"],function(e){const t={};if(void 0!==g(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const n=g(e,["fileUri"]);null!=n&&m(t,["fileUri"],n);const r=g(e,["mimeType"]);null!=r&&m(t,["mimeType"],r);return t}(o));const s=g(e,["functionCall"]);null!=s&&m(t,["functionCall"],function(e){const t={},n=g(e,["id"]);null!=n&&m(t,["id"],n);const r=g(e,["args"]);null!=r&&m(t,["args"],r);const i=g(e,["name"]);null!=i&&m(t,["name"],i);if(void 0!==g(e,["partialArgs"]))throw new Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==g(e,["willContinue"]))throw new Error("willContinue parameter is not supported in Gemini API.");return t}(s));const a=g(e,["functionResponse"]);null!=a&&m(t,["functionResponse"],a);const l=g(e,["inlineData"]);null!=l&&m(t,["inlineData"],function(e){const t={},n=g(e,["data"]);if(null!=n&&m(t,["data"],n),void 0!==g(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const r=g(e,["mimeType"]);return null!=r&&m(t,["mimeType"],r),t}(l));const u=g(e,["text"]);null!=u&&m(t,["text"],u);const c=g(e,["thought"]);null!=c&&m(t,["thought"],c);const d=g(e,["thoughtSignature"]);null!=d&&m(t,["thoughtSignature"],d);const h=g(e,["videoMetadata"]);null!=h&&m(t,["videoMetadata"],h);return t}(e)))),m(t,["parts"],e)}const r=g(e,["role"]);return null!=r&&m(t,["role"],r),t}function Mt(e,t){const n=g(e,["displayName"]);void 0!==t&&null!=n&&m(t,["displayName"],n);const r=g(e,["dest"]);return void 0!==t&&null!=r&&m(t,["outputConfig"],function(e){const t={},n=g(e,["format"]);null!=n&&m(t,["predictionsFormat"],n);const r=g(e,["gcsUri"]);null!=r&&m(t,["gcsDestination","outputUriPrefix"],r);const i=g(e,["bigqueryUri"]);if(null!=i&&m(t,["bigqueryDestination","outputUri"],i),void 0!==g(e,["fileName"]))throw new Error("fileName parameter is not supported in Vertex AI.");if(void 0!==g(e,["inlinedResponses"]))throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(void 0!==g(e,["inlinedEmbedContentResponses"]))throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}(function(e){if("string"!==typeof e)return e;const t=e;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error("Unsupported destination: ".concat(t))}(r))),{}}function Lt(e,t){const n={},r=g(t,["model"]);null!=r&&m(n,["_url","model"],Ze(e,r));const i=g(t,["src"]);null!=i&&m(n,["batch","inputConfig"],Dt(e,It(e,i)));const o=g(t,["config"]);return null!=o&&function(e,t){const n=g(e,["displayName"]);if(void 0!==t&&null!=n&&m(t,["batch","displayName"],n),void 0!==g(e,["dest"]))throw new Error("dest parameter is not supported in Gemini API.")}(o,n),n}function Ut(e,t){const n={},r=g(t,["model"]);null!=r&&m(n,["model"],Ze(e,r));const i=g(t,["src"]);null!=i&&m(n,["inputConfig"],function(e){const t={},n=g(e,["format"]);null!=n&&m(t,["instancesFormat"],n);const r=g(e,["gcsUri"]);null!=r&&m(t,["gcsSource","uris"],r);const i=g(e,["bigqueryUri"]);if(null!=i&&m(t,["bigquerySource","inputUri"],i),void 0!==g(e,["fileName"]))throw new Error("fileName parameter is not supported in Vertex AI.");if(void 0!==g(e,["inlinedRequests"]))throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}(It(e,i)));const o=g(t,["config"]);return null!=o&&Mt(o,n),n}function Ft(e,t){const n={},r=g(t,["model"]);null!=r&&m(n,["_url","model"],Ze(e,r));const i=g(t,["src"]);null!=i&&m(n,["batch","inputConfig"],function(e,t){const n={},r=g(t,["fileName"]);null!=r&&m(n,["file_name"],r);const i=g(t,["inlinedRequests"]);null!=i&&m(n,["requests"],function(e,t){const n={},r=g(t,["contents"]);if(null!=r){let t=dt(e,r);Array.isArray(t)&&(t=t.map((e=>e))),m(n,["requests[]","request","content"],t)}const i=g(t,["config"]);null!=i&&(m(n,["_self"],function(e,t){const n={},r=g(e,["taskType"]);void 0!==t&&null!=r&&m(t,["requests[]","taskType"],r);const i=g(e,["title"]);void 0!==t&&null!=i&&m(t,["requests[]","title"],i);const o=g(e,["outputDimensionality"]);void 0!==t&&null!=o&&m(t,["requests[]","outputDimensionality"],o);if(void 0!==g(e,["mimeType"]))throw new Error("mimeType parameter is not supported in Gemini API.");if(void 0!==g(e,["autoTruncate"]))throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}(i,n)),function(e,t){for(const[n,r]of Object.entries(t)){const t=n.split("."),i=r.split("."),o=new Set;let s=-1;for(let e=0;e<t.length;e++)if("*"===t[e]){s=e;break}if(-1!==s&&i.length>s)for(let e=s;e<i.length;e++){const t=i[e];"*"===t||t.endsWith("[]")||t.endsWith("[0]")||o.add(t)}y(e,t,i,0,o)}}(n,{"requests[].*":"requests[].request.*"}));return n}(e,i));return n}(e,i));const o=g(t,["config"]);return null!=o&&function(e,t){const n=g(e,["displayName"]);void 0!==t&&null!=n&&m(t,["batch","displayName"],n)}(o,n),n}function jt(e){const t={},n=g(e,["config"]);return null!=n&&function(e,t){const n=g(e,["pageSize"]);void 0!==t&&null!=n&&m(t,["_query","pageSize"],n);const r=g(e,["pageToken"]);if(void 0!==t&&null!=r&&m(t,["_query","pageToken"],r),void 0!==g(e,["filter"]))throw new Error("filter parameter is not supported in Gemini API.")}(n,t),t}function Vt(e){const t={},n=g(e,["config"]);return null!=n&&function(e,t){const n=g(e,["pageSize"]);void 0!==t&&null!=n&&m(t,["_query","pageSize"],n);const r=g(e,["pageToken"]);void 0!==t&&null!=r&&m(t,["_query","pageToken"],r);const i=g(e,["filter"]);void 0!==t&&null!=i&&m(t,["_query","filter"],i)}(n,t),t}!function(e){e.PAGED_ITEM_BATCH_JOBS="batchJobs",e.PAGED_ITEM_MODELS="models",e.PAGED_ITEM_TUNING_JOBS="tuningJobs",e.PAGED_ITEM_FILES="files",e.PAGED_ITEM_CACHED_CONTENTS="cachedContents",e.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",e.PAGED_ITEM_DOCUMENTS="documents"}(Te||(Te={}));class qt{constructor(e,t,n,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,n,r)}init(e,t,n){var r,i;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=null===t||void 0===t?void 0:t.sdkHttpResponse,this.idxInternal=0;let o={config:{}};o=n&&0!==Object.keys(n).length?"object"===typeof n?Object.assign({},n):n:{config:{}},o.config&&(o.config.pageToken=t.nextPageToken),this.paramsInternal=o,this.pageInternalSize=null!==(i=null===(r=o.config)||void 0===r?void 0:r.pageSize)&&void 0!==i?i:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength){if(!this.hasNextPage())return{value:void 0,done:!0};await this.nextPage()}const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return void 0!==(null===(e=this.params.config)||void 0===e?void 0:e.pageToken)}}class Bt extends f{constructor(e){var t;super(),t=this,this.apiClient=e,this.list=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new qt(Te.PAGED_ITEM_BATCH_JOBS,(e=>t.listInternal(e)),await t.listInternal(e),e)},this.create=async e=>(this.apiClient.isVertexAI()&&(e.config=this.formatDestination(e.src,e.config)),this.createInternal(e)),this.createEmbeddings=async e=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(e)}}createInlinedGenerateContentRequest(e){const t=Lt(this.apiClient,e),n=p("{model}:batchGenerateContent",t._url),r=t.batch.inputConfig.requests,i=r.requests,o=[];for(const s of i){const e=Object.assign({},s);if(e.systemInstruction){const t=e.systemInstruction;delete e.systemInstruction;const n=e.request;n.systemInstruction=t,e.request=n}o.push(e)}return r.requests=o,delete t.config,delete t._url,delete t._query,{path:n,body:t}}getGcsUri(e){return"string"===typeof e?e.startsWith("gs://")?e:void 0:!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0?e.gcsUri[0]:void 0}getBigqueryUri(e){return"string"===typeof e?e.startsWith("bq://")?e:void 0:Array.isArray(e)?void 0:e.bigqueryUri}formatDestination(e,t){const n=t?Object.assign({},t):{},r=Date.now().toString();if(n.displayName||(n.displayName="genaiBatchJob_".concat(r)),void 0===n.dest){const t=this.getGcsUri(e),i=this.getBigqueryUri(e);if(t)t.endsWith(".jsonl")?n.dest="".concat(t.slice(0,-6),"/dest"):n.dest="".concat(t,"_dest_").concat(r);else{if(!i)throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.");n.dest="".concat(i,"_dest_").concat(r)}}return n}async createInternal(e){var t,n,r,i;let o,s="",a={};if(this.apiClient.isVertexAI()){const r=Ut(this.apiClient,e);return s=p("batchPredictionJobs",r._url),a=r._query,delete r._url,delete r._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),o.then((e=>Rt(e)))}{const t=Lt(this.apiClient,e);return s=p("{model}:batchGenerateContent",t._url),a=t._query,delete t._url,delete t._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then((e=>e.json())),o.then((e=>Ot(e)))}}async createEmbeddingsInternal(e){var t,n;let r,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=Ft(this.apiClient,e);return i=p("{model}:asyncBatchEmbedContent",s._url),o=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),r.then((e=>Ot(e)))}}async get(e){var t,n,r,i;let o,s="",a={};if(this.apiClient.isVertexAI()){const r=function(e,t){const n={},r=g(t,["name"]);return null!=r&&m(n,["_url","name"],xt(e,r)),n}(this.apiClient,e);return s=p("batchPredictionJobs/{name}",r._url),a=r._query,delete r._url,delete r._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),o.then((e=>Rt(e)))}{const t=function(e,t){const n={},r=g(t,["name"]);return null!=r&&m(n,["_url","name"],xt(e,r)),n}(this.apiClient,e);return s=p("batches/{name}",t._url),a=t._query,delete t._url,delete t._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then((e=>e.json())),o.then((e=>Ot(e)))}}async cancel(e){var t,n,r,i;let o="",s={};if(this.apiClient.isVertexAI()){const r=function(e,t){const n={},r=g(t,["name"]);return null!=r&&m(n,["_url","name"],xt(e,r)),n}(this.apiClient,e);o=p("batchPredictionJobs/{name}:cancel",r._url),s=r._query,delete r._url,delete r._query,await this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal})}else{const t=function(e,t){const n={},r=g(t,["name"]);return null!=r&&m(n,["_url","name"],xt(e,r)),n}(this.apiClient,e);o=p("batches/{name}:cancel",t._url),s=t._query,delete t._url,delete t._query,await this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal})}}async listInternal(e){var t,n,r,i;let o,s="",a={};if(this.apiClient.isVertexAI()){const r=Vt(e);return s=p("batchPredictionJobs",r._url),a=r._query,delete r._url,delete r._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),o.then((e=>{const t=function(e){const t={},n=g(e,["sdkHttpResponse"]);null!=n&&m(t,["sdkHttpResponse"],n);const r=g(e,["nextPageToken"]);null!=r&&m(t,["nextPageToken"],r);const i=g(e,["batchPredictionJobs"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map((e=>Rt(e)))),m(t,["batchJobs"],e)}return t}(e),n=new Ye;return Object.assign(n,t),n}))}{const t=jt(e);return s=p("batches",t._url),a=t._query,delete t._url,delete t._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),o.then((e=>{const t=function(e){const t={},n=g(e,["sdkHttpResponse"]);null!=n&&m(t,["sdkHttpResponse"],n);const r=g(e,["nextPageToken"]);null!=r&&m(t,["nextPageToken"],r);const i=g(e,["operations"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map((e=>Ot(e)))),m(t,["batchJobs"],e)}return t}(e),n=new Ye;return Object.assign(n,t),n}))}}async delete(e){var t,n,r,i;let o,s="",a={};if(this.apiClient.isVertexAI()){const r=function(e,t){const n={},r=g(t,["name"]);return null!=r&&m(n,["_url","name"],xt(e,r)),n}(this.apiClient,e);return s=p("batchPredictionJobs/{name}",r._url),a=r._query,delete r._url,delete r._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"DELETE",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),o.then((e=>function(e){const t={},n=g(e,["sdkHttpResponse"]);null!=n&&m(t,["sdkHttpResponse"],n);const r=g(e,["name"]);null!=r&&m(t,["name"],r);const i=g(e,["done"]);null!=i&&m(t,["done"],i);const o=g(e,["error"]);return null!=o&&m(t,["error"],o),t}(e)))}{const t=function(e,t){const n={},r=g(t,["name"]);return null!=r&&m(n,["_url","name"],xt(e,r)),n}(this.apiClient,e);return s=p("batches/{name}",t._url),a=t._query,delete t._url,delete t._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"DELETE",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),o.then((e=>function(e){const t={},n=g(e,["sdkHttpResponse"]);null!=n&&m(t,["sdkHttpResponse"],n);const r=g(e,["name"]);null!=r&&m(t,["name"],r);const i=g(e,["done"]);null!=i&&m(t,["done"],i);const o=g(e,["error"]);return null!=o&&m(t,["error"],o),t}(e)))}}}function Ht(e){const t={},n=g(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>function(e){const t={},n=g(e,["mediaResolution"]);null!=n&&m(t,["mediaResolution"],n);const r=g(e,["codeExecutionResult"]);null!=r&&m(t,["codeExecutionResult"],r);const i=g(e,["executableCode"]);null!=i&&m(t,["executableCode"],i);const o=g(e,["fileData"]);null!=o&&m(t,["fileData"],function(e){const t={};if(void 0!==g(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const n=g(e,["fileUri"]);null!=n&&m(t,["fileUri"],n);const r=g(e,["mimeType"]);null!=r&&m(t,["mimeType"],r);return t}(o));const s=g(e,["functionCall"]);null!=s&&m(t,["functionCall"],function(e){const t={},n=g(e,["id"]);null!=n&&m(t,["id"],n);const r=g(e,["args"]);null!=r&&m(t,["args"],r);const i=g(e,["name"]);null!=i&&m(t,["name"],i);if(void 0!==g(e,["partialArgs"]))throw new Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==g(e,["willContinue"]))throw new Error("willContinue parameter is not supported in Gemini API.");return t}(s));const a=g(e,["functionResponse"]);null!=a&&m(t,["functionResponse"],a);const l=g(e,["inlineData"]);null!=l&&m(t,["inlineData"],function(e){const t={},n=g(e,["data"]);if(null!=n&&m(t,["data"],n),void 0!==g(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const r=g(e,["mimeType"]);return null!=r&&m(t,["mimeType"],r),t}(l));const u=g(e,["text"]);null!=u&&m(t,["text"],u);const c=g(e,["thought"]);null!=c&&m(t,["thought"],c);const d=g(e,["thoughtSignature"]);null!=d&&m(t,["thoughtSignature"],d);const h=g(e,["videoMetadata"]);null!=h&&m(t,["videoMetadata"],h);return t}(e)))),m(t,["parts"],e)}const r=g(e,["role"]);return null!=r&&m(t,["role"],r),t}function Gt(e,t){const n=g(e,["ttl"]);void 0!==t&&null!=n&&m(t,["ttl"],n);const r=g(e,["expireTime"]);void 0!==t&&null!=r&&m(t,["expireTime"],r);const i=g(e,["displayName"]);void 0!==t&&null!=i&&m(t,["displayName"],i);const o=g(e,["contents"]);if(void 0!==t&&null!=o){let e=ht(o);Array.isArray(e)&&(e=e.map((e=>Ht(e)))),m(t,["contents"],e)}const s=g(e,["systemInstruction"]);void 0!==t&&null!=s&&m(t,["systemInstruction"],Ht(ct(s)));const a=g(e,["tools"]);if(void 0!==t&&null!=a){let e=a;Array.isArray(e)&&(e=e.map((e=>function(e){const t={},n=g(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>e))),m(t,["functionDeclarations"],e)}if(void 0!==g(e,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");const r=g(e,["googleSearchRetrieval"]);null!=r&&m(t,["googleSearchRetrieval"],r);const i=g(e,["computerUse"]);null!=i&&m(t,["computerUse"],i);const o=g(e,["fileSearch"]);null!=o&&m(t,["fileSearch"],o);const s=g(e,["codeExecution"]);null!=s&&m(t,["codeExecution"],s);if(void 0!==g(e,["enterpriseWebSearch"]))throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=g(e,["googleMaps"]);null!=a&&m(t,["googleMaps"],function(e){const t={};if(void 0!==g(e,["authConfig"]))throw new Error("authConfig parameter is not supported in Gemini API.");const n=g(e,["enableWidget"]);null!=n&&m(t,["enableWidget"],n);return t}(a));const l=g(e,["googleSearch"]);null!=l&&m(t,["googleSearch"],function(e){const t={};if(void 0!==g(e,["excludeDomains"]))throw new Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==g(e,["blockingConfidence"]))throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=g(e,["timeRangeFilter"]);null!=n&&m(t,["timeRangeFilter"],n);return t}(l));const u=g(e,["urlContext"]);null!=u&&m(t,["urlContext"],u);return t}(e)))),m(t,["tools"],e)}const l=g(e,["toolConfig"]);if(void 0!==t&&null!=l&&m(t,["toolConfig"],function(e){const t={},n=g(e,["functionCallingConfig"]);null!=n&&m(t,["functionCallingConfig"],function(e){const t={},n=g(e,["mode"]);null!=n&&m(t,["mode"],n);const r=g(e,["allowedFunctionNames"]);null!=r&&m(t,["allowedFunctionNames"],r);if(void 0!==g(e,["streamFunctionCallArguments"]))throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}(n));const r=g(e,["retrievalConfig"]);null!=r&&m(t,["retrievalConfig"],r);return t}(l)),void 0!==g(e,["kmsKeyName"]))throw new Error("kmsKeyName parameter is not supported in Gemini API.");return{}}function zt(e,t){const n=g(e,["ttl"]);void 0!==t&&null!=n&&m(t,["ttl"],n);const r=g(e,["expireTime"]);void 0!==t&&null!=r&&m(t,["expireTime"],r);const i=g(e,["displayName"]);void 0!==t&&null!=i&&m(t,["displayName"],i);const o=g(e,["contents"]);if(void 0!==t&&null!=o){let e=ht(o);Array.isArray(e)&&(e=e.map((e=>e))),m(t,["contents"],e)}const s=g(e,["systemInstruction"]);void 0!==t&&null!=s&&m(t,["systemInstruction"],ct(s));const a=g(e,["tools"]);if(void 0!==t&&null!=a){let e=a;Array.isArray(e)&&(e=e.map((e=>function(e){const t={},n=g(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>function(e){const t={};if(void 0!==g(e,["behavior"]))throw new Error("behavior parameter is not supported in Vertex AI.");const n=g(e,["description"]);null!=n&&m(t,["description"],n);const r=g(e,["name"]);null!=r&&m(t,["name"],r);const i=g(e,["parameters"]);null!=i&&m(t,["parameters"],i);const o=g(e,["parametersJsonSchema"]);null!=o&&m(t,["parametersJsonSchema"],o);const s=g(e,["response"]);null!=s&&m(t,["response"],s);const a=g(e,["responseJsonSchema"]);null!=a&&m(t,["responseJsonSchema"],a);return t}(e)))),m(t,["functionDeclarations"],e)}const r=g(e,["retrieval"]);null!=r&&m(t,["retrieval"],r);const i=g(e,["googleSearchRetrieval"]);null!=i&&m(t,["googleSearchRetrieval"],i);const o=g(e,["computerUse"]);null!=o&&m(t,["computerUse"],o);if(void 0!==g(e,["fileSearch"]))throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=g(e,["codeExecution"]);null!=s&&m(t,["codeExecution"],s);const a=g(e,["enterpriseWebSearch"]);null!=a&&m(t,["enterpriseWebSearch"],a);const l=g(e,["googleMaps"]);null!=l&&m(t,["googleMaps"],l);const u=g(e,["googleSearch"]);null!=u&&m(t,["googleSearch"],u);const c=g(e,["urlContext"]);null!=c&&m(t,["urlContext"],c);return t}(e)))),m(t,["tools"],e)}const l=g(e,["toolConfig"]);void 0!==t&&null!=l&&m(t,["toolConfig"],l);const u=g(e,["kmsKeyName"]);return void 0!==t&&null!=u&&m(t,["encryption_spec","kmsKeyName"],u),{}}function Wt(e){const t={},n=g(e,["config"]);return null!=n&&function(e,t){const n=g(e,["pageSize"]);void 0!==t&&null!=n&&m(t,["_query","pageSize"],n);const r=g(e,["pageToken"]);void 0!==t&&null!=r&&m(t,["_query","pageToken"],r)}(n,t),t}function Kt(e){const t={},n=g(e,["config"]);return null!=n&&function(e,t){const n=g(e,["pageSize"]);void 0!==t&&null!=n&&m(t,["_query","pageSize"],n);const r=g(e,["pageToken"]);void 0!==t&&null!=r&&m(t,["_query","pageToken"],r)}(n,t),t}function Jt(e,t){const n={},r=g(t,["name"]);null!=r&&m(n,["_url","name"],bt(e,r));const i=g(t,["config"]);return null!=i&&function(e,t){const n=g(e,["ttl"]);void 0!==t&&null!=n&&m(t,["ttl"],n);const r=g(e,["expireTime"]);void 0!==t&&null!=r&&m(t,["expireTime"],r)}(i,n),n}function Yt(e,t){const n={},r=g(t,["name"]);null!=r&&m(n,["_url","name"],bt(e,r));const i=g(t,["config"]);return null!=i&&function(e,t){const n=g(e,["ttl"]);void 0!==t&&null!=n&&m(t,["ttl"],n);const r=g(e,["expireTime"]);void 0!==t&&null!=r&&m(t,["expireTime"],r)}(i,n),n}class Qt extends f{constructor(e){var t;super(),t=this,this.apiClient=e,this.list=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new qt(Te.PAGED_ITEM_CACHED_CONTENTS,(e=>t.listInternal(e)),await t.listInternal(e),e)}}async create(e){var t,n,r,i;let o,s="",a={};if(this.apiClient.isVertexAI()){const r=function(e,t){const n={},r=g(t,["model"]);null!=r&&m(n,["model"],et(e,r));const i=g(t,["config"]);return null!=i&&zt(i,n),n}(this.apiClient,e);return s=p("cachedContents",r._url),a=r._query,delete r._url,delete r._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),o.then((e=>e))}{const t=function(e,t){const n={},r=g(t,["model"]);null!=r&&m(n,["model"],et(e,r));const i=g(t,["config"]);return null!=i&&Gt(i,n),n}(this.apiClient,e);return s=p("cachedContents",t._url),a=t._query,delete t._url,delete t._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then((e=>e.json())),o.then((e=>e))}}async get(e){var t,n,r,i;let o,s="",a={};if(this.apiClient.isVertexAI()){const r=function(e,t){const n={},r=g(t,["name"]);return null!=r&&m(n,["_url","name"],bt(e,r)),n}(this.apiClient,e);return s=p("{name}",r._url),a=r._query,delete r._url,delete r._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),o.then((e=>e))}{const t=function(e,t){const n={},r=g(t,["name"]);return null!=r&&m(n,["_url","name"],bt(e,r)),n}(this.apiClient,e);return s=p("{name}",t._url),a=t._query,delete t._url,delete t._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then((e=>e.json())),o.then((e=>e))}}async delete(e){var t,n,r,i;let o,s="",a={};if(this.apiClient.isVertexAI()){const r=function(e,t){const n={},r=g(t,["name"]);return null!=r&&m(n,["_url","name"],bt(e,r)),n}(this.apiClient,e);return s=p("{name}",r._url),a=r._query,delete r._url,delete r._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"DELETE",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),o.then((e=>{const t=function(e){const t={},n=g(e,["sdkHttpResponse"]);return null!=n&&m(t,["sdkHttpResponse"],n),t}(e),n=new Ve;return Object.assign(n,t),n}))}{const t=function(e,t){const n={},r=g(t,["name"]);return null!=r&&m(n,["_url","name"],bt(e,r)),n}(this.apiClient,e);return s=p("{name}",t._url),a=t._query,delete t._url,delete t._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"DELETE",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),o.then((e=>{const t=function(e){const t={},n=g(e,["sdkHttpResponse"]);return null!=n&&m(t,["sdkHttpResponse"],n),t}(e),n=new Ve;return Object.assign(n,t),n}))}}async update(e){var t,n,r,i;let o,s="",a={};if(this.apiClient.isVertexAI()){const r=Yt(this.apiClient,e);return s=p("{name}",r._url),a=r._query,delete r._url,delete r._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"PATCH",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),o.then((e=>e))}{const t=Jt(this.apiClient,e);return s=p("{name}",t._url),a=t._query,delete t._url,delete t._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"PATCH",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then((e=>e.json())),o.then((e=>e))}}async listInternal(e){var t,n,r,i;let o,s="",a={};if(this.apiClient.isVertexAI()){const r=Kt(e);return s=p("cachedContents",r._url),a=r._query,delete r._url,delete r._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),o.then((e=>{const t=function(e){const t={},n=g(e,["sdkHttpResponse"]);null!=n&&m(t,["sdkHttpResponse"],n);const r=g(e,["nextPageToken"]);null!=r&&m(t,["nextPageToken"],r);const i=g(e,["cachedContents"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map((e=>e))),m(t,["cachedContents"],e)}return t}(e),n=new qe;return Object.assign(n,t),n}))}{const t=Wt(e);return s=p("cachedContents",t._url),a=t._query,delete t._url,delete t._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),o.then((e=>{const t=function(e){const t={},n=g(e,["sdkHttpResponse"]);null!=n&&m(t,["sdkHttpResponse"],n);const r=g(e,["nextPageToken"]);null!=r&&m(t,["nextPageToken"],r);const i=g(e,["cachedContents"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map((e=>e))),m(t,["cachedContents"],e)}return t}(e),n=new qe;return Object.assign(n,t),n}))}}}function Xt(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function $t(e){return this instanceof $t?(this.v=e,this):new $t(e)}function Zt(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r=Object.create(("function"===typeof AsyncIterator?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",(function(e){return function(t){return Promise.resolve(t).then(e,u)}})),r[Symbol.asyncIterator]=function(){return this},r;function s(e,t){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||a(e,t)}))},t&&(r[e]=t(r[e])))}function a(e,t){try{!function(e){e.value instanceof $t?Promise.resolve(e.value.v).then(l,u):c(o[0][2],e)}(i[e](t))}catch(qv){c(o[0][3],qv)}}function l(e){a("next",e)}function u(e){a("throw",e)}function c(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}}function en(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=Xt(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,i,(t=e[n](t)).done,t.value)}))}}}function tn(e){var t;if(void 0==e.candidates||0===e.candidates.length)return!1;const n=null===(t=e.candidates[0])||void 0===t?void 0:t.content;return void 0!==n&&nn(n)}function nn(e){if(void 0===e.parts||0===e.parts.length)return!1;for(const t of e.parts)if(void 0===t||0===Object.keys(t).length)return!1;return!0}function rn(e){if(void 0===e||0===e.length)return[];const t=[],n=e.length;let r=0;for(;r<n;)if("user"===e[r].role)t.push(e[r]),r++;else{const i=[];let o=!0;for(;r<n&&"model"===e[r].role;)i.push(e[r]),o&&!nn(e[r])&&(o=!1),r++;o?t.push(...i):t.pop()}return t}"function"===typeof SuppressedError&&SuppressedError;class on{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new sn(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class sn{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];this.apiClient=e,this.modelsModule=t,this.model=n,this.config=r,this.history=i,this.sendPromise=Promise.resolve(),function(e){if(0!==e.length)for(const t of e)if("user"!==t.role&&"model"!==t.role)throw new Error("Role must be user or model, but got ".concat(t.role,"."))}(i)}async sendMessage(e){var t;await this.sendPromise;const n=ct(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(n),config:null!==(t=e.config)&&void 0!==t?t:this.config});return this.sendPromise=(async()=>{var e,t,i;const o=await r,s=null===(t=null===(e=o.candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content,a=o.automaticFunctionCallingHistory,l=this.getHistory(!0).length;let u=[];null!=a&&(u=null!==(i=a.slice(l))&&void 0!==i?i:[]);const c=s?[s]:[];this.recordHistory(n,c,u)})(),await this.sendPromise.catch((()=>{this.sendPromise=Promise.resolve()})),r}async sendMessageStream(e){var t;await this.sendPromise;const n=ct(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(n),config:null!==(t=e.config)&&void 0!==t?t:this.config});this.sendPromise=r.then((()=>{})).catch((()=>{}));const i=await r;return this.processStreamResponse(i,n)}getHistory(){const e=arguments.length>0&&void 0!==arguments[0]&&arguments[0]?rn(this.history):this.history;return structuredClone(e)}processStreamResponse(e,t){var n,r;return Zt(this,arguments,(function*(){var i,o,s,a;const l=[];try{for(var u,c=!0,d=en(e);!(i=(u=yield $t(d.next())).done);c=!0){a=u.value,c=!1;const e=a;if(tn(e)){const t=null===(r=null===(n=e.candidates)||void 0===n?void 0:n[0])||void 0===r?void 0:r.content;void 0!==t&&l.push(t)}yield yield $t(e)}}catch(h){o={error:h}}finally{try{c||i||!(s=d.return)||(yield $t(s.call(d)))}finally{if(o)throw o.error}}this.recordHistory(t,l)}))}recordHistory(e,t,n){let r=[];t.length>0&&t.every((e=>void 0!==e.role))?r=t:r.push({role:"model",parts:[]}),n&&n.length>0?this.history.push(...rn(n)):this.history.push(e),this.history.push(...r)}}class an extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,an.prototype)}}function ln(e){const t={},n=g(e,["config"]);return null!=n&&function(e,t){const n=g(e,["pageSize"]);void 0!==t&&null!=n&&m(t,["_query","pageSize"],n);const r=g(e,["pageToken"]);void 0!==t&&null!=r&&m(t,["_query","pageToken"],r)}(n,t),t}class un extends f{constructor(e){var t;super(),t=this,this.apiClient=e,this.list=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new qt(Te.PAGED_ITEM_FILES,(e=>t.listInternal(e)),await t.listInternal(e),e)}}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then((e=>e))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,n;let r,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=ln(e);return i=p("files",s._url),o=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),r.then((e=>{const t=function(e){const t={},n=g(e,["sdkHttpResponse"]);null!=n&&m(t,["sdkHttpResponse"],n);const r=g(e,["nextPageToken"]);null!=r&&m(t,["nextPageToken"],r);const i=g(e,["files"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map((e=>e))),m(t,["files"],e)}return t}(e),n=new We;return Object.assign(n,t),n}))}}async createInternal(e){var t,n;let r,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=function(e){const t={},n=g(e,["file"]);return null!=n&&m(t,["file"],n),t}(e);return i=p("upload/v1beta/files",s._url),o=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),r.then((e=>{const t=function(e){const t={},n=g(e,["sdkHttpResponse"]);return null!=n&&m(t,["sdkHttpResponse"],n),t}(e),n=new Ke;return Object.assign(n,t),n}))}}async get(e){var t,n;let r,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=function(e){const t={},n=g(e,["name"]);return null!=n&&m(t,["_url","file"],St(n)),t}(e);return i=p("files/{file}",s._url),o=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),r.then((e=>e))}}async delete(e){var t,n;let r,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=function(e){const t={},n=g(e,["name"]);return null!=n&&m(t,["_url","file"],St(n)),t}(e);return i=p("files/{file}",s._url),o=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),r.then((e=>{const t=function(e){const t={},n=g(e,["sdkHttpResponse"]);return null!=n&&m(t,["sdkHttpResponse"],n),t}(e),n=new Je;return Object.assign(n,t),n}))}}}function cn(e){const t={},n=g(e,["data"]);if(null!=n&&m(t,["data"],n),void 0!==g(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const r=g(e,["mimeType"]);return null!=r&&m(t,["mimeType"],r),t}function dn(e){const t={},n=g(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>function(e){const t={},n=g(e,["mediaResolution"]);null!=n&&m(t,["mediaResolution"],n);const r=g(e,["codeExecutionResult"]);null!=r&&m(t,["codeExecutionResult"],r);const i=g(e,["executableCode"]);null!=i&&m(t,["executableCode"],i);const o=g(e,["fileData"]);null!=o&&m(t,["fileData"],function(e){const t={};if(void 0!==g(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const n=g(e,["fileUri"]);null!=n&&m(t,["fileUri"],n);const r=g(e,["mimeType"]);null!=r&&m(t,["mimeType"],r);return t}(o));const s=g(e,["functionCall"]);null!=s&&m(t,["functionCall"],function(e){const t={},n=g(e,["id"]);null!=n&&m(t,["id"],n);const r=g(e,["args"]);null!=r&&m(t,["args"],r);const i=g(e,["name"]);null!=i&&m(t,["name"],i);if(void 0!==g(e,["partialArgs"]))throw new Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==g(e,["willContinue"]))throw new Error("willContinue parameter is not supported in Gemini API.");return t}(s));const a=g(e,["functionResponse"]);null!=a&&m(t,["functionResponse"],a);const l=g(e,["inlineData"]);null!=l&&m(t,["inlineData"],cn(l));const u=g(e,["text"]);null!=u&&m(t,["text"],u);const c=g(e,["thought"]);null!=c&&m(t,["thought"],c);const d=g(e,["thoughtSignature"]);null!=d&&m(t,["thoughtSignature"],d);const h=g(e,["videoMetadata"]);null!=h&&m(t,["videoMetadata"],h);return t}(e)))),m(t,["parts"],e)}const r=g(e,["role"]);return null!=r&&m(t,["role"],r),t}function hn(e,t){const n=g(e,["generationConfig"]);void 0!==t&&null!=n&&m(t,["setup","generationConfig"],n);const r=g(e,["responseModalities"]);void 0!==t&&null!=r&&m(t,["setup","generationConfig","responseModalities"],r);const i=g(e,["temperature"]);void 0!==t&&null!=i&&m(t,["setup","generationConfig","temperature"],i);const o=g(e,["topP"]);void 0!==t&&null!=o&&m(t,["setup","generationConfig","topP"],o);const s=g(e,["topK"]);void 0!==t&&null!=s&&m(t,["setup","generationConfig","topK"],s);const a=g(e,["maxOutputTokens"]);void 0!==t&&null!=a&&m(t,["setup","generationConfig","maxOutputTokens"],a);const l=g(e,["mediaResolution"]);void 0!==t&&null!=l&&m(t,["setup","generationConfig","mediaResolution"],l);const u=g(e,["seed"]);void 0!==t&&null!=u&&m(t,["setup","generationConfig","seed"],u);const c=g(e,["speechConfig"]);void 0!==t&&null!=c&&m(t,["setup","generationConfig","speechConfig"],gt(c));const d=g(e,["thinkingConfig"]);void 0!==t&&null!=d&&m(t,["setup","generationConfig","thinkingConfig"],d);const h=g(e,["enableAffectiveDialog"]);void 0!==t&&null!=h&&m(t,["setup","generationConfig","enableAffectiveDialog"],h);const f=g(e,["systemInstruction"]);void 0!==t&&null!=f&&m(t,["setup","systemInstruction"],dn(ct(f)));const p=g(e,["tools"]);if(void 0!==t&&null!=p){let e=vt(p);Array.isArray(e)&&(e=e.map((e=>function(e){const t={},n=g(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>e))),m(t,["functionDeclarations"],e)}if(void 0!==g(e,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");const r=g(e,["googleSearchRetrieval"]);null!=r&&m(t,["googleSearchRetrieval"],r);const i=g(e,["computerUse"]);null!=i&&m(t,["computerUse"],i);const o=g(e,["fileSearch"]);null!=o&&m(t,["fileSearch"],o);const s=g(e,["codeExecution"]);null!=s&&m(t,["codeExecution"],s);if(void 0!==g(e,["enterpriseWebSearch"]))throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=g(e,["googleMaps"]);null!=a&&m(t,["googleMaps"],function(e){const t={};if(void 0!==g(e,["authConfig"]))throw new Error("authConfig parameter is not supported in Gemini API.");const n=g(e,["enableWidget"]);return null!=n&&m(t,["enableWidget"],n),t}(a));const l=g(e,["googleSearch"]);null!=l&&m(t,["googleSearch"],function(e){const t={};if(void 0!==g(e,["excludeDomains"]))throw new Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==g(e,["blockingConfidence"]))throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=g(e,["timeRangeFilter"]);return null!=n&&m(t,["timeRangeFilter"],n),t}(l));const u=g(e,["urlContext"]);null!=u&&m(t,["urlContext"],u);return t}(yt(e))))),m(t,["setup","tools"],e)}const y=g(e,["sessionResumption"]);void 0!==t&&null!=y&&m(t,["setup","sessionResumption"],function(e){const t={},n=g(e,["handle"]);null!=n&&m(t,["handle"],n);if(void 0!==g(e,["transparent"]))throw new Error("transparent parameter is not supported in Gemini API.");return t}(y));const v=g(e,["inputAudioTranscription"]);void 0!==t&&null!=v&&m(t,["setup","inputAudioTranscription"],v);const b=g(e,["outputAudioTranscription"]);void 0!==t&&null!=b&&m(t,["setup","outputAudioTranscription"],b);const E=g(e,["realtimeInputConfig"]);void 0!==t&&null!=E&&m(t,["setup","realtimeInputConfig"],E);const w=g(e,["contextWindowCompression"]);void 0!==t&&null!=w&&m(t,["setup","contextWindowCompression"],w);const S=g(e,["proactivity"]);return void 0!==t&&null!=S&&m(t,["setup","proactivity"],S),{}}function fn(e,t){const n=g(e,["generationConfig"]);void 0!==t&&null!=n&&m(t,["setup","generationConfig"],function(e){const t={},n=g(e,["modelSelectionConfig"]);null!=n&&m(t,["modelConfig"],n);const r=g(e,["responseJsonSchema"]);null!=r&&m(t,["responseJsonSchema"],r);const i=g(e,["audioTimestamp"]);null!=i&&m(t,["audioTimestamp"],i);const o=g(e,["candidateCount"]);null!=o&&m(t,["candidateCount"],o);const s=g(e,["enableAffectiveDialog"]);null!=s&&m(t,["enableAffectiveDialog"],s);const a=g(e,["frequencyPenalty"]);null!=a&&m(t,["frequencyPenalty"],a);const l=g(e,["logprobs"]);null!=l&&m(t,["logprobs"],l);const u=g(e,["maxOutputTokens"]);null!=u&&m(t,["maxOutputTokens"],u);const c=g(e,["mediaResolution"]);null!=c&&m(t,["mediaResolution"],c);const d=g(e,["presencePenalty"]);null!=d&&m(t,["presencePenalty"],d);const h=g(e,["responseLogprobs"]);null!=h&&m(t,["responseLogprobs"],h);const f=g(e,["responseMimeType"]);null!=f&&m(t,["responseMimeType"],f);const p=g(e,["responseModalities"]);null!=p&&m(t,["responseModalities"],p);const y=g(e,["responseSchema"]);null!=y&&m(t,["responseSchema"],y);const v=g(e,["routingConfig"]);null!=v&&m(t,["routingConfig"],v);const b=g(e,["seed"]);null!=b&&m(t,["seed"],b);const E=g(e,["speechConfig"]);null!=E&&m(t,["speechConfig"],yn(E));const w=g(e,["stopSequences"]);null!=w&&m(t,["stopSequences"],w);const S=g(e,["temperature"]);null!=S&&m(t,["temperature"],S);const _=g(e,["thinkingConfig"]);null!=_&&m(t,["thinkingConfig"],_);const T=g(e,["topK"]);null!=T&&m(t,["topK"],T);const C=g(e,["topP"]);if(null!=C&&m(t,["topP"],C),void 0!==g(e,["enableEnhancedCivicAnswers"]))throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}(n));const r=g(e,["responseModalities"]);void 0!==t&&null!=r&&m(t,["setup","generationConfig","responseModalities"],r);const i=g(e,["temperature"]);void 0!==t&&null!=i&&m(t,["setup","generationConfig","temperature"],i);const o=g(e,["topP"]);void 0!==t&&null!=o&&m(t,["setup","generationConfig","topP"],o);const s=g(e,["topK"]);void 0!==t&&null!=s&&m(t,["setup","generationConfig","topK"],s);const a=g(e,["maxOutputTokens"]);void 0!==t&&null!=a&&m(t,["setup","generationConfig","maxOutputTokens"],a);const l=g(e,["mediaResolution"]);void 0!==t&&null!=l&&m(t,["setup","generationConfig","mediaResolution"],l);const u=g(e,["seed"]);void 0!==t&&null!=u&&m(t,["setup","generationConfig","seed"],u);const c=g(e,["speechConfig"]);void 0!==t&&null!=c&&m(t,["setup","generationConfig","speechConfig"],yn(gt(c)));const d=g(e,["thinkingConfig"]);void 0!==t&&null!=d&&m(t,["setup","generationConfig","thinkingConfig"],d);const h=g(e,["enableAffectiveDialog"]);void 0!==t&&null!=h&&m(t,["setup","generationConfig","enableAffectiveDialog"],h);const f=g(e,["systemInstruction"]);void 0!==t&&null!=f&&m(t,["setup","systemInstruction"],ct(f));const p=g(e,["tools"]);if(void 0!==t&&null!=p){let e=vt(p);Array.isArray(e)&&(e=e.map((e=>function(e){const t={},n=g(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>function(e){const t={};if(void 0!==g(e,["behavior"]))throw new Error("behavior parameter is not supported in Vertex AI.");const n=g(e,["description"]);null!=n&&m(t,["description"],n);const r=g(e,["name"]);null!=r&&m(t,["name"],r);const i=g(e,["parameters"]);null!=i&&m(t,["parameters"],i);const o=g(e,["parametersJsonSchema"]);null!=o&&m(t,["parametersJsonSchema"],o);const s=g(e,["response"]);null!=s&&m(t,["response"],s);const a=g(e,["responseJsonSchema"]);return null!=a&&m(t,["responseJsonSchema"],a),t}(e)))),m(t,["functionDeclarations"],e)}const r=g(e,["retrieval"]);null!=r&&m(t,["retrieval"],r);const i=g(e,["googleSearchRetrieval"]);null!=i&&m(t,["googleSearchRetrieval"],i);const o=g(e,["computerUse"]);null!=o&&m(t,["computerUse"],o);if(void 0!==g(e,["fileSearch"]))throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=g(e,["codeExecution"]);null!=s&&m(t,["codeExecution"],s);const a=g(e,["enterpriseWebSearch"]);null!=a&&m(t,["enterpriseWebSearch"],a);const l=g(e,["googleMaps"]);null!=l&&m(t,["googleMaps"],l);const u=g(e,["googleSearch"]);null!=u&&m(t,["googleSearch"],u);const c=g(e,["urlContext"]);null!=c&&m(t,["urlContext"],c);return t}(yt(e))))),m(t,["setup","tools"],e)}const y=g(e,["sessionResumption"]);void 0!==t&&null!=y&&m(t,["setup","sessionResumption"],y);const v=g(e,["inputAudioTranscription"]);void 0!==t&&null!=v&&m(t,["setup","inputAudioTranscription"],v);const b=g(e,["outputAudioTranscription"]);void 0!==t&&null!=b&&m(t,["setup","outputAudioTranscription"],b);const E=g(e,["realtimeInputConfig"]);void 0!==t&&null!=E&&m(t,["setup","realtimeInputConfig"],E);const w=g(e,["contextWindowCompression"]);void 0!==t&&null!=w&&m(t,["setup","contextWindowCompression"],w);const S=g(e,["proactivity"]);return void 0!==t&&null!=S&&m(t,["setup","proactivity"],S),{}}function pn(e){const t={},n=g(e,["media"]);if(null!=n){let e=tt(n);Array.isArray(e)&&(e=e.map((e=>cn(e)))),m(t,["mediaChunks"],e)}const r=g(e,["audio"]);null!=r&&m(t,["audio"],cn(it(r)));const i=g(e,["audioStreamEnd"]);null!=i&&m(t,["audioStreamEnd"],i);const o=g(e,["video"]);null!=o&&m(t,["video"],cn(rt(o)));const s=g(e,["text"]);null!=s&&m(t,["text"],s);const a=g(e,["activityStart"]);null!=a&&m(t,["activityStart"],a);const l=g(e,["activityEnd"]);return null!=l&&m(t,["activityEnd"],l),t}function mn(e){const t={},n=g(e,["media"]);if(null!=n){let e=tt(n);Array.isArray(e)&&(e=e.map((e=>e))),m(t,["mediaChunks"],e)}const r=g(e,["audio"]);null!=r&&m(t,["audio"],it(r));const i=g(e,["audioStreamEnd"]);null!=i&&m(t,["audioStreamEnd"],i);const o=g(e,["video"]);null!=o&&m(t,["video"],rt(o));const s=g(e,["text"]);null!=s&&m(t,["text"],s);const a=g(e,["activityStart"]);null!=a&&m(t,["activityStart"],a);const l=g(e,["activityEnd"]);return null!=l&&m(t,["activityEnd"],l),t}function gn(e){const t={},n=g(e,["setupComplete"]);null!=n&&m(t,["setupComplete"],n);const r=g(e,["serverContent"]);null!=r&&m(t,["serverContent"],r);const i=g(e,["toolCall"]);null!=i&&m(t,["toolCall"],i);const o=g(e,["toolCallCancellation"]);null!=o&&m(t,["toolCallCancellation"],o);const s=g(e,["usageMetadata"]);null!=s&&m(t,["usageMetadata"],function(e){const t={},n=g(e,["promptTokenCount"]);null!=n&&m(t,["promptTokenCount"],n);const r=g(e,["cachedContentTokenCount"]);null!=r&&m(t,["cachedContentTokenCount"],r);const i=g(e,["candidatesTokenCount"]);null!=i&&m(t,["responseTokenCount"],i);const o=g(e,["toolUsePromptTokenCount"]);null!=o&&m(t,["toolUsePromptTokenCount"],o);const s=g(e,["thoughtsTokenCount"]);null!=s&&m(t,["thoughtsTokenCount"],s);const a=g(e,["totalTokenCount"]);null!=a&&m(t,["totalTokenCount"],a);const l=g(e,["promptTokensDetails"]);if(null!=l){let e=l;Array.isArray(e)&&(e=e.map((e=>e))),m(t,["promptTokensDetails"],e)}const u=g(e,["cacheTokensDetails"]);if(null!=u){let e=u;Array.isArray(e)&&(e=e.map((e=>e))),m(t,["cacheTokensDetails"],e)}const c=g(e,["candidatesTokensDetails"]);if(null!=c){let e=c;Array.isArray(e)&&(e=e.map((e=>e))),m(t,["responseTokensDetails"],e)}const d=g(e,["toolUsePromptTokensDetails"]);if(null!=d){let e=d;Array.isArray(e)&&(e=e.map((e=>e))),m(t,["toolUsePromptTokensDetails"],e)}const h=g(e,["trafficType"]);null!=h&&m(t,["trafficType"],h);return t}(s));const a=g(e,["goAway"]);null!=a&&m(t,["goAway"],a);const l=g(e,["sessionResumptionUpdate"]);return null!=l&&m(t,["sessionResumptionUpdate"],l),t}function yn(e){const t={},n=g(e,["languageCode"]);null!=n&&m(t,["languageCode"],n);const r=g(e,["voiceConfig"]);if(null!=r&&m(t,["voiceConfig"],r),void 0!==g(e,["multiSpeakerVoiceConfig"]))throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return t}function vn(e){const t={},n=g(e,["content"]);null!=n&&m(t,["content"],n);const r=g(e,["citationMetadata"]);null!=r&&m(t,["citationMetadata"],function(e){const t={},n=g(e,["citationSources"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>e))),m(t,["citations"],e)}return t}(r));const i=g(e,["tokenCount"]);null!=i&&m(t,["tokenCount"],i);const o=g(e,["finishReason"]);null!=o&&m(t,["finishReason"],o);const s=g(e,["avgLogprobs"]);null!=s&&m(t,["avgLogprobs"],s);const a=g(e,["groundingMetadata"]);null!=a&&m(t,["groundingMetadata"],a);const l=g(e,["index"]);null!=l&&m(t,["index"],l);const u=g(e,["logprobsResult"]);null!=u&&m(t,["logprobsResult"],u);const c=g(e,["safetyRatings"]);if(null!=c){let e=c;Array.isArray(e)&&(e=e.map((e=>e))),m(t,["safetyRatings"],e)}const d=g(e,["urlContextMetadata"]);return null!=d&&m(t,["urlContextMetadata"],d),t}function bn(e){const t={},n=g(e,["values"]);null!=n&&m(t,["values"],n);const r=g(e,["statistics"]);return null!=r&&m(t,["statistics"],function(e){const t={},n=g(e,["truncated"]);null!=n&&m(t,["truncated"],n);const r=g(e,["token_count"]);null!=r&&m(t,["tokenCount"],r);return t}(r)),t}function En(e){const t={},n=g(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>function(e){const t={},n=g(e,["mediaResolution"]);null!=n&&m(t,["mediaResolution"],n);const r=g(e,["codeExecutionResult"]);null!=r&&m(t,["codeExecutionResult"],r);const i=g(e,["executableCode"]);null!=i&&m(t,["executableCode"],i);const o=g(e,["fileData"]);null!=o&&m(t,["fileData"],function(e){const t={};if(void 0!==g(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const n=g(e,["fileUri"]);null!=n&&m(t,["fileUri"],n);const r=g(e,["mimeType"]);null!=r&&m(t,["mimeType"],r);return t}(o));const s=g(e,["functionCall"]);null!=s&&m(t,["functionCall"],function(e){const t={},n=g(e,["id"]);null!=n&&m(t,["id"],n);const r=g(e,["args"]);null!=r&&m(t,["args"],r);const i=g(e,["name"]);null!=i&&m(t,["name"],i);if(void 0!==g(e,["partialArgs"]))throw new Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==g(e,["willContinue"]))throw new Error("willContinue parameter is not supported in Gemini API.");return t}(s));const a=g(e,["functionResponse"]);null!=a&&m(t,["functionResponse"],a);const l=g(e,["inlineData"]);null!=l&&m(t,["inlineData"],function(e){const t={},n=g(e,["data"]);if(null!=n&&m(t,["data"],n),void 0!==g(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const r=g(e,["mimeType"]);return null!=r&&m(t,["mimeType"],r),t}(l));const u=g(e,["text"]);null!=u&&m(t,["text"],u);const c=g(e,["thought"]);null!=c&&m(t,["thought"],c);const d=g(e,["thoughtSignature"]);null!=d&&m(t,["thoughtSignature"],d);const h=g(e,["videoMetadata"]);null!=h&&m(t,["videoMetadata"],h);return t}(e)))),m(t,["parts"],e)}const r=g(e,["role"]);return null!=r&&m(t,["role"],r),t}function wn(e,t){const n=g(e,["systemInstruction"]);void 0!==t&&null!=n&&m(t,["systemInstruction"],ct(n));const r=g(e,["tools"]);if(void 0!==t&&null!=r){let e=r;Array.isArray(e)&&(e=e.map((e=>tr(e)))),m(t,["tools"],e)}const i=g(e,["generationConfig"]);return void 0!==t&&null!=i&&m(t,["generationConfig"],function(e){const t={},n=g(e,["modelSelectionConfig"]);null!=n&&m(t,["modelConfig"],n);const r=g(e,["responseJsonSchema"]);null!=r&&m(t,["responseJsonSchema"],r);const i=g(e,["audioTimestamp"]);null!=i&&m(t,["audioTimestamp"],i);const o=g(e,["candidateCount"]);null!=o&&m(t,["candidateCount"],o);const s=g(e,["enableAffectiveDialog"]);null!=s&&m(t,["enableAffectiveDialog"],s);const a=g(e,["frequencyPenalty"]);null!=a&&m(t,["frequencyPenalty"],a);const l=g(e,["logprobs"]);null!=l&&m(t,["logprobs"],l);const u=g(e,["maxOutputTokens"]);null!=u&&m(t,["maxOutputTokens"],u);const c=g(e,["mediaResolution"]);null!=c&&m(t,["mediaResolution"],c);const d=g(e,["presencePenalty"]);null!=d&&m(t,["presencePenalty"],d);const h=g(e,["responseLogprobs"]);null!=h&&m(t,["responseLogprobs"],h);const f=g(e,["responseMimeType"]);null!=f&&m(t,["responseMimeType"],f);const p=g(e,["responseModalities"]);null!=p&&m(t,["responseModalities"],p);const y=g(e,["responseSchema"]);null!=y&&m(t,["responseSchema"],y);const v=g(e,["routingConfig"]);null!=v&&m(t,["routingConfig"],v);const b=g(e,["seed"]);null!=b&&m(t,["seed"],b);const E=g(e,["speechConfig"]);null!=E&&m(t,["speechConfig"],er(E));const w=g(e,["stopSequences"]);null!=w&&m(t,["stopSequences"],w);const S=g(e,["temperature"]);null!=S&&m(t,["temperature"],S);const _=g(e,["thinkingConfig"]);null!=_&&m(t,["thinkingConfig"],_);const T=g(e,["topK"]);null!=T&&m(t,["topK"],T);const C=g(e,["topP"]);null!=C&&m(t,["topP"],C);if(void 0!==g(e,["enableEnhancedCivicAnswers"]))throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}(i)),{}}function Sn(e,t){const n={},r=g(t,["model"]);null!=r&&m(n,["_url","model"],Ze(e,r));const i=g(t,["contents"]);if(null!=i){let e=ht(i);Array.isArray(e)&&(e=e.map((e=>En(e)))),m(n,["contents"],e)}const o=g(t,["config"]);return null!=o&&function(e){if(void 0!==g(e,["systemInstruction"]))throw new Error("systemInstruction parameter is not supported in Gemini API.");if(void 0!==g(e,["tools"]))throw new Error("tools parameter is not supported in Gemini API.");if(void 0!==g(e,["generationConfig"]))throw new Error("generationConfig parameter is not supported in Gemini API.")}(o),n}function _n(e,t){const n={},r=g(t,["model"]);null!=r&&m(n,["_url","model"],Ze(e,r));const i=g(t,["prompt"]);null!=i&&m(n,["instances[0]","prompt"],i);const o=g(t,["referenceImages"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map((e=>function(e){const t={},n=g(e,["referenceImage"]);null!=n&&m(t,["referenceImage"],Gn(n));const r=g(e,["referenceId"]);null!=r&&m(t,["referenceId"],r);const i=g(e,["referenceType"]);null!=i&&m(t,["referenceType"],i);const o=g(e,["maskImageConfig"]);null!=o&&m(t,["maskImageConfig"],function(e){const t={},n=g(e,["maskMode"]);null!=n&&m(t,["maskMode"],n);const r=g(e,["segmentationClasses"]);null!=r&&m(t,["maskClasses"],r);const i=g(e,["maskDilation"]);null!=i&&m(t,["dilation"],i);return t}(o));const s=g(e,["controlImageConfig"]);null!=s&&m(t,["controlImageConfig"],function(e){const t={},n=g(e,["controlType"]);null!=n&&m(t,["controlType"],n);const r=g(e,["enableControlImageComputation"]);return null!=r&&m(t,["computeControl"],r),t}(s));const a=g(e,["styleImageConfig"]);null!=a&&m(t,["styleImageConfig"],a);const l=g(e,["subjectImageConfig"]);null!=l&&m(t,["subjectImageConfig"],l);return t}(e)))),m(n,["instances[0]","referenceImages"],e)}const s=g(t,["config"]);return null!=s&&function(e,t){const n=g(e,["outputGcsUri"]);void 0!==t&&null!=n&&m(t,["parameters","storageUri"],n);const r=g(e,["negativePrompt"]);void 0!==t&&null!=r&&m(t,["parameters","negativePrompt"],r);const i=g(e,["numberOfImages"]);void 0!==t&&null!=i&&m(t,["parameters","sampleCount"],i);const o=g(e,["aspectRatio"]);void 0!==t&&null!=o&&m(t,["parameters","aspectRatio"],o);const s=g(e,["guidanceScale"]);void 0!==t&&null!=s&&m(t,["parameters","guidanceScale"],s);const a=g(e,["seed"]);void 0!==t&&null!=a&&m(t,["parameters","seed"],a);const l=g(e,["safetyFilterLevel"]);void 0!==t&&null!=l&&m(t,["parameters","safetySetting"],l);const u=g(e,["personGeneration"]);void 0!==t&&null!=u&&m(t,["parameters","personGeneration"],u);const c=g(e,["includeSafetyAttributes"]);void 0!==t&&null!=c&&m(t,["parameters","includeSafetyAttributes"],c);const d=g(e,["includeRaiReason"]);void 0!==t&&null!=d&&m(t,["parameters","includeRaiReason"],d);const h=g(e,["language"]);void 0!==t&&null!=h&&m(t,["parameters","language"],h);const f=g(e,["outputMimeType"]);void 0!==t&&null!=f&&m(t,["parameters","outputOptions","mimeType"],f);const p=g(e,["outputCompressionQuality"]);void 0!==t&&null!=p&&m(t,["parameters","outputOptions","compressionQuality"],p);const y=g(e,["addWatermark"]);void 0!==t&&null!=y&&m(t,["parameters","addWatermark"],y);const v=g(e,["labels"]);void 0!==t&&null!=v&&m(t,["labels"],v);const b=g(e,["editMode"]);void 0!==t&&null!=b&&m(t,["parameters","editMode"],b);const E=g(e,["baseSteps"]);void 0!==t&&null!=E&&m(t,["parameters","editConfig","baseSteps"],E)}(s,n),n}function Tn(e,t){const n={},r=g(t,["model"]);null!=r&&m(n,["_url","model"],Ze(e,r));const i=g(t,["contents"]);if(null!=i){let t=dt(e,i);Array.isArray(t)&&(t=t.map((e=>e))),m(n,["requests[]","content"],t)}const o=g(t,["config"]);null!=o&&function(e,t){const n=g(e,["taskType"]);void 0!==t&&null!=n&&m(t,["requests[]","taskType"],n);const r=g(e,["title"]);void 0!==t&&null!=r&&m(t,["requests[]","title"],r);const i=g(e,["outputDimensionality"]);if(void 0!==t&&null!=i&&m(t,["requests[]","outputDimensionality"],i),void 0!==g(e,["mimeType"]))throw new Error("mimeType parameter is not supported in Gemini API.");if(void 0!==g(e,["autoTruncate"]))throw new Error("autoTruncate parameter is not supported in Gemini API.")}(o,n);const s=g(t,["model"]);return void 0!==s&&m(n,["requests[]","model"],Ze(e,s)),n}function Cn(e,t){const n={},r=g(t,["model"]);null!=r&&m(n,["_url","model"],Ze(e,r));const i=g(t,["contents"]);if(null!=i){let t=dt(e,i);Array.isArray(t)&&(t=t.map((e=>e))),m(n,["instances[]","content"],t)}const o=g(t,["config"]);return null!=o&&function(e,t){const n=g(e,["taskType"]);void 0!==t&&null!=n&&m(t,["instances[]","task_type"],n);const r=g(e,["title"]);void 0!==t&&null!=r&&m(t,["instances[]","title"],r);const i=g(e,["outputDimensionality"]);void 0!==t&&null!=i&&m(t,["parameters","outputDimensionality"],i);const o=g(e,["mimeType"]);void 0!==t&&null!=o&&m(t,["instances[]","mimeType"],o);const s=g(e,["autoTruncate"]);void 0!==t&&null!=s&&m(t,["parameters","autoTruncate"],s)}(o,n),n}function In(e,t,n){const r={},i=g(t,["systemInstruction"]);void 0!==n&&null!=i&&m(n,["systemInstruction"],En(ct(i)));const o=g(t,["temperature"]);null!=o&&m(r,["temperature"],o);const s=g(t,["topP"]);null!=s&&m(r,["topP"],s);const a=g(t,["topK"]);null!=a&&m(r,["topK"],a);const l=g(t,["candidateCount"]);null!=l&&m(r,["candidateCount"],l);const u=g(t,["maxOutputTokens"]);null!=u&&m(r,["maxOutputTokens"],u);const c=g(t,["stopSequences"]);null!=c&&m(r,["stopSequences"],c);const d=g(t,["responseLogprobs"]);null!=d&&m(r,["responseLogprobs"],d);const h=g(t,["logprobs"]);null!=h&&m(r,["logprobs"],h);const f=g(t,["presencePenalty"]);null!=f&&m(r,["presencePenalty"],f);const p=g(t,["frequencyPenalty"]);null!=p&&m(r,["frequencyPenalty"],p);const y=g(t,["seed"]);null!=y&&m(r,["seed"],y);const v=g(t,["responseMimeType"]);null!=v&&m(r,["responseMimeType"],v);const b=g(t,["responseSchema"]);null!=b&&m(r,["responseSchema"],pt(b));const E=g(t,["responseJsonSchema"]);if(null!=E&&m(r,["responseJsonSchema"],E),void 0!==g(t,["routingConfig"]))throw new Error("routingConfig parameter is not supported in Gemini API.");if(void 0!==g(t,["modelSelectionConfig"]))throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const w=g(t,["safetySettings"]);if(void 0!==n&&null!=w){let e=w;Array.isArray(e)&&(e=e.map((e=>function(e){const t={},n=g(e,["category"]);null!=n&&m(t,["category"],n);if(void 0!==g(e,["method"]))throw new Error("method parameter is not supported in Gemini API.");const r=g(e,["threshold"]);null!=r&&m(t,["threshold"],r);return t}(e)))),m(n,["safetySettings"],e)}const S=g(t,["tools"]);if(void 0!==n&&null!=S){let e=vt(S);Array.isArray(e)&&(e=e.map((e=>function(e){const t={},n=g(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>e))),m(t,["functionDeclarations"],e)}if(void 0!==g(e,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");const r=g(e,["googleSearchRetrieval"]);null!=r&&m(t,["googleSearchRetrieval"],r);const i=g(e,["computerUse"]);null!=i&&m(t,["computerUse"],i);const o=g(e,["fileSearch"]);null!=o&&m(t,["fileSearch"],o);const s=g(e,["codeExecution"]);null!=s&&m(t,["codeExecution"],s);if(void 0!==g(e,["enterpriseWebSearch"]))throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=g(e,["googleMaps"]);null!=a&&m(t,["googleMaps"],function(e){const t={};if(void 0!==g(e,["authConfig"]))throw new Error("authConfig parameter is not supported in Gemini API.");const n=g(e,["enableWidget"]);null!=n&&m(t,["enableWidget"],n);return t}(a));const l=g(e,["googleSearch"]);null!=l&&m(t,["googleSearch"],function(e){const t={};if(void 0!==g(e,["excludeDomains"]))throw new Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==g(e,["blockingConfidence"]))throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=g(e,["timeRangeFilter"]);null!=n&&m(t,["timeRangeFilter"],n);return t}(l));const u=g(e,["urlContext"]);null!=u&&m(t,["urlContext"],u);return t}(yt(e))))),m(n,["tools"],e)}const _=g(t,["toolConfig"]);if(void 0!==n&&null!=_&&m(n,["toolConfig"],function(e){const t={},n=g(e,["functionCallingConfig"]);null!=n&&m(t,["functionCallingConfig"],function(e){const t={},n=g(e,["mode"]);null!=n&&m(t,["mode"],n);const r=g(e,["allowedFunctionNames"]);if(null!=r&&m(t,["allowedFunctionNames"],r),void 0!==g(e,["streamFunctionCallArguments"]))throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}(n));const r=g(e,["retrievalConfig"]);null!=r&&m(t,["retrievalConfig"],r);return t}(_)),void 0!==g(t,["labels"]))throw new Error("labels parameter is not supported in Gemini API.");const T=g(t,["cachedContent"]);void 0!==n&&null!=T&&m(n,["cachedContent"],bt(e,T));const C=g(t,["responseModalities"]);null!=C&&m(r,["responseModalities"],C);const I=g(t,["mediaResolution"]);null!=I&&m(r,["mediaResolution"],I);const A=g(t,["speechConfig"]);if(null!=A&&m(r,["speechConfig"],mt(A)),void 0!==g(t,["audioTimestamp"]))throw new Error("audioTimestamp parameter is not supported in Gemini API.");const x=g(t,["thinkingConfig"]);null!=x&&m(r,["thinkingConfig"],x);const N=g(t,["imageConfig"]);return null!=N&&m(r,["imageConfig"],function(e){const t={},n=g(e,["aspectRatio"]);null!=n&&m(t,["aspectRatio"],n);const r=g(e,["imageSize"]);null!=r&&m(t,["imageSize"],r);if(void 0!==g(e,["outputMimeType"]))throw new Error("outputMimeType parameter is not supported in Gemini API.");if(void 0!==g(e,["outputCompressionQuality"]))throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}(N)),r}function An(e,t,n){const r={},i=g(t,["systemInstruction"]);void 0!==n&&null!=i&&m(n,["systemInstruction"],ct(i));const o=g(t,["temperature"]);null!=o&&m(r,["temperature"],o);const s=g(t,["topP"]);null!=s&&m(r,["topP"],s);const a=g(t,["topK"]);null!=a&&m(r,["topK"],a);const l=g(t,["candidateCount"]);null!=l&&m(r,["candidateCount"],l);const u=g(t,["maxOutputTokens"]);null!=u&&m(r,["maxOutputTokens"],u);const c=g(t,["stopSequences"]);null!=c&&m(r,["stopSequences"],c);const d=g(t,["responseLogprobs"]);null!=d&&m(r,["responseLogprobs"],d);const h=g(t,["logprobs"]);null!=h&&m(r,["logprobs"],h);const f=g(t,["presencePenalty"]);null!=f&&m(r,["presencePenalty"],f);const p=g(t,["frequencyPenalty"]);null!=p&&m(r,["frequencyPenalty"],p);const y=g(t,["seed"]);null!=y&&m(r,["seed"],y);const v=g(t,["responseMimeType"]);null!=v&&m(r,["responseMimeType"],v);const b=g(t,["responseSchema"]);null!=b&&m(r,["responseSchema"],pt(b));const E=g(t,["responseJsonSchema"]);null!=E&&m(r,["responseJsonSchema"],E);const w=g(t,["routingConfig"]);null!=w&&m(r,["routingConfig"],w);const S=g(t,["modelSelectionConfig"]);null!=S&&m(r,["modelConfig"],S);const _=g(t,["safetySettings"]);if(void 0!==n&&null!=_){let e=_;Array.isArray(e)&&(e=e.map((e=>e))),m(n,["safetySettings"],e)}const T=g(t,["tools"]);if(void 0!==n&&null!=T){let e=vt(T);Array.isArray(e)&&(e=e.map((e=>tr(yt(e))))),m(n,["tools"],e)}const C=g(t,["toolConfig"]);void 0!==n&&null!=C&&m(n,["toolConfig"],C);const I=g(t,["labels"]);void 0!==n&&null!=I&&m(n,["labels"],I);const A=g(t,["cachedContent"]);void 0!==n&&null!=A&&m(n,["cachedContent"],bt(e,A));const x=g(t,["responseModalities"]);null!=x&&m(r,["responseModalities"],x);const N=g(t,["mediaResolution"]);null!=N&&m(r,["mediaResolution"],N);const k=g(t,["speechConfig"]);null!=k&&m(r,["speechConfig"],er(mt(k)));const O=g(t,["audioTimestamp"]);null!=O&&m(r,["audioTimestamp"],O);const R=g(t,["thinkingConfig"]);null!=R&&m(r,["thinkingConfig"],R);const D=g(t,["imageConfig"]);return null!=D&&m(r,["imageConfig"],function(e){const t={},n=g(e,["aspectRatio"]);null!=n&&m(t,["aspectRatio"],n);const r=g(e,["imageSize"]);null!=r&&m(t,["imageSize"],r);const i=g(e,["outputMimeType"]);null!=i&&m(t,["imageOutputOptions","mimeType"],i);const o=g(e,["outputCompressionQuality"]);null!=o&&m(t,["imageOutputOptions","compressionQuality"],o);return t}(D)),r}function xn(e,t){const n={},r=g(t,["model"]);null!=r&&m(n,["_url","model"],Ze(e,r));const i=g(t,["contents"]);if(null!=i){let e=ht(i);Array.isArray(e)&&(e=e.map((e=>En(e)))),m(n,["contents"],e)}const o=g(t,["config"]);return null!=o&&m(n,["generationConfig"],In(e,o,n)),n}function Nn(e,t){const n={},r=g(t,["model"]);null!=r&&m(n,["_url","model"],Ze(e,r));const i=g(t,["contents"]);if(null!=i){let e=ht(i);Array.isArray(e)&&(e=e.map((e=>e))),m(n,["contents"],e)}const o=g(t,["config"]);return null!=o&&m(n,["generationConfig"],An(e,o,n)),n}function kn(e){const t={},n=g(e,["sdkHttpResponse"]);null!=n&&m(t,["sdkHttpResponse"],n);const r=g(e,["candidates"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map((e=>vn(e)))),m(t,["candidates"],e)}const i=g(e,["modelVersion"]);null!=i&&m(t,["modelVersion"],i);const o=g(e,["promptFeedback"]);null!=o&&m(t,["promptFeedback"],o);const s=g(e,["responseId"]);null!=s&&m(t,["responseId"],s);const a=g(e,["usageMetadata"]);return null!=a&&m(t,["usageMetadata"],a),t}function On(e){const t={},n=g(e,["sdkHttpResponse"]);null!=n&&m(t,["sdkHttpResponse"],n);const r=g(e,["candidates"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map((e=>e))),m(t,["candidates"],e)}const i=g(e,["createTime"]);null!=i&&m(t,["createTime"],i);const o=g(e,["modelVersion"]);null!=o&&m(t,["modelVersion"],o);const s=g(e,["promptFeedback"]);null!=s&&m(t,["promptFeedback"],s);const a=g(e,["responseId"]);null!=a&&m(t,["responseId"],a);const l=g(e,["usageMetadata"]);return null!=l&&m(t,["usageMetadata"],l),t}function Rn(e,t){const n={},r=g(t,["model"]);null!=r&&m(n,["_url","model"],Ze(e,r));const i=g(t,["prompt"]);null!=i&&m(n,["instances[0]","prompt"],i);const o=g(t,["config"]);return null!=o&&function(e,t){if(void 0!==g(e,["outputGcsUri"]))throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(void 0!==g(e,["negativePrompt"]))throw new Error("negativePrompt parameter is not supported in Gemini API.");const n=g(e,["numberOfImages"]);void 0!==t&&null!=n&&m(t,["parameters","sampleCount"],n);const r=g(e,["aspectRatio"]);void 0!==t&&null!=r&&m(t,["parameters","aspectRatio"],r);const i=g(e,["guidanceScale"]);if(void 0!==t&&null!=i&&m(t,["parameters","guidanceScale"],i),void 0!==g(e,["seed"]))throw new Error("seed parameter is not supported in Gemini API.");const o=g(e,["safetyFilterLevel"]);void 0!==t&&null!=o&&m(t,["parameters","safetySetting"],o);const s=g(e,["personGeneration"]);void 0!==t&&null!=s&&m(t,["parameters","personGeneration"],s);const a=g(e,["includeSafetyAttributes"]);void 0!==t&&null!=a&&m(t,["parameters","includeSafetyAttributes"],a);const l=g(e,["includeRaiReason"]);void 0!==t&&null!=l&&m(t,["parameters","includeRaiReason"],l);const u=g(e,["language"]);void 0!==t&&null!=u&&m(t,["parameters","language"],u);const c=g(e,["outputMimeType"]);void 0!==t&&null!=c&&m(t,["parameters","outputOptions","mimeType"],c);const d=g(e,["outputCompressionQuality"]);if(void 0!==t&&null!=d&&m(t,["parameters","outputOptions","compressionQuality"],d),void 0!==g(e,["addWatermark"]))throw new Error("addWatermark parameter is not supported in Gemini API.");if(void 0!==g(e,["labels"]))throw new Error("labels parameter is not supported in Gemini API.");const h=g(e,["imageSize"]);if(void 0!==t&&null!=h&&m(t,["parameters","sampleImageSize"],h),void 0!==g(e,["enhancePrompt"]))throw new Error("enhancePrompt parameter is not supported in Gemini API.")}(o,n),n}function Dn(e,t){const n={},r=g(t,["model"]);null!=r&&m(n,["_url","model"],Ze(e,r));const i=g(t,["prompt"]);null!=i&&m(n,["instances[0]","prompt"],i);const o=g(t,["config"]);return null!=o&&function(e,t){const n=g(e,["outputGcsUri"]);void 0!==t&&null!=n&&m(t,["parameters","storageUri"],n);const r=g(e,["negativePrompt"]);void 0!==t&&null!=r&&m(t,["parameters","negativePrompt"],r);const i=g(e,["numberOfImages"]);void 0!==t&&null!=i&&m(t,["parameters","sampleCount"],i);const o=g(e,["aspectRatio"]);void 0!==t&&null!=o&&m(t,["parameters","aspectRatio"],o);const s=g(e,["guidanceScale"]);void 0!==t&&null!=s&&m(t,["parameters","guidanceScale"],s);const a=g(e,["seed"]);void 0!==t&&null!=a&&m(t,["parameters","seed"],a);const l=g(e,["safetyFilterLevel"]);void 0!==t&&null!=l&&m(t,["parameters","safetySetting"],l);const u=g(e,["personGeneration"]);void 0!==t&&null!=u&&m(t,["parameters","personGeneration"],u);const c=g(e,["includeSafetyAttributes"]);void 0!==t&&null!=c&&m(t,["parameters","includeSafetyAttributes"],c);const d=g(e,["includeRaiReason"]);void 0!==t&&null!=d&&m(t,["parameters","includeRaiReason"],d);const h=g(e,["language"]);void 0!==t&&null!=h&&m(t,["parameters","language"],h);const f=g(e,["outputMimeType"]);void 0!==t&&null!=f&&m(t,["parameters","outputOptions","mimeType"],f);const p=g(e,["outputCompressionQuality"]);void 0!==t&&null!=p&&m(t,["parameters","outputOptions","compressionQuality"],p);const y=g(e,["addWatermark"]);void 0!==t&&null!=y&&m(t,["parameters","addWatermark"],y);const v=g(e,["labels"]);void 0!==t&&null!=v&&m(t,["labels"],v);const b=g(e,["imageSize"]);void 0!==t&&null!=b&&m(t,["parameters","sampleImageSize"],b);const E=g(e,["enhancePrompt"]);void 0!==t&&null!=E&&m(t,["parameters","enhancePrompt"],E)}(o,n),n}function Pn(e){const t={},n=g(e,["sdkHttpResponse"]);null!=n&&m(t,["sdkHttpResponse"],n);const r=g(e,["predictions"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map((e=>function(e){const t={},n=g(e,["_self"]);null!=n&&m(t,["image"],function(e){const t={},n=g(e,["bytesBase64Encoded"]);null!=n&&m(t,["imageBytes"],wt(n));const r=g(e,["mimeType"]);null!=r&&m(t,["mimeType"],r);return t}(n));const r=g(e,["raiFilteredReason"]);null!=r&&m(t,["raiFilteredReason"],r);const i=g(e,["_self"]);null!=i&&m(t,["safetyAttributes"],Qn(i));return t}(e)))),m(t,["generatedImages"],e)}const i=g(e,["positivePromptSafetyAttributes"]);return null!=i&&m(t,["positivePromptSafetyAttributes"],Qn(i)),t}function Mn(e,t){const n=g(e,["numberOfVideos"]);if(void 0!==t&&null!=n&&m(t,["parameters","sampleCount"],n),void 0!==g(e,["outputGcsUri"]))throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(void 0!==g(e,["fps"]))throw new Error("fps parameter is not supported in Gemini API.");const r=g(e,["durationSeconds"]);if(void 0!==t&&null!=r&&m(t,["parameters","durationSeconds"],r),void 0!==g(e,["seed"]))throw new Error("seed parameter is not supported in Gemini API.");const i=g(e,["aspectRatio"]);void 0!==t&&null!=i&&m(t,["parameters","aspectRatio"],i);const o=g(e,["resolution"]);void 0!==t&&null!=o&&m(t,["parameters","resolution"],o);const s=g(e,["personGeneration"]);if(void 0!==t&&null!=s&&m(t,["parameters","personGeneration"],s),void 0!==g(e,["pubsubTopic"]))throw new Error("pubsubTopic parameter is not supported in Gemini API.");const a=g(e,["negativePrompt"]);void 0!==t&&null!=a&&m(t,["parameters","negativePrompt"],a);const l=g(e,["enhancePrompt"]);if(void 0!==t&&null!=l&&m(t,["parameters","enhancePrompt"],l),void 0!==g(e,["generateAudio"]))throw new Error("generateAudio parameter is not supported in Gemini API.");const u=g(e,["lastFrame"]);void 0!==t&&null!=u&&m(t,["instances[0]","lastFrame"],Hn(u));const c=g(e,["referenceImages"]);if(void 0!==t&&null!=c){let e=c;Array.isArray(e)&&(e=e.map((e=>function(e){const t={},n=g(e,["image"]);null!=n&&m(t,["image"],Hn(n));const r=g(e,["referenceType"]);null!=r&&m(t,["referenceType"],r);return t}(e)))),m(t,["instances[0]","referenceImages"],e)}if(void 0!==g(e,["mask"]))throw new Error("mask parameter is not supported in Gemini API.");if(void 0!==g(e,["compressionQuality"]))throw new Error("compressionQuality parameter is not supported in Gemini API.");return{}}function Ln(e,t){const n=g(e,["numberOfVideos"]);void 0!==t&&null!=n&&m(t,["parameters","sampleCount"],n);const r=g(e,["outputGcsUri"]);void 0!==t&&null!=r&&m(t,["parameters","storageUri"],r);const i=g(e,["fps"]);void 0!==t&&null!=i&&m(t,["parameters","fps"],i);const o=g(e,["durationSeconds"]);void 0!==t&&null!=o&&m(t,["parameters","durationSeconds"],o);const s=g(e,["seed"]);void 0!==t&&null!=s&&m(t,["parameters","seed"],s);const a=g(e,["aspectRatio"]);void 0!==t&&null!=a&&m(t,["parameters","aspectRatio"],a);const l=g(e,["resolution"]);void 0!==t&&null!=l&&m(t,["parameters","resolution"],l);const u=g(e,["personGeneration"]);void 0!==t&&null!=u&&m(t,["parameters","personGeneration"],u);const c=g(e,["pubsubTopic"]);void 0!==t&&null!=c&&m(t,["parameters","pubsubTopic"],c);const d=g(e,["negativePrompt"]);void 0!==t&&null!=d&&m(t,["parameters","negativePrompt"],d);const h=g(e,["enhancePrompt"]);void 0!==t&&null!=h&&m(t,["parameters","enhancePrompt"],h);const f=g(e,["generateAudio"]);void 0!==t&&null!=f&&m(t,["parameters","generateAudio"],f);const p=g(e,["lastFrame"]);void 0!==t&&null!=p&&m(t,["instances[0]","lastFrame"],Gn(p));const y=g(e,["referenceImages"]);if(void 0!==t&&null!=y){let e=y;Array.isArray(e)&&(e=e.map((e=>function(e){const t={},n=g(e,["image"]);null!=n&&m(t,["image"],Gn(n));const r=g(e,["referenceType"]);null!=r&&m(t,["referenceType"],r);return t}(e)))),m(t,["instances[0]","referenceImages"],e)}const v=g(e,["mask"]);void 0!==t&&null!=v&&m(t,["instances[0]","mask"],function(e){const t={},n=g(e,["image"]);null!=n&&m(t,["_self"],Gn(n));const r=g(e,["maskMode"]);null!=r&&m(t,["maskMode"],r);return t}(v));const b=g(e,["compressionQuality"]);return void 0!==t&&null!=b&&m(t,["parameters","compressionQuality"],b),{}}function Un(e){const t={},n=g(e,["name"]);null!=n&&m(t,["name"],n);const r=g(e,["metadata"]);null!=r&&m(t,["metadata"],r);const i=g(e,["done"]);null!=i&&m(t,["done"],i);const o=g(e,["error"]);null!=o&&m(t,["error"],o);const s=g(e,["response","generateVideoResponse"]);return null!=s&&m(t,["response"],function(e){const t={},n=g(e,["generatedSamples"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>function(e){const t={},n=g(e,["video"]);null!=n&&m(t,["video"],function(e){const t={},n=g(e,["uri"]);null!=n&&m(t,["uri"],n);const r=g(e,["encodedVideo"]);null!=r&&m(t,["videoBytes"],wt(r));const i=g(e,["encoding"]);null!=i&&m(t,["mimeType"],i);return t}(n));return t}(e)))),m(t,["generatedVideos"],e)}const r=g(e,["raiMediaFilteredCount"]);null!=r&&m(t,["raiMediaFilteredCount"],r);const i=g(e,["raiMediaFilteredReasons"]);null!=i&&m(t,["raiMediaFilteredReasons"],i);return t}(s)),t}function Fn(e){const t={},n=g(e,["name"]);null!=n&&m(t,["name"],n);const r=g(e,["metadata"]);null!=r&&m(t,["metadata"],r);const i=g(e,["done"]);null!=i&&m(t,["done"],i);const o=g(e,["error"]);null!=o&&m(t,["error"],o);const s=g(e,["response"]);return null!=s&&m(t,["response"],function(e){const t={},n=g(e,["videos"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>function(e){const t={},n=g(e,["_self"]);null!=n&&m(t,["video"],function(e){const t={},n=g(e,["gcsUri"]);null!=n&&m(t,["uri"],n);const r=g(e,["bytesBase64Encoded"]);null!=r&&m(t,["videoBytes"],wt(r));const i=g(e,["mimeType"]);null!=i&&m(t,["mimeType"],i);return t}(n));return t}(e)))),m(t,["generatedVideos"],e)}const r=g(e,["raiMediaFilteredCount"]);null!=r&&m(t,["raiMediaFilteredCount"],r);const i=g(e,["raiMediaFilteredReasons"]);null!=i&&m(t,["raiMediaFilteredReasons"],i);return t}(s)),t}function jn(e,t){const n={},r=g(t,["model"]);null!=r&&m(n,["_url","model"],Ze(e,r));const i=g(t,["prompt"]);null!=i&&m(n,["instances[0]","prompt"],i);const o=g(t,["image"]);null!=o&&m(n,["instances[0]","image"],Hn(o));const s=g(t,["video"]);null!=s&&m(n,["instances[0]","video"],or(s));const a=g(t,["source"]);null!=a&&function(e,t){const n={},r=g(e,["prompt"]);void 0!==t&&null!=r&&m(t,["instances[0]","prompt"],r);const i=g(e,["image"]);void 0!==t&&null!=i&&m(t,["instances[0]","image"],Hn(i));const o=g(e,["video"]);void 0!==t&&null!=o&&m(t,["instances[0]","video"],or(o))}(a,n);const l=g(t,["config"]);return null!=l&&Mn(l,n),n}function Vn(e,t){const n={},r=g(t,["model"]);null!=r&&m(n,["_url","model"],Ze(e,r));const i=g(t,["prompt"]);null!=i&&m(n,["instances[0]","prompt"],i);const o=g(t,["image"]);null!=o&&m(n,["instances[0]","image"],Gn(o));const s=g(t,["video"]);null!=s&&m(n,["instances[0]","video"],sr(s));const a=g(t,["source"]);null!=a&&function(e,t){const n={},r=g(e,["prompt"]);void 0!==t&&null!=r&&m(t,["instances[0]","prompt"],r);const i=g(e,["image"]);void 0!==t&&null!=i&&m(t,["instances[0]","image"],Gn(i));const o=g(e,["video"]);void 0!==t&&null!=o&&m(t,["instances[0]","video"],sr(o))}(a,n);const l=g(t,["config"]);return null!=l&&Ln(l,n),n}function qn(e){const t={},n=g(e,["_self"]);null!=n&&m(t,["image"],Bn(n));const r=g(e,["raiFilteredReason"]);null!=r&&m(t,["raiFilteredReason"],r);const i=g(e,["_self"]);null!=i&&m(t,["safetyAttributes"],Xn(i));const o=g(e,["prompt"]);return null!=o&&m(t,["enhancedPrompt"],o),t}function Bn(e){const t={},n=g(e,["gcsUri"]);null!=n&&m(t,["gcsUri"],n);const r=g(e,["bytesBase64Encoded"]);null!=r&&m(t,["imageBytes"],wt(r));const i=g(e,["mimeType"]);return null!=i&&m(t,["mimeType"],i),t}function Hn(e){const t={};if(void 0!==g(e,["gcsUri"]))throw new Error("gcsUri parameter is not supported in Gemini API.");const n=g(e,["imageBytes"]);null!=n&&m(t,["bytesBase64Encoded"],wt(n));const r=g(e,["mimeType"]);return null!=r&&m(t,["mimeType"],r),t}function Gn(e){const t={},n=g(e,["gcsUri"]);null!=n&&m(t,["gcsUri"],n);const r=g(e,["imageBytes"]);null!=r&&m(t,["bytesBase64Encoded"],wt(r));const i=g(e,["mimeType"]);return null!=i&&m(t,["mimeType"],i),t}function zn(e,t){const n={},r=g(t,["config"]);return null!=r&&function(e,t,n){const r=g(t,["pageSize"]);void 0!==n&&null!=r&&m(n,["_query","pageSize"],r);const i=g(t,["pageToken"]);void 0!==n&&null!=i&&m(n,["_query","pageToken"],i);const o=g(t,["filter"]);void 0!==n&&null!=o&&m(n,["_query","filter"],o);const s=g(t,["queryBase"]);void 0!==n&&null!=s&&m(n,["_url","models_url"],_t(e,s))}(e,r,n),n}function Wn(e,t){const n={},r=g(t,["config"]);return null!=r&&function(e,t,n){const r=g(t,["pageSize"]);void 0!==n&&null!=r&&m(n,["_query","pageSize"],r);const i=g(t,["pageToken"]);void 0!==n&&null!=i&&m(n,["_query","pageToken"],i);const o=g(t,["filter"]);void 0!==n&&null!=o&&m(n,["_query","filter"],o);const s=g(t,["queryBase"]);void 0!==n&&null!=s&&m(n,["_url","models_url"],_t(e,s))}(e,r,n),n}function Kn(e){const t={},n=g(e,["name"]);null!=n&&m(t,["name"],n);const r=g(e,["displayName"]);null!=r&&m(t,["displayName"],r);const i=g(e,["description"]);null!=i&&m(t,["description"],i);const o=g(e,["version"]);null!=o&&m(t,["version"],o);const s=g(e,["_self"]);null!=s&&m(t,["tunedModelInfo"],function(e){const t={},n=g(e,["baseModel"]);null!=n&&m(t,["baseModel"],n);const r=g(e,["createTime"]);null!=r&&m(t,["createTime"],r);const i=g(e,["updateTime"]);null!=i&&m(t,["updateTime"],i);return t}(s));const a=g(e,["inputTokenLimit"]);null!=a&&m(t,["inputTokenLimit"],a);const l=g(e,["outputTokenLimit"]);null!=l&&m(t,["outputTokenLimit"],l);const u=g(e,["supportedGenerationMethods"]);null!=u&&m(t,["supportedActions"],u);const c=g(e,["temperature"]);null!=c&&m(t,["temperature"],c);const d=g(e,["maxTemperature"]);null!=d&&m(t,["maxTemperature"],d);const h=g(e,["topP"]);null!=h&&m(t,["topP"],h);const f=g(e,["topK"]);null!=f&&m(t,["topK"],f);const p=g(e,["thinking"]);return null!=p&&m(t,["thinking"],p),t}function Jn(e){const t={},n=g(e,["name"]);null!=n&&m(t,["name"],n);const r=g(e,["displayName"]);null!=r&&m(t,["displayName"],r);const i=g(e,["description"]);null!=i&&m(t,["description"],i);const o=g(e,["versionId"]);null!=o&&m(t,["version"],o);const s=g(e,["deployedModels"]);if(null!=s){let e=s;Array.isArray(e)&&(e=e.map((e=>function(e){const t={},n=g(e,["endpoint"]);null!=n&&m(t,["name"],n);const r=g(e,["deployedModelId"]);return null!=r&&m(t,["deployedModelId"],r),t}(e)))),m(t,["endpoints"],e)}const a=g(e,["labels"]);null!=a&&m(t,["labels"],a);const l=g(e,["_self"]);null!=l&&m(t,["tunedModelInfo"],function(e){const t={},n=g(e,["labels","google-vertex-llm-tuning-base-model-id"]);null!=n&&m(t,["baseModel"],n);const r=g(e,["createTime"]);null!=r&&m(t,["createTime"],r);const i=g(e,["updateTime"]);null!=i&&m(t,["updateTime"],i);return t}(l));const u=g(e,["defaultCheckpointId"]);null!=u&&m(t,["defaultCheckpointId"],u);const c=g(e,["checkpoints"]);if(null!=c){let e=c;Array.isArray(e)&&(e=e.map((e=>e))),m(t,["checkpoints"],e)}return t}function Yn(e,t){const n={},r=g(t,["model"]);null!=r&&m(n,["_url","model"],Ze(e,r));const i=g(t,["source"]);null!=i&&function(e,t){const n={},r=g(e,["prompt"]);void 0!==t&&null!=r&&m(t,["instances[0]","prompt"],r);const i=g(e,["personImage"]);void 0!==t&&null!=i&&m(t,["instances[0]","personImage","image"],Gn(i));const o=g(e,["productImages"]);if(void 0!==t&&null!=o){let e=o;Array.isArray(e)&&(e=e.map((e=>function(e){const t={},n=g(e,["productImage"]);return null!=n&&m(t,["image"],Gn(n)),t}(e)))),m(t,["instances[0]","productImages"],e)}}(i,n);const o=g(t,["config"]);return null!=o&&function(e,t){const n=g(e,["numberOfImages"]);void 0!==t&&null!=n&&m(t,["parameters","sampleCount"],n);const r=g(e,["baseSteps"]);void 0!==t&&null!=r&&m(t,["parameters","baseSteps"],r);const i=g(e,["outputGcsUri"]);void 0!==t&&null!=i&&m(t,["parameters","storageUri"],i);const o=g(e,["seed"]);void 0!==t&&null!=o&&m(t,["parameters","seed"],o);const s=g(e,["safetyFilterLevel"]);void 0!==t&&null!=s&&m(t,["parameters","safetySetting"],s);const a=g(e,["personGeneration"]);void 0!==t&&null!=a&&m(t,["parameters","personGeneration"],a);const l=g(e,["addWatermark"]);void 0!==t&&null!=l&&m(t,["parameters","addWatermark"],l);const u=g(e,["outputMimeType"]);void 0!==t&&null!=u&&m(t,["parameters","outputOptions","mimeType"],u);const c=g(e,["outputCompressionQuality"]);void 0!==t&&null!=c&&m(t,["parameters","outputOptions","compressionQuality"],c);const d=g(e,["enhancePrompt"]);void 0!==t&&null!=d&&m(t,["parameters","enhancePrompt"],d);const h=g(e,["labels"]);void 0!==t&&null!=h&&m(t,["labels"],h)}(o,n),n}function Qn(e){const t={},n=g(e,["safetyAttributes","categories"]);null!=n&&m(t,["categories"],n);const r=g(e,["safetyAttributes","scores"]);null!=r&&m(t,["scores"],r);const i=g(e,["contentType"]);return null!=i&&m(t,["contentType"],i),t}function Xn(e){const t={},n=g(e,["safetyAttributes","categories"]);null!=n&&m(t,["categories"],n);const r=g(e,["safetyAttributes","scores"]);null!=r&&m(t,["scores"],r);const i=g(e,["contentType"]);return null!=i&&m(t,["contentType"],i),t}function $n(e,t){const n={},r=g(t,["model"]);null!=r&&m(n,["_url","model"],Ze(e,r));const i=g(t,["source"]);null!=i&&function(e,t){const n={},r=g(e,["prompt"]);void 0!==t&&null!=r&&m(t,["instances[0]","prompt"],r);const i=g(e,["image"]);void 0!==t&&null!=i&&m(t,["instances[0]","image"],Gn(i));const o=g(e,["scribbleImage"]);void 0!==t&&null!=o&&m(t,["instances[0]","scribble"],function(e){const t={},n=g(e,["image"]);return null!=n&&m(t,["image"],Gn(n)),t}(o))}(i,n);const o=g(t,["config"]);return null!=o&&function(e,t){const n=g(e,["mode"]);void 0!==t&&null!=n&&m(t,["parameters","mode"],n);const r=g(e,["maxPredictions"]);void 0!==t&&null!=r&&m(t,["parameters","maxPredictions"],r);const i=g(e,["confidenceThreshold"]);void 0!==t&&null!=i&&m(t,["parameters","confidenceThreshold"],i);const o=g(e,["maskDilation"]);void 0!==t&&null!=o&&m(t,["parameters","maskDilation"],o);const s=g(e,["binaryColorThreshold"]);void 0!==t&&null!=s&&m(t,["parameters","binaryColorThreshold"],s);const a=g(e,["labels"]);void 0!==t&&null!=a&&m(t,["labels"],a)}(o,n),n}function Zn(e){const t={},n=g(e,["predictions"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>function(e){const t={},n=g(e,["_self"]);null!=n&&m(t,["mask"],Bn(n));const r=g(e,["labels"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map((e=>e))),m(t,["labels"],e)}return t}(e)))),m(t,["generatedMasks"],e)}return t}function er(e){const t={},n=g(e,["languageCode"]);null!=n&&m(t,["languageCode"],n);const r=g(e,["voiceConfig"]);if(null!=r&&m(t,["voiceConfig"],r),void 0!==g(e,["multiSpeakerVoiceConfig"]))throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return t}function tr(e){const t={},n=g(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>function(e){const t={};if(void 0!==g(e,["behavior"]))throw new Error("behavior parameter is not supported in Vertex AI.");const n=g(e,["description"]);null!=n&&m(t,["description"],n);const r=g(e,["name"]);null!=r&&m(t,["name"],r);const i=g(e,["parameters"]);null!=i&&m(t,["parameters"],i);const o=g(e,["parametersJsonSchema"]);null!=o&&m(t,["parametersJsonSchema"],o);const s=g(e,["response"]);null!=s&&m(t,["response"],s);const a=g(e,["responseJsonSchema"]);return null!=a&&m(t,["responseJsonSchema"],a),t}(e)))),m(t,["functionDeclarations"],e)}const r=g(e,["retrieval"]);null!=r&&m(t,["retrieval"],r);const i=g(e,["googleSearchRetrieval"]);null!=i&&m(t,["googleSearchRetrieval"],i);const o=g(e,["computerUse"]);if(null!=o&&m(t,["computerUse"],o),void 0!==g(e,["fileSearch"]))throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=g(e,["codeExecution"]);null!=s&&m(t,["codeExecution"],s);const a=g(e,["enterpriseWebSearch"]);null!=a&&m(t,["enterpriseWebSearch"],a);const l=g(e,["googleMaps"]);null!=l&&m(t,["googleMaps"],l);const u=g(e,["googleSearch"]);null!=u&&m(t,["googleSearch"],u);const c=g(e,["urlContext"]);return null!=c&&m(t,["urlContext"],c),t}function nr(e,t){const n={},r=g(t,["model"]);null!=r&&m(n,["_url","name"],Ze(e,r));const i=g(t,["config"]);return null!=i&&function(e,t){const n=g(e,["displayName"]);void 0!==t&&null!=n&&m(t,["displayName"],n);const r=g(e,["description"]);void 0!==t&&null!=r&&m(t,["description"],r);const i=g(e,["defaultCheckpointId"]);void 0!==t&&null!=i&&m(t,["defaultCheckpointId"],i)}(i,n),n}function rr(e,t){const n={},r=g(t,["model"]);null!=r&&m(n,["_url","model"],Ze(e,r));const i=g(t,["config"]);return null!=i&&function(e,t){const n=g(e,["displayName"]);void 0!==t&&null!=n&&m(t,["displayName"],n);const r=g(e,["description"]);void 0!==t&&null!=r&&m(t,["description"],r);const i=g(e,["defaultCheckpointId"]);void 0!==t&&null!=i&&m(t,["defaultCheckpointId"],i)}(i,n),n}function ir(e,t){const n={},r=g(t,["model"]);null!=r&&m(n,["_url","model"],Ze(e,r));const i=g(t,["image"]);null!=i&&m(n,["instances[0]","image"],Gn(i));const o=g(t,["upscaleFactor"]);null!=o&&m(n,["parameters","upscaleConfig","upscaleFactor"],o);const s=g(t,["config"]);return null!=s&&function(e,t){const n=g(e,["outputGcsUri"]);void 0!==t&&null!=n&&m(t,["parameters","storageUri"],n);const r=g(e,["safetyFilterLevel"]);void 0!==t&&null!=r&&m(t,["parameters","safetySetting"],r);const i=g(e,["personGeneration"]);void 0!==t&&null!=i&&m(t,["parameters","personGeneration"],i);const o=g(e,["includeRaiReason"]);void 0!==t&&null!=o&&m(t,["parameters","includeRaiReason"],o);const s=g(e,["outputMimeType"]);void 0!==t&&null!=s&&m(t,["parameters","outputOptions","mimeType"],s);const a=g(e,["outputCompressionQuality"]);void 0!==t&&null!=a&&m(t,["parameters","outputOptions","compressionQuality"],a);const l=g(e,["enhanceInputImage"]);void 0!==t&&null!=l&&m(t,["parameters","upscaleConfig","enhanceInputImage"],l);const u=g(e,["imagePreservationFactor"]);void 0!==t&&null!=u&&m(t,["parameters","upscaleConfig","imagePreservationFactor"],u);const c=g(e,["labels"]);void 0!==t&&null!=c&&m(t,["labels"],c);const d=g(e,["numberOfImages"]);void 0!==t&&null!=d&&m(t,["parameters","sampleCount"],d);const h=g(e,["mode"]);void 0!==t&&null!=h&&m(t,["parameters","mode"],h)}(s,n),n}function or(e){const t={},n=g(e,["uri"]);null!=n&&m(t,["uri"],n);const r=g(e,["videoBytes"]);null!=r&&m(t,["encodedVideo"],wt(r));const i=g(e,["mimeType"]);return null!=i&&m(t,["encoding"],i),t}function sr(e){const t={},n=g(e,["uri"]);null!=n&&m(t,["gcsUri"],n);const r=g(e,["videoBytes"]);null!=r&&m(t,["bytesBase64Encoded"],wt(r));const i=g(e,["mimeType"]);return null!=i&&m(t,["mimeType"],i),t}function ar(e){const t={},n=g(e,["config"]);return null!=n&&function(e,t){const n=g(e,["displayName"]);void 0!==t&&null!=n&&m(t,["displayName"],n)}(n,t),t}function lr(e){const t={},n=g(e,["name"]);null!=n&&m(t,["_url","name"],n);const r=g(e,["config"]);return null!=r&&function(e,t){const n=g(e,["force"]);void 0!==t&&null!=n&&m(t,["_query","force"],n)}(r,t),t}function ur(e){const t={},n=g(e,["name"]);null!=n&&m(t,["name"],n);const r=g(e,["metadata"]);null!=r&&m(t,["metadata"],r);const i=g(e,["done"]);null!=i&&m(t,["done"],i);const o=g(e,["error"]);null!=o&&m(t,["error"],o);const s=g(e,["response"]);return null!=s&&m(t,["response"],function(e){const t={},n=g(e,["sdkHttpResponse"]);null!=n&&m(t,["sdkHttpResponse"],n);const r=g(e,["parent"]);null!=r&&m(t,["parent"],r);const i=g(e,["documentName"]);null!=i&&m(t,["documentName"],i);return t}(s)),t}function cr(e){const t={},n=g(e,["fileSearchStoreName"]);null!=n&&m(t,["_url","file_search_store_name"],n);const r=g(e,["fileName"]);null!=r&&m(t,["fileName"],r);const i=g(e,["config"]);return null!=i&&function(e,t){const n=g(e,["customMetadata"]);if(void 0!==t&&null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>e))),m(t,["customMetadata"],e)}const r=g(e,["chunkingConfig"]);void 0!==t&&null!=r&&m(t,["chunkingConfig"],r)}(i,t),t}function dr(e){const t={},n=g(e,["config"]);return null!=n&&function(e,t){const n=g(e,["pageSize"]);void 0!==t&&null!=n&&m(t,["_query","pageSize"],n);const r=g(e,["pageToken"]);void 0!==t&&null!=r&&m(t,["_query","pageToken"],r)}(n,t),t}function hr(e,t){const n=g(e,["mimeType"]);void 0!==t&&null!=n&&m(t,["mimeType"],n);const r=g(e,["displayName"]);void 0!==t&&null!=r&&m(t,["displayName"],r);const i=g(e,["customMetadata"]);if(void 0!==t&&null!=i){let e=i;Array.isArray(e)&&(e=e.map((e=>e))),m(t,["customMetadata"],e)}const o=g(e,["chunkingConfig"]);return void 0!==t&&null!=o&&m(t,["chunkingConfig"],o),{}}const fr="x-goog-api-client",pr="google-genai-sdk/".concat("1.31.0"),mr=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class gr{constructor(e){var t,n;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=null!==(t=this.clientOptions.apiVersion)&&void 0!==t?t:"v1beta1",r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=null!==(n=this.clientOptions.apiVersion)&&void 0!==n?n:"v1beta",r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&"global"!==this.clientOptions.location?"https://".concat(this.clientOptions.location,"-aiplatform.googleapis.com/"):"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:(this.clientOptions.project=void 0,this.clientOptions.location=void 0)}isVertexAI(){var e;return null!==(e=this.clientOptions.vertexai)&&void 0!==e&&e}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.apiVersion)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.baseUrl)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.headers)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||void 0===e.baseUrl||void 0===e.apiVersion)throw new Error("HTTP options are not correctly set.");const t=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&""!==e.apiVersion&&t.push(e.apiVersion),t.join("/")}getBaseResourcePath(){return"projects/".concat(this.clientOptions.project,"/locations/").concat(this.clientOptions.location)}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol="http:"==t.protocol?"ws":"wss",t.toString()}setBaseUrl(e){if(!this.clientOptions.httpOptions)throw new Error("HTTP options are not correctly set.");this.clientOptions.httpOptions.baseUrl=e}constructUrl(e,t,n){const r=[this.getRequestUrlInternal(t)];n&&r.push(this.getBaseResourcePath()),""!==e&&r.push(e);return new URL("".concat(r.join("/")))}shouldPrependVertexProjectPath(e){return!this.clientOptions.apiKey&&(!!this.clientOptions.vertexai&&(!e.path.startsWith("projects/")&&("GET"!==e.httpMethod||!e.path.startsWith("publishers/google/models"))))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const n=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,n);if(e.queryParams)for(const[o,s]of Object.entries(e.queryParams))r.searchParams.append(o,String(s));let i={};if("GET"===e.httpMethod){if(e.body&&"{}"!==e.body)throw new Error("Request body should be empty for GET request, but got non empty request body")}else i.body=e.body;return i=await this.includeExtraHttpOptionsToRequestInit(i,t,r.toString(),e.abortSignal),this.unaryApiCall(r,i,e.httpMethod)}patchHttpOptions(e,t){const n=JSON.parse(JSON.stringify(e));for(const[r,i]of Object.entries(t))"object"===typeof i?n[r]=Object.assign(Object.assign({},n[r]),i):void 0!==i&&(n[r]=i);return n}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const n=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,n);r.searchParams.has("alt")&&"sse"===r.searchParams.get("alt")||r.searchParams.set("alt","sse");let i={};return i.body=e.body,i=await this.includeExtraHttpOptionsToRequestInit(i,t,r.toString(),e.abortSignal),this.streamApiCall(r,i,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,n,r){if(t&&t.timeout||r){const n=new AbortController,i=n.signal;if(t.timeout&&(null===t||void 0===t?void 0:t.timeout)>0){const e=setTimeout((()=>n.abort()),t.timeout);e&&"function"===typeof e.unref&&e.unref()}r&&r.addEventListener("abort",(()=>{n.abort()})),e.signal=i}return t&&null!==t.extraBody&&function(e,t){if(!t||0===Object.keys(t).length)return;if(e.body instanceof Blob)return void console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");let n={};if("string"===typeof e.body&&e.body.length>0)try{const t=JSON.parse(e.body);if("object"!==typeof t||null===t||Array.isArray(t))return void console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");n=t}catch(qv){return void console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.")}function r(e,t){const n=Object.assign({},e);for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)){const e=t[i],o=n[i];e&&"object"===typeof e&&!Array.isArray(e)&&o&&"object"===typeof o&&!Array.isArray(o)?n[i]=r(o,e):(o&&e&&typeof o!==typeof e&&console.warn('includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "'.concat(i,'". Original type: ').concat(typeof o,", New type: ").concat(typeof e,". Overwriting.")),n[i]=e)}return n}const i=r(n,t);e.body=JSON.stringify(i)}(e,t.extraBody),e.headers=await this.getHeadersInternal(t,n),e}async unaryApiCall(e,t,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:n})).then((async e=>(await yr(e),new Ce(e)))).catch((e=>{throw e instanceof Error?e:new Error(JSON.stringify(e))}))}async streamApiCall(e,t,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:n})).then((async e=>(await yr(e),this.processStreamResponse(e)))).catch((e=>{throw e instanceof Error?e:new Error(JSON.stringify(e))}))}processStreamResponse(e){var t;return Zt(this,arguments,(function*(){const n=null===(t=null===e||void 0===e?void 0:e.body)||void 0===t?void 0:t.getReader(),r=new TextDecoder("utf-8");if(!n)throw new Error("Response body is empty");try{let t="";for(;;){const{done:i,value:o}=yield $t(n.read());if(i){if(t.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const s=r.decode(o,{stream:!0});try{const e=JSON.parse(s);if("error"in e){const t=JSON.parse(JSON.stringify(e.error)),n=t.status,r=t.code,i="got status: ".concat(n,". ").concat(JSON.stringify(e));if(r>=400&&r<600){throw new an({message:i,status:r})}}}catch(qv){if("ApiError"===qv.name)throw qv}t+=s;let a=t.match(mr);for(;a;){const n=a[1];try{const r=new Response(n,{headers:null===e||void 0===e?void 0:e.headers,status:null===e||void 0===e?void 0:e.status,statusText:null===e||void 0===e?void 0:e.statusText});yield yield $t(new Ce(r)),t=t.slice(a[0].length),a=t.match(mr)}catch(qv){throw new Error("exception parsing stream chunk ".concat(n,". ").concat(qv))}}}}finally{n.releaseLock()}}))}async apiCall(e,t){return fetch(e,t).catch((e=>{throw new Error("exception ".concat(e," sending request"))}))}getDefaultHeaders(){const e={},t=pr+" "+this.clientOptions.userAgentExtra;return e["User-Agent"]=t,e[fr]=t,e["Content-Type"]="application/json",e}async getHeadersInternal(e,t){const n=new Headers;if(e&&e.headers){for(const[t,r]of Object.entries(e.headers))n.append(t,r);e.timeout&&e.timeout>0&&n.append("X-Server-Timeout",String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n,t),n}getFileName(e){var t;let n="";return"string"===typeof e&&(n=e.replace(/[/\\]+$/,""),n=null!==(t=n.split(/[/\\]/).pop())&&void 0!==t?t:""),n}async uploadFile(e,t){var n;const r={};null!=t&&(r.mimeType=t.mimeType,r.name=t.name,r.displayName=t.displayName),r.name&&!r.name.startsWith("files/")&&(r.name="files/".concat(r.name));const i=this.clientOptions.uploader,o=await i.stat(e);r.sizeBytes=String(o.size);const s=null!==(n=null===t||void 0===t?void 0:t.mimeType)&&void 0!==n?n:o.type;if(void 0===s||""===s)throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=s;const a={file:r},l=this.getFileName(e),u=p("upload/v1beta/files",a._url),c=await this.fetchUploadUrl(u,r.sizeBytes,r.mimeType,l,a,null===t||void 0===t?void 0:t.httpOptions);return i.upload(e,c,this)}async uploadFileToFileSearchStore(e,t,n){var r;const i=this.clientOptions.uploader,o=await i.stat(t),s=String(o.size),a=null!==(r=null===n||void 0===n?void 0:n.mimeType)&&void 0!==r?r:o.type;if(void 0===a||""===a)throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const l="upload/v1beta/".concat(e,":uploadToFileSearchStore"),u=this.getFileName(t),c={};null!=n&&hr(n,c);const d=await this.fetchUploadUrl(l,s,a,u,c,null===n||void 0===n?void 0:n.httpOptions);return i.uploadToFileSearchStore(t,d,this)}async downloadFile(e){const t=this.clientOptions.downloader;await t.download(e,this)}async fetchUploadUrl(e,t,n,r,i,o){var s;let a={};a=o||{apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(t),"X-Goog-Upload-Header-Content-Type":"".concat(n)},r?{"X-Goog-Upload-File-Name":r}:{})};const l=await this.request({path:e,body:JSON.stringify(i),httpMethod:"POST",httpOptions:a});if(!l||!(null===l||void 0===l?void 0:l.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const u=null===(s=null===l||void 0===l?void 0:l.headers)||void 0===s?void 0:s["x-goog-upload-url"];if(void 0===u)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return u}}async function yr(e){var t;if(void 0===e)throw new Error("response is undefined");if(!e.ok){const n=e.status;let r;r=(null===(t=e.headers.get("content-type"))||void 0===t?void 0:t.includes("application/json"))?await e.json():{error:{message:await e.text(),code:e.status,status:e.statusText}};const i=JSON.stringify(r);if(n>=400&&n<600){throw new an({message:i,status:n})}throw new Error(i)}}let vr=!1;function br(e){for(const n of e){if(null!==(t=n)&&"object"===typeof t&&t instanceof Sr)return!0;if("object"===typeof n&&"inputSchema"in n)return!0}var t;return vr}function Er(e){var t;const n=null!==(t=e[fr])&&void 0!==t?t:"";e[fr]=(n+" ".concat("mcp_used/unknown")).trimStart()}function wr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return Zt(this,arguments,(function*(){let n,r=0;for(;r<t;){const t=yield $t(e.listTools({cursor:n}));for(const e of t.tools)yield yield $t(e),r++;if(!t.nextCursor)break;n=t.nextCursor}}))}class Sr{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new Sr(e,t)}async initialize(){var e,t,n,r;if(this.mcpTools.length>0)return;const i={},o=[];for(const c of this.mcpClients)try{for(var s,a=!0,l=(t=void 0,en(wr(c)));!(e=(s=await l.next()).done);a=!0){r=s.value,a=!1;const e=r;o.push(e);const t=e.name;if(i[t])throw new Error("Duplicate function name ".concat(t," found in MCP tools. Please ensure function names are unique."));i[t]=c}}catch(u){t={error:u}}finally{try{a||e||!(n=l.return)||await n.call(l)}finally{if(t)throw t.error}}this.mcpTools=o,this.functionNameToMcpClient=i}async tool(){return await this.initialize(),function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=[],r=new Set;for(const i of e){const e=i.name;if(r.has(e))throw new Error("Duplicate function name ".concat(e," found in MCP tools. Please ensure function names are unique."));r.add(e);const o=Ct(i,t);o.functionDeclarations&&n.push(...o.functionDeclarations)}return{functionDeclarations:n}}(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const n of e)if(n.name in this.functionNameToMcpClient){const e=this.functionNameToMcpClient[n.name];let r;this.config.timeout&&(r={timeout:this.config.timeout});const i=await e.callTool({name:n.name,arguments:n.args},void 0,r);t.push({functionResponse:{name:n.name,response:i.isError?{error:i}:i}})}return t}}class _r{constructor(e,t,n){this.apiClient=e,this.auth=t,this.webSocketFactory=n}async connect(e){var t,n;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),i=this.apiClient.getApiVersion(),o=function(e){const t=new Headers;for(const[n,r]of Object.entries(e))t.append(n,r);return t}(this.apiClient.getDefaultHeaders()),s=this.apiClient.getApiKey(),a="".concat(r,"/ws/google.ai.generativelanguage.").concat(i,".GenerativeService.BidiGenerateMusic?key=").concat(s);let l=()=>{};const u=new Promise((e=>{l=e})),c=e.callbacks,d=(this.apiClient,{onopen:function(){l({})},onmessage:e=>{!async function(e,t,n){const r=new Xe;let i;i=n.data instanceof Blob?JSON.parse(await n.data.text()):JSON.parse(n.data),Object.assign(r,i),t(r)}(0,c.onmessage,e)},onerror:null!==(t=null===c||void 0===c?void 0:c.onerror)&&void 0!==t?t:function(e){},onclose:null!==(n=null===c||void 0===c?void 0:c.onclose)&&void 0!==n?n:function(e){}}),h=this.webSocketFactory.create(a,function(e){const t={};return e.forEach(((e,n)=>{t[n]=e})),t}(o),d);h.connect(),await u;const f={setup:{model:Ze(this.apiClient,e.model)}};return h.send(JSON.stringify(f)),new Tr(h,this.apiClient)}}class Tr{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||0===Object.keys(e.weightedPrompts).length)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=function(e){const t={},n=g(e,["weightedPrompts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>e))),m(t,["weightedPrompts"],e)}return t}(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=function(e){const t={},n=g(e,["musicGenerationConfig"]);return null!=n&&m(t,["musicGenerationConfig"],n),t}(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(_e.PLAY)}pause(){this.sendPlaybackControl(_e.PAUSE)}stop(){this.sendPlaybackControl(_e.STOP)}resetContext(){this.sendPlaybackControl(_e.RESET_CONTEXT)}close(){this.conn.close()}}class Cr{constructor(e,t,n){this.apiClient=e,this.auth=t,this.webSocketFactory=n,this.music=new _r(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,n,r,i,o,s;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const a=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion();let u;const c=this.apiClient.getHeaders();e.config&&e.config.tools&&br(e.config.tools)&&Er(c);const d=function(e){const t=new Headers;for(const[n,r]of Object.entries(e))t.append(n,r);return t}(c);if(this.apiClient.isVertexAI())u="".concat(a,"/ws/google.cloud.aiplatform.").concat(l,".LlmBidiService/BidiGenerateContent"),await this.auth.addAuthHeaders(d,u);else{const e=this.apiClient.getApiKey();let t="BidiGenerateContent",n="key";(null===e||void 0===e?void 0:e.startsWith("auth_tokens/"))&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),"v1alpha"!==l&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),t="BidiGenerateContentConstrained",n="access_token"),u="".concat(a,"/ws/google.ai.generativelanguage.").concat(l,".GenerativeService.").concat(t,"?").concat(n,"=").concat(e)}let h=()=>{};const f=new Promise((e=>{h=e})),p=e.callbacks,y=this.apiClient,v={onopen:function(){var e;null===(e=null===p||void 0===p?void 0:p.onopen)||void 0===e||e.call(p),h({})},onmessage:e=>{!async function(e,t,n){const r=new Qe;let i;i=n.data instanceof Blob?await n.data.text():n.data instanceof ArrayBuffer?(new TextDecoder).decode(n.data):n.data;const o=JSON.parse(i);if(e.isVertexAI()){const e=gn(o);Object.assign(r,e)}else{const e=o;Object.assign(r,e)}t(r)}(y,p.onmessage,e)},onerror:null!==(t=null===p||void 0===p?void 0:p.onerror)&&void 0!==t?t:function(e){},onclose:null!==(n=null===p||void 0===p?void 0:p.onclose)&&void 0!==n?n:function(e){}},b=this.webSocketFactory.create(u,function(e){const t={};return e.forEach(((e,n)=>{t[n]=e})),t}(d),v);b.connect(),await f;let E=Ze(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&E.startsWith("publishers/")){const e=this.apiClient.getProject(),t=this.apiClient.getLocation();E="projects/".concat(e,"/locations/").concat(t,"/")+E}let w={};this.apiClient.isVertexAI()&&void 0===(null===(r=e.config)||void 0===r?void 0:r.responseModalities)&&(void 0===e.config?e.config={responseModalities:[B.AUDIO]}:e.config.responseModalities=[B.AUDIO]),(null===(i=e.config)||void 0===i?void 0:i.generationConfig)&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const S=null!==(s=null===(o=e.config)||void 0===o?void 0:o.tools)&&void 0!==s?s:[],_=[];for(const m of S)if(this.isCallableTool(m)){const e=m;_.push(await e.tool())}else _.push(m);_.length>0&&(e.config.tools=_);const T={model:E,config:e.config,callbacks:e.callbacks};return w=this.apiClient.isVertexAI()?function(e,t){const n={},r=g(t,["model"]);null!=r&&m(n,["setup","model"],Ze(e,r));const i=g(t,["config"]);return null!=i&&m(n,["config"],fn(i,n)),n}(this.apiClient,T):function(e,t){const n={},r=g(t,["model"]);null!=r&&m(n,["setup","model"],Ze(e,r));const i=g(t,["config"]);return null!=i&&m(n,["config"],hn(i,n)),n}(this.apiClient,T),delete w.config,b.send(JSON.stringify(w)),new Ar(b,this.apiClient)}isCallableTool(e){return"callTool"in e&&"function"===typeof e.callTool}}const Ir={turnComplete:!0};class Ar{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(null!==t.turns&&void 0!==t.turns){let r=[];try{r=ht(t.turns),e.isVertexAI()||(r=r.map((e=>En(e))))}catch(n){throw new Error('Failed to parse client content "turns", type: \''.concat(typeof t.turns,"'"))}return{clientContent:{turns:r,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let n=[];if(null==t.functionResponses)throw new Error("functionResponses is required.");if(n=Array.isArray(t.functionResponses)?t.functionResponses:[t.functionResponses],0===n.length)throw new Error("functionResponses is required.");for(const r of n){if("object"!==typeof r||null===r||!("name"in r)||!("response"in r))throw new Error("Could not parse function response, type '".concat(typeof r,"'."));if(!e.isVertexAI()&&!("id"in r))throw new Error("FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.")}return{toolResponse:{functionResponses:n}}}sendClientContent(e){e=Object.assign(Object.assign({},Ir),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};t=this.apiClient.isVertexAI()?{realtimeInput:mn(e)}:{realtimeInput:pn(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(null==e.functionResponses)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function xr(e){var t,n,r;if(null===(t=null===e||void 0===e?void 0:e.automaticFunctionCalling)||void 0===t?void 0:t.disable)return!0;let i=!1;for(const s of null!==(n=null===e||void 0===e?void 0:e.tools)&&void 0!==n?n:[])if(Nr(s)){i=!0;break}if(!i)return!0;const o=null===(r=null===e||void 0===e?void 0:e.automaticFunctionCalling)||void 0===r?void 0:r.maximumRemoteCalls;return!!(o&&(o<0||!Number.isInteger(o))||0==o)&&(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0)}function Nr(e){return"callTool"in e&&"function"===typeof e.callTool}function kr(e){var t;const n=[];return(null===(t=null===e||void 0===e?void 0:e.config)||void 0===t?void 0:t.tools)?(e.config.tools.forEach(((e,t)=>{if(Nr(e))return;const r=e;r.functionDeclarations&&r.functionDeclarations.length>0&&n.push(t)})),n):n}function Or(e){var t;return!(null===(t=null===e||void 0===e?void 0:e.automaticFunctionCalling)||void 0===t?void 0:t.ignoreCallHistory)}class Rr extends f{constructor(e){super(),this.apiClient=e,this.generateContent=async e=>{var t,n,r,i,o;const s=await this.processParamsMaybeAddMcpUsage(e);if(this.maybeMoveToResponseJsonSchem(e),!function(e){var t,n,r;return null!==(r=null===(n=null===(t=e.config)||void 0===t?void 0:t.tools)||void 0===n?void 0:n.some((e=>Nr(e))))&&void 0!==r&&r}(e)||xr(e.config))return await this.generateContentInternal(s);const a=kr(e);if(a.length>0){const e=a.map((e=>"tools[".concat(e,"]"))).join(", ");throw new Error("Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ".concat(e,"."))}let l,u;const c=ht(s.contents),d=null!==(r=null===(n=null===(t=s.config)||void 0===t?void 0:t.automaticFunctionCalling)||void 0===n?void 0:n.maximumRemoteCalls)&&void 0!==r?r:10;let h=0;for(;h<d&&(l=await this.generateContentInternal(s),l.functionCalls&&0!==l.functionCalls.length);){const t=l.candidates[0].content,n=[];for(const r of null!==(o=null===(i=e.config)||void 0===i?void 0:i.tools)&&void 0!==o?o:[])if(Nr(r)){const e=r,t=await e.callTool(l.functionCalls);n.push(...t)}h++,u={role:"user",parts:n},s.contents=ht(s.contents),s.contents.push(t),s.contents.push(u),Or(s.config)&&(c.push(t),c.push(u))}return Or(s.config)&&(l.automaticFunctionCallingHistory=c),l},this.generateContentStream=async e=>{var t,n,r,i,o;if(this.maybeMoveToResponseJsonSchem(e),xr(e.config)){const t=await this.processParamsMaybeAddMcpUsage(e);return await this.generateContentStreamInternal(t)}const s=kr(e);if(s.length>0){const e=s.map((e=>"tools[".concat(e,"]"))).join(", ");throw new Error("Incompatible tools found at ".concat(e,'. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.'))}const a=null===(r=null===(n=null===(t=null===e||void 0===e?void 0:e.config)||void 0===t?void 0:t.toolConfig)||void 0===n?void 0:n.functionCallingConfig)||void 0===r?void 0:r.streamFunctionCallArguments,l=null===(o=null===(i=null===e||void 0===e?void 0:e.config)||void 0===i?void 0:i.automaticFunctionCalling)||void 0===o?void 0:o.disable;if(a&&!l)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(e)},this.generateImages=async e=>await this.generateImagesInternal(e).then((e=>{var t;let n;const r=[];if(null===e||void 0===e?void 0:e.generatedImages)for(const o of e.generatedImages)o&&(null===o||void 0===o?void 0:o.safetyAttributes)&&"Positive Prompt"===(null===(t=null===o||void 0===o?void 0:o.safetyAttributes)||void 0===t?void 0:t.contentType)?n=null===o||void 0===o?void 0:o.safetyAttributes:r.push(o);let i;return i=n?{generatedImages:r,positivePromptSafetyAttributes:n,sdkHttpResponse:e.sdkHttpResponse}:{generatedImages:r,sdkHttpResponse:e.sdkHttpResponse},i})),this.list=async e=>{var t;const n={config:Object.assign(Object.assign({},{queryBase:!0}),null===e||void 0===e?void 0:e.config)};if(this.apiClient.isVertexAI()&&!n.config.queryBase){if(null===(t=n.config)||void 0===t?void 0:t.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");n.config.filter="labels.tune-type:*"}return new qt(Te.PAGED_ITEM_MODELS,(e=>this.listInternal(e)),await this.listInternal(n),n)},this.editImage=async e=>{const t={model:e.model,prompt:e.prompt,referenceImages:[],config:e.config};return e.referenceImages&&e.referenceImages&&(t.referenceImages=e.referenceImages.map((e=>e.toReferenceImageAPI()))),await this.editImageInternal(t)},this.upscaleImage=async e=>{let t={numberOfImages:1,mode:"upscale"};e.config&&(t=Object.assign(Object.assign({},t),e.config));const n={model:e.model,image:e.image,upscaleFactor:e.upscaleFactor,config:t};return await this.upscaleImageInternal(n)},this.generateVideos=async e=>{var t,n,r,i,o,s;if((e.prompt||e.image||e.video)&&e.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||((null===(t=e.video)||void 0===t?void 0:t.uri)&&(null===(n=e.video)||void 0===n?void 0:n.videoBytes)?e.video={uri:e.video.uri,mimeType:e.video.mimeType}:(null===(i=null===(r=e.source)||void 0===r?void 0:r.video)||void 0===i?void 0:i.uri)&&(null===(s=null===(o=e.source)||void 0===o?void 0:o.video)||void 0===s?void 0:s.videoBytes)&&(e.source.video={uri:e.source.video.uri,mimeType:e.source.video.mimeType})),await this.generateVideosInternal(e)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,n,r;const i=null===(t=e.config)||void 0===t?void 0:t.tools;if(!i)return e;const o=await Promise.all(i.map((async e=>{if(Nr(e)){const t=e;return await t.tool()}return e}))),s={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:o})};if(s.config.tools=o,e.config&&e.config.tools&&br(e.config.tools)){const t=null!==(r=null===(n=e.config.httpOptions)||void 0===n?void 0:n.headers)&&void 0!==r?r:{};let i=Object.assign({},t);0===Object.keys(i).length&&(i=this.apiClient.getDefaultHeaders()),Er(i),s.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:i})}return s}async initAfcToolsMap(e){var t,n,r;const i=new Map;for(const o of null!==(n=null===(t=e.config)||void 0===t?void 0:t.tools)&&void 0!==n?n:[])if(Nr(o)){const e=o,t=await e.tool();for(const n of null!==(r=t.functionDeclarations)&&void 0!==r?r:[]){if(!n.name)throw new Error("Function declaration name is required.");if(i.has(n.name))throw new Error("Duplicate tool declaration name: ".concat(n.name));i.set(n.name,e)}}return i}async processAfcStream(e){var t,n,r;const i=null!==(r=null===(n=null===(t=e.config)||void 0===t?void 0:t.automaticFunctionCalling)||void 0===n?void 0:n.maximumRemoteCalls)&&void 0!==r?r:10;let o=!1,s=0;return function(e,t,n){var r,a;return Zt(this,arguments,(function*(){for(var l,u,c,d;s<i;){o&&(s++,o=!1);const g=yield $t(e.processParamsMaybeAddMcpUsage(n)),y=yield $t(e.generateContentStreamInternal(g)),v=[],b=[];try{for(var h,f=!0,p=(u=void 0,en(y));!(l=(h=yield $t(p.next())).done);f=!0){d=h.value,f=!1;const e=d;if(yield yield $t(e),e.candidates&&(null===(r=e.candidates[0])||void 0===r?void 0:r.content)){b.push(e.candidates[0].content);for(const n of null!==(a=e.candidates[0].content.parts)&&void 0!==a?a:[])if(s<i&&n.functionCall){if(!n.functionCall.name)throw new Error("Function call name was not returned by the model.");if(!t.has(n.functionCall.name))throw new Error("Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ".concat(t.keys(),", mising tool: ").concat(n.functionCall.name));{const e=yield $t(t.get(n.functionCall.name).callTool([n.functionCall]));v.push(...e)}}}}}catch(m){u={error:m}}finally{try{f||l||!(c=p.return)||(yield $t(c.call(p)))}finally{if(u)throw u.error}}if(!(v.length>0))break;{o=!0;const e=new Ie;e.candidates=[{content:{role:"user",parts:v}}],yield yield $t(e);const t=[];t.push(...b),t.push({role:"user",parts:v});const r=ht(n.contents).concat(t);n.contents=r}}}))}(this,await this.initAfcToolsMap(e),e)}async generateContentInternal(e){var t,n,r,i;let o,s="",a={};if(this.apiClient.isVertexAI()){const r=Nn(this.apiClient,e);return s=p("{model}:generateContent",r._url),a=r._query,delete r._url,delete r._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),o.then((e=>{const t=On(e),n=new Ie;return Object.assign(n,t),n}))}{const t=xn(this.apiClient,e);return s=p("{model}:generateContent",t._url),a=t._query,delete t._url,delete t._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),o.then((e=>{const t=kn(e),n=new Ie;return Object.assign(n,t),n}))}}async generateContentStreamInternal(e){var t,n,r,i;let o,s="",a={};if(this.apiClient.isVertexAI()){const r=Nn(this.apiClient,e);s=p("{model}:streamGenerateContent?alt=sse",r._url),a=r._query,delete r._url,delete r._query;return o=this.apiClient.requestStream({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}),o.then((function(e){return Zt(this,arguments,(function*(){var t,n,r,i;try{for(var o,s=!0,a=en(e);!(t=(o=yield $t(a.next())).done);s=!0){i=o.value,s=!1;const e=i,t=On(yield $t(e.json()));t.sdkHttpResponse={headers:e.headers};const n=new Ie;Object.assign(n,t),yield yield $t(n)}}catch(l){n={error:l}}finally{try{s||t||!(r=a.return)||(yield $t(r.call(a)))}finally{if(n)throw n.error}}}))}))}{const t=xn(this.apiClient,e);s=p("{model}:streamGenerateContent?alt=sse",t._url),a=t._query,delete t._url,delete t._query;return o=this.apiClient.requestStream({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}),o.then((function(e){return Zt(this,arguments,(function*(){var t,n,r,i;try{for(var o,s=!0,a=en(e);!(t=(o=yield $t(a.next())).done);s=!0){i=o.value,s=!1;const e=i,t=kn(yield $t(e.json()));t.sdkHttpResponse={headers:e.headers};const n=new Ie;Object.assign(n,t),yield yield $t(n)}}catch(l){n={error:l}}finally{try{s||t||!(r=a.return)||(yield $t(r.call(a)))}finally{if(n)throw n.error}}}))}))}}async embedContent(e){var t,n,r,i;let o,s="",a={};if(this.apiClient.isVertexAI()){const r=Cn(this.apiClient,e);return s=p("{model}:predict",r._url),a=r._query,delete r._url,delete r._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),o.then((e=>{const t=function(e){const t={},n=g(e,["sdkHttpResponse"]);null!=n&&m(t,["sdkHttpResponse"],n);const r=g(e,["predictions[]","embeddings"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map((e=>bn(e)))),m(t,["embeddings"],e)}const i=g(e,["metadata"]);return null!=i&&m(t,["metadata"],i),t}(e),n=new Ae;return Object.assign(n,t),n}))}{const t=Tn(this.apiClient,e);return s=p("{model}:batchEmbedContents",t._url),a=t._query,delete t._url,delete t._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),o.then((e=>{const t=function(e){const t={},n=g(e,["sdkHttpResponse"]);null!=n&&m(t,["sdkHttpResponse"],n);const r=g(e,["embeddings"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map((e=>e))),m(t,["embeddings"],e)}const i=g(e,["metadata"]);return null!=i&&m(t,["metadata"],i),t}(e),n=new Ae;return Object.assign(n,t),n}))}}async generateImagesInternal(e){var t,n,r,i;let o,s="",a={};if(this.apiClient.isVertexAI()){const r=Dn(this.apiClient,e);return s=p("{model}:predict",r._url),a=r._query,delete r._url,delete r._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),o.then((e=>{const t=function(e){const t={},n=g(e,["sdkHttpResponse"]);null!=n&&m(t,["sdkHttpResponse"],n);const r=g(e,["predictions"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map((e=>qn(e)))),m(t,["generatedImages"],e)}const i=g(e,["positivePromptSafetyAttributes"]);return null!=i&&m(t,["positivePromptSafetyAttributes"],Xn(i)),t}(e),n=new xe;return Object.assign(n,t),n}))}{const t=Rn(this.apiClient,e);return s=p("{model}:predict",t._url),a=t._query,delete t._url,delete t._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),o.then((e=>{const t=Pn(e),n=new xe;return Object.assign(n,t),n}))}}async editImageInternal(e){var t,n;let r,i="",o={};if(this.apiClient.isVertexAI()){const s=_n(this.apiClient,e);return i=p("{model}:predict",s._url),o=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),r.then((e=>{const t=function(e){const t={},n=g(e,["sdkHttpResponse"]);null!=n&&m(t,["sdkHttpResponse"],n);const r=g(e,["predictions"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map((e=>qn(e)))),m(t,["generatedImages"],e)}return t}(e),n=new Ne;return Object.assign(n,t),n}))}throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,n;let r,i="",o={};if(this.apiClient.isVertexAI()){const s=ir(this.apiClient,e);return i=p("{model}:predict",s._url),o=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),r.then((e=>{const t=function(e){const t={},n=g(e,["sdkHttpResponse"]);null!=n&&m(t,["sdkHttpResponse"],n);const r=g(e,["predictions"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map((e=>qn(e)))),m(t,["generatedImages"],e)}return t}(e),n=new ke;return Object.assign(n,t),n}))}throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,n;let r,i="",o={};if(this.apiClient.isVertexAI()){const s=Yn(this.apiClient,e);return i=p("{model}:predict",s._url),o=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),r.then((e=>{const t=function(e){const t={},n=g(e,["predictions"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>qn(e)))),m(t,["generatedImages"],e)}return t}(e),n=new Oe;return Object.assign(n,t),n}))}throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,n;let r,i="",o={};if(this.apiClient.isVertexAI()){const s=$n(this.apiClient,e);return i=p("{model}:predict",s._url),o=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),r.then((e=>{const t=Zn(e),n=new Re;return Object.assign(n,t),n}))}throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,n,r,i;let o,s="",a={};if(this.apiClient.isVertexAI()){const r=function(e,t){const n={},r=g(t,["model"]);return null!=r&&m(n,["_url","name"],Ze(e,r)),n}(this.apiClient,e);return s=p("{name}",r._url),a=r._query,delete r._url,delete r._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),o.then((e=>Jn(e)))}{const t=function(e,t){const n={},r=g(t,["model"]);return null!=r&&m(n,["_url","name"],Ze(e,r)),n}(this.apiClient,e);return s=p("{name}",t._url),a=t._query,delete t._url,delete t._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then((e=>e.json())),o.then((e=>Kn(e)))}}async listInternal(e){var t,n,r,i;let o,s="",a={};if(this.apiClient.isVertexAI()){const r=Wn(this.apiClient,e);return s=p("{models_url}",r._url),a=r._query,delete r._url,delete r._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),o.then((e=>{const t=function(e){const t={},n=g(e,["sdkHttpResponse"]);null!=n&&m(t,["sdkHttpResponse"],n);const r=g(e,["nextPageToken"]);null!=r&&m(t,["nextPageToken"],r);const i=g(e,["_self"]);if(null!=i){let e=Tt(i);Array.isArray(e)&&(e=e.map((e=>Jn(e)))),m(t,["models"],e)}return t}(e),n=new De;return Object.assign(n,t),n}))}{const t=zn(this.apiClient,e);return s=p("{models_url}",t._url),a=t._query,delete t._url,delete t._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),o.then((e=>{const t=function(e){const t={},n=g(e,["sdkHttpResponse"]);null!=n&&m(t,["sdkHttpResponse"],n);const r=g(e,["nextPageToken"]);null!=r&&m(t,["nextPageToken"],r);const i=g(e,["_self"]);if(null!=i){let e=Tt(i);Array.isArray(e)&&(e=e.map((e=>Kn(e)))),m(t,["models"],e)}return t}(e),n=new De;return Object.assign(n,t),n}))}}async update(e){var t,n,r,i;let o,s="",a={};if(this.apiClient.isVertexAI()){const r=rr(this.apiClient,e);return s=p("{model}",r._url),a=r._query,delete r._url,delete r._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"PATCH",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),o.then((e=>Jn(e)))}{const t=nr(this.apiClient,e);return s=p("{name}",t._url),a=t._query,delete t._url,delete t._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"PATCH",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then((e=>e.json())),o.then((e=>Kn(e)))}}async delete(e){var t,n,r,i;let o,s="",a={};if(this.apiClient.isVertexAI()){const r=function(e,t){const n={},r=g(t,["model"]);return null!=r&&m(n,["_url","name"],Ze(e,r)),n}(this.apiClient,e);return s=p("{name}",r._url),a=r._query,delete r._url,delete r._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"DELETE",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),o.then((e=>{const t=function(e){const t={},n=g(e,["sdkHttpResponse"]);return null!=n&&m(t,["sdkHttpResponse"],n),t}(e),n=new Pe;return Object.assign(n,t),n}))}{const t=function(e,t){const n={},r=g(t,["model"]);return null!=r&&m(n,["_url","name"],Ze(e,r)),n}(this.apiClient,e);return s=p("{name}",t._url),a=t._query,delete t._url,delete t._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"DELETE",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),o.then((e=>{const t=function(e){const t={},n=g(e,["sdkHttpResponse"]);return null!=n&&m(t,["sdkHttpResponse"],n),t}(e),n=new Pe;return Object.assign(n,t),n}))}}async countTokens(e){var t,n,r,i;let o,s="",a={};if(this.apiClient.isVertexAI()){const r=function(e,t){const n={},r=g(t,["model"]);null!=r&&m(n,["_url","model"],Ze(e,r));const i=g(t,["contents"]);if(null!=i){let e=ht(i);Array.isArray(e)&&(e=e.map((e=>e))),m(n,["contents"],e)}const o=g(t,["config"]);return null!=o&&wn(o,n),n}(this.apiClient,e);return s=p("{model}:countTokens",r._url),a=r._query,delete r._url,delete r._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),o.then((e=>{const t=function(e){const t={},n=g(e,["sdkHttpResponse"]);null!=n&&m(t,["sdkHttpResponse"],n);const r=g(e,["totalTokens"]);return null!=r&&m(t,["totalTokens"],r),t}(e),n=new Me;return Object.assign(n,t),n}))}{const t=Sn(this.apiClient,e);return s=p("{model}:countTokens",t._url),a=t._query,delete t._url,delete t._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),o.then((e=>{const t=function(e){const t={},n=g(e,["sdkHttpResponse"]);null!=n&&m(t,["sdkHttpResponse"],n);const r=g(e,["totalTokens"]);null!=r&&m(t,["totalTokens"],r);const i=g(e,["cachedContentTokenCount"]);return null!=i&&m(t,["cachedContentTokenCount"],i),t}(e),n=new Me;return Object.assign(n,t),n}))}}async computeTokens(e){var t,n;let r,i="",o={};if(this.apiClient.isVertexAI()){const s=function(e,t){const n={},r=g(t,["model"]);null!=r&&m(n,["_url","model"],Ze(e,r));const i=g(t,["contents"]);if(null!=i){let e=ht(i);Array.isArray(e)&&(e=e.map((e=>e))),m(n,["contents"],e)}return n}(this.apiClient,e);return i=p("{model}:computeTokens",s._url),o=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),r.then((e=>{const t=function(e){const t={},n=g(e,["sdkHttpResponse"]);null!=n&&m(t,["sdkHttpResponse"],n);const r=g(e,["tokensInfo"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map((e=>e))),m(t,["tokensInfo"],e)}return t}(e),n=new Le;return Object.assign(n,t),n}))}throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,n,r,i;let o,s="",a={};if(this.apiClient.isVertexAI()){const r=Vn(this.apiClient,e);return s=p("{model}:predictLongRunning",r._url),a=r._query,delete r._url,delete r._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),o.then((e=>{const t=Fn(e),n=new Ue;return Object.assign(n,t),n}))}{const t=jn(this.apiClient,e);return s=p("{model}:predictLongRunning",t._url),a=t._query,delete t._url,delete t._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then((e=>e.json())),o.then((e=>{const t=Un(e),n=new Ue;return Object.assign(n,t),n}))}}}class Dr extends f{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,n=e.config;if(void 0===t.name||""===t.name)throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const e=t.name.split("/operations/")[0];let r;n&&"httpOptions"in n&&(r=n.httpOptions);const i=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:e,config:{httpOptions:r}});return t._fromAPIResponse({apiResponse:i,_isVertexAI:!0})}{const e=await this.getVideosOperationInternal({operationName:t.name,config:n});return t._fromAPIResponse({apiResponse:e,_isVertexAI:!1})}}async get(e){const t=e.operation,n=e.config;if(void 0===t.name||""===t.name)throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const e=t.name.split("/operations/")[0];let r;n&&"httpOptions"in n&&(r=n.httpOptions);const i=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:e,config:{httpOptions:r}});return t._fromAPIResponse({apiResponse:i,_isVertexAI:!0})}{const e=await this.getVideosOperationInternal({operationName:t.name,config:n});return t._fromAPIResponse({apiResponse:e,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,n,r,i;let o,s="",a={};if(this.apiClient.isVertexAI()){const r=function(e){const t={},n=g(e,["operationName"]);return null!=n&&m(t,["_url","operationName"],n),t}(e);return s=p("{operationName}",r._url),a=r._query,delete r._url,delete r._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),o}{const t=function(e){const t={},n=g(e,["operationName"]);return null!=n&&m(t,["_url","operationName"],n),t}(e);return s=p("{operationName}",t._url),a=t._query,delete t._url,delete t._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then((e=>e.json())),o}}async fetchPredictVideosOperationInternal(e){var t,n;let r,i="",o={};if(this.apiClient.isVertexAI()){const s=function(e){const t={},n=g(e,["operationName"]);null!=n&&m(t,["operationName"],n);const r=g(e,["resourceName"]);return null!=r&&m(t,["_url","resourceName"],r),t}(e);return i=p("{resourceName}:fetchPredictOperation",s._url),o=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),r}throw new Error("This method is only supported by the Vertex AI.")}}function Pr(e){const t={},n=g(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>function(e){const t={},n=g(e,["mediaResolution"]);null!=n&&m(t,["mediaResolution"],n);const r=g(e,["codeExecutionResult"]);null!=r&&m(t,["codeExecutionResult"],r);const i=g(e,["executableCode"]);null!=i&&m(t,["executableCode"],i);const o=g(e,["fileData"]);null!=o&&m(t,["fileData"],function(e){const t={};if(void 0!==g(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const n=g(e,["fileUri"]);null!=n&&m(t,["fileUri"],n);const r=g(e,["mimeType"]);null!=r&&m(t,["mimeType"],r);return t}(o));const s=g(e,["functionCall"]);null!=s&&m(t,["functionCall"],function(e){const t={},n=g(e,["id"]);null!=n&&m(t,["id"],n);const r=g(e,["args"]);null!=r&&m(t,["args"],r);const i=g(e,["name"]);null!=i&&m(t,["name"],i);if(void 0!==g(e,["partialArgs"]))throw new Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==g(e,["willContinue"]))throw new Error("willContinue parameter is not supported in Gemini API.");return t}(s));const a=g(e,["functionResponse"]);null!=a&&m(t,["functionResponse"],a);const l=g(e,["inlineData"]);null!=l&&m(t,["inlineData"],function(e){const t={},n=g(e,["data"]);if(null!=n&&m(t,["data"],n),void 0!==g(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const r=g(e,["mimeType"]);return null!=r&&m(t,["mimeType"],r),t}(l));const u=g(e,["text"]);null!=u&&m(t,["text"],u);const c=g(e,["thought"]);null!=c&&m(t,["thought"],c);const d=g(e,["thoughtSignature"]);null!=d&&m(t,["thoughtSignature"],d);const h=g(e,["videoMetadata"]);null!=h&&m(t,["videoMetadata"],h);return t}(e)))),m(t,["parts"],e)}const r=g(e,["role"]);return null!=r&&m(t,["role"],r),t}function Mr(e,t,n){const r=g(t,["expireTime"]);void 0!==n&&null!=r&&m(n,["expireTime"],r);const i=g(t,["newSessionExpireTime"]);void 0!==n&&null!=i&&m(n,["newSessionExpireTime"],i);const o=g(t,["uses"]);void 0!==n&&null!=o&&m(n,["uses"],o);const s=g(t,["liveConnectConstraints"]);void 0!==n&&null!=s&&m(n,["bidiGenerateContentSetup"],function(e,t){const n={},r=g(t,["model"]);null!=r&&m(n,["setup","model"],Ze(e,r));const i=g(t,["config"]);null!=i&&m(n,["config"],function(e,t){const n={},r=g(e,["generationConfig"]);void 0!==t&&null!=r&&m(t,["setup","generationConfig"],r);const i=g(e,["responseModalities"]);void 0!==t&&null!=i&&m(t,["setup","generationConfig","responseModalities"],i);const o=g(e,["temperature"]);void 0!==t&&null!=o&&m(t,["setup","generationConfig","temperature"],o);const s=g(e,["topP"]);void 0!==t&&null!=s&&m(t,["setup","generationConfig","topP"],s);const a=g(e,["topK"]);void 0!==t&&null!=a&&m(t,["setup","generationConfig","topK"],a);const l=g(e,["maxOutputTokens"]);void 0!==t&&null!=l&&m(t,["setup","generationConfig","maxOutputTokens"],l);const u=g(e,["mediaResolution"]);void 0!==t&&null!=u&&m(t,["setup","generationConfig","mediaResolution"],u);const c=g(e,["seed"]);void 0!==t&&null!=c&&m(t,["setup","generationConfig","seed"],c);const d=g(e,["speechConfig"]);void 0!==t&&null!=d&&m(t,["setup","generationConfig","speechConfig"],gt(d));const h=g(e,["thinkingConfig"]);void 0!==t&&null!=h&&m(t,["setup","generationConfig","thinkingConfig"],h);const f=g(e,["enableAffectiveDialog"]);void 0!==t&&null!=f&&m(t,["setup","generationConfig","enableAffectiveDialog"],f);const p=g(e,["systemInstruction"]);void 0!==t&&null!=p&&m(t,["setup","systemInstruction"],Pr(ct(p)));const y=g(e,["tools"]);if(void 0!==t&&null!=y){let e=vt(y);Array.isArray(e)&&(e=e.map((e=>function(e){const t={},n=g(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>e))),m(t,["functionDeclarations"],e)}if(void 0!==g(e,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");const r=g(e,["googleSearchRetrieval"]);null!=r&&m(t,["googleSearchRetrieval"],r);const i=g(e,["computerUse"]);null!=i&&m(t,["computerUse"],i);const o=g(e,["fileSearch"]);null!=o&&m(t,["fileSearch"],o);const s=g(e,["codeExecution"]);null!=s&&m(t,["codeExecution"],s);if(void 0!==g(e,["enterpriseWebSearch"]))throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=g(e,["googleMaps"]);null!=a&&m(t,["googleMaps"],function(e){const t={};if(void 0!==g(e,["authConfig"]))throw new Error("authConfig parameter is not supported in Gemini API.");const n=g(e,["enableWidget"]);null!=n&&m(t,["enableWidget"],n);return t}(a));const l=g(e,["googleSearch"]);null!=l&&m(t,["googleSearch"],function(e){const t={};if(void 0!==g(e,["excludeDomains"]))throw new Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==g(e,["blockingConfidence"]))throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=g(e,["timeRangeFilter"]);null!=n&&m(t,["timeRangeFilter"],n);return t}(l));const u=g(e,["urlContext"]);null!=u&&m(t,["urlContext"],u);return t}(yt(e))))),m(t,["setup","tools"],e)}const v=g(e,["sessionResumption"]);void 0!==t&&null!=v&&m(t,["setup","sessionResumption"],function(e){const t={},n=g(e,["handle"]);null!=n&&m(t,["handle"],n);if(void 0!==g(e,["transparent"]))throw new Error("transparent parameter is not supported in Gemini API.");return t}(v));const b=g(e,["inputAudioTranscription"]);void 0!==t&&null!=b&&m(t,["setup","inputAudioTranscription"],b);const E=g(e,["outputAudioTranscription"]);void 0!==t&&null!=E&&m(t,["setup","outputAudioTranscription"],E);const w=g(e,["realtimeInputConfig"]);void 0!==t&&null!=w&&m(t,["setup","realtimeInputConfig"],w);const S=g(e,["contextWindowCompression"]);void 0!==t&&null!=S&&m(t,["setup","contextWindowCompression"],S);const _=g(e,["proactivity"]);void 0!==t&&null!=_&&m(t,["setup","proactivity"],_);return n}(i,n));return n}(e,s));const a=g(t,["lockAdditionalFields"]);return void 0!==n&&null!=a&&m(n,["fieldMask"],a),{}}function Lr(e,t){let n=null;const r=e.bidiGenerateContentSetup;if("object"===typeof r&&null!==r&&"setup"in r){const t=r.setup;"object"===typeof t&&null!==t?(e.bidiGenerateContentSetup=t,n=t):delete e.bidiGenerateContentSetup}else void 0!==r&&delete e.bidiGenerateContentSetup;const i=e.fieldMask;if(n){const r=function(e){const t=[];for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const r=e[n];if("object"===typeof r&&null!=r&&Object.keys(r).length>0){const e=Object.keys(r).map((e=>"".concat(n,".").concat(e)));t.push(...e)}else t.push(n)}return t.join(",")}(n);if(Array.isArray(null===t||void 0===t?void 0:t.lockAdditionalFields)&&0===(null===t||void 0===t?void 0:t.lockAdditionalFields.length))r?e.fieldMask=r:delete e.fieldMask;else if((null===t||void 0===t?void 0:t.lockAdditionalFields)&&t.lockAdditionalFields.length>0&&null!==i&&Array.isArray(i)&&i.length>0){const t=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let n=[];i.length>0&&(n=i.map((e=>t.includes(e)?"generationConfig.".concat(e):e)));const o=[];r&&o.push(r),n.length>0&&o.push(...n),o.length>0?e.fieldMask=o.join(","):delete e.fieldMask}else delete e.fieldMask}else null!==i&&Array.isArray(i)&&i.length>0?e.fieldMask=i.join(","):delete e.fieldMask;return e}class Ur extends f{constructor(e){super(),this.apiClient=e}async create(e){var t,n;let r,i="",o={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const s=function(e,t){const n={},r=g(t,["config"]);return null!=r&&m(n,["config"],Mr(e,r,n)),n}(this.apiClient,e);i=p("auth_tokens",s._url),o=s._query,delete s.config,delete s._url,delete s._query;const a=Lr(s,e.config);return r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),r.then((e=>e))}}}function Fr(e){const t={},n=g(e,["name"]);null!=n&&m(t,["_url","name"],n);const r=g(e,["config"]);return null!=r&&function(e,t){const n=g(e,["force"]);void 0!==t&&null!=n&&m(t,["_query","force"],n)}(r,t),t}function jr(e){const t={},n=g(e,["parent"]);null!=n&&m(t,["_url","parent"],n);const r=g(e,["config"]);return null!=r&&function(e,t){const n=g(e,["pageSize"]);void 0!==t&&null!=n&&m(t,["_query","pageSize"],n);const r=g(e,["pageToken"]);void 0!==t&&null!=r&&m(t,["_query","pageToken"],r)}(r,t),t}class Vr extends f{constructor(e){super(),this.apiClient=e,this.list=async e=>new qt(Te.PAGED_ITEM_DOCUMENTS,(t=>this.listInternal({parent:e.parent,config:t.config})),await this.listInternal(e),e)}async get(e){var t,n;let r,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=function(e){const t={},n=g(e,["name"]);return null!=n&&m(t,["_url","name"],n),t}(e);return i=p("{name}",s._url),o=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),r.then((e=>e))}}async delete(e){var t,n;let r="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=Fr(e);r=p("{name}",o._url),i=o._query,delete o._url,delete o._query,await this.apiClient.request({path:r,queryParams:i,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal})}}async listInternal(e){var t,n;let r,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=jr(e);return i=p("{parent}/documents",s._url),o=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),r.then((e=>{const t=function(e){const t={},n=g(e,["sdkHttpResponse"]);null!=n&&m(t,["sdkHttpResponse"],n);const r=g(e,["nextPageToken"]);null!=r&&m(t,["nextPageToken"],r);const i=g(e,["documents"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map((e=>e))),m(t,["documents"],e)}return t}(e),n=new Be;return Object.assign(n,t),n}))}}}class qr extends f{constructor(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Vr(e);super(),t=this,this.apiClient=e,this.documents=n,this.list=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new qt(Te.PAGED_ITEM_FILE_SEARCH_STORES,(e=>t.listInternal(e)),await t.listInternal(e),e)}}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,n;let r,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=ar(e);return i=p("fileSearchStores",s._url),o=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),r.then((e=>e))}}async get(e){var t,n;let r,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=function(e){const t={},n=g(e,["name"]);return null!=n&&m(t,["_url","name"],n),t}(e);return i=p("{name}",s._url),o=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),r.then((e=>e))}}async delete(e){var t,n;let r="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=lr(e);r=p("{name}",o._url),i=o._query,delete o._url,delete o._query,await this.apiClient.request({path:r,queryParams:i,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal})}}async listInternal(e){var t,n;let r,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=dr(e);return i=p("fileSearchStores",s._url),o=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),r.then((e=>{const t=function(e){const t={},n=g(e,["sdkHttpResponse"]);null!=n&&m(t,["sdkHttpResponse"],n);const r=g(e,["nextPageToken"]);null!=r&&m(t,["nextPageToken"],r);const i=g(e,["fileSearchStores"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map((e=>e))),m(t,["fileSearchStores"],e)}return t}(e),n=new He;return Object.assign(n,t),n}))}}async uploadToFileSearchStoreInternal(e){var t,n;let r,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=function(e){const t={},n=g(e,["fileSearchStoreName"]);null!=n&&m(t,["_url","file_search_store_name"],n);const r=g(e,["config"]);return null!=r&&hr(r,t),t}(e);return i=p("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",s._url),o=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),r.then((e=>{const t=function(e){const t={},n=g(e,["sdkHttpResponse"]);return null!=n&&m(t,["sdkHttpResponse"],n),t}(e),n=new Ge;return Object.assign(n,t),n}))}}async importFile(e){var t,n;let r,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=cr(e);return i=p("{file_search_store_name}:importFile",s._url),o=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),r.then((e=>{const t=ur(e),n=new ze;return Object.assign(n,t),n}))}}}function Br(e,t){const n={},r=g(e,["baseModel"]);null!=r&&m(n,["baseModel"],r);const i=g(e,["preTunedModel"]);null!=i&&m(n,["preTunedModel"],i);const o=g(e,["trainingDataset"]);null!=o&&function(e){const t={};if(void 0!==g(e,["gcsUri"]))throw new Error("gcsUri parameter is not supported in Gemini API.");if(void 0!==g(e,["vertexDatasetResource"]))throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=g(e,["examples"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map((e=>e))),m(t,["examples","examples"],e)}}(o);const s=g(e,["config"]);return null!=s&&function(e,t){const n={};if(void 0!==g(e,["validationDataset"]))throw new Error("validationDataset parameter is not supported in Gemini API.");const r=g(e,["tunedModelDisplayName"]);if(void 0!==t&&null!=r&&m(t,["displayName"],r),void 0!==g(e,["description"]))throw new Error("description parameter is not supported in Gemini API.");const i=g(e,["epochCount"]);void 0!==t&&null!=i&&m(t,["tuningTask","hyperparameters","epochCount"],i);const o=g(e,["learningRateMultiplier"]);if(null!=o&&m(n,["tuningTask","hyperparameters","learningRateMultiplier"],o),void 0!==g(e,["exportLastCheckpointOnly"]))throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(void 0!==g(e,["preTunedModelCheckpointId"]))throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(void 0!==g(e,["adapterSize"]))throw new Error("adapterSize parameter is not supported in Gemini API.");const s=g(e,["batchSize"]);void 0!==t&&null!=s&&m(t,["tuningTask","hyperparameters","batchSize"],s);const a=g(e,["learningRate"]);if(void 0!==t&&null!=a&&m(t,["tuningTask","hyperparameters","learningRate"],a),void 0!==g(e,["labels"]))throw new Error("labels parameter is not supported in Gemini API.");if(void 0!==g(e,["beta"]))throw new Error("beta parameter is not supported in Gemini API.")}(s,n),n}function Hr(e,t){const n={},r=g(e,["baseModel"]);null!=r&&m(n,["baseModel"],r);const i=g(e,["preTunedModel"]);null!=i&&m(n,["preTunedModel"],i);const o=g(e,["trainingDataset"]);null!=o&&function(e,t,n){const r={};let i=g(n,["config","method"]);void 0===i&&(i="SUPERVISED_FINE_TUNING");if("SUPERVISED_FINE_TUNING"===i){const n=g(e,["gcsUri"]);void 0!==t&&null!=n&&m(t,["supervisedTuningSpec","trainingDatasetUri"],n)}else if("PREFERENCE_TUNING"===i){const n=g(e,["gcsUri"]);void 0!==t&&null!=n&&m(t,["preferenceOptimizationSpec","trainingDatasetUri"],n)}let o=g(n,["config","method"]);void 0===o&&(o="SUPERVISED_FINE_TUNING");if("SUPERVISED_FINE_TUNING"===o){const n=g(e,["vertexDatasetResource"]);void 0!==t&&null!=n&&m(t,["supervisedTuningSpec","trainingDatasetUri"],n)}else if("PREFERENCE_TUNING"===o){const n=g(e,["vertexDatasetResource"]);void 0!==t&&null!=n&&m(t,["preferenceOptimizationSpec","trainingDatasetUri"],n)}if(void 0!==g(e,["examples"]))throw new Error("examples parameter is not supported in Vertex AI.")}(o,n,t);const s=g(e,["config"]);return null!=s&&function(e,t,n){let r=g(n,["config","method"]);if(void 0===r&&(r="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===r){const n=g(e,["validationDataset"]);void 0!==t&&null!=n&&m(t,["supervisedTuningSpec"],Jr(n))}else if("PREFERENCE_TUNING"===r){const n=g(e,["validationDataset"]);void 0!==t&&null!=n&&m(t,["preferenceOptimizationSpec"],Jr(n))}const i=g(e,["tunedModelDisplayName"]);void 0!==t&&null!=i&&m(t,["tunedModelDisplayName"],i);const o=g(e,["description"]);void 0!==t&&null!=o&&m(t,["description"],o);let s=g(n,["config","method"]);if(void 0===s&&(s="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===s){const n=g(e,["epochCount"]);void 0!==t&&null!=n&&m(t,["supervisedTuningSpec","hyperParameters","epochCount"],n)}else if("PREFERENCE_TUNING"===s){const n=g(e,["epochCount"]);void 0!==t&&null!=n&&m(t,["preferenceOptimizationSpec","hyperParameters","epochCount"],n)}let a=g(n,["config","method"]);if(void 0===a&&(a="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===a){const n=g(e,["learningRateMultiplier"]);void 0!==t&&null!=n&&m(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],n)}else if("PREFERENCE_TUNING"===a){const n=g(e,["learningRateMultiplier"]);void 0!==t&&null!=n&&m(t,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],n)}let l=g(n,["config","method"]);if(void 0===l&&(l="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===l){const n=g(e,["exportLastCheckpointOnly"]);void 0!==t&&null!=n&&m(t,["supervisedTuningSpec","exportLastCheckpointOnly"],n)}else if("PREFERENCE_TUNING"===l){const n=g(e,["exportLastCheckpointOnly"]);void 0!==t&&null!=n&&m(t,["preferenceOptimizationSpec","exportLastCheckpointOnly"],n)}let u=g(n,["config","method"]);if(void 0===u&&(u="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===u){const n=g(e,["adapterSize"]);void 0!==t&&null!=n&&m(t,["supervisedTuningSpec","hyperParameters","adapterSize"],n)}else if("PREFERENCE_TUNING"===u){const n=g(e,["adapterSize"]);void 0!==t&&null!=n&&m(t,["preferenceOptimizationSpec","hyperParameters","adapterSize"],n)}if(void 0!==g(e,["batchSize"]))throw new Error("batchSize parameter is not supported in Vertex AI.");if(void 0!==g(e,["learningRate"]))throw new Error("learningRate parameter is not supported in Vertex AI.");const c=g(e,["labels"]);void 0!==t&&null!=c&&m(t,["labels"],c);const d=g(e,["beta"]);void 0!==t&&null!=d&&m(t,["preferenceOptimizationSpec","hyperParameters","beta"],d)}(s,n,t),n}function Gr(e,t){const n={},r=g(e,["config"]);return null!=r&&function(e,t){const n=g(e,["pageSize"]);void 0!==t&&null!=n&&m(t,["_query","pageSize"],n);const r=g(e,["pageToken"]);void 0!==t&&null!=r&&m(t,["_query","pageToken"],r);const i=g(e,["filter"]);void 0!==t&&null!=i&&m(t,["_query","filter"],i)}(r,n),n}function zr(e,t){const n={},r=g(e,["config"]);return null!=r&&function(e,t){const n=g(e,["pageSize"]);void 0!==t&&null!=n&&m(t,["_query","pageSize"],n);const r=g(e,["pageToken"]);void 0!==t&&null!=r&&m(t,["_query","pageToken"],r);const i=g(e,["filter"]);void 0!==t&&null!=i&&m(t,["_query","filter"],i)}(r,n),n}function Wr(e,t){const n={},r=g(e,["sdkHttpResponse"]);null!=r&&m(n,["sdkHttpResponse"],r);const i=g(e,["name"]);null!=i&&m(n,["name"],i);const o=g(e,["state"]);null!=o&&m(n,["state"],Et(o));const s=g(e,["createTime"]);null!=s&&m(n,["createTime"],s);const a=g(e,["tuningTask","startTime"]);null!=a&&m(n,["startTime"],a);const l=g(e,["tuningTask","completeTime"]);null!=l&&m(n,["endTime"],l);const u=g(e,["updateTime"]);null!=u&&m(n,["updateTime"],u);const c=g(e,["description"]);null!=c&&m(n,["description"],c);const d=g(e,["baseModel"]);null!=d&&m(n,["baseModel"],d);const h=g(e,["_self"]);return null!=h&&m(n,["tunedModel"],function(e){const t={},n=g(e,["name"]);null!=n&&m(t,["model"],n);const r=g(e,["name"]);return null!=r&&m(t,["endpoint"],r),t}(h)),n}function Kr(e,t){const n={},r=g(e,["sdkHttpResponse"]);null!=r&&m(n,["sdkHttpResponse"],r);const i=g(e,["name"]);null!=i&&m(n,["name"],i);const o=g(e,["state"]);null!=o&&m(n,["state"],Et(o));const s=g(e,["createTime"]);null!=s&&m(n,["createTime"],s);const a=g(e,["startTime"]);null!=a&&m(n,["startTime"],a);const l=g(e,["endTime"]);null!=l&&m(n,["endTime"],l);const u=g(e,["updateTime"]);null!=u&&m(n,["updateTime"],u);const c=g(e,["error"]);null!=c&&m(n,["error"],c);const d=g(e,["description"]);null!=d&&m(n,["description"],d);const h=g(e,["baseModel"]);null!=h&&m(n,["baseModel"],h);const f=g(e,["tunedModel"]);null!=f&&m(n,["tunedModel"],f);const p=g(e,["preTunedModel"]);null!=p&&m(n,["preTunedModel"],p);const y=g(e,["supervisedTuningSpec"]);null!=y&&m(n,["supervisedTuningSpec"],y);const v=g(e,["preferenceOptimizationSpec"]);null!=v&&m(n,["preferenceOptimizationSpec"],v);const b=g(e,["tuningDataStats"]);null!=b&&m(n,["tuningDataStats"],b);const E=g(e,["encryptionSpec"]);null!=E&&m(n,["encryptionSpec"],E);const w=g(e,["partnerModelTuningSpec"]);null!=w&&m(n,["partnerModelTuningSpec"],w);const S=g(e,["customBaseModel"]);null!=S&&m(n,["customBaseModel"],S);const _=g(e,["experiment"]);null!=_&&m(n,["experiment"],_);const T=g(e,["labels"]);null!=T&&m(n,["labels"],T);const C=g(e,["outputUri"]);null!=C&&m(n,["outputUri"],C);const I=g(e,["pipelineJob"]);null!=I&&m(n,["pipelineJob"],I);const A=g(e,["serviceAccount"]);null!=A&&m(n,["serviceAccount"],A);const x=g(e,["tunedModelDisplayName"]);null!=x&&m(n,["tunedModelDisplayName"],x);const N=g(e,["veoTuningSpec"]);return null!=N&&m(n,["veoTuningSpec"],N),n}function Jr(e,t){const n={},r=g(e,["gcsUri"]);null!=r&&m(n,["validationDatasetUri"],r);const i=g(e,["vertexDatasetResource"]);return null!=i&&m(n,["validationDatasetUri"],i),n}class Yr extends f{constructor(e){var t;super(),t=this,this.apiClient=e,this.list=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new qt(Te.PAGED_ITEM_TUNING_JOBS,(e=>t.listInternal(e)),await t.listInternal(e),e)},this.get=async e=>await this.getInternal(e),this.tune=async e=>{var t;if(this.apiClient.isVertexAI()){if(e.baseModel.startsWith("projects/")){const n={tunedModelName:e.baseModel};(null===(t=e.config)||void 0===t?void 0:t.preTunedModelCheckpointId)&&(n.checkpointId=e.config.preTunedModelCheckpointId);const r=Object.assign(Object.assign({},e),{preTunedModel:n});return r.baseModel=void 0,await this.tuneInternal(r)}{const t=Object.assign({},e);return await this.tuneInternal(t)}}{const t=Object.assign({},e),n=await this.tuneMldevInternal(t);let r="";void 0!==n.metadata&&void 0!==n.metadata.tunedModel?r=n.metadata.tunedModel:void 0!==n.name&&n.name.includes("/operations/")&&(r=n.name.split("/operations/")[0]);return{name:r,state:W.JOB_STATE_QUEUED}}}}async getInternal(e){var t,n,r,i;let o,s="",a={};if(this.apiClient.isVertexAI()){const r=function(e){const t={},n=g(e,["name"]);return null!=n&&m(t,["_url","name"],n),t}(e);return s=p("{name}",r._url),a=r._query,delete r._url,delete r._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),o.then((e=>Kr(e)))}{const t=function(e){const t={},n=g(e,["name"]);return null!=n&&m(t,["_url","name"],n),t}(e);return s=p("{name}",t._url),a=t._query,delete t._url,delete t._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),o.then((e=>Wr(e)))}}async listInternal(e){var t,n,r,i;let o,s="",a={};if(this.apiClient.isVertexAI()){const r=zr(e);return s=p("tuningJobs",r._url),a=r._query,delete r._url,delete r._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),o.then((e=>{const t=function(e){const t={},n=g(e,["sdkHttpResponse"]);null!=n&&m(t,["sdkHttpResponse"],n);const r=g(e,["nextPageToken"]);null!=r&&m(t,["nextPageToken"],r);const i=g(e,["tuningJobs"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map((e=>Kr(e)))),m(t,["tuningJobs"],e)}return t}(e),n=new Fe;return Object.assign(n,t),n}))}{const t=Gr(e);return s=p("tunedModels",t._url),a=t._query,delete t._url,delete t._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),o.then((e=>{const t=function(e){const t={},n=g(e,["sdkHttpResponse"]);null!=n&&m(t,["sdkHttpResponse"],n);const r=g(e,["nextPageToken"]);null!=r&&m(t,["nextPageToken"],r);const i=g(e,["tunedModels"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map((e=>Wr(e)))),m(t,["tuningJobs"],e)}return t}(e),n=new Fe;return Object.assign(n,t),n}))}}async cancel(e){var t,n,r,i;let o,s="",a={};if(this.apiClient.isVertexAI()){const r=function(e){const t={},n=g(e,["name"]);return null!=n&&m(t,["_url","name"],n),t}(e);return s=p("{name}:cancel",r._url),a=r._query,delete r._url,delete r._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),o.then((e=>{const t=function(e){const t={},n=g(e,["sdkHttpResponse"]);return null!=n&&m(t,["sdkHttpResponse"],n),t}(e),n=new je;return Object.assign(n,t),n}))}{const t=function(e){const t={},n=g(e,["name"]);return null!=n&&m(t,["_url","name"],n),t}(e);return s=p("{name}:cancel",t._url),a=t._query,delete t._url,delete t._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),o.then((e=>{const t=function(e){const t={},n=g(e,["sdkHttpResponse"]);return null!=n&&m(t,["sdkHttpResponse"],n),t}(e),n=new je;return Object.assign(n,t),n}))}}async tuneInternal(e){var t,n;let r,i="",o={};if(this.apiClient.isVertexAI()){const s=Hr(e,e);return i=p("tuningJobs",s._url),o=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),r.then((e=>Kr(e)))}throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,n;let r,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=Br(e);return i=p("tunedModels",s._url),o=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json().then((t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})))),r.then((e=>function(e){const t={},n=g(e,["sdkHttpResponse"]);null!=n&&m(t,["sdkHttpResponse"],n);const r=g(e,["name"]);null!=r&&m(t,["name"],r);const i=g(e,["metadata"]);null!=i&&m(t,["metadata"],i);const o=g(e,["done"]);null!=o&&m(t,["done"],o);const s=g(e,["error"]);return null!=s&&m(t,["error"],s),t}(e)))}}}class Qr{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Xr="x-goog-upload-status";async function $r(e,t,n){var r,i;let o=0,s=0,a=new Ce(new Response),l="upload";for(o=e.size;s<o;){const u=Math.min(8388608,o-s),c=e.slice(s,s+u);s+u>=o&&(l+=", finalize");let d=0,h=1e3;for(;d<3&&(a=await n.request({path:"",body:c,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":l,"X-Goog-Upload-Offset":String(s),"Content-Length":String(u)}}}),!(null===(r=null===a||void 0===a?void 0:a.headers)||void 0===r?void 0:r[Xr]));)d++,await Zr(h),h*=2;if(s+=u,"active"!==(null===(i=null===a||void 0===a?void 0:a.headers)||void 0===i?void 0:i[Xr]))break;if(o<=s)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return a}function Zr(e){return new Promise((t=>setTimeout(t,e)))}class ei{async upload(e,t,n){if("string"===typeof e)throw new Error("File path is not supported in browser uploader.");return await async function(e,t,n){var r;const i=await $r(e,t,n),o=await(null===i||void 0===i?void 0:i.json());if("final"!==(null===(r=null===i||void 0===i?void 0:i.headers)||void 0===r?void 0:r[Xr]))throw new Error("Failed to upload file: Upload status is not finalized.");return o.file}(e,t,n)}async uploadToFileSearchStore(e,t,n){if("string"===typeof e)throw new Error("File path is not supported in browser uploader.");return await async function(e,t,n){var r;const i=await $r(e,t,n),o=await(null===i||void 0===i?void 0:i.json());if("final"!==(null===(r=null===i||void 0===i?void 0:i.headers)||void 0===r?void 0:r[Xr]))throw new Error("Failed to upload file: Upload status is not finalized.");const s=S(o),a=new $e;return Object.assign(a,s),a}(e,t,n)}async stat(e){if("string"===typeof e)throw new Error("File path is not supported in browser uploader.");return await async function(e){return{size:e.size,type:e.type}}(e)}}class ti{create(e,t,n){return new ni(e,t,n)}}class ni{constructor(e,t,n){this.url=e,this.headers=t,this.callbacks=n}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(void 0===this.ws)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(void 0===this.ws)throw new Error("WebSocket is not connected");this.ws.close()}}const ri="x-goog-api-key";class ii{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(null===e.get(ri)){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(ri,this.apiKey)}}}const oi=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},si={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],o=i+1<e.length,s=o?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,u=t>>2,c=(3&t)<<4|s>>4;let d=(15&s)<<2|l>>6,h=63&l;a||(h=64,o||(d=64)),r.push(n[u],n[c],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(oi(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{const o=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0;++i;const s=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==o||null==s||null==a)throw new ai;const l=t<<2|o>>4;if(r.push(l),64!==s){const e=o<<4&240|s>>2;if(r.push(e),64!==a){const e=s<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class ai extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const li=function(e){return function(e){const t=oi(e);return si.encodeByteArray(t,!0)}(e).replace(/\./g,"")},ui=function(e){try{return si.decodeString(e,!0)}catch(qv){console.error("base64Decode failed: ",qv)}return null};const ci=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,di=()=>{try{return ci()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(qv){return}const t=e&&ui(e[1]);return t&&JSON.parse(t)})()}catch(qv){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(qv))}},hi=()=>{var e;return null===(e=di())||void 0===e?void 0:e.config};class fi{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}class pi extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,pi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,mi.prototype.create)}}class mi{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(gi,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",o="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new pi(n,o,t)}}const gi=/\{\$([^}]+)}/g;function yi(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],o=t[i];if(vi(n)&&vi(o)){if(!yi(n,o))return!1}else if(n!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function vi(e){return null!==e&&"object"===typeof e}class bi{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ei="[DEFAULT]";class wi{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new fi;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(qv){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(qv){if(r)return null;throw qv}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Ei})}catch(qv){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(qv){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ei;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ei;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ei;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,o]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&o.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===Ei?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(o){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ei;return this.component?this.component.multipleInstances?e:Ei:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Si{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new wi(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const _i=[];var Ti;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Ti||(Ti={}));const Ci={debug:Ti.DEBUG,verbose:Ti.VERBOSE,info:Ti.INFO,warn:Ti.WARN,error:Ti.ERROR,silent:Ti.SILENT},Ii=Ti.INFO,Ai={[Ti.DEBUG]:"log",[Ti.VERBOSE]:"log",[Ti.INFO]:"info",[Ti.WARN]:"warn",[Ti.ERROR]:"error"},xi=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=Ai[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,o=new Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];console[r]("[".concat(n,"]  ").concat(e.name,":"),...o)};let Ni,ki;const Oi=new WeakMap,Ri=new WeakMap,Di=new WeakMap,Pi=new WeakMap,Mi=new WeakMap;let Li={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Ri.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Di.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ji(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Ui(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(ki||(ki=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Vi(this),n),ji(Oi.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ji(e.apply(Vi(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const o=e.call(Vi(this),t,...r);return Di.set(o,t.sort?t.sort():[t]),ji(o)}}function Fi(e){return"function"===typeof e?Ui(e):(e instanceof IDBTransaction&&function(e){if(Ri.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)}));Ri.set(e,t)}(e),t=e,(Ni||(Ni=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,Li):e);var t}function ji(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{t(ji(e.result)),r()},o=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)}));return t.then((t=>{t instanceof IDBCursor&&Oi.set(t,e)})).catch((()=>{})),Mi.set(t,e),t}(e);if(Pi.has(e))return Pi.get(e);const t=Fi(e);return t!==e&&(Pi.set(e,t),Mi.set(t,e)),t}const Vi=e=>Mi.get(e);const qi=["get","getKey","getAll","getAllKeys","count"],Bi=["put","add","delete","clear"],Hi=new Map;function Gi(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Hi.get(t))return Hi.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Bi.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!qi.includes(n))return;const o=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let o=t.store;for(var s=arguments.length,a=new Array(s>1?s-1:0),l=1;l<s;l++)a[l-1]=arguments[l];return r&&(o=o.index(a.shift())),(await Promise.all([o[n](...a),i&&t.done]))[0]};return Hi.set(t,o),o}Li=(e=>u(u({},e),{},{get:(t,n,r)=>Gi(t,n)||e.get(t,n,r),has:(t,n)=>!!Gi(t,n)||e.has(t,n)}))(Li);class zi{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const Wi="@firebase/app",Ki="0.9.13",Ji=new class{constructor(e){this.name=e,this._logLevel=Ii,this._logHandler=xi,this._userLogHandler=null,_i.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ti))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Ci[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Ti.DEBUG,...t),this._logHandler(this,Ti.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Ti.VERBOSE,...t),this._logHandler(this,Ti.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Ti.INFO,...t),this._logHandler(this,Ti.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Ti.WARN,...t),this._logHandler(this,Ti.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Ti.ERROR,...t),this._logHandler(this,Ti.ERROR,...t)}}("@firebase/app"),Yi="@firebase/app-compat",Qi="@firebase/analytics-compat",Xi="@firebase/analytics",$i="@firebase/app-check-compat",Zi="@firebase/app-check",eo="@firebase/auth",to="@firebase/auth-compat",no="@firebase/database",ro="@firebase/database-compat",io="@firebase/functions",oo="@firebase/functions-compat",so="@firebase/installations",ao="@firebase/installations-compat",lo="@firebase/messaging",uo="@firebase/messaging-compat",co="@firebase/performance",ho="@firebase/performance-compat",fo="@firebase/remote-config",po="@firebase/remote-config-compat",mo="@firebase/storage",go="@firebase/storage-compat",yo="@firebase/firestore",vo="@firebase/firestore-compat",bo="firebase",Eo="[DEFAULT]",wo={[Wi]:"fire-core",[Yi]:"fire-core-compat",[Xi]:"fire-analytics",[Qi]:"fire-analytics-compat",[Zi]:"fire-app-check",[$i]:"fire-app-check-compat",[eo]:"fire-auth",[to]:"fire-auth-compat",[no]:"fire-rtdb",[ro]:"fire-rtdb-compat",[io]:"fire-fn",[oo]:"fire-fn-compat",[so]:"fire-iid",[ao]:"fire-iid-compat",[lo]:"fire-fcm",[uo]:"fire-fcm-compat",[co]:"fire-perf",[ho]:"fire-perf-compat",[fo]:"fire-rc",[po]:"fire-rc-compat",[mo]:"fire-gcs",[go]:"fire-gcs-compat",[yo]:"fire-fst",[vo]:"fire-fst-compat","fire-js":"fire-js",[bo]:"fire-js-all"},So=new Map,_o=new Map;function To(e,t){try{e.container.addComponent(t)}catch(qv){Ji.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),qv)}}function Co(e){const t=e.name;if(_o.has(t))return Ji.debug("There were multiple attempts to register component ".concat(t,".")),!1;_o.set(t,e);for(const n of So.values())To(n,e);return!0}function Io(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const Ao=new mi("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class xo{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new bi("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ao.create("app-deleted",{appName:this._name})}}function No(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Eo,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Ao.create("bad-app-name",{appName:String(i)});if(n||(n=hi()),!n)throw Ao.create("no-options");const o=So.get(i);if(o){if(yi(n,o.options)&&yi(r,o.config))return o;throw Ao.create("duplicate-app",{appName:i})}const s=new Si(i);for(const l of _o.values())s.addComponent(l);const a=new xo(n,r,s);return So.set(i,a),a}function ko(e,t,n){var r;let i=null!==(r=wo[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const o=i.match(/\s|\//),s=t.match(/\s|\//);if(o||s){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return o&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),o&&s&&e.push("and"),s&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Ji.warn(e.join(" "))}Co(new bi("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}const Oo="firebase-heartbeat-store";let Ro=null;function Do(){return Ro||(Ro=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=indexedDB.open(e,t),a=ji(s);return r&&s.addEventListener("upgradeneeded",(e=>{r(ji(s.result),e.oldVersion,e.newVersion,ji(s.transaction),e)})),n&&s.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{o&&e.addEventListener("close",(()=>o())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(Oo)}}).catch((e=>{throw Ao.create("idb-open",{originalErrorMessage:e.message})}))),Ro}async function Po(e,t){try{const n=(await Do()).transaction(Oo,"readwrite"),r=n.objectStore(Oo);await r.put(t,Mo(e)),await n.done}catch(qv){if(qv instanceof pi)Ji.warn(qv.message);else{const t=Ao.create("idb-set",{originalErrorMessage:null===qv||void 0===qv?void 0:qv.message});Ji.warn(t.message)}}}function Mo(e){return"".concat(e.name,"!").concat(e.options.appId)}class Lo{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Fo(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=Uo();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some((e=>e.date===t)))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=Uo(),{heartbeatsToSend:t,unsentEntries:n}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),jo(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),jo(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=li(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function Uo(){return(new Date).toISOString().substring(0,10)}class Fo{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"===typeof indexedDB}catch(qv){return!1}}()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=await Do();return await t.transaction(Oo).objectStore(Oo).get(Mo(e))}catch(qv){if(qv instanceof pi)Ji.warn(qv.message);else{const t=Ao.create("idb-get",{originalErrorMessage:null===qv||void 0===qv?void 0:qv.message});Ji.warn(t.message)}}}(this.app);return e||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Po(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Po(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function jo(e){return li(JSON.stringify({version:2,heartbeats:e})).length}var Vo;Vo="",Co(new bi("platform-logger",(e=>new zi(e)),"PRIVATE")),Co(new bi("heartbeat",(e=>new Lo(e)),"PRIVATE")),ko(Wi,Ki,Vo),ko(Wi,Ki,"esm2017"),ko("fire-js","");ko("firebase","9.23.0","app");const qo=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Bo={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],o=i+1<e.length,s=o?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,u=t>>2,c=(3&t)<<4|s>>4;let d=(15&s)<<2|l>>6,h=63&l;a||(h=64,o||(d=64)),r.push(n[u],n[c],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(qo(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{const o=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0;++i;const s=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==o||null==s||null==a)throw new Ho;const l=t<<2|o>>4;if(r.push(l),64!==s){const e=o<<4&240|s>>2;if(r.push(e),64!==a){const e=s<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Ho extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Go=function(e){return function(e){const t=qo(e);return Bo.encodeByteArray(t,!0)}(e).replace(/\./g,"")},zo=function(e){try{return Bo.decodeString(e,!0)}catch(qv){console.error("base64Decode failed: ",qv)}return null};const Wo=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Ko=()=>{try{return Wo()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(qv){return}const t=e&&zo(e[1]);return t&&JSON.parse(t)})()}catch(qv){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(qv))}},Jo=e=>{const t=(e=>{var t,n;return null===(n=null===(t=Ko())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]})(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]};class Yo extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Yo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qo.prototype.create)}}class Qo{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(Xo,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",o="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Yo(n,o,t)}}const Xo=/\{\$([^}]+)}/g;function $o(e){return e&&e._delegate?e._delegate:e}class Zo{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const es=[];var ts;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(ts||(ts={}));const ns={debug:ts.DEBUG,verbose:ts.VERBOSE,info:ts.INFO,warn:ts.WARN,error:ts.ERROR,silent:ts.SILENT},rs=ts.INFO,is={[ts.DEBUG]:"log",[ts.VERBOSE]:"log",[ts.INFO]:"info",[ts.WARN]:"warn",[ts.ERROR]:"error"},os=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=is[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,o=new Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];console[r]("[".concat(n,"]  ").concat(e.name,":"),...o)};var ss,as="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},ls={},us=us||{},cs=as||self;function ds(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function hs(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var fs="closure_uid_"+(1e9*Math.random()>>>0),ps=0;function ms(e,t,n){return e.call.apply(e.bind,arguments)}function gs(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function ys(e,t,n){return(ys=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ms:gs).apply(null,arguments)}function vs(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function bs(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function Es(){this.s=this.s,this.o=this.o}Es.prototype.s=!1,Es.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function(e){Object.prototype.hasOwnProperty.call(e,fs)&&e[fs]||(e[fs]=++ps)}(this)},Es.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ws=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Ss(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function _s(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(ds(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function Ts(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Ts.prototype.h=function(){this.defaultPrevented=!0};var Cs=function(){if(!cs.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{cs.addEventListener("test",(()=>{}),t),cs.removeEventListener("test",(()=>{}),t)}catch(Yv){}return e}();function Is(e){return/^[\s\xa0]*$/.test(e)}function As(){var e=cs.navigator;return e&&(e=e.userAgent)?e:""}function xs(e){return-1!=As().indexOf(e)}function Ns(e){return Ns[" "](e),e}Ns[" "]=function(){};var ks,Os,Rs=xs("Opera"),Ds=xs("Trident")||xs("MSIE"),Ps=xs("Edge"),Ms=Ps||Ds,Ls=xs("Gecko")&&!(-1!=As().toLowerCase().indexOf("webkit")&&!xs("Edge"))&&!(xs("Trident")||xs("MSIE"))&&!xs("Edge"),Us=-1!=As().toLowerCase().indexOf("webkit")&&!xs("Edge");function Fs(){var e=cs.document;return e?e.documentMode:void 0}e:{var js="",Vs=function(){var e=As();return Ls?/rv:([^\);]+)(\)|;)/.exec(e):Ps?/Edge\/([\d\.]+)/.exec(e):Ds?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Us?/WebKit\/(\S+)/.exec(e):Rs?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Vs&&(js=Vs?Vs[1]:""),Ds){var qs=Fs();if(null!=qs&&qs>parseFloat(js)){ks=String(qs);break e}}ks=js}if(cs.document&&Ds){var Bs=Fs();Os=Bs||(parseInt(ks,10)||void 0)}else Os=void 0;var Hs=Os;function Gs(e,t){if(Ts.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Ls){e:{try{Ns(t.nodeName);var i=!0;break e}catch(Qv){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:zs[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Gs.$.h.call(this)}}bs(Gs,Ts);var zs={2:"touch",3:"pen",4:"mouse"};Gs.prototype.h=function(){Gs.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Ws="closure_listenable_"+(1e6*Math.random()|0),Ks=0;function Js(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++Ks,this.fa=this.ia=!1}function Ys(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Qs(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function Xs(e){const t={};for(const n in e)t[n]=e[n];return t}const $s="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Zs(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<$s.length;t++)n=$s[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function ea(e){this.src=e,this.g={},this.h=0}function ta(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],o=ws(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Ys(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function na(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.fa&&o.listener==t&&o.capture==!!n&&o.la==r)return i}return-1}ea.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);var s=na(e,t,r,i);return-1<s?(t=e[s],n||(t.ia=!1)):((t=new Js(t,this.src,o,!!r,i)).ia=n,e.push(t)),t};var ra="closure_lm_"+(1e6*Math.random()|0),ia={};function oa(e,t,n,r,i){if(r&&r.once)return aa(e,t,n,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)oa(e,t[o],n,r,i);return null}return n=pa(n),e&&e[Ws]?e.O(t,n,hs(r)?!!r.capture:!!r,i):sa(e,t,n,!1,r,i)}function sa(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var s=hs(i)?!!i.capture:!!i,a=ha(e);if(a||(e[ra]=a=new ea(e)),(n=a.add(t,n,r,s,o)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=da;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Cs||(i=s),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(ca(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function aa(e,t,n,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)aa(e,t[o],n,r,i);return null}return n=pa(n),e&&e[Ws]?e.P(t,n,hs(r)?!!r.capture:!!r,i):sa(e,t,n,!0,r,i)}function la(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)la(e,t[o],n,r,i);else r=hs(r)?!!r.capture:!!r,n=pa(n),e&&e[Ws]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=na(o=e.g[t],n,r,i))&&(Ys(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.g[t],e.h--)))):e&&(e=ha(e))&&(t=e.g[t.toString()],e=-1,t&&(e=na(t,n,r,i)),(n=-1<e?t[e]:null)&&ua(n))}function ua(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Ws])ta(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(ca(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=ha(t))?(ta(n,e),0==n.h&&(n.src=null,t[ra]=null)):Ys(e)}}}function ca(e){return e in ia?ia[e]:ia[e]="on"+e}function da(e,t){if(e.fa)e=!0;else{t=new Gs(t,this);var n=e.listener,r=e.la||e.src;e.ia&&ua(e),e=n.call(r,t)}return e}function ha(e){return(e=e[ra])instanceof ea?e:null}var fa="__closure_events_fn_"+(1e9*Math.random()>>>0);function pa(e){return"function"===typeof e?e:(e[fa]||(e[fa]=function(t){return e.handleEvent(t)}),e[fa])}function ma(){Es.call(this),this.i=new ea(this),this.S=this,this.J=null}function ga(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new Ts(t,e);else if(t instanceof Ts)t.target=t.target||e;else{var i=t;Zs(t=new Ts(r,e),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=t.g=n[o];i=ya(s,r,!0,t)&&i}if(i=ya(s=t.g=e,r,!0,t)&&i,i=ya(s,r,!1,t)&&i,n)for(o=0;o<n.length;o++)i=ya(s=t.g=n[o],r,!1,t)&&i}function ya(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var s=t[o];if(s&&!s.fa&&s.capture==n){var a=s.listener,l=s.la||s.src;s.ia&&ta(e.i,s),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}bs(ma,Es),ma.prototype[Ws]=!0,ma.prototype.removeEventListener=function(e,t,n,r){la(this,e,t,n,r)},ma.prototype.N=function(){if(ma.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Ys(n[r]);delete t.g[e],t.h--}}this.J=null},ma.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ma.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var va=cs.JSON.stringify;function ba(){var e=Ia;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Ea=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new wa),(e=>e.reset()));class wa{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Sa(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function _a(e){cs.setTimeout((()=>{throw e}),0)}let Ta,Ca=!1,Ia=new class{constructor(){this.h=this.g=null}add(e,t){const n=Ea.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},Aa=()=>{const e=cs.Promise.resolve(void 0);Ta=()=>{e.then(xa)}};var xa=()=>{for(var e;e=ba();){try{e.h.call(e.g)}catch(Yv){_a(Yv)}var t=Ea;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Ca=!1};function Na(e,t){ma.call(this),this.h=e||1,this.g=t||cs,this.j=ys(this.qb,this),this.l=Date.now()}function ka(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Oa(e,t,n){if("function"===typeof e)n&&(e=ys(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=ys(e.handleEvent,e)}return 2147483647<Number(t)?-1:cs.setTimeout(e,t||0)}function Ra(e){e.g=Oa((()=>{e.g=null,e.i&&(e.i=!1,Ra(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}bs(Na,ma),(ss=Na.prototype).ga=!1,ss.T=null,ss.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),ga(this,"tick"),this.ga&&(ka(this),this.start()))}},ss.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ss.N=function(){Na.$.N.call(this),ka(this),delete this.g};class Da extends Es{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Ra(this)}N(){super.N(),this.g&&(cs.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Pa(e){Es.call(this),this.h=e,this.g={}}bs(Pa,Es);var Ma=[];function La(e,t,n,r){Array.isArray(n)||(n&&(Ma[0]=n.toString()),n=Ma);for(var i=0;i<n.length;i++){var o=oa(t,n[i],r||e.handleEvent,!1,e.h||e);if(!o)break;e.g[o.key]=o}}function Ua(e){Qs(e.g,(function(e,t){this.g.hasOwnProperty(t)&&ua(e)}),e),e.g={}}function Fa(){this.g=!0}function ja(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return va(n)}catch(Hv){return t}}(e,n)+(r?" "+r:"")}))}Pa.prototype.N=function(){Pa.$.N.call(this),Ua(this)},Pa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Fa.prototype.Ea=function(){this.g=!1},Fa.prototype.info=function(){};var Va={},qa=null;function Ba(){return qa=qa||new ma}function Ha(e){Ts.call(this,Va.Ta,e)}function Ga(e){const t=Ba();ga(t,new Ha(t))}function za(e,t){Ts.call(this,Va.STAT_EVENT,e),this.stat=t}function Wa(e){const t=Ba();ga(t,new za(t,e))}function Ka(e,t){Ts.call(this,Va.Ua,e),this.size=t}function Ja(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return cs.setTimeout((function(){e()}),t)}Va.Ta="serverreachability",bs(Ha,Ts),Va.STAT_EVENT="statevent",bs(za,Ts),Va.Ua="timingevent",bs(Ka,Ts);var Ya={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Qa={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Xa(){}function $a(e){return e.h||(e.h=e.i())}function Za(){}Xa.prototype.h=null;var el,tl={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function nl(){Ts.call(this,"d")}function rl(){Ts.call(this,"c")}function il(){}function ol(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Pa(this),this.P=al,e=Ms?125:void 0,this.V=new Na(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new sl}function sl(){this.i=null,this.g="",this.h=!1}bs(nl,Ts),bs(rl,Ts),bs(il,Xa),il.prototype.g=function(){return new XMLHttpRequest},il.prototype.i=function(){return{}},el=new il;var al=45e3,ll={},ul={};function cl(e,t,n){e.L=1,e.v=Nl(Tl(t)),e.s=n,e.S=!0,dl(e,null)}function dl(e,t){e.G=Date.now(),ml(e),e.A=Tl(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),Bl(n.i,"t",r),e.C=0,n=e.l.J,e.h=new sl,e.g=Bu(e.l,n?t:null,!e.s),0<e.O&&(e.M=new Da(ys(e.Pa,e,e.g),e.O)),La(e.U,e.g,"readystatechange",e.nb),t=e.I?Xs(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),Ga(),function(e,t,n,r,i,o){e.info((function(){if(e.g)if(o)for(var s="",a=o.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var c=u[0];u=u[1];var d=c.split("_");s=2<=d.length&&"type"==d[1]?s+(c+"=")+u+"&":s+(c+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+s}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function hl(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function fl(e,t,n){let r,i=!0;for(;!e.J&&e.C<n.length;){if(r=pl(e,n),r==ul){4==t&&(e.o=4,Wa(14),i=!1),ja(e.j,e.m,null,"[Incomplete Response]");break}if(r==ll){e.o=4,Wa(15),ja(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}ja(e.j,e.m,r,null),El(e,r)}hl(e)&&r!=ul&&r!=ll&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Wa(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Pu(t),t.M=!0,Wa(11))):(ja(e.j,e.m,n,"[Invalid Chunked Response]"),bl(e),vl(e))}function pl(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?ul:(n=Number(t.substring(n,r)),isNaN(n)?ll:(r+=1)+n>t.length?ul:(t=t.slice(r,r+n),e.C=r+n,t))}function ml(e){e.Y=Date.now()+e.P,gl(e,e.P)}function gl(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ja(ys(e.lb,e),t)}function yl(e){e.B&&(cs.clearTimeout(e.B),e.B=null)}function vl(e){0==e.l.H||e.J||Uu(e.l,e)}function bl(e){yl(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,ka(e.V),Ua(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function El(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||Yl(n.i,e)))if(!e.K&&Yl(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch($v){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Lu(n),Iu(n)}Du(n),Wa(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Ja(ys(n.ib,n),6e3));if(1>=Jl(n.i)&&n.oa){try{n.oa()}catch($v){}n.oa=void 0}}else ju(n,11)}else if((e.K||n.g==e)&&Lu(n),!Is(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let u=i[t];if(n.V=u[0],u=u[1],2==n.H)if("c"==u[0]){n.K=u[1],n.pa=u[2];const t=u[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=u[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const c=u[5];null!=c&&"number"===typeof c&&0<c&&(r=1.5*c,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var o=r.i;o.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(Ql(o,o.h),o.h=null))}if(r.F){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,xl(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var s=e;if((r=n).wa=qu(r,r.J?r.pa:null,r.Y),s.K){Xl(r.i,s);var a=s,l=r.L;l&&a.setTimeout(l),a.B&&(yl(a),ml(a)),r.g=s}else Ru(r);0<n.j.length&&xu(n)}else"stop"!=u[0]&&"close"!=u[0]||ju(n,7);else 3==n.H&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?ju(n,7):Cu(n):"noop"!=u[0]&&n.h&&n.h.Aa(u),n.A=0)}Ga()}catch($v){}}function wl(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(ds(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(ds(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(ds(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}(ss=ol.prototype).setTimeout=function(e){this.P=e},ss.nb=function(e){e=e.target;const t=this.M;t&&3==bu(e)?t.l():this.Pa(e)},ss.Pa=function(e){try{if(e==this.g)e:{const c=bu(this.g);var t=this.g.Ia();this.g.da();if(!(3>c)&&(3!=c||Ms||this.g&&(this.h.h||this.g.ja()||Eu(this.g)))){this.J||4!=c||7==t||Ga(),yl(this);var n=this.g.da();this.ca=n;t:if(hl(this)){var r=Eu(this.g);e="";var i=r.length,o=4==bu(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){bl(this),vl(this);var s="";break t}this.h.i=new cs.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:o&&t==i-1});r.splice(0,i),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,o,s){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+s}))}(this.j,this.u,this.A,this.m,this.W,c,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Is(a)){var u=a;break t}}u=null}if(!(n=u)){this.i=!1,this.o=3,Wa(12),bl(this),vl(this);break e}ja(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,El(this,n)}this.S?(fl(this,c,s),Ms&&this.i&&3==c&&(La(this.U,this.V,"tick",this.mb),this.V.start())):(ja(this.j,this.m,s,null),El(this,s)),4==c&&bl(this),this.i&&!this.J&&(4==c?Uu(this.l,this):(this.i=!1,ml(this)))}else(function(e){const t={};e=(e.g&&2<=bu(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(Is(e[r]))continue;var n=Sa(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const o=t[i]||[];t[i]=o,o.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<s.indexOf("Unknown SID")?(this.o=3,Wa(12)):(this.o=0,Wa(13)),bl(this),vl(this)}}}catch(Jv){}},ss.mb=function(){if(this.g){var e=bu(this.g),t=this.g.ja();this.C<t.length&&(yl(this),fl(this,e,t),this.i&&4!=e&&ml(this))}},ss.cancel=function(){this.J=!0,bl(this)},ss.lb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(Ga(),Wa(17)),bl(this),this.o=2,vl(this)):gl(this,this.Y-e)};var Sl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _l(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof _l){this.h=e.h,Cl(this,e.j),this.s=e.s,this.g=e.g,Il(this,e.m),this.l=e.l;var t=e.i,n=new Fl;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Al(this,n),this.o=e.o}else e&&(t=String(e).match(Sl))?(this.h=!1,Cl(this,t[1]||"",!0),this.s=kl(t[2]||""),this.g=kl(t[3]||"",!0),Il(this,t[4]),this.l=kl(t[5]||"",!0),Al(this,t[6]||"",!0),this.o=kl(t[7]||"")):(this.h=!1,this.i=new Fl(null,this.h))}function Tl(e){return new _l(e)}function Cl(e,t,n){e.j=n?kl(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Il(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Al(e,t,n){t instanceof Fl?(e.i=t,function(e,t){t&&!e.j&&(jl(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Vl(this,t),Bl(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Ol(t,Ll)),e.i=new Fl(t,e.h))}function xl(e,t,n){e.i.set(t,n)}function Nl(e){return xl(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function kl(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Ol(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Rl),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Rl(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}_l.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Ol(t,Dl,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Ol(t,Dl,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Ol(n,"/"==n.charAt(0)?Ml:Pl,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Ol(n,Ul)),e.join("")};var Dl=/[#\/\?@]/g,Pl=/[#\?:]/g,Ml=/[#\?]/g,Ll=/[#\?@]/g,Ul=/#/g;function Fl(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function jl(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Vl(e,t){jl(e),t=Hl(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function ql(e,t){return jl(e),t=Hl(e,t),e.g.has(t)}function Bl(e,t,n){Vl(e,t),0<n.length&&(e.i=null,e.g.set(Hl(e,t),Ss(n)),e.h+=n.length)}function Hl(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(ss=Fl.prototype).add=function(e,t){jl(this),this.i=null,e=Hl(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},ss.forEach=function(e,t){jl(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},ss.ta=function(){jl(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},ss.Z=function(e){jl(this);let t=[];if("string"===typeof e)ql(this,e)&&(t=t.concat(this.g.get(Hl(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},ss.set=function(e,t){return jl(this),this.i=null,ql(this,e=Hl(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},ss.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},ss.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const o=encodeURIComponent(String(r)),s=this.Z(r);for(r=0;r<s.length;r++){var i=o;""!==s[r]&&(i+="="+encodeURIComponent(String(s[r]))),e.push(i)}}return this.i=e.join("&")};var Gl=class{constructor(e,t){this.g=e,this.map=t}};function zl(e){this.l=e||Wl,cs.PerformanceNavigationTiming?e=0<(e=cs.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(cs.g&&cs.g.Ka&&cs.g.Ka()&&cs.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Wl=10;function Kl(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Jl(e){return e.h?1:e.g?e.g.size:0}function Yl(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Ql(e,t){e.g?e.g.add(t):e.h=t}function Xl(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function $l(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return Ss(e.i)}zl.prototype.cancel=function(){if(this.i=$l(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var Zl=class{stringify(e){return cs.JSON.stringify(e,void 0)}parse(e){return cs.JSON.parse(e,void 0)}};function eu(){this.g=new Zl}function tu(e,t,n){const r=n||"";try{wl(e,(function(e,n){let i=e;hs(e)&&(i=va(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(qv){throw t.push(r+"type="+encodeURIComponent("_badmap")),qv}}function nu(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(Qv){}}function ru(e){this.l=e.fc||null,this.j=e.ob||!1}function iu(e,t){ma.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=ou,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}bs(ru,Xa),ru.prototype.g=function(){return new iu(this.l,this.j)},ru.prototype.i=function(e){return function(){return e}}({}),bs(iu,ma);var ou=0;function su(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function au(e){e.readyState=4,e.l=null,e.j=null,e.A=null,lu(e)}function lu(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(ss=iu.prototype).open=function(e,t){if(this.readyState!=ou)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,lu(this)},ss.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||cs).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},ss.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,au(this)),this.readyState=ou},ss.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,lu(this)),this.g&&(this.readyState=3,lu(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof cs.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;su(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},ss.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?au(this):lu(this),3==this.readyState&&su(this)}},ss.Za=function(e){this.g&&(this.response=this.responseText=e,au(this))},ss.Ya=function(e){this.g&&(this.response=e,au(this))},ss.ka=function(){this.g&&au(this)},ss.setRequestHeader=function(e,t){this.v.append(e,t)},ss.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},ss.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(iu.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var uu=cs.JSON.parse;function cu(e){ma.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=du,this.L=this.M=!1}bs(cu,ma);var du="",hu=/^https?$/i,fu=["POST","PUT"];function pu(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,mu(e),yu(e)}function mu(e){e.F||(e.F=!0,ga(e,"complete"),ga(e,"error"))}function gu(e){if(e.h&&"undefined"!=typeof us&&(!e.C[1]||4!=bu(e)||2!=e.da()))if(e.v&&4==bu(e))Oa(e.La,0,e);else if(ga(e,"readystatechange"),4==bu(e)){e.h=!1;try{const s=e.da();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===s){var i=String(e.I).match(Sl)[1]||null;!i&&cs.self&&cs.self.location&&(i=cs.self.location.protocol.slice(0,-1)),r=!hu.test(i?i.toLowerCase():"")}n=r}if(n)ga(e,"complete"),ga(e,"success");else{e.m=6;try{var o=2<bu(e)?e.g.statusText:""}catch(Hv){o=""}e.j=o+" ["+e.da()+"]",mu(e)}}finally{yu(e)}}}function yu(e,t){if(e.g){vu(e);const n=e.g,r=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||ga(e,"ready");try{n.onreadystatechange=r}catch(qv){}}}function vu(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(cs.clearTimeout(e.A),e.A=null)}function bu(e){return e.g?e.g.readyState:0}function Eu(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case du:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Cc){return null}}function wu(e){let t="";return Qs(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Su(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=wu(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):xl(e,t,n))}function _u(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Tu(e){this.Ga=0,this.j=[],this.l=new Fa,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=_u("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=_u("baseRetryDelayMs",5e3,e),this.hb=_u("retryDelaySeedMs",1e4,e),this.eb=_u("forwardChannelMaxRetries",2,e),this.xa=_u("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new zl(e&&e.concurrentRequestLimit),this.Ja=new eu,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Cu(e){if(Au(e),3==e.H){var t=e.W++,n=Tl(e.I);if(xl(n,"SID",e.K),xl(n,"RID",t),xl(n,"TYPE","terminate"),ku(e,n),(t=new ol(e,e.l,t)).L=2,t.v=Nl(Tl(n)),n=!1,cs.navigator&&cs.navigator.sendBeacon)try{n=cs.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&cs.Image&&((new Image).src=t.v,n=!0),n||(t.g=Bu(t.l,null),t.g.ha(t.v)),t.G=Date.now(),ml(t)}Vu(e)}function Iu(e){e.g&&(Pu(e),e.g.cancel(),e.g=null)}function Au(e){Iu(e),e.u&&(cs.clearTimeout(e.u),e.u=null),Lu(e),e.i.cancel(),e.m&&("number"===typeof e.m&&cs.clearTimeout(e.m),e.m=null)}function xu(e){if(!Kl(e.i)&&!e.m){e.m=!0;var t=e.Na;Ta||Aa(),Ca||(Ta(),Ca=!0),Ia.add(t,e),e.C=0}}function Nu(e,t){var n;n=t?t.m:e.W++;const r=Tl(e.I);xl(r,"SID",e.K),xl(r,"RID",n),xl(r,"AID",e.V),ku(e,r),e.o&&e.s&&Su(r,e.o,e.s),n=new ol(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Ou(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Ql(e.i,n),cl(n,r,t)}function ku(e,t){e.na&&Qs(e.na,(function(e,n){xl(t,n,e)})),e.h&&wl({},(function(e,n){xl(t,n,e)}))}function Ou(e,t,n){n=Math.min(e.j.length,n);var r=e.h?ys(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let s=0;s<n;s++){let n=i[s].g;const a=i[s].map;if(n-=t,0>n)t=Math.max(0,i[s].g-100),o=!1;else try{tu(a,e,"req"+n+"_")}catch(Lc){r&&r(a)}}if(o){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function Ru(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Ta||Aa(),Ca||(Ta(),Ca=!0),Ia.add(t,e),e.A=0}}function Du(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Ja(ys(e.Ma,e),Fu(e,e.A)),e.A++,!0)}function Pu(e){null!=e.B&&(cs.clearTimeout(e.B),e.B=null)}function Mu(e){e.g=new ol(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Tl(e.wa);xl(t,"RID","rpc"),xl(t,"SID",e.K),xl(t,"AID",e.V),xl(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&xl(t,"TO",e.qa),xl(t,"TYPE","xmlhttp"),ku(e,t),e.o&&e.s&&Su(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=Nl(Tl(t)),n.s=null,n.S=!0,dl(n,e)}function Lu(e){null!=e.v&&(cs.clearTimeout(e.v),e.v=null)}function Uu(e,t){var n=null;if(e.g==t){Lu(e),Pu(e),e.g=null;var r=2}else{if(!Yl(e.i,t))return;n=t.F,Xl(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;ga(r=Ba(),new Ka(r,n)),xu(e)}else Ru(e);else if(3==(i=t.o)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(Jl(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=Ja(ys(e.Na,e,t),Fu(e,e.C)),e.C++,!0))}(e,t)||2==r&&Du(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:ju(e,5);break;case 4:ju(e,10);break;case 3:ju(e,6);break;default:ju(e,2)}}function Fu(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function ju(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=ys(e.pb,e);n||(n=new _l("//www.google.com/images/cleardot.gif"),cs.location&&"http"==cs.location.protocol||Cl(n,"https"),Nl(n)),function(e,t){const n=new Fa;if(cs.Image){const r=new Image;r.onload=vs(nu,n,r,"TestLoadImage: loaded",!0,t),r.onerror=vs(nu,n,r,"TestLoadImage: error",!1,t),r.onabort=vs(nu,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=vs(nu,n,r,"TestLoadImage: timeout",!1,t),cs.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Wa(2);e.H=0,e.h&&e.h.za(t),Vu(e),Au(e)}function Vu(e){if(e.H=0,e.ma=[],e.h){const t=$l(e.i);0==t.length&&0==e.j.length||(_s(e.ma,t),_s(e.ma,e.j),e.i.i.length=0,Ss(e.j),e.j.length=0),e.h.ya()}}function qu(e,t,n){var r=n instanceof _l?Tl(n):new _l(n);if(""!=r.g)t&&(r.g=t+"."+r.g),Il(r,r.m);else{var i=cs.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var o=new _l(null);r&&Cl(o,r),t&&(o.g=t),i&&Il(o,i),n&&(o.l=n),r=o}return n=e.F,t=e.Da,n&&t&&xl(r,n,t),xl(r,"VER",e.ra),ku(e,r),r}function Bu(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new cu(new ru({ob:!0})):new cu(e.va)).Oa(e.J),t}function Hu(){}function Gu(){if(Ds&&!(10<=Number(Hs)))throw Error("Environmental error: no available transport.")}function zu(e,t){ma.call(this),this.g=new Tu(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Is(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Is(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Ju(this)}function Wu(e){nl.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Ku(){rl.call(this),this.status=1}function Ju(e){this.g=e}function Yu(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Qu(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var o=e.g[3],s=t+(o^n&(i^o))+r[0]+3614090360&4294967295;s=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=n+(s<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[3]+3250441966&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[4]+4118548399&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[7]+4249261313&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[8]+1770035416&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[11]+2304563134&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[12]+1804603682&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[15]+1236535329&4294967295)<<22&4294967295|s>>>10))+((s=t+(i^o&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[11]+643717713&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[0]+3921069994&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[15]+3634488961&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[4]+3889429448&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[3]+4107603335&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[8]+1163531501&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[7]+1735328473&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[12]+2368359562&4294967295)<<20&4294967295|s>>>12))+((s=t+(n^i^o)+r[5]+4294588738&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[14]+4259657740&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[1]+2763975236&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[10]+3200236656&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[13]+681279174&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[6]+76029189&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[9]+3654602809&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[15]+530742520&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[2]+3299628645&4294967295)<<23&4294967295|s>>>9))+((s=t+(i^(n|~o))+r[0]+4096336452&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[14]+2878612391&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|s>>>11))+((s=t+(i^(n|~o))+r[12]+1700485571&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[10]+4293915773&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|s>>>11))+((s=t+(i^(n|~o))+r[8]+1873313359&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[6]+2734768916&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|s>>>11))+((o=(t=n+((s=t+(i^(n|~o))+r[4]+4149444226&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|s>>>22))^((i=o+((s=i+(t^(o|~n))+r[2]+718787259&4294967295)<<15&4294967295|s>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+o&4294967295}function Xu(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var o=0|e[i];r&&o==t||(n[i]=o,r=!1)}this.g=n}(ss=cu.prototype).Oa=function(e){this.M=e},ss.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():el.g(),this.C=this.u?$a(this.u):$a(el),this.g.onreadystatechange=ys(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(Qv){return void pu(this,Qv)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=cs.FormData&&e instanceof cs.FormData,!(0<=ws(fu,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,s]of n)this.g.setRequestHeader(o,s);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{vu(this),0<this.B&&((this.L=function(e){return Ds&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ys(this.ua,this)):this.A=Oa(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(Qv){pu(this,Qv)}},ss.ua=function(){"undefined"!=typeof us&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ga(this,"timeout"),this.abort(8))},ss.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,ga(this,"complete"),ga(this,"abort"),yu(this))},ss.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),yu(this,!0)),cu.$.N.call(this)},ss.La=function(){this.s||(this.G||this.v||this.l?gu(this):this.kb())},ss.kb=function(){gu(this)},ss.isActive=function(){return!!this.g},ss.da=function(){try{return 2<bu(this)?this.g.status:-1}catch(Wv){return-1}},ss.ja=function(){try{return this.g?this.g.responseText:""}catch(Wv){return""}},ss.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),uu(t)}},ss.Ia=function(){return this.m},ss.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(ss=Tu.prototype).ra=8,ss.H=1,ss.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new ol(this,this.l,e);let o=this.s;if(this.U&&(o?(o=Xs(o),Zs(o,this.U)):o=this.U),null!==this.o||this.O||(i.I=o,o=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Ou(this,i,t),xl(n=Tl(this.I),"RID",e),xl(n,"CVER",22),this.F&&xl(n,"X-HTTP-Session-Id",this.F),ku(this,n),o&&(this.O?t="headers="+encodeURIComponent(String(wu(o)))+"&"+t:this.o&&Su(n,this.o,o)),Ql(this.i,i),this.bb&&xl(n,"TYPE","init"),this.P?(xl(n,"$req",t),xl(n,"SID","null"),i.aa=!0,cl(i,n,null)):cl(i,n,t),this.H=2}}else 3==this.H&&(e?Nu(this,e):0==this.j.length||Kl(this.i)||Nu(this))},ss.Ma=function(){if(this.u=null,Mu(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Ja(ys(this.jb,this),e)}},ss.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Wa(10),Iu(this),Mu(this))},ss.ib=function(){null!=this.v&&(this.v=null,Iu(this),Du(this),Wa(19))},ss.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Wa(2)):(this.l.info("Failed to ping google.com"),Wa(1))},ss.isActive=function(){return!!this.h&&this.h.isActive(this)},(ss=Hu.prototype).Ba=function(){},ss.Aa=function(){},ss.za=function(){},ss.ya=function(){},ss.isActive=function(){return!0},ss.Va=function(){},Gu.prototype.g=function(e,t){return new zu(e,t)},bs(zu,ma),zu.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Wa(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=qu(e,null,e.Y),xu(e)},zu.prototype.close=function(){Cu(this.g)},zu.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=va(e),e=n);t.j.push(new Gl(t.fb++,e)),3==t.H&&xu(t)},zu.prototype.N=function(){this.g.h=null,delete this.j,Cu(this.g),delete this.g,zu.$.N.call(this)},bs(Wu,nl),bs(Ku,rl),bs(Ju,Hu),Ju.prototype.Ba=function(){ga(this.g,"a")},Ju.prototype.Aa=function(e){ga(this.g,new Wu(e))},Ju.prototype.za=function(e){ga(this.g,new Ku)},Ju.prototype.ya=function(){ga(this.g,"b")},bs(Yu,(function(){this.blockSize=-1})),Yu.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Yu.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,o=0;o<t;){if(0==i)for(;o<=n;)Qu(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(r[i++]=e.charCodeAt(o++),i==this.blockSize){Qu(this,r),i=0;break}}else for(;o<t;)if(r[i++]=e[o++],i==this.blockSize){Qu(this,r),i=0;break}}this.h=i,this.i+=t},Yu.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var $u={};function Zu(e){return-128<=e&&128>e?function(e,t){var n=$u;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new Xu([0|e],0>e?-1:0)})):new Xu([0|e],0>e?-1:0)}function ec(e){if(isNaN(e)||!isFinite(e))return nc;if(0>e)return ac(ec(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=tc;return new Xu(t,0)}var tc=4294967296,nc=Zu(0),rc=Zu(1),ic=Zu(16777216);function oc(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function sc(e){return-1==e.h}function ac(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Xu(n,~e.h).add(rc)}function lc(e,t){return e.add(ac(t))}function uc(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function cc(e,t){this.g=e,this.h=t}function dc(e,t){if(oc(t))throw Error("division by zero");if(oc(e))return new cc(nc,nc);if(sc(e))return t=dc(ac(e),t),new cc(ac(t.g),ac(t.h));if(sc(t))return t=dc(e,ac(t)),new cc(ac(t.g),t.h);if(30<e.g.length){if(sc(e)||sc(t))throw Error("slowDivide_ only works with positive integers.");for(var n=rc,r=t;0>=r.X(e);)n=hc(n),r=hc(r);var i=fc(n,1),o=fc(r,1);for(r=fc(r,2),n=fc(n,2);!oc(r);){var s=o.add(r);0>=s.X(e)&&(i=i.add(n),o=s),r=fc(r,1),n=fc(n,1)}return t=lc(e,i.R(t)),new cc(i,t)}for(i=nc;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),s=(o=ec(n)).R(t);sc(s)||0<s.X(e);)s=(o=ec(n-=r)).R(t);oc(o)&&(o=rc),i=i.add(o),e=lc(e,s)}return new cc(i,e)}function hc(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Xu(n,e.h)}function fc(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],o=0;o<r;o++)i[o]=0<t?e.D(o+n)>>>t|e.D(o+n+1)<<32-t:e.D(o+n);return new Xu(i,e.h)}(ss=Xu.prototype).ea=function(){if(sc(this))return-ac(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:tc+r)*t,t*=tc}return e},ss.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(oc(this))return"0";if(sc(this))return"-"+ac(this).toString(e);for(var t=ec(Math.pow(e,6)),n=this,r="";;){var i=dc(n,t).g,o=((0<(n=lc(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(oc(n=i))return o+r;for(;6>o.length;)o="0"+o;r=o+r}},ss.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},ss.X=function(e){return sc(e=lc(this,e))?-1:oc(e)?0:1},ss.abs=function(){return sc(this)?ac(this):this},ss.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var o=r+(65535&this.D(i))+(65535&e.D(i)),s=(o>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=s>>>16,o&=65535,s&=65535,n[i]=s<<16|o}return new Xu(n,-2147483648&n[n.length-1]?-1:0)},ss.R=function(e){if(oc(this)||oc(e))return nc;if(sc(this))return sc(e)?ac(this).R(ac(e)):ac(ac(this).R(e));if(sc(e))return ac(this.R(ac(e)));if(0>this.X(ic)&&0>e.X(ic))return ec(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var o=this.D(r)>>>16,s=65535&this.D(r),a=e.D(i)>>>16,l=65535&e.D(i);n[2*r+2*i]+=s*l,uc(n,2*r+2*i),n[2*r+2*i+1]+=o*l,uc(n,2*r+2*i+1),n[2*r+2*i+1]+=s*a,uc(n,2*r+2*i+1),n[2*r+2*i+2]+=o*a,uc(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Xu(n,0)},ss.gb=function(e){return dc(this,e).h},ss.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Xu(n,this.h&e.h)},ss.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Xu(n,this.h|e.h)},ss.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Xu(n,this.h^e.h)},Gu.prototype.createWebChannel=Gu.prototype.g,zu.prototype.send=zu.prototype.u,zu.prototype.open=zu.prototype.m,zu.prototype.close=zu.prototype.close,Ya.NO_ERROR=0,Ya.TIMEOUT=8,Ya.HTTP_ERROR=6,Qa.COMPLETE="complete",Za.EventType=tl,tl.OPEN="a",tl.CLOSE="b",tl.ERROR="c",tl.MESSAGE="d",ma.prototype.listen=ma.prototype.O,cu.prototype.listenOnce=cu.prototype.P,cu.prototype.getLastError=cu.prototype.Sa,cu.prototype.getLastErrorCode=cu.prototype.Ia,cu.prototype.getStatus=cu.prototype.da,cu.prototype.getResponseJson=cu.prototype.Wa,cu.prototype.getResponseText=cu.prototype.ja,cu.prototype.send=cu.prototype.ha,cu.prototype.setWithCredentials=cu.prototype.Oa,Yu.prototype.digest=Yu.prototype.l,Yu.prototype.reset=Yu.prototype.reset,Yu.prototype.update=Yu.prototype.j,Xu.prototype.add=Xu.prototype.add,Xu.prototype.multiply=Xu.prototype.R,Xu.prototype.modulo=Xu.prototype.gb,Xu.prototype.compare=Xu.prototype.X,Xu.prototype.toNumber=Xu.prototype.ea,Xu.prototype.toString=Xu.prototype.toString,Xu.prototype.getBits=Xu.prototype.D,Xu.fromNumber=ec,Xu.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return ac(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=ec(Math.pow(n,8)),i=nc,o=0;o<t.length;o+=8){var s=Math.min(8,t.length-o),a=parseInt(t.substring(o,o+s),n);8>s?(s=ec(Math.pow(n,s)),i=i.R(s).add(ec(a))):i=(i=i.R(r)).add(ec(a))}return i};var pc=ls.createWebChannelTransport=function(){return new Gu},mc=ls.getStatEventTarget=function(){return Ba()},gc=ls.ErrorCode=Ya,yc=ls.EventType=Qa,vc=ls.Event=Va,bc=ls.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Ec=ls.FetchXmlHttpFactory=ru,wc=ls.WebChannel=Za,Sc=ls.XhrIo=cu,_c=ls.Md5=Yu,Tc=ls.Integer=Xu;const Cc="@firebase/firestore";class Ic{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ic.UNAUTHENTICATED=new Ic(null),Ic.GOOGLE_CREDENTIALS=new Ic("google-credentials-uid"),Ic.FIRST_PARTY=new Ic("first-party-uid"),Ic.MOCK_USER=new Ic("mock-user");let Ac="9.23.0";const xc=new class{constructor(e){this.name=e,this._logLevel=rs,this._logHandler=os,this._userLogHandler=null,es.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ts))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?ns[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ts.DEBUG,...t),this._logHandler(this,ts.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ts.VERBOSE,...t),this._logHandler(this,ts.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ts.INFO,...t),this._logHandler(this,ts.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ts.WARN,...t),this._logHandler(this,ts.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ts.ERROR,...t),this._logHandler(this,ts.ERROR,...t)}}("@firebase/firestore");function Nc(){return xc.logLevel}function kc(e){if(xc.logLevel<=ts.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Dc);xc.debug("Firestore (".concat(Ac,"): ").concat(e),...i)}}function Oc(e){if(xc.logLevel<=ts.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Dc);xc.error("Firestore (".concat(Ac,"): ").concat(e),...i)}}function Rc(e){if(xc.logLevel<=ts.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Dc);xc.warn("Firestore (".concat(Ac,"): ").concat(e),...i)}}function Dc(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Pc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(Ac,") INTERNAL ASSERTION FAILED: ")+e;throw Oc(t),new Error(t)}function Mc(e,t){e||Pc()}function Lc(e,t){return e}const Uc={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Fc extends Yo{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class jc{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Vc{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class qc{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Ic.UNAUTHENTICATED)))}shutdown(){}}class Bc{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Hc{constructor(e){this.t=e,this.currentUser=Ic.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new jc;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new jc,e.enqueueRetryable((()=>r(this.currentUser)))};const o=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},s=e=>{kc("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit((e=>s(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?s(e):(kc("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new jc)}}),0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(kc("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Mc("string"==typeof t.accessToken),new Vc(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Mc(null===e||"string"==typeof e),new Ic(e)}}class Gc{constructor(e,t,n){this.h=e,this.l=t,this.m=n,this.type="FirstParty",this.user=Ic.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class zc{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new Gc(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable((()=>t(Ic.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Wc{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Kc{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const n=e=>{null!=e.error&&kc("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.T;return this.T=e.token,kc("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{kc("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.I.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.I.getImmediate({optional:!0});e?r(e):kc("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Mc("string"==typeof e.token),this.T=e.token,new Wc(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Jc(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Yc{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=Jc(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function Qc(e,t){return e<t?-1:e>t?1:0}function Xc(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}class $c{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Fc(Uc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Fc(Uc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Fc(Uc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Fc(Uc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return $c.fromMillis(Date.now())}static fromDate(e){return $c.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new $c(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Qc(this.nanoseconds,e.nanoseconds):Qc(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Zc{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Zc(e)}static min(){return new Zc(new $c(0,0))}static max(){return new Zc(new $c(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ed{constructor(e,t,n){void 0===t?t=0:t>e.length&&Pc(),void 0===n?n=e.length-t:n>e.length-t&&Pc(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===ed.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ed?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class td extends ed{construct(e,t,n){return new td(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Fc(Uc.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new td(e)}static emptyPath(){return new td([])}}const nd=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rd extends ed{construct(e,t,n){return new rd(e,t,n)}static isValidIdentifier(e){return nd.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rd.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new rd(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Fc(Uc.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let o=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Fc(Uc.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Fc(Uc.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(o=!o,r++):"."!==t||o?(n+=t,r++):(i(),r++)}if(i(),o)throw new Fc(Uc.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rd(t)}static emptyPath(){return new rd([])}}class id{constructor(e){this.path=e}static fromPath(e){return new id(td.fromString(e))}static fromName(e){return new id(td.fromString(e).popFirst(5))}static empty(){return new id(td.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===td.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return td.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new id(new td(e.slice()))}}class od{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}od.UNKNOWN_ID=-1;function sd(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Zc.fromTimestamp(1e9===r?new $c(n+1,0):new $c(n,r));return new ld(i,id.empty(),t)}function ad(e){return new ld(e.readTime,e.key,-1)}class ld{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new ld(Zc.min(),id.empty(),-1)}static max(){return new ld(Zc.max(),id.empty(),-1)}}function ud(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=id.comparator(e.documentKey,t.documentKey),0!==n?n:Qc(e.largestBatchId,t.largestBatchId))}const cd="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class dd{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function hd(e){if(e.code!==Uc.FAILED_PRECONDITION||e.message!==cd)throw e;kc("LocalStore","Unexpectedly lost primary lease")}class fd{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Pc(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new fd(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof fd?t:fd.resolve(t)}catch(e){return fd.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):fd.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):fd.reject(t)}static resolve(e){return new fd(((t,n)=>{t(e)}))}static reject(e){return new fd(((t,n)=>{n(e)}))}static waitFor(e){return new fd(((t,n)=>{let r=0,i=0,o=!1;e.forEach((e=>{++r,e.next((()=>{++i,o&&i===r&&t()}),(e=>n(e)))})),o=!0,i===r&&t()}))}static or(e){let t=fd.resolve(!1);for(const n of e)t=t.next((e=>e?fd.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new fd(((n,r)=>{const i=e.length,o=new Array(i);let s=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next((e=>{o[l]=e,++s,s===i&&n(o)}),(e=>r(e)))}}))}static doWhile(e,t){return new fd(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}function pd(e){return"IndexedDbTransactionError"===e.name}class md{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ot(e),this.ut=e=>t.writeSequenceNumber(e))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}function gd(e){return null==e}function yd(e){return 0===e&&1/e==-1/0}function vd(e){return"number"==typeof e&&Number.isInteger(e)&&!yd(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}md.ct=-1;const bd=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Ed=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],wd=Ed;function Sd(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function _d(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Td(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Cd{constructor(e,t){this.comparator=e,this.root=t||Ad.EMPTY}insert(e,t){return new Cd(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ad.BLACK,null,null))}remove(e){return new Cd(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ad.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Id(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Id(this.root,e,this.comparator,!1)}getReverseIterator(){return new Id(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Id(this.root,e,this.comparator,!0)}}class Id{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ad{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Ad.RED,this.left=null!=r?r:Ad.EMPTY,this.right=null!=i?i:Ad.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Ad(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Ad.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Ad.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ad.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ad.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Pc();if(this.right.isRed())throw Pc();const e=this.left.check();if(e!==this.right.check())throw Pc();return e+(this.isRed()?0:1)}}Ad.EMPTY=null,Ad.RED=!0,Ad.BLACK=!1,Ad.EMPTY=new class{constructor(){this.size=0}get key(){throw Pc()}get value(){throw Pc()}get color(){throw Pc()}get left(){throw Pc()}get right(){throw Pc()}copy(e,t,n,r,i){return this}insert(e,t,n){return new Ad(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class xd{constructor(e){this.comparator=e,this.data=new Cd(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Nd(this.data.getIterator())}getIteratorFrom(e){return new Nd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof xd))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new xd(this.comparator);return t.data=e,t}}class Nd{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class kd{constructor(e){this.fields=e,e.sort(rd.comparator)}static empty(){return new kd([])}unionWith(e){let t=new xd(rd.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new kd(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Xc(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class Od extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Rd{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Od("Invalid base64 string: "+e):e}}(e);return new Rd(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Rd(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Qc(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Rd.EMPTY_BYTE_STRING=new Rd("");const Dd=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Pd(e){if(Mc(!!e),"string"==typeof e){let t=0;const n=Dd.exec(e);if(Mc(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Md(e.seconds),nanos:Md(e.nanos)}}function Md(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Ld(e){return"string"==typeof e?Rd.fromBase64String(e):Rd.fromUint8Array(e)}function Ud(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Fd(e){const t=e.mapValue.fields.__previous_value__;return Ud(t)?Fd(t):t}function jd(e){const t=Pd(e.mapValue.fields.__local_write_time__.timestampValue);return new $c(t.seconds,t.nanos)}class Vd{constructor(e,t,n,r,i,o,s,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.longPollingOptions=a,this.useFetchStreams=l}}class qd{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new qd("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof qd&&e.projectId===this.projectId&&e.database===this.database}}const Bd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Hd(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Ud(e)?4:rh(e)?9007199254740991:10:Pc()}function Gd(e,t){if(e===t)return!0;const n=Hd(e);if(n!==Hd(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return jd(e).isEqual(jd(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Pd(e.timestampValue),r=Pd(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Ld(e.bytesValue).isEqual(Ld(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Md(e.geoPointValue.latitude)===Md(t.geoPointValue.latitude)&&Md(e.geoPointValue.longitude)===Md(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Md(e.integerValue)===Md(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Md(e.doubleValue),r=Md(t.doubleValue);return n===r?yd(n)===yd(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Xc(e.arrayValue.values||[],t.arrayValue.values||[],Gd);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Sd(n)!==Sd(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Gd(n[i],r[i])))return!1;return!0}(e,t);default:return Pc()}}function zd(e,t){return void 0!==(e.values||[]).find((e=>Gd(e,t)))}function Wd(e,t){if(e===t)return 0;const n=Hd(e),r=Hd(t);if(n!==r)return Qc(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Qc(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Md(e.integerValue||e.doubleValue),r=Md(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Kd(e.timestampValue,t.timestampValue);case 4:return Kd(jd(e),jd(t));case 5:return Qc(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Ld(e),r=Ld(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Qc(n[i],r[i]);if(0!==e)return e}return Qc(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Qc(Md(e.latitude),Md(t.latitude));return 0!==n?n:Qc(Md(e.longitude),Md(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Wd(n[i],r[i]);if(e)return e}return Qc(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Bd.mapValue&&t===Bd.mapValue)return 0;if(e===Bd.mapValue)return 1;if(t===Bd.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(let s=0;s<r.length&&s<o.length;++s){const e=Qc(r[s],o[s]);if(0!==e)return e;const t=Wd(n[r[s]],i[o[s]]);if(0!==t)return t}return Qc(r.length,o.length)}(e.mapValue,t.mapValue);default:throw Pc()}}function Kd(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Qc(e,t);const n=Pd(e),r=Pd(t),i=Qc(n.seconds,r.seconds);return 0!==i?i:Qc(n.nanos,r.nanos)}function Jd(e){return Yd(e)}function Yd(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Pd(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Ld(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,id.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Yd(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(Yd(e.fields[i]));return n+"}"}(e.mapValue):Pc();var t,n}function Qd(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Xd(e){return!!e&&"integerValue"in e}function $d(e){return!!e&&"arrayValue"in e}function Zd(e){return!!e&&"nullValue"in e}function eh(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function th(e){return!!e&&"mapValue"in e}function nh(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return _d(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=nh(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=nh(e.arrayValue.values[n]);return t}return Object.assign({},e)}function rh(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class ih{constructor(e){this.value=e}static empty(){return new ih({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!th(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=nh(t)}setAll(e){let t=rd.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=nh(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());th(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Gd(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];th(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){_d(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new ih(nh(this.value))}}function oh(e){const t=[];return _d(e.fields,((e,n)=>{const r=new rd([e]);if(th(n)){const e=oh(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new kd(t)}class sh{constructor(e,t,n,r,i,o,s){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=o,this.documentState=s}static newInvalidDocument(e){return new sh(e,0,Zc.min(),Zc.min(),Zc.min(),ih.empty(),0)}static newFoundDocument(e,t,n,r){return new sh(e,1,t,Zc.min(),n,r,0)}static newNoDocument(e,t){return new sh(e,2,t,Zc.min(),Zc.min(),ih.empty(),0)}static newUnknownDocument(e,t){return new sh(e,3,t,Zc.min(),Zc.min(),ih.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Zc.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ih.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ih.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Zc.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof sh&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new sh(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class ah{constructor(e,t){this.position=e,this.inclusive=t}}function lh(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const o=t[i],s=e.position[i];if(r=o.field.isKeyField()?id.comparator(id.fromName(s.referenceValue),n.key):Wd(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function uh(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Gd(e.position[n],t.position[n]))return!1;return!0}class ch{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function dh(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class hh{}class fh extends hh{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new wh(e,t,n):"array-contains"===t?new Ch(e,n):"in"===t?new Ih(e,n):"not-in"===t?new Ah(e,n):"array-contains-any"===t?new xh(e,n):new fh(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Sh(e,n):new _h(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Wd(t,this.value)):null!==t&&Hd(this.value)===Hd(t)&&this.matchesComparison(Wd(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Pc()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class ph extends hh{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new ph(e,t)}matches(e){return mh(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft((e=>e.isInequality()));return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function mh(e){return"and"===e.op}function gh(e){return yh(e)&&mh(e)}function yh(e){for(const t of e.filters)if(t instanceof ph)return!1;return!0}function vh(e){if(e instanceof fh)return e.field.canonicalString()+e.op.toString()+Jd(e.value);if(gh(e))return e.filters.map((e=>vh(e))).join(",");{const t=e.filters.map((e=>vh(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function bh(e,t){return e instanceof fh?function(e,t){return t instanceof fh&&e.op===t.op&&e.field.isEqual(t.field)&&Gd(e.value,t.value)}(e,t):e instanceof ph?function(e,t){return t instanceof ph&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&bh(n,t.filters[r])),!0)}(e,t):void Pc()}function Eh(e){return e instanceof fh?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Jd(e.value))}(e):e instanceof ph?function(e){return e.op.toString()+" {"+e.getFilters().map(Eh).join(" ,")+"}"}(e):"Filter"}class wh extends fh{constructor(e,t,n){super(e,t,n),this.key=id.fromName(n.referenceValue)}matches(e){const t=id.comparator(e.key,this.key);return this.matchesComparison(t)}}class Sh extends fh{constructor(e,t){super(e,"in",t),this.keys=Th("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class _h extends fh{constructor(e,t){super(e,"not-in",t),this.keys=Th("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Th(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>id.fromName(e.referenceValue)))}class Ch extends fh{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return $d(t)&&zd(t.arrayValue,this.value)}}class Ih extends fh{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&zd(this.value.arrayValue,t)}}class Ah extends fh{constructor(e,t){super(e,"not-in",t)}matches(e){if(zd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!zd(this.value.arrayValue,t)}}class xh extends fh{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!$d(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>zd(this.value.arrayValue,e)))}}class Nh{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.dt=null}}function kh(e){return new Nh(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Oh(e){const t=Lc(e);if(null===t.dt){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>vh(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),gd(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Jd(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Jd(e))).join(",")),t.dt=e}return t.dt}function Rh(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!dh(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!bh(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!uh(e.startAt,t.startAt)&&uh(e.endAt,t.endAt)}function Dh(e){return id.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Ph{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.wt=null,this._t=null,this.startAt,this.endAt}}function Mh(e,t,n,r,i,o,s,a){return new Ph(e,t,n,r,i,o,s,a)}function Lh(e){return new Ph(e)}function Uh(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Fh(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function jh(e){for(const t of e.filters){const e=t.getFirstInequalityField();if(null!==e)return e}return null}function Vh(e){return null!==e.collectionGroup}function qh(e){const t=Lc(e);if(null===t.wt){t.wt=[];const e=jh(t),n=Fh(t);if(null!==e&&null===n)e.isKeyField()||t.wt.push(new ch(e)),t.wt.push(new ch(rd.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.wt.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new ch(rd.keyField(),e))}}}return t.wt}function Bh(e){const t=Lc(e);if(!t._t)if("F"===t.limitType)t._t=kh(t.path,t.collectionGroup,qh(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const i of qh(t)){const t="desc"===i.dir?"asc":"desc";e.push(new ch(i.field,t))}const n=t.endAt?new ah(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ah(t.startAt.position,t.startAt.inclusive):null;t._t=kh(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}return t._t}function Hh(e,t){t.getFirstInequalityField(),jh(e);const n=e.filters.concat([t]);return new Ph(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Gh(e,t,n){return new Ph(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function zh(e,t){return Rh(Bh(e),Bh(t))&&e.limitType===t.limitType}function Wh(e){return"".concat(Oh(Bh(e)),"|lt:").concat(e.limitType)}function Kh(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>Eh(e))).join(", "),"]")),gd(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Jd(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Jd(e))).join(",")),"Target(".concat(t,")")}(Bh(e)),"; limitType=").concat(e.limitType,")")}function Jh(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):id.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of qh(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=lh(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,qh(e),t))&&!(e.endAt&&!function(e,t,n){const r=lh(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,qh(e),t))}(e,t)}function Yh(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Qh(e){return(t,n)=>{let r=!1;for(const i of qh(e)){const e=Xh(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Xh(e,t,n){const r=e.field.isKeyField()?id.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Wd(r,i):Pc()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Pc()}}class $h{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){_d(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return Td(this.inner)}size(){return this.innerSize}}const Zh=new Cd(id.comparator);function ef(){return Zh}const tf=new Cd(id.comparator);function nf(){let e=tf;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function rf(e){let t=tf;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function of(){return af()}function sf(){return af()}function af(){return new $h((e=>e.toString()),((e,t)=>e.isEqual(t)))}const lf=new Cd(id.comparator),uf=new xd(id.comparator);function cf(){let e=uf;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const df=new xd(Qc);function hf(){return df}function ff(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yd(t)?"-0":t}}function pf(e){return{integerValue:""+e}}function mf(e,t){return vd(t)?pf(t):ff(e,t)}class gf{constructor(){this._=void 0}}function yf(e,t,n){return e instanceof Ef?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Ud(t)&&(t=Fd(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof wf?Sf(e,t):e instanceof _f?Tf(e,t):function(e,t){const n=bf(e,t),r=If(n)+If(e.gt);return Xd(n)&&Xd(e.gt)?pf(r):ff(e.serializer,r)}(e,t)}function vf(e,t,n){return e instanceof wf?Sf(e,t):e instanceof _f?Tf(e,t):n}function bf(e,t){return e instanceof Cf?Xd(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}class Ef extends gf{}class wf extends gf{constructor(e){super(),this.elements=e}}function Sf(e,t){const n=Af(t);for(const r of e.elements)n.some((e=>Gd(e,r)))||n.push(r);return{arrayValue:{values:n}}}class _f extends gf{constructor(e){super(),this.elements=e}}function Tf(e,t){let n=Af(t);for(const r of e.elements)n=n.filter((e=>!Gd(e,r)));return{arrayValue:{values:n}}}class Cf extends gf{constructor(e,t){super(),this.serializer=e,this.gt=t}}function If(e){return Md(e.integerValue||e.doubleValue)}function Af(e){return $d(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class xf{constructor(e,t){this.field=e,this.transform=t}}class Nf{constructor(e,t){this.version=e,this.transformResults=t}}class kf{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new kf}static exists(e){return new kf(void 0,e)}static updateTime(e){return new kf(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Of(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Rf{}function Df(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Hf(e.key,kf.none()):new Ff(e.key,e.data,kf.none());{const n=e.data,r=ih.empty();let i=new xd(rd.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new jf(e.key,r,new kd(i.toArray()),kf.none())}}function Pf(e,t,n){e instanceof Ff?function(e,t,n){const r=e.value.clone(),i=qf(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof jf?function(e,t,n){if(!Of(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=qf(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Vf(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Mf(e,t,n,r){return e instanceof Ff?function(e,t,n,r){if(!Of(e.precondition,t))return n;const i=e.value.clone(),o=Bf(e.fieldTransforms,r,t);return i.setAll(o),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof jf?function(e,t,n,r){if(!Of(e.precondition,t))return n;const i=Bf(e.fieldTransforms,r,t),o=t.data;return o.setAll(Vf(e)),o.setAll(i),t.convertToFoundDocument(t.version,o).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return Of(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Lf(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=bf(r.transform,e||null);null!=i&&(null===n&&(n=ih.empty()),n.set(r.field,i))}return n||null}function Uf(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Xc(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof wf&&t instanceof wf||e instanceof _f&&t instanceof _f?Xc(e.elements,t.elements,Gd):e instanceof Cf&&t instanceof Cf?Gd(e.gt,t.gt):e instanceof Ef&&t instanceof Ef}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Ff extends Rf{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class jf extends Rf{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Vf(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function qf(e,t,n){const r=new Map;Mc(e.length===n.length);for(let i=0;i<n.length;i++){const o=e[i],s=o.transform,a=t.data.field(o.field);r.set(o.field,vf(s,a,n[i]))}return r}function Bf(e,t,n){const r=new Map;for(const i of e){const e=i.transform,o=n.data.field(i.field);r.set(i.field,yf(e,o,t))}return r}class Hf extends Rf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Gf extends Rf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class zf{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Pf(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Mf(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Mf(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=sf();return this.mutations.forEach((r=>{const i=e.get(r.key),o=i.overlayedDocument;let s=this.applyToLocalView(o,i.mutatedFields);s=t.has(r.key)?null:s;const a=Df(o,s);null!==a&&n.set(r.key,a),o.isValidDocument()||o.convertToNoDocument(Zc.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),cf())}isEqual(e){return this.batchId===e.batchId&&Xc(this.mutations,e.mutations,((e,t)=>Uf(e,t)))&&Xc(this.baseMutations,e.baseMutations,((e,t)=>Uf(e,t)))}}class Wf{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Mc(e.mutations.length===n.length);let r=lf;const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,n[o].version);return new Wf(e,t,n,r)}}class Kf{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Jf{constructor(e,t){this.count=e,this.unchangedNames=t}}var Yf,Qf;function Xf(e){switch(e){default:return Pc();case Uc.CANCELLED:case Uc.UNKNOWN:case Uc.DEADLINE_EXCEEDED:case Uc.RESOURCE_EXHAUSTED:case Uc.INTERNAL:case Uc.UNAVAILABLE:case Uc.UNAUTHENTICATED:return!1;case Uc.INVALID_ARGUMENT:case Uc.NOT_FOUND:case Uc.ALREADY_EXISTS:case Uc.PERMISSION_DENIED:case Uc.FAILED_PRECONDITION:case Uc.ABORTED:case Uc.OUT_OF_RANGE:case Uc.UNIMPLEMENTED:case Uc.DATA_LOSS:return!0}}function $f(e){if(void 0===e)return Oc("GRPC error has no .code"),Uc.UNKNOWN;switch(e){case Yf.OK:return Uc.OK;case Yf.CANCELLED:return Uc.CANCELLED;case Yf.UNKNOWN:return Uc.UNKNOWN;case Yf.DEADLINE_EXCEEDED:return Uc.DEADLINE_EXCEEDED;case Yf.RESOURCE_EXHAUSTED:return Uc.RESOURCE_EXHAUSTED;case Yf.INTERNAL:return Uc.INTERNAL;case Yf.UNAVAILABLE:return Uc.UNAVAILABLE;case Yf.UNAUTHENTICATED:return Uc.UNAUTHENTICATED;case Yf.INVALID_ARGUMENT:return Uc.INVALID_ARGUMENT;case Yf.NOT_FOUND:return Uc.NOT_FOUND;case Yf.ALREADY_EXISTS:return Uc.ALREADY_EXISTS;case Yf.PERMISSION_DENIED:return Uc.PERMISSION_DENIED;case Yf.FAILED_PRECONDITION:return Uc.FAILED_PRECONDITION;case Yf.ABORTED:return Uc.ABORTED;case Yf.OUT_OF_RANGE:return Uc.OUT_OF_RANGE;case Yf.UNIMPLEMENTED:return Uc.UNIMPLEMENTED;case Yf.DATA_LOSS:return Uc.DATA_LOSS;default:return Pc()}}(Qf=Yf||(Yf={}))[Qf.OK=0]="OK",Qf[Qf.CANCELLED=1]="CANCELLED",Qf[Qf.UNKNOWN=2]="UNKNOWN",Qf[Qf.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qf[Qf.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qf[Qf.NOT_FOUND=5]="NOT_FOUND",Qf[Qf.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qf[Qf.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qf[Qf.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qf[Qf.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qf[Qf.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qf[Qf.ABORTED=10]="ABORTED",Qf[Qf.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qf[Qf.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qf[Qf.INTERNAL=13]="INTERNAL",Qf[Qf.UNAVAILABLE=14]="UNAVAILABLE",Qf[Qf.DATA_LOSS=15]="DATA_LOSS";class Zf{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return ep}static getOrCreateInstance(){return null===ep&&(ep=new Zf),ep}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach((t=>t(e)))}}let ep=null;function tp(){return new TextEncoder}const np=new Tc([4294967295,4294967295],0);function rp(e){const t=tp().encode(e),n=new _c;return n.update(t),new Uint8Array(n.digest())}function ip(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new Tc([n,r],0),new Tc([i,o],0)]}class op{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new sp("Invalid padding: ".concat(t));if(n<0)throw new sp("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new sp("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new sp("Invalid padding when bitmap length is 0: ".concat(t));this.It=8*e.length-t,this.Tt=Tc.fromNumber(this.It)}Et(e,t,n){let r=e.add(t.multiply(Tc.fromNumber(n)));return 1===r.compare(np)&&(r=new Tc([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=rp(e),[n,r]=ip(t);for(let i=0;i<this.hashCount;i++){const e=this.Et(n,r,i);if(!this.At(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new op(i,r,t);return n.forEach((e=>o.insert(e))),o}insert(e){if(0===this.It)return;const t=rp(e),[n,r]=ip(t);for(let i=0;i<this.hashCount;i++){const e=this.Et(n,r,i);this.Rt(e)}}Rt(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class sp extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ap{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,lp.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new ap(Zc.min(),r,new Cd(Qc),ef(),cf())}}class lp{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new lp(n,t,cf(),cf(),cf())}}class up{constructor(e,t,n,r){this.Pt=e,this.removedTargetIds=t,this.key=n,this.bt=r}}class cp{constructor(e,t){this.targetId=e,this.Vt=t}}class dp{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Rd.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class hp{constructor(){this.St=0,this.Dt=mp(),this.Ct=Rd.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=cf(),t=cf(),n=cf();return this.Dt.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Pc()}})),new lp(this.Ct,this.xt,e,t,n)}Ft(){this.Nt=!1,this.Dt=mp()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class fp{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=ef(),this.zt=pp(),this.Wt=new Cd(Qc)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,(t=>{const n=this.Zt(t);switch(e.state){case 0:this.te(t)&&n.$t(e.resumeToken);break;case 1:n.Ut(),n.kt||n.Ft(),n.$t(e.resumeToken);break;case 2:n.Ut(),n.kt||this.removeTarget(t);break;case 3:this.te(t)&&(n.Kt(),n.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),n.$t(e.resumeToken));break;default:Pc()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach(((e,n)=>{this.te(n)&&t(n)}))}ne(e){var t;const n=e.targetId,r=e.Vt.count,i=this.se(n);if(i){const o=i.target;if(Dh(o))if(0===r){const e=new id(o.path);this.Yt(n,e,sh.newNoDocument(e,Zc.min()))}else Mc(1===r);else{const i=this.ie(n);if(i!==r){const r=this.re(e,i);if(0!==r){this.ee(n);const e=2===r?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(n,e)}null===(t=Zf.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n){var r,i,o,s,a,l;const u={localCacheCount:t,existenceFilterCount:n.count},c=n.unchangedNames;return c&&(u.bloomFilter={applied:0===e,hashCount:null!==(r=null==c?void 0:c.hashCount)&&void 0!==r?r:0,bitmapLength:null!==(s=null===(o=null===(i=null==c?void 0:c.bits)||void 0===i?void 0:i.bitmap)||void 0===o?void 0:o.length)&&void 0!==s?s:0,padding:null!==(l=null===(a=null==c?void 0:c.bits)||void 0===a?void 0:a.padding)&&void 0!==l?l:0}),u}(r,i,e.Vt))}}}}re(e,t){const{unchangedNames:n,count:r}=e.Vt;if(!n||!n.bits)return 1;const{bits:{bitmap:i="",padding:o=0},hashCount:s=0}=n;let a,l;try{a=Ld(i).toUint8Array()}catch(e){if(e instanceof Od)return Rc("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw e}try{l=new op(a,o,s)}catch(e){return Rc(e instanceof sp?"BloomFilter error: ":"Applying bloom filter failed: ",e),1}return 0===l.It?1:r!==t-this.oe(e.targetId,l)?2:0}oe(e,t){const n=this.Gt.getRemoteKeysForTarget(e);let r=0;return n.forEach((n=>{const i=this.Gt.ue(),o="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());t.vt(o)||(this.Yt(e,n,null),r++)})),r}ce(e){const t=new Map;this.Qt.forEach(((n,r)=>{const i=this.se(r);if(i){if(n.current&&Dh(i.target)){const t=new id(i.target.path);null!==this.jt.get(t)||this.ae(r,t)||this.Yt(r,t,sh.newNoDocument(t,e))}n.Mt&&(t.set(r,n.Ot()),n.Ft())}}));let n=cf();this.zt.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.se(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.jt.forEach(((t,n)=>n.setReadTime(e)));const r=new ap(e,t,this.Wt,this.jt,n);return this.jt=ef(),this.zt=pp(),this.Wt=new Cd(Qc),r}Jt(e,t){if(!this.te(e))return;const n=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,n),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,n){if(!this.te(e))return;const r=this.Zt(e);this.ae(e,t)?r.Bt(t,1):r.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),n&&(this.jt=this.jt.insert(t,n))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new hp,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new xd(Qc),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||kc("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new hp),this.Gt.getRemoteKeysForTarget(e).forEach((t=>{this.Yt(e,t,null)}))}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function pp(){return new Cd(id.comparator)}function mp(){return new Cd(id.comparator)}const gp={asc:"ASCENDING",desc:"DESCENDING"},yp={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vp={and:"AND",or:"OR"};class bp{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ep(e,t){return e.useProto3Json||gd(t)?t:{value:t}}function wp(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Sp(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function _p(e,t){return wp(e,t.toTimestamp())}function Tp(e){return Mc(!!e),Zc.fromTimestamp(function(e){const t=Pd(e);return new $c(t.seconds,t.nanos)}(e))}function Cp(e,t){return function(e){return new td(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Ip(e){const t=td.fromString(e);return Mc(Wp(t)),t}function Ap(e,t){return Cp(e.databaseId,t.path)}function xp(e,t){const n=Ip(t);if(n.get(1)!==e.databaseId.projectId)throw new Fc(Uc.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Fc(Uc.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new id(Rp(n))}function Np(e,t){return Cp(e.databaseId,t)}function kp(e){const t=Ip(e);return 4===t.length?td.emptyPath():Rp(t)}function Op(e){return new td(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Rp(e){return Mc(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Dp(e,t,n){return{name:Ap(e,t),fields:n.value.mapValue.fields}}function Pp(e,t){let n;if(t instanceof Ff)n={update:Dp(e,t.key,t.value)};else if(t instanceof Hf)n={delete:Ap(e,t.key)};else if(t instanceof jf)n={update:Dp(e,t.key,t.data),updateMask:zp(t.fieldMask)};else{if(!(t instanceof Gf))return Pc();n={verify:Ap(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof Ef)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof wf)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof _f)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Cf)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw Pc()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:_p(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Pc()}(e,t.precondition)),n}function Mp(e,t){return{documents:[Np(e,t.path)]}}function Lp(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Np(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Np(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(e){if(0!==e.length)return Gp(ph.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:Bp(e.field),direction:jp(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const s=Ep(e,t.limit);var a;return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt={before:(a=t.startAt).inclusive,values:a.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Up(e){let t=kp(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Mc(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let o=[];n.where&&(o=function(e){const t=Fp(e);return t instanceof ph&&gh(t)?t.getFilters():[t]}(n.where));let s=[];n.orderBy&&(s=n.orderBy.map((e=>function(e){return new ch(Hp(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,gd(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new ah(n,t)}(n.startAt));let u=null;return n.endAt&&(u=function(e){const t=!e.before,n=e.values||[];return new ah(n,t)}(n.endAt)),Mh(t,i,s,o,a,"F",l,u)}function Fp(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Hp(e.unaryFilter.field);return fh.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Hp(e.unaryFilter.field);return fh.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Hp(e.unaryFilter.field);return fh.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Hp(e.unaryFilter.field);return fh.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Pc()}}(e):void 0!==e.fieldFilter?function(e){return fh.create(Hp(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Pc()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return ph.create(e.compositeFilter.filters.map((e=>Fp(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Pc()}}(e.compositeFilter.op))}(e):Pc()}function jp(e){return gp[e]}function Vp(e){return yp[e]}function qp(e){return vp[e]}function Bp(e){return{fieldPath:e.canonicalString()}}function Hp(e){return rd.fromServerFormat(e.fieldPath)}function Gp(e){return e instanceof fh?function(e){if("=="===e.op){if(eh(e.value))return{unaryFilter:{field:Bp(e.field),op:"IS_NAN"}};if(Zd(e.value))return{unaryFilter:{field:Bp(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(eh(e.value))return{unaryFilter:{field:Bp(e.field),op:"IS_NOT_NAN"}};if(Zd(e.value))return{unaryFilter:{field:Bp(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bp(e.field),op:Vp(e.op),value:e.value}}}(e):e instanceof ph?function(e){const t=e.getFilters().map((e=>Gp(e)));return 1===t.length?t[0]:{compositeFilter:{op:qp(e.op),filters:t}}}(e):Pc()}function zp(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Wp(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Kp{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Zc.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Zc.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Rd.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s,this.expectedCount=a}withSequenceNumber(e){return new Kp(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Kp(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Kp(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Kp(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Jp{constructor(e){this.fe=e}}function Yp(e){const t=Up({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Gh(t,t.limit,"L"):t}class Qp{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Md(e.integerValue));else if("doubleValue"in e){const n=Md(e.doubleValue);isNaN(n)?this.ye(t,13):(this.ye(t,15),yd(n)?t.pe(0):t.pe(n))}else if("timestampValue"in e){const n=e.timestampValue;this.ye(t,20),"string"==typeof n?t.Ie(n):(t.Ie("".concat(n.seconds||"")),t.pe(n.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Ld(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.ye(t,45),t.pe(n.latitude||0),t.pe(n.longitude||0)}else"mapValue"in e?rh(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):Pc()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const n=e.fields||{};this.ye(t,55);for(const r of Object.keys(n))this.Te(r,t),this.me(n[r],t)}Pe(e,t){const n=e.values||[];this.ye(t,50);for(const r of n)this.me(r,t)}ve(e,t){this.ye(t,37),id.fromName(e).path.forEach((e=>{this.ye(t,60),this.be(e,t)}))}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}Qp.Ve=new Qp;class Xp{constructor(){this.rn=new $p}addToCollectionParentIndex(e,t){return this.rn.add(t),fd.resolve()}getCollectionParents(e,t){return fd.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return fd.resolve()}deleteFieldIndex(e,t){return fd.resolve()}getDocumentsMatchingTarget(e,t){return fd.resolve(null)}getIndexType(e,t){return fd.resolve(0)}getFieldIndexes(e,t){return fd.resolve([])}getNextCollectionGroupToUpdate(e){return fd.resolve(null)}getMinOffset(e,t){return fd.resolve(ld.min())}getMinOffsetFromCollectionGroup(e,t){return fd.resolve(ld.min())}updateCollectionGroup(e,t,n){return fd.resolve()}updateIndexEntries(e,t){return fd.resolve()}}class $p{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new xd(td.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new xd(td.comparator)).toArray()}}new Uint8Array(0);class Zp{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Zp(e,Zp.DEFAULT_COLLECTION_PERCENTILE,Zp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Zp.DEFAULT_COLLECTION_PERCENTILE=10,Zp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Zp.DEFAULT=new Zp(41943040,Zp.DEFAULT_COLLECTION_PERCENTILE,Zp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Zp.DISABLED=new Zp(-1,0,0);class em{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new em(0)}static Mn(){return new em(-1)}}class tm{constructor(){this.changes=new $h((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,sh.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?fd.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class nm{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class rm{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Mf(n.mutation,e,kd.empty(),$c.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,cf()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:cf();const r=of();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=nf();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=of();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,cf())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=ef();const o=af(),s=af();return t.forEach(((e,t)=>{const s=n.get(t.key);r.has(t.key)&&(void 0===s||s.mutation instanceof jf)?i=i.insert(t.key,t):void 0!==s?(o.set(t.key,s.mutation.getFieldMask()),Mf(s.mutation,t,s.mutation.getFieldMask(),$c.now())):o.set(t.key,kd.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>o.set(e,t))),t.forEach(((e,t)=>{var n;return s.set(e,new nm(t,null!==(n=o.get(e))&&void 0!==n?n:null))})),s)))}recalculateAndSaveOverlays(e,t){const n=af();let r=new Cd(((e,t)=>e-t)),i=cf();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const o=t.get(e);if(null===o)return;let s=n.get(e)||kd.empty();s=i.applyToLocalView(o,s),n.set(e,s);const a=(r.get(i.batchId)||cf()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const o=[],s=r.getReverseIterator();for(;s.hasNext();){const r=s.getNext(),a=r.key,l=r.value,u=sf();l.forEach((e=>{if(!i.has(e)){const r=Df(t.get(e),n.get(e));null!==r&&u.set(e,r),i=i.add(e)}})),o.push(this.documentOverlayCache.saveOverlays(e,a,u))}return fd.waitFor(o)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n){return function(e){return id.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Vh(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):fd.resolve(of());let s=-1,a=i;return o.next((t=>fd.forEach(t,((t,n)=>(s<n.largestBatchId&&(s=n.largestBatchId),i.get(t)?fd.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,cf()))).next((e=>({batchId:s,changes:rf(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new id(t)).next((e=>{let t=nf();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n){const r=t.collectionGroup;let i=nf();return this.indexManager.getCollectionParents(e,r).next((o=>fd.forEach(o,(o=>{const s=function(e,t){return new Ph(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(r));return this.getDocumentsMatchingCollectionQuery(e,s,n).next((e=>{e.forEach(((e,t)=>{i=i.insert(e,t)}))}))})).next((()=>i))))}getDocumentsMatchingCollectionQuery(e,t,n){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((i=>(r=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)))).next((e=>{r.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,sh.newInvalidDocument(r)))}));let n=nf();return e.forEach(((e,i)=>{const o=r.get(e);void 0!==o&&Mf(o.mutation,i,kd.empty(),$c.now()),Jh(t,i)&&(n=n.insert(e,i))})),n}))}}class im{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return fd.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var n;return this.cs.set(t.id,{id:(n=t).id,version:n.version,createTime:Tp(n.createTime)}),fd.resolve()}getNamedQuery(e,t){return fd.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,function(e){return{name:e.name,query:Yp(e.bundledQuery),readTime:Tp(e.readTime)}}(t)),fd.resolve()}}class om{constructor(){this.overlays=new Cd(id.comparator),this.ls=new Map}getOverlay(e,t){return fd.resolve(this.overlays.get(t))}getOverlays(e,t){const n=of();return fd.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.we(e,t,r)})),fd.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.ls.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.ls.delete(n)),fd.resolve()}getOverlaysForCollection(e,t,n){const r=of(),i=t.length+1,o=new id(t.child("")),s=this.overlays.getIteratorFrom(o);for(;s.hasNext();){const e=s.getNext().value,o=e.getKey();if(!t.isPrefixOf(o.path))break;o.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return fd.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Cd(((e,t)=>e-t));const o=this.overlays.getIterator();for(;o.hasNext();){const e=o.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=of(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const s=of(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>s.set(e,t))),!(s.size()>=r)););return fd.resolve(s)}we(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.ls.get(r.largestBatchId).delete(n.key);this.ls.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Kf(t,n));let i=this.ls.get(t);void 0===i&&(i=cf(),this.ls.set(t,i)),this.ls.set(t,i.add(n.key))}}class sm{constructor(){this.fs=new xd(am.ds),this.ws=new xd(am._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const n=new am(e,t);this.fs=this.fs.add(n),this.ws=this.ws.add(n)}gs(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.ys(new am(e,t))}ps(e,t){e.forEach((e=>this.removeReference(e,t)))}Is(e){const t=new id(new td([])),n=new am(t,e),r=new am(t,e+1),i=[];return this.ws.forEachInRange([n,r],(e=>{this.ys(e),i.push(e.key)})),i}Ts(){this.fs.forEach((e=>this.ys(e)))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new id(new td([])),n=new am(t,e),r=new am(t,e+1);let i=cf();return this.ws.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new am(e,0),n=this.fs.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class am{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return id.comparator(e.key,t.key)||Qc(e.As,t.As)}static _s(e,t){return Qc(e.As,t.As)||id.comparator(e.key,t.key)}}class lm{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new xd(am.ds)}checkEmpty(e){return fd.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new zf(i,t,n,r);this.mutationQueue.push(o);for(const s of r)this.Rs=this.Rs.add(new am(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast());return fd.resolve(o)}lookupMutationBatch(e,t){return fd.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.bs(n),i=r<0?0:r;return fd.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return fd.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return fd.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new am(t,0),r=new am(t,Number.POSITIVE_INFINITY),i=[];return this.Rs.forEachInRange([n,r],(e=>{const t=this.Ps(e.As);i.push(t)})),fd.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new xd(Qc);return t.forEach((e=>{const t=new am(e,0),r=new am(e,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([t,r],(e=>{n=n.add(e.As)}))})),fd.resolve(this.Vs(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;id.isDocumentKey(i)||(i=i.child(""));const o=new am(new id(i),0);let s=new xd(Qc);return this.Rs.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(s=s.add(e.As)),!0)}),o),fd.resolve(this.Vs(s))}Vs(e){const t=[];return e.forEach((e=>{const n=this.Ps(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Mc(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let n=this.Rs;return fd.forEach(t.mutations,(r=>{const i=new am(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Rs=n}))}Cn(e){}containsKey(e,t){const n=new am(t,0),r=this.Rs.firstAfterOrEqual(n);return fd.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,fd.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class um{constructor(e){this.Ds=e,this.docs=new Cd(id.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,o=this.Ds(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return fd.resolve(n?n.document.mutableCopy():sh.newInvalidDocument(t))}getEntries(e,t){let n=ef();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():sh.newInvalidDocument(e))})),fd.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=ef();const o=t.path,s=new id(o.child("")),a=this.docs.getIteratorFrom(s);for(;a.hasNext();){const{key:e,value:{document:s}}=a.getNext();if(!o.isPrefixOf(e.path))break;e.path.length>o.length+1||ud(ad(s),n)<=0||(r.has(s.key)||Jh(t,s))&&(i=i.insert(s.key,s.mutableCopy()))}return fd.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Pc()}Cs(e,t){return fd.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new cm(this)}getSize(e){return fd.resolve(this.size)}}class cm extends tm{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.os.addEntry(e,r)):this.os.removeEntry(n)})),fd.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class dm{constructor(e){this.persistence=e,this.xs=new $h((e=>Oh(e)),Rh),this.lastRemoteSnapshotVersion=Zc.min(),this.highestTargetId=0,this.Ns=0,this.ks=new sm,this.targetCount=0,this.Ms=em.kn()}forEachTarget(e,t){return this.xs.forEach(((e,n)=>t(n))),fd.resolve()}getLastRemoteSnapshotVersion(e){return fd.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return fd.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),fd.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ns&&(this.Ns=t),fd.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new em(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,fd.resolve()}updateTargetData(e,t){return this.Fn(t),fd.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,fd.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.xs.forEach(((o,s)=>{s.sequenceNumber<=t&&null===n.get(s.targetId)&&(this.xs.delete(o),i.push(this.removeMatchingKeysForTargetId(e,s.targetId)),r++)})),fd.waitFor(i).next((()=>r))}getTargetCount(e){return fd.resolve(this.targetCount)}getTargetData(e,t){const n=this.xs.get(t)||null;return fd.resolve(n)}addMatchingKeys(e,t,n){return this.ks.gs(t,n),fd.resolve()}removeMatchingKeys(e,t,n){this.ks.ps(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),fd.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),fd.resolve()}getMatchingKeysForTargetId(e,t){const n=this.ks.Es(t);return fd.resolve(n)}containsKey(e,t){return fd.resolve(this.ks.containsKey(t))}}class hm{constructor(e,t){this.$s={},this.overlays={},this.Os=new md(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new dm(this),this.indexManager=new Xp,this.remoteDocumentCache=function(e){return new um(e)}((e=>this.referenceDelegate.Ls(e))),this.serializer=new Jp(t),this.qs=new im(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new om,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.$s[e.toKey()];return n||(n=new lm(t,this.referenceDelegate),this.$s[e.toKey()]=n),n}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,n){kc("MemoryPersistence","Starting transaction:",e);const r=new fm(this.Os.next());return this.referenceDelegate.Us(),n(r).next((e=>this.referenceDelegate.Ks(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Gs(e,t){return fd.or(Object.values(this.$s).map((n=>()=>n.containsKey(e,t))))}}class fm extends dd{constructor(e){super(),this.currentSequenceNumber=e}}class pm{constructor(e){this.persistence=e,this.Qs=new sm,this.js=null}static zs(e){return new pm(e)}get Ws(){if(this.js)return this.js;throw Pc()}addReference(e,t,n){return this.Qs.addReference(n,t),this.Ws.delete(n.toString()),fd.resolve()}removeReference(e,t,n){return this.Qs.removeReference(n,t),this.Ws.add(n.toString()),fd.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),fd.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach((e=>this.Ws.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Ws.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fd.forEach(this.Ws,(n=>{const r=id.fromPath(n);return this.Hs(e,r).next((e=>{e||t.removeEntry(r,Zc.min())}))})).next((()=>(this.js=null,t.apply(e))))}updateLimboDocument(e,t){return this.Hs(e,t).next((e=>{e?this.Ws.delete(t.toString()):this.Ws.add(t.toString())}))}Ls(e){return 0}Hs(e,t){return fd.or([()=>fd.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class mm{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Fi=n,this.Bi=r}static Li(e,t){let n=cf(),r=cf();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new mm(e,t.fromCache,n,r)}}class gm{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,n,r){return this.Ki(e,t).next((i=>i||this.Gi(e,t,r,n))).next((n=>n||this.Qi(e,t)))}Ki(e,t){if(Uh(t))return fd.resolve(null);let n=Bh(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=Gh(t,null,"F"),n=Bh(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=cf(...r);return this.Ui.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const o=this.ji(t,r);return this.zi(t,o,i,n.readTime)?this.Ki(e,Gh(t,null,"F")):this.Wi(e,o,t,n)}))))})))))}Gi(e,t,n,r){return Uh(t)||r.isEqual(Zc.min())?this.Qi(e,t):this.Ui.getDocuments(e,n).next((i=>{const o=this.ji(t,i);return this.zi(t,o,n,r)?this.Qi(e,t):(Nc()<=ts.DEBUG&&kc("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Kh(t)),this.Wi(e,o,t,sd(r,-1)))}))}ji(e,t){let n=new xd(Qh(e));return t.forEach(((t,r)=>{Jh(e,r)&&(n=n.add(r))})),n}zi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Qi(e,t){return Nc()<=ts.DEBUG&&kc("QueryEngine","Using full collection scan to execute query:",Kh(t)),this.Ui.getDocumentsMatchingQuery(e,t,ld.min())}Wi(e,t,n,r){return this.Ui.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class ym{constructor(e,t,n,r){this.persistence=e,this.Hi=t,this.serializer=r,this.Ji=new Cd(Qc),this.Yi=new $h((e=>Oh(e)),Rh),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(n)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new rm(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ji)))}}function vm(e,t,n,r){return new ym(e,t,n,r)}async function bm(e,t){const n=Lc(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.tr(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],o=[];let s=cf();for(const e of r){i.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}for(const e of t){o.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}return n.localDocuments.getDocuments(e,s).next((e=>({er:e,removedBatchIds:i,addedBatchIds:o})))}))}))}function Em(e){const t=Lc(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Bs.getLastRemoteSnapshotVersion(e)))}function wm(e,t,n){let r=cf(),i=cf();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=ef();return n.forEach(((n,o)=>{const s=e.get(n);o.isFoundDocument()!==s.isFoundDocument()&&(i=i.add(n)),o.isNoDocument()&&o.version.isEqual(Zc.min())?(t.removeEntry(n,o.readTime),r=r.insert(n,o)):!s.isValidDocument()||o.version.compareTo(s.version)>0||0===o.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(o),r=r.insert(n,o)):kc("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",o.version)})),{nr:r,sr:i}}))}function Sm(e,t){const n=Lc(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function _m(e,t){const n=Lc(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Bs.getTargetData(e,t).next((i=>i?(r=i,fd.resolve(r)):n.Bs.allocateTargetId(e).next((i=>(r=new Kp(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Bs.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.Ji.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e}))}async function Tm(e,t,n){const r=Lc(e),i=r.Ji.get(t),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!pd(e))throw e;kc("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.Ji=r.Ji.remove(t),r.Yi.delete(i.target)}function Cm(e,t,n){const r=Lc(e);let i=Zc.min(),o=cf();return r.persistence.runTransaction("Execute query","readonly",(e=>function(e,t,n){const r=Lc(e),i=r.Yi.get(n);return void 0!==i?fd.resolve(r.Ji.get(i)):r.Bs.getTargetData(t,n)}(r,e,Bh(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(e,t.targetId).next((e=>{o=e}))})).next((()=>r.Hi.getDocumentsMatchingQuery(e,t,n?i:Zc.min(),n?o:cf()))).next((e=>(Im(r,Yh(t),e),{documents:e,ir:o})))))}function Im(e,t,n){let r=e.Xi.get(t)||Zc.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Xi.set(t,r)}class Am{constructor(){this.activeTargetIds=hf()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class xm{constructor(){this.Hr=new Am,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,n){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new Am,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Nm{Yr(e){}shutdown(){}}class km{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){kc("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){kc("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Om=null;function Rm(){return null===Om?Om=268435456+Math.round(2147483648*Math.random()):Om++,"0x"+Om.toString(16)}const Dm={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Pm{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Mm="WebChannelConnection";class Lm extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.mo=t+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,n,r,i){const o=Rm(),s=this.To(e,t);kc("RestConnection","Sending RPC '".concat(e,"' ").concat(o,":"),s,n);const a={};return this.Eo(a,r,i),this.Ao(e,s,a,n).then((t=>(kc("RestConnection","Received RPC '".concat(e,"' ").concat(o,": "),t),t)),(t=>{throw Rc("RestConnection","RPC '".concat(e,"' ").concat(o," failed with error: "),t,"url: ",s,"request:",n),t}))}vo(e,t,n,r,i,o){return this.Io(e,t,n,r,i)}Eo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ac,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}To(e,t){const n=Dm[e];return"".concat(this.mo,"/v1/").concat(t,":").concat(n)}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,n,r){const i=Rm();return new Promise(((o,s)=>{const a=new Sc;a.setWithCredentials(!0),a.listenOnce(yc.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case gc.NO_ERROR:const t=a.getResponseJson();kc(Mm,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),o(t);break;case gc.TIMEOUT:kc(Mm,"RPC '".concat(e,"' ").concat(i," timed out")),s(new Fc(Uc.DEADLINE_EXCEEDED,"Request time out"));break;case gc.HTTP_ERROR:const n=a.getStatus();if(kc(Mm,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Uc).indexOf(t)>=0?t:Uc.UNKNOWN}(t.status);s(new Fc(e,t.message))}else s(new Fc(Uc.UNKNOWN,"Server responded with status "+a.getStatus()))}else s(new Fc(Uc.UNAVAILABLE,"Connection failed."));break;default:Pc()}}finally{kc(Mm,"RPC '".concat(e,"' ").concat(i," completed."))}}));const l=JSON.stringify(r);kc(Mm,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",l,n,15)}))}Ro(e,t,n){const r=Rm(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=pc(),s=mc(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.xmlHttpFactory=new Ec({})),this.Eo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const u=i.join("");kc(Mm,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(u),a);const c=o.createWebChannel(u,a);let d=!1,h=!1;const f=new Pm({ro:t=>{h?kc(Mm,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(kc(Mm,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),c.open(),d=!0),kc(Mm,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),c.send(t))},oo:()=>c.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(c,wc.EventType.OPEN,(()=>{h||kc(Mm,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(c,wc.EventType.CLOSE,(()=>{h||(h=!0,kc(Mm,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.wo())})),p(c,wc.EventType.ERROR,(t=>{h||(h=!0,Rc(Mm,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.wo(new Fc(Uc.UNAVAILABLE,"The operation could not be completed")))})),p(c,wc.EventType.MESSAGE,(t=>{var n;if(!h){const i=t.data[0];Mc(!!i);const o=i,s=o.error||(null===(n=o[0])||void 0===n?void 0:n.error);if(s){kc(Mm,"RPC '".concat(e,"' stream ").concat(r," received error:"),s);const t=s.status;let n=function(e){const t=Yf[e];if(void 0!==t)return $f(t)}(t),i=s.message;void 0===n&&(n=Uc.INTERNAL,i="Unknown error status: "+t+" with message "+s.message),h=!0,f.wo(new Fc(n,i)),c.close()}else kc(Mm,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f._o(i)}})),p(s,vc.STAT_EVENT,(t=>{t.stat===bc.PROXY?kc(Mm,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===bc.NOPROXY&&kc(Mm,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.fo()}),0),f}}function Um(){return"undefined"!=typeof document?document:null}function Fm(e){return new bp(e,!0)}class jm{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ii=e,this.timerId=t,this.Po=n,this.bo=r,this.Vo=i,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),n=Math.max(0,Date.now()-this.Co),r=Math.max(0,t-n);r>0&&kc("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.So," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.Do=this.ii.enqueueAfterDelay(this.timerId,r,(()=>(this.Co=Date.now(),e()))),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class Vm{constructor(e,t,n,r,i,o,s,a){this.ii=e,this.$o=n,this.Oo=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=a,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new jm(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,(()=>this.zo())))}Wo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(e,t){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,4!==e?this.qo.reset():t&&t.code===Uc.RESOURCE_EXHAUSTED?(Oc(t.toString()),Oc("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):t&&t.code===Uc.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.ao(t)}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Fo===t&&this.Zo(n,r)}),(t=>{e((()=>{const e=new Fc(Uc.UNKNOWN,"Fetching auth token failed: "+t.message);return this.tu(e)}))}))}Zo(e,t){const n=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo((()=>{n((()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,(()=>(this.Ko()&&(this.state=3),Promise.resolve()))),this.listener.uo())))})),this.stream.ao((e=>{n((()=>this.tu(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Go(){this.state=5,this.qo.No((async()=>{this.state=0,this.start()}))}tu(e){return kc("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget((()=>this.Fo===e?t():(kc("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class qm extends Vm{constructor(e,t,n,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Pc()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(e,t){return e.useProto3Json?(Mc(void 0===t||"string"==typeof t),Rd.fromBase64String(t||"")):(Mc(void 0===t||t instanceof Uint8Array),Rd.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),s=t.targetChange.cause,a=s&&function(e){const t=void 0===e.code?Uc.UNKNOWN:$f(e.code);return new Fc(t,e.message||"")}(s);n=new dp(r,i,o,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=xp(e,r.document.name),o=Tp(r.document.updateTime),s=r.document.createTime?Tp(r.document.createTime):Zc.min(),a=new ih({mapValue:{fields:r.document.fields}}),l=sh.newFoundDocument(i,o,s,a),u=r.targetIds||[],c=r.removedTargetIds||[];n=new up(u,c,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=xp(e,r.document),o=r.readTime?Tp(r.readTime):Zc.min(),s=sh.newNoDocument(i,o),a=r.removedTargetIds||[];n=new up([],a,s.key,s)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=xp(e,r.document),o=r.removedTargetIds||[];n=new up([],o,i,null)}else{if(!("filter"in t))return Pc();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,o=new Jf(r,i),s=e.targetId;n=new cp(s,o)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Zc.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Zc.min():t.readTime?Tp(t.readTime):Zc.min()}(e);return this.listener.nu(t,n)}su(e){const t={};t.database=Op(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Dh(r)?{documents:Mp(e,r)}:{query:Lp(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Sp(e,t.resumeToken);const r=Ep(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Zc.min())>0){n.readTime=wp(e,t.snapshotVersion.toTimestamp());const r=Ep(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Pc()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Wo(t)}iu(e){const t={};t.database=Op(this.serializer),t.removeTarget=e,this.Wo(t)}}class Bm extends Vm{constructor(e,t,n,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(Mc(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function(e,t){return e&&e.length>0?(Mc(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?Tp(e.updateTime):Tp(t);return n.isEqual(Zc.min())&&(n=Tp(t)),new Nf(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=Tp(e.commitTime);return this.listener.cu(n,t)}return Mc(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=Op(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Pp(this.serializer,e)))};this.Wo(t)}}class Hm extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.lu=!1}fu(){if(this.lu)throw new Fc(Uc.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,n){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((r=>{let[i,o]=r;return this.connection.Io(e,t,n,i,o)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Uc.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Fc(Uc.UNKNOWN,e.toString())}))}vo(e,t,n,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[o,s]=i;return this.connection.vo(e,t,n,o,s,r)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Uc.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Fc(Uc.UNKNOWN,e.toString())}))}terminate(){this.lu=!0}}class Gm{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve()))))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.mu?(Oc(t),this.mu=!1):kc("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class zm{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=i,this.Pu.Yr((e=>{n.enqueueAndForget((async()=>{eg(this)&&(kc("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Lc(e);t.vu.add(4),await Km(t),t.bu.set("Unknown"),t.vu.delete(4),await Wm(t)}(this))}))})),this.bu=new Gm(n,r)}}async function Wm(e){if(eg(e))for(const t of e.Ru)await t(!0)}async function Km(e){for(const t of e.Ru)await t(!1)}function Jm(e,t){const n=Lc(e);n.Au.has(t.targetId)||(n.Au.set(t.targetId,t),Zm(n)?$m(n):vg(n).Ko()&&Qm(n,t))}function Ym(e,t){const n=Lc(e),r=vg(n);n.Au.delete(t),r.Ko()&&Xm(n,t),0===n.Au.size&&(r.Ko()?r.jo():eg(n)&&n.bu.set("Unknown"))}function Qm(e,t){if(e.Vu.qt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Zc.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}vg(e).su(t)}function Xm(e,t){e.Vu.qt(t),vg(e).iu(t)}function $m(e){e.Vu=new fp({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),le:t=>e.Au.get(t)||null,ue:()=>e.datastore.serializer.databaseId}),vg(e).start(),e.bu.gu()}function Zm(e){return eg(e)&&!vg(e).Uo()&&e.Au.size>0}function eg(e){return 0===Lc(e).vu.size}function tg(e){e.Vu=void 0}async function ng(e){e.Au.forEach(((t,n)=>{Qm(e,t)}))}async function rg(e,t){tg(e),Zm(e)?(e.bu.Iu(t),$m(e)):e.bu.set("Unknown")}async function ig(e,t,n){if(e.bu.set("Online"),t instanceof dp&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Au.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Au.delete(r),e.Vu.removeTarget(r))}(e,t)}catch(n){kc("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await og(e,n)}else if(t instanceof up?e.Vu.Ht(t):t instanceof cp?e.Vu.ne(t):e.Vu.Xt(t),!n.isEqual(Zc.min()))try{const t=await Em(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Vu.ce(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Au.get(r);i&&e.Au.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.Au.get(t);if(!r)return;e.Au.set(t,r.withResumeToken(Rd.EMPTY_BYTE_STRING,r.snapshotVersion)),Xm(e,t);const i=new Kp(r.target,t,n,r.sequenceNumber);Qm(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){kc("RemoteStore","Failed to raise snapshot:",t),await og(e,t)}}async function og(e,t,n){if(!pd(t))throw t;e.vu.add(1),await Km(e),e.bu.set("Offline"),n||(n=()=>Em(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{kc("RemoteStore","Retrying IndexedDB access"),await n(),e.vu.delete(1),await Wm(e)}))}function sg(e,t){return t().catch((n=>og(e,n,t)))}async function ag(e){const t=Lc(e),n=bg(t);let r=t.Eu.length>0?t.Eu[t.Eu.length-1].batchId:-1;for(;lg(t);)try{const e=await Sm(t.localStore,r);if(null===e){0===t.Eu.length&&n.jo();break}r=e.batchId,ug(t,e)}catch(e){await og(t,e)}cg(t)&&dg(t)}function lg(e){return eg(e)&&e.Eu.length<10}function ug(e,t){e.Eu.push(t);const n=bg(e);n.Ko()&&n.ou&&n.uu(t.mutations)}function cg(e){return eg(e)&&!bg(e).Uo()&&e.Eu.length>0}function dg(e){bg(e).start()}async function hg(e){bg(e).hu()}async function fg(e){const t=bg(e);for(const n of e.Eu)t.uu(n.mutations)}async function pg(e,t,n){const r=e.Eu.shift(),i=Wf.from(r,t,n);await sg(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await ag(e)}async function mg(e,t){t&&bg(e).ou&&await async function(e,t){if(Xf(n=t.code)&&n!==Uc.ABORTED){const n=e.Eu.shift();bg(e).Qo(),await sg(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await ag(e)}var n}(e,t),cg(e)&&dg(e)}async function gg(e,t){const n=Lc(e);n.asyncQueue.verifyOperationInProgress(),kc("RemoteStore","RemoteStore received new credentials");const r=eg(n);n.vu.add(3),await Km(n),r&&n.bu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.vu.delete(3),await Wm(n)}async function yg(e,t){const n=Lc(e);t?(n.vu.delete(2),await Wm(n)):t||(n.vu.add(2),await Km(n),n.bu.set("Unknown"))}function vg(e){return e.Su||(e.Su=function(e,t,n){const r=Lc(e);return r.fu(),new qm(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:ng.bind(null,e),ao:rg.bind(null,e),nu:ig.bind(null,e)}),e.Ru.push((async t=>{t?(e.Su.Qo(),Zm(e)?$m(e):e.bu.set("Unknown")):(await e.Su.stop(),tg(e))}))),e.Su}function bg(e){return e.Du||(e.Du=function(e,t,n){const r=Lc(e);return r.fu(),new Bm(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:hg.bind(null,e),ao:mg.bind(null,e),au:fg.bind(null,e),cu:pg.bind(null,e)}),e.Ru.push((async t=>{t?(e.Du.Qo(),await ag(e)):(await e.Du.stop(),e.Eu.length>0&&(kc("RemoteStore","Stopping write stream with ".concat(e.Eu.length," pending writes")),e.Eu=[]))}))),e.Du}class Eg{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new jc,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}static createAndSchedule(e,t,n,r,i){const o=Date.now()+n,s=new Eg(e,t,o,r,i);return s.start(n),s}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Fc(Uc.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function wg(e,t){if(Oc("AsyncQueue","".concat(t,": ").concat(e)),pd(e))return new Fc(Uc.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Sg{constructor(e){this.comparator=e?(t,n)=>e(t,n)||id.comparator(t.key,n.key):(e,t)=>id.comparator(e.key,t.key),this.keyedMap=nf(),this.sortedSet=new Cd(this.comparator)}static emptySet(e){return new Sg(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Sg))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Sg;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class _g{constructor(){this.Cu=new Cd(id.comparator)}track(e){const t=e.doc.key,n=this.Cu.get(t);n?0!==e.type&&3===n.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==n.type?this.Cu=this.Cu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Cu=this.Cu.remove(t):1===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):Pc():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal(((t,n)=>{e.push(n)})),e}}class Tg{constructor(e,t,n,r,i,o,s,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const o=[];return t.forEach((e=>{o.push({type:0,doc:e})})),new Tg(e,t,Sg.emptySet(t),o,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Cg{constructor(){this.Nu=void 0,this.listeners=[]}}class Ig{constructor(){this.queries=new $h((e=>Wh(e)),zh),this.onlineState="Unknown",this.ku=new Set}}async function Ag(e,t){const n=Lc(e),r=t.query;let i=!1,o=n.queries.get(r);if(o||(i=!0,o=new Cg),i)try{o.Nu=await n.onListen(r)}catch(e){const n=wg(e,"Initialization of query '".concat(Kh(t.query),"' failed"));return void t.onError(n)}n.queries.set(r,o),o.listeners.push(t),t.Mu(n.onlineState),o.Nu&&t.$u(o.Nu)&&Og(n)}async function xg(e,t){const n=Lc(e),r=t.query;let i=!1;const o=n.queries.get(r);if(o){const e=o.listeners.indexOf(t);e>=0&&(o.listeners.splice(e,1),i=0===o.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function Ng(e,t){const n=Lc(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.listeners)e.$u(i)&&(r=!0);t.Nu=i}}r&&Og(n)}function kg(e,t,n){const r=Lc(e),i=r.queries.get(t);if(i)for(const o of i.listeners)o.onError(n);r.queries.delete(t)}function Og(e){e.ku.forEach((e=>{e.next()}))}class Rg{constructor(e,t,n){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=n||{}}$u(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Tg(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.Ku||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){if(e.docChanges.length>0)return!0;const t=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Uu(e){e=Tg.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class Dg{constructor(e){this.key=e}}class Pg{constructor(e){this.key=e}}class Mg{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=cf(),this.mutatedKeys=cf(),this.tc=Qh(e),this.ec=new Sg(this.tc)}get nc(){return this.Yu}sc(e,t){const n=t?t.ic:new _g,r=t?t.ec:this.ec;let i=t?t.mutatedKeys:this.mutatedKeys,o=r,s=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const u=r.get(e),c=Jh(this.query,t)?t:null,d=!!u&&this.mutatedKeys.has(u.key),h=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations);let f=!1;u&&c?u.data.isEqual(c.data)?d!==h&&(n.track({type:3,doc:c}),f=!0):this.rc(u,c)||(n.track({type:2,doc:c}),f=!0,(a&&this.tc(c,a)>0||l&&this.tc(c,l)<0)&&(s=!0)):!u&&c?(n.track({type:0,doc:c}),f=!0):u&&!c&&(n.track({type:1,doc:u}),f=!0,(a||l)&&(s=!0)),f&&(c?(o=o.add(c),i=h?i.add(e):i.delete(e)):(o=o.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){const e="F"===this.query.limitType?o.last():o.first();o=o.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{ec:o,ic:n,zi:s,mutatedKeys:i}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const r=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const i=e.ic.xu();i.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Pc()}};return n(e)-n(t)}(e.type,t.type)||this.tc(e.doc,t.doc))),this.oc(n);const o=t?this.uc():[],s=0===this.Zu.size&&this.current?1:0,a=s!==this.Xu;return this.Xu=s,0!==i.length||a?{snapshot:new Tg(this.query,e.ec,r,i,e.mutatedKeys,0===s,a,!1,!!n&&n.resumeToken.approximateByteSize()>0),cc:o}:{cc:o}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new _g,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach((e=>this.Yu=this.Yu.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.Yu=this.Yu.delete(e))),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=cf(),this.ec.forEach((e=>{this.ac(e.key)&&(this.Zu=this.Zu.add(e.key))}));const t=[];return e.forEach((e=>{this.Zu.has(e)||t.push(new Pg(e))})),this.Zu.forEach((n=>{e.has(n)||t.push(new Dg(n))})),t}hc(e){this.Yu=e.ir,this.Zu=cf();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return Tg.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class Lg{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Ug{constructor(e){this.key=e,this.fc=!1}}class Fg{constructor(e,t,n,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.dc={},this.wc=new $h((e=>Wh(e)),zh),this._c=new Map,this.mc=new Set,this.gc=new Cd(id.comparator),this.yc=new Map,this.Ic=new sm,this.Tc={},this.Ec=new Map,this.Ac=em.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}async function jg(e,t){const n=ry(e);let r,i;const o=n.wc.get(t);if(o)r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.lc();else{const e=await _m(n.localStore,Bh(t)),o=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await Vg(n,t,r,"current"===o,e.resumeToken),n.isPrimaryClient&&Jm(n.remoteStore,e)}return i}async function Vg(e,t,n,r,i){e.Rc=(t,n,r)=>async function(e,t,n,r){let i=t.view.sc(n);i.zi&&(i=await Cm(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.sc(n,i)})));const o=r&&r.targetChanges.get(t.targetId),s=t.view.applyChanges(i,e.isPrimaryClient,o);return Xg(e,t.targetId,s.cc),s.snapshot}(e,t,n,r);const o=await Cm(e.localStore,t,!0),s=new Mg(t,o.ir),a=s.sc(o.documents),l=lp.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),u=s.applyChanges(a,e.isPrimaryClient,l);Xg(e,n,u.cc);const c=new Lg(t,n,s);return e.wc.set(t,c),e._c.has(n)?e._c.get(n).push(t):e._c.set(n,[t]),u.snapshot}async function qg(e,t){const n=Lc(e),r=n.wc.get(t),i=n._c.get(r.targetId);if(i.length>1)return n._c.set(r.targetId,i.filter((e=>!zh(e,t)))),void n.wc.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Tm(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),Ym(n.remoteStore,r.targetId),Yg(n,r.targetId)})).catch(hd)):(Yg(n,r.targetId),await Tm(n.localStore,r.targetId,!0))}async function Bg(e,t){const n=Lc(e);try{const e=await function(e,t){const n=Lc(e),r=t.snapshotVersion;let i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const o=n.Zi.newChangeBuffer({trackRemovals:!0});i=n.Ji;const s=[];t.targetChanges.forEach(((o,a)=>{const l=i.get(a);if(!l)return;s.push(n.Bs.removeMatchingKeys(e,o.removedDocuments,a).next((()=>n.Bs.addMatchingKeys(e,o.addedDocuments,a))));let u=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?u=u.withResumeToken(Rd.EMPTY_BYTE_STRING,Zc.min()).withLastLimboFreeSnapshotVersion(Zc.min()):o.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(o.resumeToken,r)),i=i.insert(a,u),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,u,o)&&s.push(n.Bs.updateTargetData(e,u))}));let a=ef(),l=cf();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),s.push(wm(e,o,t.documentUpdates).next((e=>{a=e.nr,l=e.sr}))),!r.isEqual(Zc.min())){const t=n.Bs.getLastRemoteSnapshotVersion(e).next((t=>n.Bs.setTargetsMetadata(e,e.currentSequenceNumber,r)));s.push(t)}return fd.waitFor(s).next((()=>o.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.Ji=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.yc.get(t);r&&(Mc(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.fc=!0:e.modifiedDocuments.size>0?Mc(r.fc):e.removedDocuments.size>0&&(Mc(r.fc),r.fc=!1))})),await ey(n,e,t)}catch(e){await hd(e)}}function Hg(e,t,n){const r=Lc(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.wc.forEach(((n,r)=>{const i=r.view.Mu(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=Lc(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.listeners)i.Mu(t)&&(r=!0)})),r&&Og(n)}(r.eventManager,t),e.length&&r.dc.nu(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Gg(e,t,n){const r=Lc(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.yc.get(t),o=i&&i.key;if(o){let e=new Cd(id.comparator);e=e.insert(o,sh.newNoDocument(o,Zc.min()));const n=cf().add(o),i=new ap(Zc.min(),new Map,new Cd(Qc),e,n);await Bg(r,i),r.gc=r.gc.remove(o),r.yc.delete(t),Zg(r)}else await Tm(r.localStore,t,!1).then((()=>Yg(r,t,n))).catch(hd)}async function zg(e,t){const n=Lc(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Lc(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.Zi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,o=i.keys();let s=fd.resolve();return o.forEach((e=>{s=s.next((()=>r.getEntry(t,e))).next((t=>{const o=n.docVersions.get(e);Mc(null!==o),t.version.compareTo(o)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),s.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=cf();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);Jg(n,r,null),Kg(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ey(n,e)}catch(e){await hd(e)}}async function Wg(e,t,n){const r=Lc(e);try{const e=await function(e,t){const n=Lc(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Mc(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);Jg(r,t,n),Kg(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await ey(r,e)}catch(n){await hd(n)}}function Kg(e,t){(e.Ec.get(t)||[]).forEach((e=>{e.resolve()})),e.Ec.delete(t)}function Jg(e,t,n){const r=Lc(e);let i=r.Tc[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Tc[r.currentUser.toKey()]=i}}function Yg(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e._c.get(t))e.wc.delete(r),n&&e.dc.Pc(r,n);e._c.delete(t),e.isPrimaryClient&&e.Ic.Is(t).forEach((t=>{e.Ic.containsKey(t)||Qg(e,t)}))}function Qg(e,t){e.mc.delete(t.path.canonicalString());const n=e.gc.get(t);null!==n&&(Ym(e.remoteStore,n),e.gc=e.gc.remove(t),e.yc.delete(n),Zg(e))}function Xg(e,t,n){for(const r of n)r instanceof Dg?(e.Ic.addReference(r.key,t),$g(e,r)):r instanceof Pg?(kc("SyncEngine","Document no longer in limbo: "+r.key),e.Ic.removeReference(r.key,t),e.Ic.containsKey(r.key)||Qg(e,r.key)):Pc()}function $g(e,t){const n=t.key,r=n.path.canonicalString();e.gc.get(n)||e.mc.has(r)||(kc("SyncEngine","New document in limbo: "+n),e.mc.add(r),Zg(e))}function Zg(e){for(;e.mc.size>0&&e.gc.size<e.maxConcurrentLimboResolutions;){const t=e.mc.values().next().value;e.mc.delete(t);const n=new id(td.fromString(t)),r=e.Ac.next();e.yc.set(r,new Ug(n)),e.gc=e.gc.insert(n,r),Jm(e.remoteStore,new Kp(Bh(Lh(n.path)),r,"TargetPurposeLimboResolution",md.ct))}}async function ey(e,t,n){const r=Lc(e),i=[],o=[],s=[];r.wc.isEmpty()||(r.wc.forEach(((e,a)=>{s.push(r.Rc(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=mm.Li(a.targetId,e);o.push(t)}})))})),await Promise.all(s),r.dc.nu(i),await async function(e,t){const n=Lc(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>fd.forEach(t,(t=>fd.forEach(t.Fi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>fd.forEach(t.Bi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!pd(e))throw e;kc("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ji.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ji=n.Ji.insert(e,i)}}}(r.localStore,o))}async function ty(e,t){const n=Lc(e);if(!n.currentUser.isEqual(t)){kc("SyncEngine","User change. New user:",t.toKey());const e=await bm(n.localStore,t);n.currentUser=t,function(e){e.Ec.forEach((e=>{e.forEach((e=>{e.reject(new Fc(Uc.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Ec.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await ey(n,e.er)}}function ny(e,t){const n=Lc(e),r=n.yc.get(t);if(r&&r.fc)return cf().add(r.key);{let e=cf();const r=n._c.get(t);if(!r)return e;for(const t of r){const r=n.wc.get(t);e=e.unionWith(r.view.nc)}return e}}function ry(e){const t=Lc(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Bg.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=ny.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Gg.bind(null,t),t.dc.nu=Ng.bind(null,t.eventManager),t.dc.Pc=kg.bind(null,t.eventManager),t}function iy(e){const t=Lc(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=zg.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Wg.bind(null,t),t}class oy{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Fm(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return vm(this.persistence,new gm,e.initialUser,this.serializer)}createPersistence(e){return new hm(pm.zs,this.serializer)}createSharedClientState(e){return new xm}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class sy{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Hg(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=ty.bind(null,this.syncEngine),await yg(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Ig}createDatastore(e){const t=Fm(e.databaseInfo.databaseId),n=(r=e.databaseInfo,new Lm(r));var r;return function(e,t,n,r){return new Hm(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=e=>Hg(this.syncEngine,e,0),o=km.D()?new km:new Nm,new zm(t,n,r,i,o);var t,n,r,i,o}createSyncEngine(e,t){return function(e,t,n,r,i,o,s){const a=new Fg(e,t,n,r,i,o);return s&&(a.vc=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=Lc(e);kc("RemoteStore","RemoteStore shutting down."),t.vu.add(5),await Km(t),t.Pu.shutdown(),t.bu.set("Unknown")}(this.remoteStore)}}class ay{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Oc("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class ly{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Ic.UNAUTHENTICATED,this.clientId=Yc.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{kc("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(kc("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Fc(Uc.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new jc;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(qv){const n=wg(qv,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function uy(e,t){e.asyncQueue.verifyOperationInProgress(),kc("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await bm(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function cy(e,t){e.asyncQueue.verifyOperationInProgress();const n=await hy(e);kc("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener((e=>gg(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>gg(t.remoteStore,n))),e._onlineComponents=t}function dy(e){return"FirebaseError"===e.name?e.code===Uc.FAILED_PRECONDITION||e.code===Uc.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function hy(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){kc("FirestoreClient","Using user provided OfflineComponentProvider");try{await uy(e,e._uninitializedComponentsProvider._offline)}catch(qv){const n=qv;if(!dy(n))throw n;Rc("Error using user provided cache. Falling back to memory cache: "+n),await uy(e,new oy)}}else kc("FirestoreClient","Using default OfflineComponentProvider"),await uy(e,new oy);return e._offlineComponents}async function fy(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(kc("FirestoreClient","Using user provided OnlineComponentProvider"),await cy(e,e._uninitializedComponentsProvider._online)):(kc("FirestoreClient","Using default OnlineComponentProvider"),await cy(e,new sy))),e._onlineComponents}function py(e){return fy(e).then((e=>e.syncEngine))}async function my(e){const t=await fy(e),n=t.eventManager;return n.onListen=jg.bind(null,t.syncEngine),n.onUnlisten=qg.bind(null,t.syncEngine),n}function gy(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new jc;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const o=new ay({next:n=>{t.enqueueAndForget((()=>xg(e,s))),n.fromCache&&"server"===r.source?i.reject(new Fc(Uc.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),s=new Rg(n,o,{includeMetadataChanges:!0,Ku:!0});return Ag(e,s)}(await my(e),e.asyncQueue,t,n,r))),r.promise}function yy(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const vy=new Map;function by(e,t,n){if(!n)throw new Fc(Uc.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Ey(e){if(!id.isDocumentKey(e))throw new Fc(Uc.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function wy(e){if(id.isDocumentKey(e))throw new Fc(Uc.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Sy(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Pc()}function _y(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Fc(Uc.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Sy(e);throw new Fc(Uc.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}class Ty{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Fc(Uc.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Fc(Uc.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Fc(Uc.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=yy(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Fc(Uc.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Fc(Uc.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Fc(Uc.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}class Cy{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ty({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Fc(Uc.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Fc(Uc.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ty(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new qc;switch(e.type){case"firstParty":return new zc(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Fc(Uc.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=vy.get(e);t&&(kc("ComponentProvider","Removing Datastore"),vy.delete(e),t.terminate())}(this),Promise.resolve()}}function Iy(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const o=(e=_y(e,Cy))._getSettings(),s="".concat(t,":").concat(n);if("firestore.googleapis.com"!==o.host&&o.host!==s&&Rc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Ic.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Go(JSON.stringify({alg:"none",type:"JWT"})),Go(JSON.stringify(o)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const o=r.mockUserToken.sub||r.mockUserToken.user_id;if(!o)throw new Fc(Uc.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Ic(o)}e._authCredentials=new Bc(new Vc(t,n))}}class Ay{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ny(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ay(this.firestore,e,this._key)}}class xy{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new xy(this.firestore,e,this._query)}}class Ny extends xy{constructor(e,t,n){super(e,t,Lh(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ay(this.firestore,null,new id(e))}withConverter(e){return new Ny(this.firestore,e,this._path)}}function ky(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=$o(e),1===arguments.length&&(t=Yc.A()),by("doc","path",t),e instanceof Cy){const n=td.fromString(t,...r);return Ey(n),new Ay(e,null,new id(n))}{if(!(e instanceof Ay||e instanceof Ny))throw new Fc(Uc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(td.fromString(t,...r));return Ey(n),new Ay(e.firestore,e instanceof Ny?e.converter:null,new id(n))}}class Oy{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new jm(this,"async_queue_retry"),this.Xc=()=>{const e=Um();e&&kc("AsyncQueue","Visibility state changed to "+e.visibilityState),this.qo.Mo()};const e=Um();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=Um();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise((()=>{}));const t=new jc;return this.ta((()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Qc.push(e),this.ea())))}async ea(){if(0!==this.Qc.length){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(Bv){if(!pd(Bv))throw Bv;kc("AsyncQueue","Operation failed with retryable error: "+Bv)}this.Qc.length>0&&this.qo.No((()=>this.ea()))}}ta(e){const t=this.Gc.then((()=>(this.Hc=!0,e().catch((e=>{this.Wc=e,this.Hc=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Oc("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.Hc=!1,e))))));return this.Gc=t,t}enqueueAfterDelay(e,t,n){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const r=Eg.createAndSchedule(this,e,t,n,(e=>this.na(e)));return this.zc.push(r),r}Zc(){this.Wc&&Pc()}verifyOperationInProgress(){}async sa(){let e;do{e=this.Gc,await e}while(e!==this.Gc)}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then((()=>{this.zc.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()}))}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}class Ry extends Cy{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Oy,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Py(this),this._firestoreClient.terminate()}}function Dy(e){return e._firestoreClient||Py(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Py(e){var t,n,r;const i=e._freezeSettings(),o=function(e,t,n,r){return new Vd(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,yy(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new ly(e._authCredentials,e._appCheckCredentials,e._queue,o),(null===(n=i.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}class My{constructor(e){this._byteString=e}static fromBase64String(e){try{return new My(Rd.fromBase64String(e))}catch(e){throw new Fc(Uc.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new My(Rd.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ly{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Fc(Uc.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rd(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Uy{constructor(e){this._methodName=e}}class Fy{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Fc(Uc.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Fc(Uc.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Qc(this._lat,e._lat)||Qc(this._long,e._long)}}const jy=/^__.*__$/;class Vy{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new jf(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ff(e,this.data,t,this.fieldTransforms)}}class qy{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new jf(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function By(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Pc()}}class Hy{constructor(e,t,n,r,i,o){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.ua(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new Hy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.fa(e),r}da(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.ua(),r}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return ov(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(By(this.ca)&&jy.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class Gy{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Fm(e)}ya(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Hy({ca:e,methodName:t,ga:n,path:rd.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function zy(e){const t=e._freezeSettings(),n=Fm(e._databaseId);return new Gy(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Wy(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const s=e.ya(o.merge||o.mergeFields?2:0,t,n,i);tv("Data must be an object, but it was:",s,r);const a=Zy(r,s);let l,u;if(o.merge)l=new kd(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){const e=[];for(const r of o.mergeFields){const i=nv(t,r,n);if(!s.contains(i))throw new Fc(Uc.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));sv(e,i)||e.push(i)}l=new kd(e),u=s.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,u=s.fieldTransforms;return new Vy(new ih(a),l,u)}class Ky extends Uy{_toFieldTransform(e){if(2!==e.ca)throw 1===e.ca?e._a("".concat(this._methodName,"() can only appear at the top level of your update data")):e._a("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ky}}class Jy extends Uy{_toFieldTransform(e){return new xf(e.path,new Ef)}isEqual(e){return e instanceof Jy}}function Yy(e,t,n,r){const i=e.ya(1,t,n);tv("Data must be an object, but it was:",i,r);const o=[],s=ih.empty();_d(r,((e,r)=>{const a=iv(t,e,n);r=$o(r);const l=i.da(a);if(r instanceof Ky)o.push(a);else{const e=$y(r,l);null!=e&&(o.push(a),s.set(a,e))}}));const a=new kd(o);return new qy(s,a,i.fieldTransforms)}function Qy(e,t,n,r,i,o){const s=e.ya(1,t,n),a=[nv(t,r,n)],l=[i];if(o.length%2!=0)throw new Fc(Uc.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let h=0;h<o.length;h+=2)a.push(nv(t,o[h])),l.push(o[h+1]);const u=[],c=ih.empty();for(let h=a.length-1;h>=0;--h)if(!sv(u,a[h])){const e=a[h];let t=l[h];t=$o(t);const n=s.da(e);if(t instanceof Ky)u.push(e);else{const r=$y(t,n);null!=r&&(u.push(e),c.set(e,r))}}const d=new kd(u);return new qy(c,d,s.fieldTransforms)}function Xy(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return $y(n,e.ya(r?4:3,t))}function $y(e,t){if(ev(e=$o(e)))return tv("Unsupported field value:",t,e),Zy(e,t);if(e instanceof Uy)return function(e,t){if(!By(t.ca))throw t._a("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t._a("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.la&&4!==t.ca)throw t._a("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=$y(i,t.wa(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=$o(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return mf(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=$c.fromDate(e);return{timestampValue:wp(t.serializer,n)}}if(e instanceof $c){const n=new $c(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:wp(t.serializer,n)}}if(e instanceof Fy)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof My)return{bytesValue:Sp(t.serializer,e._byteString)};if(e instanceof Ay){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t._a("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Cp(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._a("Unsupported field value: ".concat(Sy(e)))}(e,t)}function Zy(e,t){const n={};return Td(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):_d(e,((e,r)=>{const i=$y(r,t.ha(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function ev(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof $c||e instanceof Fy||e instanceof My||e instanceof Ay||e instanceof Uy)}function tv(e,t,n){if(!ev(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Sy(n);throw"an object"===r?t._a(e+" a custom object"):t._a(e+" "+r)}}function nv(e,t,n){if((t=$o(t))instanceof Ly)return t._internalPath;if("string"==typeof t)return iv(e,t);throw ov("Field path arguments must be of type string or ",e,!1,void 0,n)}const rv=new RegExp("[~\\*/\\[\\]]");function iv(e,t,n){if(t.search(rv)>=0)throw ov("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new Ly(...t.split("."))._internalPath}catch(Xv){throw ov("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function ov(e,t,n,r,i){const o=r&&!r.isEmpty(),s=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=" in field ".concat(r)),s&&(l+=" in document ".concat(i)),l+=")"),new Fc(Uc.INVALID_ARGUMENT,a+e+l)}function sv(e,t){return e.some((e=>e.isEqual(t)))}class av{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ay(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new lv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(uv("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class lv extends av{data(){return super.data()}}function uv(e,t){return"string"==typeof t?iv(e,t):t instanceof Ly?t._internalPath:t._delegate._internalPath}function cv(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Fc(Uc.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class dv{}class hv extends dv{}class fv extends hv{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new fv(e,t,n)}_apply(e){const t=this._parse(e);return vv(e._query,t),new xy(e.firestore,e.converter,Hh(e._query,t))}_parse(e){const t=zy(e.firestore),n=function(e,t,n,r,i,o,s){let a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Fc(Uc.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(o,"' queries on documentId()."));if("in"===o||"not-in"===o){yv(s,o);const t=[];for(const n of s)t.push(gv(r,e,n));a={arrayValue:{values:t}}}else a=gv(r,e,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||yv(s,o),a=Xy(n,"where",s,"in"===o||"not-in"===o);return fh.create(i,o,a)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class pv extends dv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new pv(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:ph.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)vv(n,i),n=Hh(n,i)}(e._query,t),new xy(e.firestore,e.converter,Hh(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class mv extends hv{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new mv(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Fc(Uc.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Fc(Uc.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const r=new ch(t,n);return function(e,t){if(null===Fh(e)){const n=jh(e);null!==n&&bv(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new xy(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Ph(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function gv(e,t,n){if("string"==typeof(n=$o(n))){if(""===n)throw new Fc(Uc.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Vh(t)&&-1!==n.indexOf("/"))throw new Fc(Uc.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(td.fromString(n));if(!id.isDocumentKey(r))throw new Fc(Uc.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Qd(e,new id(r))}if(n instanceof Ay)return Qd(e,n._key);throw new Fc(Uc.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Sy(n),"."))}function yv(e,t){if(!Array.isArray(e)||0===e.length)throw new Fc(Uc.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function vv(e,t){if(t.isInequality()){const n=jh(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new Fc(Uc.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));const i=Fh(e);null!==i&&bv(e,r,i)}const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Fc(Uc.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Fc(Uc.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}function bv(e,t,n){if(!n.isEqual(t))throw new Fc(Uc.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}class Ev{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Hd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Md(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ld(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Pc()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return _d(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new Fy(Md(e.latitude),Md(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Fd(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(jd(e));default:return null}}convertTimestamp(e){const t=Pd(e);return new $c(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=td.fromString(e);Mc(Wp(n));const r=new qd(n.get(1),n.get(3)),i=new id(n.popFirst(5));return r.isEqual(t)||Oc("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function wv(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Sv{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class _v extends av{constructor(e,t,n,r,i,o){super(e,t,n,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Tv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(uv("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Tv extends _v{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Cv{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Sv(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new Tv(this._firestore,this._userDataWriter,n.key,n,new Sv(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Fc(Uc.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new Tv(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Sv(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new Tv(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Sv(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,o=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),o=n.indexOf(t.doc.key)),{type:Iv(t.type),doc:r,oldIndex:i,newIndex:o}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Iv(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Pc()}}class Av extends Ev{constructor(e){super(),this.firestore=e}convertBytes(e){return new My(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ay(this.firestore,null,t)}}function xv(e,t){return function(e,t){const n=new jc;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=iy(e);try{const e=await function(e,t){const n=Lc(e),r=$c.now(),i=t.reduce(((e,t)=>e.add(t.key)),cf());let o,s;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=ef(),l=cf();return n.Zi.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{o=i;const s=[];for(const e of t){const t=Lf(e,o.get(e.key).overlayedDocument);null!=t&&s.push(new jf(e.key,t,oh(t.value.mapValue),kf.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,s,t)})).next((t=>{s=t;const r=t.applyToLocalDocumentSet(o,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:s.batchId,changes:rf(o)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Tc[e.currentUser.toKey()];r||(r=new Cd(Qc)),r=r.insert(t,n),e.Tc[e.currentUser.toKey()]=r}(r,e.batchId,n),await ey(r,e.changes),await ag(r.remoteStore)}catch(e){const t=wg(e,"Failed to persist write");n.reject(t)}}(await py(e),t,n))),n.promise}(Dy(e),t)}!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Ac=e}("9.23.0"),Co(new Zo("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const o=e.getProvider("app").getImmediate(),s=new Ry(new Hc(e.getProvider("auth-internal")),new Kc(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Fc(Uc.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qd(e.options.projectId,t)}(o,r),o);return i=Object.assign({useFetchStreams:t},i),s._setSettings(i),s}),"PUBLIC").setMultipleInstances(!0)),ko(Cc,"3.13.0",e),ko(Cc,"3.13.0","esm2017")}();var Nv=n(579);const kv="AIzaSyANrXfoMwwKXLzrs53nR8zbCWuJmQ2a7t8",Ov=new class{constructor(e){var t;if(null==e.apiKey)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=null!==(t=e.vertexai)&&void 0!==t&&t,this.apiKey=e.apiKey;const n=h(e.httpOptions,e.vertexai,void 0,void 0);n&&(e.httpOptions?e.httpOptions.baseUrl=n:e.httpOptions={baseUrl:n}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new ii(this.apiKey);this.apiClient=new gr({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:"gl-node/web",uploader:new ei,downloader:new Qr}),this.models=new Rr(this.apiClient),this.live=new Cr(this.apiClient,r,new ti),this.batches=new Bt(this.apiClient),this.chats=new on(this.models,this.apiClient),this.caches=new Qt(this.apiClient),this.files=new un(this.apiClient),this.operations=new Dr(this.apiClient),this.authTokens=new Ur(this.apiClient),this.tunings=new Yr(this.apiClient),this.fileSearchStores=new qr(this.apiClient)}}({apiKey:kv}),Rv="extracted_vouchers",Dv=1200,Pv=function(e,t){const n="object"==typeof e?e:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Eo;const t=So.get(e);if(!t&&e===Eo&&hi())return No();if(!t)throw Ao.create("no-app",{appName:e});return t}(),r="string"==typeof e?e:t||"(default)",i=Io(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const e=Jo("firestore");e&&Iy(i,...e)}return i}(No({apiKey:"AIzaSyCqgdC3hX8bJ_Ef0aBo_rsW0TEZArmyvzQ",authDomain:"vdvoucher.firebaseapp.com",projectId:"vdvoucher",storageBucket:"vdvoucher.firebasestorage.app",messagingSenderId:"535315980318",appId:"1:535315980318:web:ac71d91380d51f1a7ace0f"}));async function Mv(e,t,n){try{const n=function(e,t){return{inlineData:{data:e,mimeType:t}}}(e,"image/jpeg"),r=await Ov.models.generateContent({model:"gemini-2.5-flash",contents:[n,{text:t}]});if(!r.text)throw new Error("Gemini tidak menghasilkan teks balasan.");return r.text}catch(r){throw console.error("Error memanggil Gemini untuk ".concat(n,":"),r),new Error("Gagal memanggil Gemini API untuk ".concat(n,". Pesan: ").concat(r.message||"Error tidak diketahui","."))}}function Lv(e){let{currentPage:t,handleNavigate:n}=e;return(0,Nv.jsx)("div",{className:"lg:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 z-50 shadow-2xl",children:(0,Nv.jsxs)("div",{className:"flex justify-around items-center h-16",children:[(0,Nv.jsxs)("button",{onClick:()=>n("extraction"),className:"flex flex-col items-center p-2 text-xs font-semibold transition duration-200 ".concat("extraction"===t?"text-navy-accent":"text-gray-500 hover:text-navy-accent"),children:[(0,Nv.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",viewBox:"0 0 20 20",fill:"currentColor",children:(0,Nv.jsx)("path",{d:"M7 3a1 1 0 000 2h6a1 1 0 100-2H7zM4 9a1 1 0 100 2h12a1 1 0 100-2H4zM7 15a1 1 0 100 2h6a1 1 0 100-2H7z"})}),(0,Nv.jsx)("span",{children:"Ekstraksi"})]}),(0,Nv.jsxs)("button",{onClick:()=>n("history"),className:"flex flex-col items-center p-2 text-xs font-semibold transition duration-200 ".concat("history"===t?"text-navy-accent":"text-gray-500 hover:text-navy-accent"),children:[(0,Nv.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:(0,Nv.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 10h16M4 14h16M4 18h16"})}),(0,Nv.jsx)("span",{children:"Arsip"})]}),(0,Nv.jsxs)("button",{onClick:()=>{localStorage.removeItem("isLoggedIn"),window.location.reload()},className:"flex flex-col items-center p-2 text-xs font-semibold transition duration-200 text-gray-500 hover:text-red-500",children:[(0,Nv.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Nv.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),(0,Nv.jsx)("span",{children:"Logout"})]})]})})}function Uv(e){let{userId:t,showStatus:n,handleNavigate:i}=e;const[o,s]=(0,r.useState)([]),[a,l]=(0,r.useState)(!0),[c,d]=(0,r.useState)(null),[h,f]=(0,r.useState)(null),[p,m]=(0,r.useState)(""),g=(0,r.useCallback)((async()=>{if(!t)return n("Gagal memuat: Pengguna tidak terautentikasi.","error"),void l(!1);l(!0),d(null);try{const e=function(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];t instanceof dv&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof pv)).length,n=e.filter((e=>e instanceof fv)).length;if(t>1||t>0&&n>0)throw new Fc(Uc.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)e=s._apply(e);return e}(function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=$o(e),by("collection","path",t),e instanceof Cy){const n=td.fromString(t,...r);return wy(n),new Ny(e,null,n)}{if(!(e instanceof Ay||e instanceof Ny))throw new Fc(Uc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(td.fromString(t,...r));return wy(n),new Ny(e.firestore,null,n)}}(Pv,Rv),function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=uv("orderBy",e);return mv._create(n,t)}("timestamp","desc")),t=await function(e){e=_y(e,xy);const t=_y(e.firestore,Ry),n=Dy(t),r=new Av(t);return cv(e._query),gy(n,e._query).then((n=>new Cv(t,r,e,n)))}(e),r=[];t.forEach((e=>{const t=e.data(),n=t.filename||"extracted_vouchers_".concat(y(t.timestamp).replace(/, /g,"_").replace(/:/g,"-"));r.push(u(u({id:e.id},t),{},{filename:n}))})),s(r),n("Berhasil memuat ".concat(r.length," riwayat ekstraksi."),"success")}catch(e){console.error("Error fetching history: ",e),d("Gagal memuat riwayat. Periksa koneksi Firestore Anda."),n("Gagal memuat riwayat: ".concat(e.message),"error")}finally{l(!1)}}),[t,n]);(0,r.useEffect)((()=>{g()}),[g]);const y=e=>{if(!e)return"N/A";return(e.toDate?e.toDate():new Date(e)).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})},v=async e=>{if(h===e){if(!p.trim())return void n("Nama file tidak boleh kosong.","error");l(!0);try{const t=ky(Pv,Rv,e);await function(e,t,n){e=_y(e,Ay);const r=_y(e.firestore,Ry),i=zy(r);let o;for(var s=arguments.length,a=new Array(s>3?s-3:0),l=3;l<s;l++)a[l-3]=arguments[l];return o="string"==typeof(t=$o(t))||t instanceof Ly?Qy(i,"updateDoc",e._key,t,n,a):Yy(i,"updateDoc",e._key,t),xv(r,[o.toMutation(e._key,kf.exists(!0))])}(t,{filename:p.trim()}),s((t=>t.map((t=>t.id===e?u(u({},t),{},{filename:p.trim()}):t)))),n("Nama file riwayat berhasil diperbarui menjadi ".concat(p.trim(),"."),"success"),f(null),m("")}catch(t){console.error("Error renaming document: ",t),n("Gagal memperbarui nama file: ".concat(t.message),"error")}finally{l(!1)}}else{const t=o.find((t=>t.id===e));t&&(m(t.filename.replace(/\.csv$/i,"")),f(e))}},b=async(e,t)=>{if(window.confirm('Anda yakin ingin menghapus riwayat ekstraksi "'.concat(t,'"? Aksi ini tidak dapat dibatalkan.'))){l(!0);try{await function(e){return xv(_y(e.firestore,Ry),[new Hf(e._key,kf.none())])}(ky(Pv,Rv,e)),s((t=>t.filter((t=>t.id!==e)))),n('Riwayat ekstraksi "'.concat(t,'" berhasil dihapus.'),"success")}catch(r){console.error("Error deleting document: ",r),n("Gagal menghapus riwayat: ".concat(r.message),"error")}finally{l(!1)}}},E=(0,Nv.jsxs)("div",{className:"hidden lg:flex w-64 bg-white p-6 flex-col h-screen sticky top-0 shadow-lg border-r border-gray-200",children:[(0,Nv.jsxs)("div",{className:"flex items-center mb-10 pb-4 border-b border-gray-200",children:[(0,Nv.jsx)("svg",{className:"w-8 h-8 text-navy-accent mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Nv.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 7a2 2 0 012 2v2m4-2h-3m4 2v7a2 2 0 01-2 2H5a2 2 0 01-2-2V9a2 2 0 012-2h2m2 4h10m0 0l-3 3m3-3l-3-3"})}),(0,Nv.jsxs)("h1",{className:"text-xl font-extrabold text-gray-800",children:["Voucher ",(0,Nv.jsx)("span",{className:"text-navy-accent",children:"Panel"})]})]}),(0,Nv.jsxs)("nav",{className:"space-y-2 flex-grow",children:[(0,Nv.jsxs)("a",{href:"#",onClick:e=>{e.preventDefault(),i("extraction")},className:"flex items-center p-3 text-sm font-semibold text-gray-700 hover:bg-gray-100 rounded-lg transition duration-200",children:[(0,Nv.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-3",viewBox:"0 0 20 20",fill:"currentColor",children:(0,Nv.jsx)("path",{d:"M7 3a1 1 0 000 2h6a1 1 0 100-2H7zM4 9a1 1 0 100 2h12a1 1 0 100-2H4zM7 15a1 1 0 100 2h6a1 1 0 100-2H7z"})}),(0,Nv.jsx)("span",{children:"Ekstraksi"})]}),(0,Nv.jsxs)("a",{href:"#",onClick:e=>e.preventDefault(),className:"flex items-center p-3 text-sm font-semibold text-white bg-navy-accent rounded-lg shadow-md transition duration-200",children:[(0,Nv.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:(0,Nv.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 10h16M4 14h16M4 18h16"})}),(0,Nv.jsx)("span",{children:"Arsip / History (Active)"})]})]}),(0,Nv.jsxs)("div",{className:"mt-auto pt-4 border-t border-gray-200",children:[(0,Nv.jsxs)("p",{className:"text-xs text-gray-500 mb-2",children:["Status: ",t?(0,Nv.jsx)("span",{className:"text-green-600 font-medium",children:"Connected"}):(0,Nv.jsx)("span",{className:"text-yellow-600 font-medium",children:"Connecting..."})]}),(0,Nv.jsxs)("button",{onClick:()=>{localStorage.removeItem("isLoggedIn"),window.location.reload()},className:"w-full py-2 bg-red-500 text-white text-sm font-semibold rounded-lg hover:bg-red-600 transition duration-200 shadow-md",children:[(0,Nv.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 inline mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Nv.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Logout"]})]})]}),w=()=>a&&0===o.length?(0,Nv.jsxs)("div",{className:"text-center py-20",children:[(0,Nv.jsxs)("svg",{className:"animate-spin mx-auto h-10 w-10 text-navy-accent",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,Nv.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Nv.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,Nv.jsx)("p",{className:"mt-3 text-lg text-gray-600",children:"Memuat riwayat ekstraksi..."})]}):c?(0,Nv.jsxs)("div",{className:"text-center py-20 text-red-600",children:[(0,Nv.jsx)("p",{className:"text-xl font-bold",children:"Terjadi Kesalahan"}),(0,Nv.jsx)("p",{children:c})]}):0===o.length?(0,Nv.jsxs)("div",{className:"text-center py-20 text-gray-500",children:[(0,Nv.jsx)("p",{className:"text-xl font-bold",children:"Tidak Ada Riwayat"}),(0,Nv.jsx)("p",{children:"Mulai ekstraksi voucher pertama Anda di halaman Ekstraksi. Hasil akan tersimpan otomatis."})]}):(0,Nv.jsx)("div",{className:"space-y-4",children:o.map(((e,t)=>(0,Nv.jsxs)("div",{className:"main-card p-5 flex flex-col justify-between items-start hover:shadow-lg transition duration-300",children:[(0,Nv.jsxs)("div",{className:"w-full",children:[(0,Nv.jsxs)("div",{className:"flex items-center justify-between mb-3 border-b pb-3",children:[(0,Nv.jsxs)("div",{className:"flex items-baseline",children:[(0,Nv.jsx)("span",{className:"text-3xl font-extrabold text-navy-accent mr-3",children:e.count}),(0,Nv.jsx)("span",{className:"text-lg font-semibold text-gray-700",children:"Kode Unik Diekstrak"})]}),(0,Nv.jsx)("p",{className:"text-sm font-medium text-gray-800",children:y(e.timestamp)})]}),(0,Nv.jsx)("div",{className:"flex items-center mb-3",children:h===e.id?(0,Nv.jsxs)(Nv.Fragment,{children:[(0,Nv.jsx)("input",{type:"text",value:p,onChange:e=>m(e.target.value),className:"p-1 border border-gray-400 rounded-lg text-sm w-full font-semibold focus:ring-navy-accent focus:border-navy-accent mr-2",placeholder:"Masukkan nama file baru",disabled:a}),(0,Nv.jsx)("button",{onClick:()=>v(e.id),className:"px-3 py-1 bg-green-500 text-white text-xs font-semibold rounded-lg hover:bg-green-600 transition disabled:opacity-50",disabled:a,children:"Simpan"}),(0,Nv.jsx)("button",{onClick:()=>{f(null),m("")},className:"ml-2 px-3 py-1 bg-gray-500 text-white text-xs font-semibold rounded-lg hover:bg-gray-600 transition disabled:opacity-50",disabled:a,children:"Batal"})]}):(0,Nv.jsxs)(Nv.Fragment,{children:[(0,Nv.jsxs)("p",{className:"text-sm text-gray-700 font-semibold truncate mr-3",children:["Nama File: ",(0,Nv.jsxs)("span",{className:"text-navy-accent",children:[e.filename,".csv"]})]}),(0,Nv.jsx)("button",{onClick:()=>v(e.id),className:"px-2 py-0.5 bg-gray-200 text-gray-700 text-xs font-semibold rounded-md hover:bg-gray-300 transition",disabled:a,title:"Edit Nama File",children:(0,Nv.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 inline",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Nv.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})})]})}),(0,Nv.jsxs)("p",{className:"text-sm text-gray-500 mb-4",children:[(0,Nv.jsx)("span",{className:"font-semibold",children:"Sumber:"})," Dari ",e.sourceFiles.length," file (misalnya: ",e.sourceFiles.slice(0,3).join(", "),e.sourceFiles.length>3&&" dan ".concat(e.sourceFiles.length-3," file lainnya."),")"]})]}),(0,Nv.jsxs)("div",{className:"w-full flex flex-wrap justify-end gap-3 border-t pt-4",children:[(0,Nv.jsxs)("button",{onClick:()=>((e,t)=>{if(0===e.length)return;const r=e.map((e=>'"'.concat(e,'"'))).join("\n"),i=new Blob([r],{type:"text/csv;charset=utf-8;"}),o=URL.createObjectURL(i),s=document.createElement("a"),a=t.trim().replace(/\.csv$/i,"")||"extracted_vouchers_download";s.setAttribute("href",o),s.setAttribute("download","".concat(a,".csv")),s.style.visibility="hidden",document.body.appendChild(s),s.click(),document.body.removeChild(s),n("File CSV riwayat berhasil diunduh.","success")})(e.codes,e.filename),className:"px-4 py-2 bg-gold-accent text-navy-accent text-sm font-semibold rounded-lg hover:bg-yellow-500 transition shadow-md flex-grow sm:flex-grow-0",disabled:a,children:[(0,Nv.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 inline mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Nv.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Unduh CSV (",e.count,")"]}),(0,Nv.jsxs)("button",{onClick:()=>b(e.id,e.filename),className:"px-4 py-2 bg-red-500 text-white text-sm font-semibold rounded-lg hover:bg-red-600 transition shadow-md flex-grow sm:flex-grow-0",disabled:a,children:[(0,Nv.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 inline mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Nv.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Hapus"]})]})]},e.id)))});return(0,Nv.jsxs)("div",{className:"min-h-screen bg-gray-50 flex",children:[(0,Nv.jsx)("style",{jsx:!0,global:!0,children:"\n                :root {\n                    --color-navy-accent: #0f172a; \n                    --color-gold-accent: #fbbf24; \n                    --color-main-bg: #ffffff; \n                    --color-panel-bg: #f9fafb; \n                }\n                .text-navy-accent { color: var(--color-navy-accent); }\n                .bg-navy-accent { background-color: var(--color-navy-accent); }\n                .bg-gold-accent { background-color: var(--color-gold-accent); }\n                .main-card {\n                    background-color: var(--color-main-bg); \n                    border-radius: 12px;\n                    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.06); \n                    color: #1f2937; \n                    border: 1px solid #f3f4f6; \n                }\n                .text-title { color: var(--color-navy-accent); }\n            "}),E,(0,Nv.jsxs)("div",{className:"flex-grow p-5 lg:p-10 bg-gray-50 pb-20",children:[(0,Nv.jsxs)("header",{className:"mb-6 lg:mb-10 flex flex-col sm:flex-row justify-between items-start sm:items-center pb-4 border-b border-gray-200",children:[(0,Nv.jsx)("h2",{className:"text-2xl sm:text-3xl font-light text-gray-800 tracking-wider mb-3 sm:mb-0",children:"Riwayat Ekstraksi"}),(0,Nv.jsxs)("button",{onClick:()=>g(),className:"flex items-center px-3 py-1.5 sm:px-4 sm:py-2 bg-gray-200 text-gray-700 text-sm font-semibold rounded-lg hover:bg-gray-300 transition disabled:opacity-50",disabled:a,children:[(0,Nv.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1 ".concat(a?"animate-spin":""),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Nv.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.962 8.962 0 0112 20c-3.132 0-6.062-1.233-8-3.232l1.424-1.424M14 12V4m-2 2h6"})}),"Refresh Data"]})]}),(0,Nv.jsx)(w,{})]})]})}function Fv(e){let{showStatus:t,userId:n,handleLogout:i,currentPage:o,handleNavigate:s}=e;const[a,l]=(0,r.useState)([]),[u,c]=(0,r.useState)([]),[d,h]=(0,r.useState)([]),[f,p]=(0,r.useState)([]),[m,g]=(0,r.useState)("Cari dan ekstrak **HANYA urutan angka yang tepat 18 digit** dari area bawah setiap voucher. Kualitas gambar sangat penting. Berikan HANYA KODE 18 digit tersebut (satu per baris). Abaikan SEMUA angka lain (seperti 12 digit barcode, tanggal, atau nomor seri pendek)."),[y,v]=(0,r.useState)(!1),[b,E]=(0,r.useState)(0),[w,S]=(0,r.useState)(!1),[_,T]=(0,r.useState)("Hasil ekstraksi kode unik akan tampil di sini, satu per baris."),[C,I]=(0,r.useState)(!1),[A,x]=(0,r.useState)(""),[N,k]=(0,r.useState)(new Date);(0,r.useEffect)((()=>{const e=setInterval((()=>{k(new Date)}),1e3);return()=>clearInterval(e)}),[]);const O=d.reduce(((e,t)=>(e.uniqueSet.has(t.code)?e.duplicateList.push(t):(e.uniqueSet.add(t.code),e.uniqueList.push(t)),e)),{uniqueSet:new Set,uniqueList:[],duplicateList:[]}),R=O.uniqueList.length,D=(0,r.useCallback)((async(e,r,i)=>{if(0===e.uniqueList.length)return void t("Tidak ada kode unik untuk disimpan.","info");if(!n)return void t("Gagal menyimpan: Pengguna tidak terautentikasi.","error");const o={userId:n,codes:e.uniqueList.map((e=>e.code)),count:e.uniqueList.length,sourceFiles:r.map((e=>e.name)),filename:i.trim()||"extracted_vouchers_".concat((new Date).toISOString().slice(0,10)),timestamp:new Jy("serverTimestamp")};try{const e=ky(Pv,Rv,"extraction-".concat(Date.now()));await function(e,t,n){e=_y(e,Ay);const r=_y(e.firestore,Ry),i=wv(e.converter,t,n);return xv(r,[Wy(zy(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,kf.none())])}(e,o),t("\u2705 ".concat(o.count," kode unik berhasil disimpan ke Firestore!"),"success")}catch(s){console.error("Error saving document to Firestore: ",s),t("Gagal menyimpan data ke Firestore. Pesan: ".concat(s.message),"error")}}),[n,t]),P=(0,r.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"full";h([]),p([]),T("Hasil ekstraksi kode unik akan tampil di sini, satu per baris."),"full"===e&&(l([]),c([]),x("")),S(!1),E(0)}),[]),M=()=>{const e=O.duplicateList;if(0===e.length)return{display:"hidden",text:"Tidak ada instance kode duplikat yang terdeteksi."};return{display:"",text:e.map((e=>{var t;return"".concat(e.code," (File: ").concat((null===(t=a[e.fileIndex])||void 0===t?void 0:t.name)||"N/A",")")})).join("\n")}},L=()=>{const e=(e=>{const t=[],n=[4,5,6],r=new Set;for(let i=0;i<e.length;i++)for(let o=i+1;o<e.length;o++){const s=e[i].code,a=e[o].code;if(r.has("".concat(s,"|").concat(a))||r.has("".concat(a,"|").concat(s)))continue;let l=!1,u=[];for(const e of n)s.substring(0,e)===a.substring(0,e)&&(l=!0,u.push("Awal ".concat(e," digit"))),s.substring(18-e)===a.substring(18-e)&&(l=!0,u.push("Akhir ".concat(e," digit")));l&&(t.push("".concat(s," vs ").concat(a," (").concat([...new Set(u)].join(", "),")")),r.add("".concat(s,"|").concat(a)))}return t})(O.uniqueList);return 0===e.length?{display:"hidden",text:"Tidak ada potensi duplikat yang terdeteksi."}:{display:"",text:e.join("\n")}};return(0,Nv.jsxs)("div",{className:"min-h-screen bg-gray-50 flex",children:[(0,Nv.jsx)("style",{jsx:!0,global:!0,children:"\n                :root {\n                    --color-navy-accent: #0f172a; \n                    --color-gold-accent: #fbbf24; \n                    --color-main-bg: #ffffff; \n                    --color-panel-bg: #f9fafb; \n                }\n                .text-navy-accent { color: var(--color-navy-accent); }\n                .bg-navy-accent { background-color: var(--color-navy-accent); }\n                .bg-gold-accent { background-color: var(--color-gold-accent); }\n                .main-card {\n                    background-color: var(--color-main-bg); \n                    border-radius: 12px;\n                    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.06); \n                    color: #1f2937; \n                    border: 1px solid #f3f4f6; \n                }\n                .text-title { color: var(--color-navy-accent); }\n                .custom-file-upload { \n                    border: 2px dashed #9ca3af; \n                    background-color: #f3f4f6; \n                    padding: 2.5rem;\n                    text-align: center;\n                    cursor: pointer;\n                    border-radius: 8px;\n                    transition: border-color 0.3s, background-color 0.3s;\n                }\n                .custom-file-upload:hover { border-color: var(--color-navy-accent); background-color: #e5e7eb; }\n                #image-upload { display: none; }\n                /* RESPONSIVE THUMBNAIL SIZE */\n                .image-thumbnail-wrapper {\n                    border: 1px solid #d1d5db; \n                    width: 80px; /* Smaller for mobile */\n                    height: 80px; /* Smaller for mobile */\n                    margin: 4px; /* Smaller margin for mobile */\n                    border-radius: 8px;\n                    overflow: hidden;\n                    box-shadow: 0 1px 2px rgba(0,0,0,0.05);\n                    position: relative;\n                }\n                @media (min-width: 1024px) { /* Restore size for desktop */\n                     .image-thumbnail-wrapper {\n                        width: 100px;\n                        height: 100px;\n                        margin: 8px;\n                    }\n                }\n                .image-thumbnail {\n                    width: 100%;\n                    height: 100%;\n                    object-fit: cover;\n                }\n                .remove-image-button {\n                    position: absolute;\n                    top: 4px;\n                    right: 4px;\n                    width: 20px;\n                    height: 20px;\n                    border-radius: 50%;\n                    background-color: rgba(239, 68, 68, 0.9);\n                    color: white;\n                    border: 1px solid white;\n                    cursor: pointer;\n                    line-height: 1;\n                    padding: 0;\n                }\n                .pulse-ready {\n                    background-color: var(--color-gold-accent); \n                    color: var(--color-navy-accent); \n                    animation: pulse 1.5s infinite;\n                }\n                .pulse-ready:hover { background-color: #f59e0b; }\n                @keyframes pulse {\n                    0% { box-shadow: 0 0 0 0 rgba(251, 191, 36, 0.5); }\n                    70% { box-shadow: 0 0 0 10px rgba(251, 191, 36, 0); }\n                    100% { box-shadow: 0 0 0 0 rgba(251, 191, 36, 0); }\n                }\n                .total-count-display {\n                    font-size: 2rem;\n                    color: var(--color-navy-accent); \n                    font-weight: 800;\n                    margin-left: 8px;\n                }\n                .dot {\n                    background-color: white;\n                    height: 8px;\n                    width: 8px;\n                    border-radius: 50%;\n                    margin: 0 2px;\n                    animation: dot-loading 1.4s infinite ease-in-out both;\n                }\n                .dot:nth-child(1) { animation-delay: -0.32s; }\n                    .dot:nth-child(2) { animation-delay: -0.16s; }\n                    @keyframes dot-loading {\n                        0%, 80%, 100% { transform: scale(0); }\n                        40% { transform: scale(1.0); }\n                    }\n                "}),(0,Nv.jsxs)("div",{className:"hidden lg:flex w-64 bg-white p-6 flex-col h-screen sticky top-0 shadow-lg border-r border-gray-200",children:[(0,Nv.jsxs)("div",{className:"flex items-center mb-10 pb-4 border-b border-gray-200",children:[(0,Nv.jsx)("svg",{className:"w-8 h-8 text-navy-accent mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Nv.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 7a2 2 0 012 2v2m4-2h-3m4 2v7a2 2 0 01-2 2H5a2 2 0 01-2-2V9a2 2 0 012-2h2m2 4h10m0 0l-3 3m3-3l-3-3"})}),(0,Nv.jsxs)("h1",{className:"text-xl font-extrabold text-gray-800",children:["Voucher ",(0,Nv.jsx)("span",{className:"text-navy-accent",children:"Panel"})]})]}),(0,Nv.jsxs)("nav",{className:"space-y-2 flex-grow",children:[(0,Nv.jsxs)("a",{href:"#",onClick:e=>e.preventDefault(),className:"flex items-center p-3 text-sm font-semibold text-white bg-navy-accent rounded-lg shadow-md transition duration-200",children:[(0,Nv.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-3",viewBox:"0 0 20 20",fill:"currentColor",children:(0,Nv.jsx)("path",{d:"M7 3a1 1 0 000 2h6a1 1 0 100-2H7zM4 9a1 1 0 100 2h12a1 1 0 100-2H4zM7 15a1 1 0 100 2h6a1 1 0 100-2H7z"})}),(0,Nv.jsx)("span",{children:"Ekstraksi (Active)"})]}),(0,Nv.jsxs)("a",{href:"#",onClick:e=>{e.preventDefault(),s("history")},className:"flex items-center p-3 text-sm font-semibold text-gray-700 hover:bg-gray-100 rounded-lg transition duration-200",children:[(0,Nv.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:(0,Nv.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 10h16M4 14h16M4 18h16"})}),(0,Nv.jsx)("span",{children:"Arsip / History"})]})]}),(0,Nv.jsxs)("div",{className:"mt-auto pt-4 border-t border-gray-200",children:[(0,Nv.jsxs)("p",{className:"text-xs text-gray-500 mb-2",children:["Status: ",n?(0,Nv.jsx)("span",{className:"text-green-600 font-medium",children:"Connected"}):(0,Nv.jsx)("span",{className:"text-yellow-600 font-medium",children:"Connecting..."})]}),(0,Nv.jsxs)("button",{onClick:i,className:"w-full py-2 bg-red-500 text-white text-sm font-semibold rounded-lg hover:bg-red-600 transition duration-200 shadow-md",children:[(0,Nv.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 inline mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Nv.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Logout"]})]})]}),(0,Nv.jsxs)("div",{className:"flex-grow p-5 lg:p-10 bg-gray-50 pb-20",children:[(0,Nv.jsxs)("header",{className:"mb-6 lg:mb-10 flex flex-col sm:flex-row justify-between items-start sm:items-center pb-4 border-b border-gray-200",children:[(0,Nv.jsx)("h2",{className:"text-2xl sm:text-3xl font-light text-gray-800 tracking-wider mb-3 sm:mb-0",children:"Dashboard Ekstraksi"}),(0,Nv.jsxs)("p",{className:"text-sm text-gray-500",children:["Panel v1.0 | Selamat datang, ",(0,Nv.jsx)("span",{className:"font-semibold",children:"Tampan"})]})]}),(0,Nv.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 lg:gap-8 mb-6 lg:mb-10",children:[(0,Nv.jsxs)("div",{className:"main-card p-4 lg:p-6 border-l-4 border-navy-accent hover:shadow-lg transition duration-300",children:[(0,Nv.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Total File Diunggah"}),(0,Nv.jsxs)("div",{className:"flex items-center mt-1",children:[(0,Nv.jsx)("span",{className:"text-3xl lg:text-4xl font-extrabold text-gray-800",children:a.length}),(0,Nv.jsx)("span",{className:"ml-2 text-sm text-navy-accent font-semibold",children:"Gambar"})]})]}),(0,Nv.jsxs)("div",{className:"main-card p-4 lg:p-6 border-l-4 border-gold-accent hover:shadow-lg transition duration-300",children:[(0,Nv.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Kode Unik Ditemukan"}),(0,Nv.jsxs)("div",{className:"flex items-center mt-1",children:[(0,Nv.jsx)("span",{className:"text-3xl lg:text-4xl font-extrabold text-gray-800",children:R}),(0,Nv.jsx)("span",{className:"ml-2 text-sm text-gold-accent font-semibold",children:"Kode 18 Digit"})]})]}),(0,Nv.jsxs)("div",{className:"main-card p-4 lg:p-6 border-l-4 border-gray-300 hover:shadow-lg transition duration-300",children:[(0,Nv.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Aktivitas Terkini"}),(0,Nv.jsxs)("div",{className:"mt-1",children:[(0,Nv.jsx)("span",{className:"text-base lg:text-lg font-extrabold text-gray-800 block",children:(U=N,new Intl.DateTimeFormat("id-ID",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).format(U))}),(0,Nv.jsx)("span",{className:"text-xs text-green-500 font-semibold block mt-1",children:n?"Firestore Aktif":"Menunggu Koneksi"})]})]})]}),(0,Nv.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,Nv.jsxs)("div",{className:"lg:col-span-1 space-y-8",children:[(0,Nv.jsxs)("div",{className:"main-card p-6",children:[(0,Nv.jsxs)("h2",{className:"text-xl font-bold text-title mb-4 flex items-center border-b border-gray-200 pb-3",children:[(0,Nv.jsx)("span",{className:"bg-navy-accent text-white rounded-full w-6 h-6 flex items-center justify-center mr-3 text-sm font-bold",children:"1"}),"Unggah File Voucher"]}),(0,Nv.jsxs)("label",{htmlFor:"image-upload",className:"custom-file-upload block mb-4",children:[(0,Nv.jsx)("svg",{className:"mx-auto h-10 w-10 text-navy-accent mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Nv.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,Nv.jsx)("span",{className:"font-bold text-lg text-gray-700",children:"Klik atau Seret"}),(0,Nv.jsx)("span",{id:"file-name",className:"block text-sm text-gray-500 mt-1",children:a.length>0?"".concat(a.length," file dipilih."):"Pilih gambar voucher (JPG/PNG)."})]}),(0,Nv.jsx)("input",{type:"file",id:"image-upload",accept:"image/*",multiple:!0,onChange:async e=>{const n=Array.from(e.target.files);if(0===n.length)return;P("soft");const r=[...a,...n];l(r);try{const e=n.map((e=>(e=>new Promise(((t,n)=>{const r=new FileReader;r.onload=r=>{const i=new Image;i.onload=()=>{const n=document.createElement("canvas"),r=n.getContext("2d");let o=i.width,s=i.height;o>Dv&&(s*=Dv/o,o=Dv),n.width=o,n.height=s,r.drawImage(i,0,0,o,s);const a=n.toDataURL("image/jpeg",.8),l=a.split(",")[1];t({base64:l,dataURL:a,name:e.name,mimeType:"image/jpeg"})},i.onerror=n,i.src=r.target.result},r.onerror=n,r.readAsDataURL(e)})))(e))),r=await Promise.all(e);c((e=>[...e,...r])),t("Berhasil mengunggah dan mengoptimasi ".concat(n.length," gambar. \u2705 Siap memproses."),"success")}catch(i){console.error("Error processing files:",i),t("Gagal memproses salah satu gambar. Coba lagi.","error")}}}),(0,Nv.jsx)("div",{id:"image-preview-container",className:"mt-4 flex flex-wrap justify-center p-2 border border-gray-200 rounded-lg ".concat(0===a.length?"hidden":"bg-gray-100"),children:u.map(((e,t)=>(0,Nv.jsxs)("div",{className:"image-thumbnail-wrapper","data-index":t,children:[(0,Nv.jsx)("img",{src:e.dataURL,className:"image-thumbnail",alt:"Voucher Image ".concat(t+1)}),(0,Nv.jsx)("button",{className:"remove-image-button absolute flex items-center justify-center",onClick:()=>{return e=t,l((t=>t.filter(((t,n)=>n!==e)))),c((t=>t.filter(((t,n)=>n!==e)))),void(d.length>0&&P("soft"));var e},children:(0,Nv.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Nv.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]},t)))})]}),(0,Nv.jsxs)("div",{className:"main-card p-6",children:[(0,Nv.jsxs)("h2",{className:"text-xl font-bold text-title mb-4 flex items-center border-b border-gray-200 pb-3",children:[(0,Nv.jsx)("span",{className:"bg-navy-accent text-white rounded-full w-6 h-6 flex items-center justify-center mr-3 text-sm font-bold",children:"2"}),"Ekstraksi AI"]}),(0,Nv.jsx)("label",{htmlFor:"prompt",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Instruksi AI"}),(0,Nv.jsx)("textarea",{id:"prompt",rows:"3",className:"w-full p-3 border border-gray-300 bg-white rounded-lg focus:ring-navy-accent focus:border-navy-accent transition duration-150 text-sm shadow-sm resize-none text-gray-800",value:m,onChange:e=>g(e.target.value)}),(0,Nv.jsx)("p",{className:"text-xs text-gray-500 mt-1 mb-4",children:"Pastikan kriteria kode 18 digit sudah benar."}),(0,Nv.jsxs)("button",{id:"generate-button",className:"w-full py-3 text-white font-bold text-lg rounded-lg shadow-md disabled:opacity-50 disabled:shadow-none disabled:animate-none flex items-center justify-center transition duration-300 ".concat(a.length>0&&!y?"pulse-ready text-navy-accent":"bg-gray-400 text-gray-700"),disabled:y||0===a.length,onClick:async()=>{if(0===a.length)return void t("Mohon unggah minimal satu gambar voucher.","error");P("soft"),v(!0),t("Memulai ekstraksi untuk ".concat(a.length," gambar via Gemini API..."),"info");const e=m,n=[],r=[];let i=!1;try{for(let i=0;i<u.length;i++){const o=u[i],s=a[i].name,l=(i+1)/u.length*100;E(l),t("[".concat(i+1,"/").concat(u.length,"] Memproses file: ").concat(s,"..."),"info");const c=(await Mv(o.base64,e,s)).split("\n").map((e=>e.trim())).filter((e=>e.length>0)),d=c.filter((e=>18===e.length&&/^\d+$/.test(e)));r.push({file:a[i],extractedCodes:d,allSequences:c}),d.forEach((e=>{n.push({code:e,source:s,id:"".concat(s,"-").concat(i,"-").concat(Math.random()),fileIndex:i})}))}h(n),p(r);const o=n.reduce(((e,t)=>(e.set.has(t.code)||(e.list.push(t),e.set.add(t.code)),e)),{set:new Set,list:[]}),s=o.list.map((e=>e.code)).join("\n");T(s||"Tidak ada kode 18 digit yang terdeteksi."),t("\u2705 Ekstraksi selesai! Ditemukan ".concat(o.list.length," kode unik 18 digit."),"success"),await D({uniqueList:o.list,uniqueSet:o.set},a,A),i=!0}catch(o){console.error("Kesalahan saat memproses gambar:",o),t("Terjadi kesalahan: ".concat(o.message,". Ekstraksi gagal."),"error")}finally{v(!1),E(0)}},children:[(0,Nv.jsxs)("div",{id:"loading-spinner",className:"flex items-end justify-center -ml-1 mr-3 h-5 w-5 ".concat(y?"":"hidden"),children:[(0,Nv.jsx)("div",{className:"dot"}),(0,Nv.jsx)("div",{className:"dot"}),(0,Nv.jsx)("div",{className:"dot"})]}),(0,Nv.jsx)("span",{id:"button-text",children:y?"Memproses dengan Gemini...":"Mulai Proses Ekstraksi"})]}),(0,Nv.jsx)("div",{id:"progress-container",className:"mt-3 h-1.5 bg-gray-200 rounded-full overflow-hidden ".concat(y?"":"hidden"),children:(0,Nv.jsx)("div",{id:"progress-bar",className:"h-full bg-gold-accent transition-all duration-300 ease-out",style:{width:"".concat(b,"%")}})})]})]}),(0,Nv.jsxs)("div",{className:"lg:col-span-2 space-y-8",children:[(0,Nv.jsxs)("div",{id:"unique-codes-card",className:"main-card p-6",children:[(0,Nv.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 border-b border-gray-200 pb-3",children:[(0,Nv.jsxs)("h2",{className:"text-xl font-bold text-title flex items-center mb-2 sm:mb-0",children:[(0,Nv.jsx)("span",{className:"bg-navy-accent text-white rounded-full w-6 h-6 flex items-center justify-center mr-3 text-sm font-bold",children:"3"}),"Kode Unik Ditemukan"]}),(0,Nv.jsxs)("div",{className:"flex items-center p-2 rounded-md bg-gray-100 border border-gray-200",children:[(0,Nv.jsx)("p",{className:"text-base font-semibold text-gray-700",children:"Total Unik:"}),(0,Nv.jsx)("span",{id:"code-count",className:"total-count-display text-gold-accent",children:R})]})]}),(0,Nv.jsx)("textarea",{id:"unique-code-display",rows:"10",className:"w-full p-3 border rounded-lg font-mono text-sm resize-none transition duration-150 ".concat(w?"bg-yellow-50 border-yellow-500 shadow-xl text-gray-800":"bg-gray-100 border-gray-300 text-gray-800"),readOnly:!w,value:_,onChange:e=>T(e.target.value)}),(0,Nv.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Daftar kode unik 18 digit."}),(0,Nv.jsxs)("div",{className:"flex flex-col sm:flex-row justify-end items-end sm:items-center space-y-3 sm:space-y-0 sm:space-x-3 mt-5 border-t border-gray-200 pt-5",children:[(0,Nv.jsx)("input",{type:"text",id:"filename-input",placeholder:"Nama file CSV (Opsional)",className:"p-2 border border-gray-300 bg-white rounded-lg text-sm w-full sm:w-48 focus:border-navy-accent focus:ring-navy-accent transition text-gray-800",value:A,onChange:e=>x(e.target.value)}),(0,Nv.jsxs)("button",{id:"edit-button",className:"px-4 py-2.5 text-white text-sm font-semibold rounded-lg shadow-md transition duration-200 disabled:opacity-50 disabled:bg-gray-300 disabled:text-gray-500 w-full sm:w-auto \n                                        ".concat(w?"bg-green-600 hover:bg-green-700":"bg-yellow-600 hover:bg-yellow-700"),disabled:0===R||y,onClick:()=>{S((e=>{const n=!e;if(n)t("Mode Edit Aktif. Harap koreksi kode 18 digit Anda.","info");else{const e=_.split("\n").map((e=>e.trim())).filter((e=>e.match(/^\d{18}$/)));T(e.join("\n")),t("Daftar kode unik divalidasi dan siap disalin/diunduh.","success")}return n}))},children:[(0,Nv.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 inline mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Nv.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),w?"Selesai Edit":"Mode Edit"]}),(0,Nv.jsxs)("button",{id:"copy-button",className:"px-4 py-2.5 bg-navy-accent text-white text-sm font-semibold rounded-lg shadow-md hover:bg-slate-700 transition duration-200 disabled:opacity-50 disabled:bg-gray-300 disabled:text-gray-500 w-full sm:w-auto",disabled:0===R||y||w,onClick:()=>{const e=_.trim();e&&navigator.clipboard.writeText(e).then((()=>{t("Daftar kode unik berhasil disalin!","success")})).catch((e=>{console.error("Failed to copy text:",e),t("Gagal menyalin. Harap salin manual dari kotak teks.","error")}))},children:[(0,Nv.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 inline mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Nv.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2m-2 2h2m-2 2h2m-2 2h2m-2 2h2"})}),"Salin"]}),(0,Nv.jsxs)("button",{id:"download-button",className:"px-4 py-2.5 bg-gray-500 text-white text-sm font-semibold rounded-lg shadow-md hover:bg-gray-600 transition duration-200 disabled:opacity-50 disabled:bg-gray-300 disabled:text-gray-500 w-full sm:w-auto",disabled:0===R||y||w,onClick:()=>{const e=_.trim();if(e){const n=e.split("\n").filter((e=>e)),r=n.map((e=>'"'.concat(e,'"'))).join("\n"),i=new Blob([r],{type:"text/csv;charset=utf-8;"}),o=URL.createObjectURL(i),s=document.createElement("a"),a=A.trim()||"extracted_vouchers";s.setAttribute("href",o),s.setAttribute("download","".concat(a,".csv")),s.style.visibility="hidden",document.body.appendChild(s),s.click(),document.body.removeChild(s),t("File CSV berhasil diunduh.","success")}},children:[(0,Nv.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 inline mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Nv.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Unduh CSV"]})]})]}),(0,Nv.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,Nv.jsxs)("div",{id:"duplicate-codes-card",className:"main-card p-6 border-l-4 border-red-500 ".concat("hidden"===M().display?"opacity-70":""),children:[(0,Nv.jsxs)("h2",{className:"text-lg font-bold text-red-700 mb-3 flex items-center border-b border-gray-200 pb-2",children:[(0,Nv.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Nv.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})}),"Duplikat Eksak"]}),(0,Nv.jsx)("p",{className:"text-xs text-red-600 mb-3",children:"Kode ini terdeteksi di file berbeda. Tidak dihitung unik."}),(0,Nv.jsx)("textarea",{id:"duplicate-code-display",rows:"5",className:"w-full p-3 border border-red-300 rounded-lg bg-red-50 text-red-700 font-mono text-xs resize-none",readOnly:!0,value:M().text})]}),(0,Nv.jsxs)("div",{id:"potential-duplicates-card",className:"main-card p-6 border-l-4 border-yellow-500 ".concat("hidden"===L().display?"opacity-70":""),children:[(0,Nv.jsxs)("h2",{className:"text-lg font-bold text-yellow-700 mb-3 flex items-center border-b border-gray-200 pb-2",children:[(0,Nv.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-yellow-500 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Nv.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.368 15c-.77 1.333.192 3 1.732 3z"})}),"Potensi Duplikat"]}),(0,Nv.jsx)("p",{className:"text-xs text-yellow-600 mb-3",children:"Kesamaan prefix/suffix. Perlu tinjauan manual."}),(0,Nv.jsx)("textarea",{id:"potential-code-display",rows:"5",className:"w-full p-3 border border-yellow-300 rounded-lg bg-yellow-50 text-yellow-700 font-mono text-xs resize-none",readOnly:!0,value:L().text})]})]}),(0,Nv.jsxs)("div",{className:"main-card p-6",children:[(0,Nv.jsx)("div",{className:"flex justify-between items-center mb-4 border-b border-gray-200 pb-3",children:(0,Nv.jsxs)("h3",{className:"text-xl font-bold text-gray-700 flex items-center",children:[(0,Nv.jsx)("span",{className:"bg-gray-500 text-white rounded-full w-6 h-6 flex items-center justify-center mr-3 text-sm font-bold",children:"4"}),"Log & Validasi Hasil"]})}),(0,Nv.jsxs)("div",{className:"flex items-center mb-4",children:[(0,Nv.jsx)("input",{type:"checkbox",id:"show-all-details-toggle",className:"form-checkbox h-4 w-4 text-navy-accent transition duration-150 ease-in-out border-gray-300 rounded focus:ring-navy-accent bg-white",checked:!C,onChange:()=>I((e=>!e))}),(0,Nv.jsx)("label",{htmlFor:"show-all-details-toggle",className:"ml-2 block text-sm leading-5 text-gray-600 select-none cursor-pointer",children:"Tampilkan Hanya Kode Unik yang Diterima (Mode Filter)"})]}),(0,Nv.jsx)("div",{id:"detail-output",className:"p-3 bg-gray-100 text-gray-700 overflow-auto min-h-[150px] border border-gray-200 rounded-lg shadow-inner text-sm",children:(()=>{if(0===f.length)return"Detail proses ekstraksi (Validasi, Gagal, Duplikat) akan ditampilkan di sini.";const e=O.uniqueSet;return f.map(((t,n)=>{const r=t.file.name,i=t.extractedCodes.length>0?"\u2705":"\u274c";let o,s=0;return C?(o=t.extractedCodes.map((t=>e.has(t)?(s++,"<span key=".concat(t,">").concat(t,"</span>")):"<span key=".concat(t,' class="line-through text-red-500" title="Duplikat">').concat(t,"</span>"))).join("<br/>"),(0,Nv.jsxs)("div",{className:"mb-3 p-2 border-b border-gray-200",children:[(0,Nv.jsxs)("p",{className:"font-semibold text-gray-800",children:[i," File ",n+1," (",r,")"]}),(0,Nv.jsxs)("p",{className:"ml-5 text-xs ".concat(s>0?"text-green-600":"text-red-600"),children:["Kode 18 digit unik yang diterima: ",s]}),(0,Nv.jsx)("div",{className:"mt-1 ml-5 font-mono text-xs",dangerouslySetInnerHTML:{__html:o}})]},n)):(o=t.extractedCodes.filter((t=>e.has(t))).map((e=>(s++,"<span key={code}>".concat(e,"</span>")))).join("<br/>"),(0,Nv.jsxs)("div",{className:"mb-3 p-2 border-b border-gray-200",children:[(0,Nv.jsxs)("p",{className:"font-semibold text-gray-800",children:[i," File ",n+1," (",r,")"]}),(0,Nv.jsxs)("p",{className:"text-xs ".concat(s>0?"text-green-600":"text-gray-500"," ml-5"),children:["Diterima: ",s," kode unik 18 digit."]}),s>0&&(0,Nv.jsx)("div",{className:"mt-1 ml-5 font-mono text-xs",dangerouslySetInnerHTML:{__html:o}})]},n))}))})()})]})]})]})]})]});var U}function jv(e){let{handleLogin:t,statusMessage:n}=e;const[i,o]=(0,r.useState)(""),[s,a]=(0,r.useState)(""),[l,u]=(0,r.useState)(!1);return(0,Nv.jsxs)("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 p-4",children:[(0,Nv.jsx)("style",{jsx:!0,global:!0,children:"\n                .login-card {\n                    background-color: white;\n                    border-radius: 16px;\n                    box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 5px 10px -5px rgba(0, 0, 0, 0.04);\n                    border: 1px solid #e5e7eb;\n                    width: 100%;\n                    max-width: 400px; \n                }\n                .input-field {\n                    border: 1px solid #d1d5db; \n                    border-radius: 8px;\n                    padding: 0.75rem;\n                    width: 100%;\n                    transition: border-color 0.2s, box-shadow 0.2s;\n                }\n                .input-field:focus {\n                    border-color: #0f172a; \n                    box-shadow: 0 0 0 2px rgba(15, 23, 42, 0.1);\n                    outline: none;\n                }\n                .text-navy-accent { color: #0f172a; }\n                .bg-navy-accent { background-color: #0f172a; }\n                .focus:ring-navy-accent/50:focus {\n                    --tw-ring-color: rgba(15, 23, 42, 0.5); \n                }\n            "}),(0,Nv.jsxs)("div",{className:"login-card p-6 sm:p-8",children:[(0,Nv.jsxs)("div",{className:"flex flex-col items-center mb-6",children:[(0,Nv.jsx)("svg",{className:"w-10 h-10 text-navy-accent mb-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Nv.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 7a2 2 0 012 2v2m4-2h-3m4 2v7a2 2 0 01-2 2H5a2 2 0 01-2-2V9a2 2 0 012-2h2m2 4h10m0 0l-3 3m3-3l-3-3"})}),(0,Nv.jsxs)("h2",{className:"text-3xl font-extrabold text-gray-800 tracking-tight",children:["Voucher ",(0,Nv.jsx)("span",{className:"text-navy-accent",children:"Panel"})]}),(0,Nv.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Akses Admin Ekstraksi"})]}),n.visible&&(0,Nv.jsx)("div",{className:"p-3 mb-4 rounded-lg text-sm ".concat("error"===n.type?"border-red-400 bg-red-100 text-red-800":"border-blue-400 bg-blue-100 text-blue-800"),role:"alert",children:n.text}),(0,Nv.jsxs)("form",{onSubmit:e=>{e.preventDefault(),u(!0),setTimeout((()=>{t(i,s),u(!1)}),800)},children:[(0,Nv.jsxs)("div",{className:"mb-4",children:[(0,Nv.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",htmlFor:"username",children:"Username"}),(0,Nv.jsx)("input",{type:"text",id:"username",className:"input-field",placeholder:"Masukkan Username",value:i,onChange:e=>o(e.target.value),required:!0})]}),(0,Nv.jsxs)("div",{className:"mb-6",children:[(0,Nv.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",htmlFor:"password",children:"Password"}),(0,Nv.jsx)("input",{type:"password",id:"password",className:"input-field",placeholder:"Masukkan Password",value:s,onChange:e=>a(e.target.value),required:!0})]}),(0,Nv.jsx)("button",{type:"submit",className:"w-full py-4 bg-navy-accent text-white font-bold rounded-xl shadow-xl hover:bg-slate-700 hover:shadow-2xl transition duration-300 disabled:opacity-50 flex items-center justify-center focus:outline-none focus:ring-4 focus:ring-navy-accent/50",disabled:l,children:l?(0,Nv.jsxs)("span",{className:"flex items-center",children:[(0,Nv.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,Nv.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Nv.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Authenticating..."]}):"Login ke Panel"}),(0,Nv.jsx)("p",{className:"text-xs text-gray-400 text-center mt-4"})]})]})]})}const Vv=function(){const[e,t]=(0,r.useState)(!1),[n,i]=(0,r.useState)(null),[o,s]=(0,r.useState)("extraction"),[a,l]=(0,r.useState)({text:"",type:"info",visible:!1}),c=(0,r.useCallback)((function(e){l({text:e,type:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",visible:!0}),setTimeout((()=>l((e=>u(u({},e),{},{visible:!1})))),5e3)}),[]),d=(0,r.useCallback)((e=>{s(e),c("Navigasi ke halaman ".concat("extraction"===e?"Ekstraksi":"Riwayat","."),"info")}),[c]);return(0,r.useEffect)((()=>{"true"===localStorage.getItem("isLoggedIn")&&(t(!0),i("admin-user-123"))}),[]),(0,Nv.jsx)(Nv.Fragment,{children:e?(0,Nv.jsxs)(Nv.Fragment,{children:["extraction"===o?(0,Nv.jsx)(Fv,{showStatus:c,userId:n,handleLogout:()=>{localStorage.removeItem("isLoggedIn"),t(!1),i(null),c("Anda telah berhasil Logout.","info")},currentPage:o,handleNavigate:d}):(0,Nv.jsx)(Uv,{userId:n,showStatus:c,handleNavigate:d}),(0,Nv.jsx)("div",{id:"status-message",className:"fixed top-6 right-6 z-50 p-4 border rounded-lg text-sm shadow-xl transition-all duration-500 transform ".concat(a.visible?"opacity-100 translate-y-0":"opacity-0 -translate-y-full pointer-events-none"," ").concat("success"===a.type?"border-green-400 bg-green-100 text-green-800":"error"===a.type?"border-red-400 bg-red-100 text-red-800":"border-blue-400 bg-blue-100 text-blue-800"),role:"alert",children:a.text}),(0,Nv.jsx)(Lv,{currentPage:o,handleNavigate:d})]}):(0,Nv.jsx)(jv,{handleLogin:(e,n)=>{"admin"===e&&"1234"===n?(t(!0),i("admin-user-123"),localStorage.setItem("isLoggedIn","true"),c("Login Berhasil! Selamat datang di Dashboard.","success")):(t(!1),c("Gagal Login. Username atau Password salah.","error"))},statusMessage:a})})};var qv,Bv,Hv,Gv,zv=function(e,t){return{name:e,value:void 0===t?-1:t,delta:0,entries:[],id:"v2-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12)}},Wv=function(e,t){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){if("first-input"===e&&!("PerformanceEventTiming"in self))return;var n=new PerformanceObserver((function(e){return e.getEntries().map(t)}));return n.observe({type:e,buffered:!0}),n}}catch(e){}},Kv=function(e,t){var n=function n(r){"pagehide"!==r.type&&"hidden"!==document.visibilityState||(e(r),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)},Jv=function(e){addEventListener("pageshow",(function(t){t.persisted&&e(t)}),!0)},Yv=function(e,t,n){var r;return function(i){t.value>=0&&(i||n)&&(t.delta=t.value-(r||0),(t.delta||void 0===r)&&(r=t.value,e(t)))}},Qv=-1,Xv=function(){return"hidden"===document.visibilityState?0:1/0},$v=function(){Kv((function(e){var t=e.timeStamp;Qv=t}),!0)},Zv=function(){return Qv<0&&(Qv=Xv(),$v(),Jv((function(){setTimeout((function(){Qv=Xv(),$v()}),0)}))),{get firstHiddenTime(){return Qv}}},eb=!1,tb=-1,nb=function(e,t){eb||(function(e,t){var n,r=Zv(),i=zv("FCP"),o=function(e){"first-contentful-paint"===e.name&&(a&&a.disconnect(),e.startTime<r.firstHiddenTime&&(i.value=e.startTime,i.entries.push(e),n(!0)))},s=window.performance&&performance.getEntriesByName&&performance.getEntriesByName("first-contentful-paint")[0],a=s?null:Wv("paint",o);(s||a)&&(n=Yv(e,i,t),s&&o(s),Jv((function(r){i=zv("FCP"),n=Yv(e,i,t),requestAnimationFrame((function(){requestAnimationFrame((function(){i.value=performance.now()-r.timeStamp,n(!0)}))}))})))}((function(e){tb=e.value})),eb=!0);var n,r=function(t){tb>-1&&e(t)},i=zv("CLS",0),o=0,s=[],a=function(e){if(!e.hadRecentInput){var t=s[0],r=s[s.length-1];o&&e.startTime-r.startTime<1e3&&e.startTime-t.startTime<5e3?(o+=e.value,s.push(e)):(o=e.value,s=[e]),o>i.value&&(i.value=o,i.entries=s,n())}},l=Wv("layout-shift",a);l&&(n=Yv(r,i,t),Kv((function(){l.takeRecords().map(a),n(!0)})),Jv((function(){o=0,tb=-1,i=zv("CLS",0),n=Yv(r,i,t)})))},rb={passive:!0,capture:!0},ib=new Date,ob=function(e,t){qv||(qv=t,Bv=e,Hv=new Date,lb(removeEventListener),sb())},sb=function(){if(Bv>=0&&Bv<Hv-ib){var e={entryType:"first-input",name:qv.type,target:qv.target,cancelable:qv.cancelable,startTime:qv.timeStamp,processingStart:qv.timeStamp+Bv};Gv.forEach((function(t){t(e)})),Gv=[]}},ab=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?function(e,t){var n=function(){ob(e,t),i()},r=function(){i()},i=function(){removeEventListener("pointerup",n,rb),removeEventListener("pointercancel",r,rb)};addEventListener("pointerup",n,rb),addEventListener("pointercancel",r,rb)}(t,e):ob(t,e)}},lb=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return e(t,ab,rb)}))},ub={};const cb=e=>{e&&e instanceof Function&&(nb(e),function(e,t){var n,r=Zv(),i=zv("FID"),o=function(e){e.startTime<r.firstHiddenTime&&(i.value=e.processingStart-e.startTime,i.entries.push(e),n(!0))},s=Wv("first-input",o);n=Yv(e,i,t),s&&Kv((function(){s.takeRecords().map(o),s.disconnect()}),!0),s&&Jv((function(){var r;i=zv("FID"),n=Yv(e,i,t),Gv=[],Bv=-1,qv=null,lb(addEventListener),r=o,Gv.push(r),sb()}))}(e),function(e,t){var n,r=Zv(),i=zv("LCP"),o=function(e){var t=e.startTime;t<r.firstHiddenTime&&(i.value=t,i.entries.push(e),n())},s=Wv("largest-contentful-paint",o);if(s){n=Yv(e,i,t);var a=function(){ub[i.id]||(s.takeRecords().map(o),s.disconnect(),ub[i.id]=!0,n(!0))};["keydown","click"].forEach((function(e){addEventListener(e,a,{once:!0,capture:!0})})),Kv(a,!0),Jv((function(r){i=zv("LCP"),n=Yv(e,i,t),requestAnimationFrame((function(){requestAnimationFrame((function(){i.value=performance.now()-r.timeStamp,ub[i.id]=!0,n(!0)}))}))}))}}(e))};i.createRoot(document.getElementById("root")).render((0,Nv.jsx)(r.StrictMode,{children:(0,Nv.jsx)(Vv,{})})),cb()})();
//# sourceMappingURL=main.0d2b284b.js.map